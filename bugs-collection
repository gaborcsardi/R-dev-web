=================================================
This is an automated collection of open reports in
the R-bugs repository.
=================================================

Directory:  Accuracy

* PR# 138 *
Subject: Re: [R] bug? and New bug.
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 10 Mar 1999 17:21:16 +0100
--pt() for large df. Solved, but problem remains for pf et al.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 138 <==
From maechler@stat.math.ethz.ch  Wed Mar 10 17:19:54 1999
Received: from hypatia.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.1/8.9.1) with SMTP id RAA25536
	for <R-bugs@biostat.ku.dk>; Wed, 10 Mar 1999 17:19:54 +0100 (MET)
Received: (daemon@localhost) by hypatia.math.ethz.ch (8.6.12/Main-STAT-mailer) id RAA13244; Wed, 10 Mar 1999 17:21:19 +0100
Received: from sophie(129.132.58.2), claiming to be "sophie.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa003Et; Wed Mar 10 17:21:16 1999
Received: (maechler@localhost) by sophie.ethz.ch (8.6.12/D-MATH-client) id RAA27290; Wed, 10 Mar 1999 17:21:16 +0100
Date: Wed, 10 Mar 1999 17:21:16 +0100
Message-Id: <199903101621.RAA27290@sophie.ethz.ch>
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: Mai Zhou <mai@ms.uky.edu>
CC: r-bugs@stat.math.ethz.ch
In-reply-to: <199903101541.KAA12958@t6.mscf.uky.edu> (message from Mai Zhou on
	Wed, 10 Mar 1999 10:41:31 -0500 (EST))
Subject: Re: [R] bug? and New bug.
Reply-to: Martin Maechler <maechler@stat.math.ethz.ch>
References:  <199903101541.KAA12958@t6.mscf.uky.edu>

>>>>> "Mai" == Mai Zhou <mai@ms.uky.edu> writes:

    Mai> A new bug.  In 0.63.0 (windows NT) and 0.63.2 (on the Rweb)

    >> pt(1.96,df=100)
    Mai> [1] 0.9736105 #this is OK
    >> pt(1.96, df=100000000000000000000)
    Mai> [1] 0.5 #clearly wrong

    Mai> and for df=1000000 it took way too long to compute

    Mai> same with the F-distribution function.

Oh dear!  this is an ``old one'' 
   (I had at one time fixed something similar, maybe qt() ?
    but never done/checked all these limit cases).

--- I look at it some more...

Martin

==> 138.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Mar 10 18:39:19 1999
Received: from hypatia.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.1/8.9.1) with SMTP id SAA26134
	for <R-bugs@biostat.ku.dk>; Wed, 10 Mar 1999 18:39:19 +0100 (MET)
Received: (daemon@localhost) by hypatia.math.ethz.ch (8.6.12/Main-STAT-mailer) id SAA15265; Wed, 10 Mar 1999 18:40:41 +0100
Received: from sophie(129.132.58.2), claiming to be "sophie.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa003iV; Wed Mar 10 18:40:31 1999
Received: (maechler@localhost) by sophie.ethz.ch (8.6.12/D-MATH-client) id SAA01355; Wed, 10 Mar 1999 18:40:30 +0100
Date: Wed, 10 Mar 1999 18:40:30 +0100
Message-Id: <199903101740.SAA01355@sophie.ethz.ch>
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-bugs@biostat.ku.dk
CC: Mai Zhou <mai@ms.uky.edu>
In-reply-to: <199903101623.RAA06323@biostat.ku.dk>
	(maechler@stat.math.ethz.ch)
Subject: Re: [R] bug? and New bug. --- patch for pt() only (PR#138)
Reply-to: Martin Maechler <maechler@stat.math.ethz.ch>
References:  <199903101623.RAA06323@biostat.ku.dk>

The following patch saves  pt(), but not the  
pf() and pbeta() ones which are harder.. 
[pbeta(), the incomplete beta ratio is really underlying all these...
 needs another asymptotic formula, and it's even harder to decide 
 WHEN to switch from the (Taylor kind) series  to the asymptotic formula
]
This has to wait for a while, unless someone else....


BTW,  S-plus also fouls up completely here:

    df3 <- c(10^(3:20))
    ## completely wrong on S; taking forever on R
    plot(df3, ptd3 <- pt(1.96,df=df3), log='x', type='b')
    ptd3

giving

  [1]  9.748634e-01  9.749882e-01  9.750007e-01  9.750020e-01
  [5]  9.750021e-01  9.750021e-01  9.750021e-01  9.750023e-01
  [9]  9.750054e-01  9.750436e-01  9.748710e-01  9.725377e-01
 [13]  8.914032e-01 -4.261217e+06            NA            NA
 [17]            NA            NA

where the last before the NA's is  -426121.7  !! 


-----------------------
Here is the patch
---------------------------------------------------------------------

--- src/nmath/pt.c.~1~	Wed Feb  3 12:21:46 1999
+++ src/nmath/pt.c	Wed Mar 10 18:15:42 1999
@@ -41,6 +41,11 @@
     if(!finite(n))
 	return pnorm(x, 0.0, 1.0);
 #endif
+    if (n > 4e5) { /*-- Fixme(?): test should depend on `n' AND `x' ! */
+	/* Approx. from	 Abramowitz & Stegun 26.7.8 (p.949) */
+	val = 1./(4.*n);
+	return pnorm(x*(1. - val)/sqrt(1. + x*x*2.*val), 0.0, 1.0);
+    }
     val = 0.5 * pbeta(n / (n + x * x), n / 2.0, 0.5);
     return (x > 0.0) ? 1 - val : val;
 }

==> 138.audit <==
Tue Apr 06 16:45:45 1999	maechler	moved from incoming to Accuracy
Thu Jul 01 18:02:03 1999	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Add-ons

* PR# 443 *
Subject: chron now fails with 4 digit year
From: jens.oehlschlaegel-akiyoshi@mdfactory.de
Date: Wed, 16 Feb 2000 13:03:18 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 443 <==
From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Feb 16 13:03:18 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA18887
	for <R-bugs@biostat.ku.dk>; Wed, 16 Feb 2000 13:03:18 +0100 (MET)
Date: Wed, 16 Feb 2000 13:03:18 +0100 (MET)
From: jens.oehlschlaegel-akiyoshi@mdfactory.de
Message-Id: <200002161203.NAA18887@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: chron now fails with 4 digit year
MIME-Version: 1.0
Content-Type: text/plain; charset=unknown-8bit
Content-Transfer-Encoding: 8bit

Full_Name: Jens Oehlschlägel-Akiyoshi
Version: RW0990
OS: Windows NT 4.0 SP5
Submission from: (NULL) (194.175.113.13)


With the version of the chron library included in RW0901
I could create CORRECT chron objects with mm/dd/yyyy

> as.numeric(dates("12/31/1999", format='m/d/y'))
[1] 10956
> as.numeric(dates("01/01/2000", format='m/d/y'))
[1] 10957

wheras backformatting in the print method failed

> dates("12/31/1999", format='m/d/y')
[1] 12/31/99
> dates("01/01/2000", format='m/d/y')
[1] 01/01/100

but now in RW0990

> dates("01/01/2000")
Error in fun(yy, ...) : must be 2-digit (numeric) year specification



==> 443.audit <==
Wed Feb 16 19:26:07 2000	ripley	moved from incoming to Add-ons
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Analyses

* PR# 144 *
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 
From: wagman@enteract.com
Date: Thu, 18 Mar 1999 08:58:47 +0100
--Can anyone reproduce this ??
--Same error as when doing regression on empty subset. All fitted
--values might be 0 or 1
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 144 <==
From wagman@enteract.com  Thu Mar 18 08:55:05 1999
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.1/8.9.1) with ESMTP id IAA20347
	for <R-bugs@biostat.ku.dk>; Thu, 18 Mar 1999 08:55:04 +0100 (MET)
From: wagman@enteract.com
Received: from localhost (blueberry.kubism.ku.dk [130.225.108.193])
	by blueberry.kubism.ku.dk (8.8.7/8.8.7) with ESMTP id IAA08791
	for <R-bugs@biostat.ku.dk>; Thu, 18 Mar 1999 08:58:47 +0100
Date: Thu, 18 Mar 1999 08:58:47 +0100
Message-Id: <199903180758.IAA08791@blueberry.kubism.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' 

Full_Name: Barnet Wagman
Version: 63.2
OS: Linux
Submission from: (NULL) (207.229.172.168)


After a number of interations, glm(family=binomial) throws an error
	'Error: names attribute must be the same length as the vector'
The same model works in lm() with the same data frame, so presumably it is not
misspecified.

In the iterations prior to the error, glm() generates the warnings
	'Warning: fitted probabilities of 0 or 1 occurred'

The fit is converging prior to the error.

Could the problem involve a singularity and the wrong error message?

FYI The model contains 34 variables in around 11,000 cases.
The command used is
'glm(formula=...,data=...,family=binomial,control=control.glm(epsilon=0.0001.maxit=50,
 trace=TRUE))'
Changing epsilon and/or explicitly setting 'start' does not effect the problem.


Thanks for your help.

==> 144.audit <==
Wed Apr 21 13:47:33 1999	pd	moved from incoming to Models
Wed Apr 21 13:50:45 1999	pd	moved from Models to Analyses
Mon Jun 28 13:23:23 1999	maechler	changed notes
Thu Jul 01 18:04:56 1999	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Documentation

* PR# 440 *
Subject: html help: dev.xxx
From: Bill Simpson <wsi@gcal.ac.uk>
Date: Tue, 15 Feb 2000 12:27:45 +0000 (GMT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 440 <==
From wsi@gcal.ac.uk  Tue Feb 15 12:28:12 2000
Received: from localhost.localdomain (IDENT:root@cbe207.gcal.ac.uk [193.62.250.209])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA04831
	for <r-bugs@biostat.ku.dk>; Tue, 15 Feb 2000 12:28:11 +0100 (MET)
Received: from localhost (wsimpson@localhost)
	by localhost.localdomain (8.9.3/8.9.3) with ESMTP id MAA09164
	for <r-bugs@biostat.ku.dk>; Tue, 15 Feb 2000 12:27:45 GMT
X-Authentication-Warning: localhost.localdomain: wsimpson owned process doing -bs
Date: Tue, 15 Feb 2000 12:27:45 +0000 (GMT)
From: Bill Simpson <wsi@gcal.ac.uk>
X-Sender: wsimpson@localhost.localdomain
To: r-bugs@biostat.ku.dk
Subject: html help: dev.xxx
Message-ID: <Pine.LNX.4.10.10002151224480.9151-100000@localhost.localdomain>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

platform i686-unknown-linux
arch     i686              
os       linux             
system   i686, linux       
status   Patched           
major    0                 
minor    99.0              
year     2000              
month    February          
day      9                 
language R           

When using R html search engine/keywords, a search for "device"
gave a page that includes
dev.xxx
This is a link to R-0.99a/library/base/html/dev.xxx.html
This link does not exist, it should be
 R-0.99a/library/base/html/dev.html


==> 440.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Graphics

* PR# 120 *
Subject: graphics bug: type="l"
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
--X server problem drawing > 64K lines at once. Workaround?
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 120 <==
From mcw@ln.nimh.nih.gov  Tue Feb 16 21:29:24 1999
Received: from ln.nimh.nih.gov (ln.nimh.nih.gov [156.40.248.2])
	by kubism.ku.dk (8.9.1/8.9.1) with SMTP id VAA26732
	for <r-bugs@biostat.ku.dk>; Tue, 16 Feb 1999 21:29:23 +0100 (MET)
Received: from localhost (mcw@localhost) by ln.nimh.nih.gov (950413.SGI.8.6.12/950213.SGI.AUTOCF) via SMTP id PAA18326 for <r-bugs@biostat.ku.dk>; Tue, 16 Feb 1999 15:30:25 -0500
Date: Tue, 16 Feb 1999 15:30:25 -0500 (EST)
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
To: r-bugs@biostat.ku.dk
Subject: graphics bug: type="l"
Message-ID: <Pine.SGI.3.96.990216151908.13343G-100000@ln.nimh.nih.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


The following commands illustrate a problem with graphing relatively large
data sets using the "line" option to plot:

temp <- runif(200000)  # or whatever other numbers you like;
			# same thing happens with a sine wave
plot(1:200000, temp)    # everything fine
plot(1:200000, temp, type="l")   # data gets cut off


The number of points isn't crucial.  The cutoff point appears to be about
65,000 points.  (70,000 points demonstrates the cutoff; with 50,000 points
there's no cutoff.) 

As far as I can tell, the problem only occurs when using the
option type="l".  It's unaffected by color, line type, and line width.

Matt Wiener



==> 120.reply.1 <==
From pd@biostat.ku.dk  Tue Feb 16 22:29:55 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by kubism.ku.dk (8.9.1/8.9.1) with ESMTP id WAA26893
	for <r-bugs@kubism.ku.dk>; Tue, 16 Feb 1999 22:29:55 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.8.7/8.8.7) id WAA26191;
	Tue, 16 Feb 1999 22:34:17 +0100
To: mcw@ln.nimh.nih.gov
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: graphics bug: type="l" (PR#120)
References: <199902162033.VAA26161@biostat.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 16 Feb 1999 22:34:17 +0100
In-Reply-To: mcw@ln.nimh.nih.gov's message of Tue, 16 Feb 1999 21:33:52 +0100
Message-ID: <x2btiuuj6u.fsf@blueberry.kubism.ku.dk>
Lines: 29
X-Mailer: Gnus v5.5/Emacs 20.2

mcw@ln.nimh.nih.gov writes:

> The following commands illustrate a problem with graphing relatively large
> data sets using the "line" option to plot:
> 
> temp <- runif(200000)  # or whatever other numbers you like;
> 			# same thing happens with a sine wave
> plot(1:200000, temp)    # everything fine
> plot(1:200000, temp, type="l")   # data gets cut off
> 
> 
> The number of points isn't crucial.  The cutoff point appears to be about
> 65,000 points.  (70,000 points demonstrates the cutoff; with 50,000 points
> there's no cutoff.) 
> 
> As far as I can tell, the problem only occurs when using the
> option type="l".  It's unaffected by color, line type, and line width.
> 
> Matt Wiener

Doesn't happen to me with 0.63.pre-3 on RedHat Linux. I can't offhand
see any documented fixes that would affect this, perhaps there's an OS
difference? Looks a bit like a short integer overrun (65536=2^16)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 120.reply.2 <==
From pd@biostat.ku.dk  Wed Feb 17 12:04:03 1999
Received: from hypatia.math.ethz.ch (hypatia.ethz.ch [129.132.58.23])
	by kubism.ku.dk (8.9.1/8.9.1) with SMTP id MAA00004
	for <R-bugs@biostat.ku.dk>; Wed, 17 Feb 1999 12:04:02 +0100 (MET)
Received: (daemon@localhost) by hypatia.math.ethz.ch (8.6.12/Main-STAT-mailer) id MAA11550 for <r-bugs@stat.math.ethz.ch>; Wed, 17 Feb 1999 12:05:27 +0100
Received: from blueberry.kubism.ku.dk(130.225.108.193), claiming to be "biostat.ku.dk"
 via SMTP by hypatia, id smtpdAAAa002oS; Wed Feb 17 12:05:27 1999
Received: (from pd@localhost)
	by biostat.ku.dk (8.8.7/8.8.7) id MAA26564;
	Wed, 17 Feb 1999 12:07:05 +0100
To: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Cc: mcw@ln.nimh.nih.gov, r-bugs@stat.math.ethz.ch
Subject: Re: graphics bug: type="l" (PR#120)
References: <Pine.GSO.4.05.9902162134030.24074-100000@auk.stats>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Feb 1999 12:07:05 +0100
In-Reply-To: Prof Brian D Ripley's message of Tue, 16 Feb 1999 21:54:16 +0000 (GMT)
Message-ID: <x2n22dcmqu.fsf@blueberry.kubism.ku.dk>
Lines: 56
X-Mailer: Gnus v5.5/Emacs 20.2

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Tue, 16 Feb 1999 Matt Wiener, mcw@ln.nimh.nih.gov wrote:
> 
> > 
> > The following commands illustrate a problem with graphing relatively large
> > data sets using the "line" option to plot:
> > 
> > temp <- runif(200000)  # or whatever other numbers you like;
> > 			# same thing happens with a sine wave
> > plot(1:200000, temp)    # everything fine
> > plot(1:200000, temp, type="l")   # data gets cut off
> > 
> > 
> > The number of points isn't crucial.  The cutoff point appears to be about
> > 65,000 points.  (70,000 points demonstrates the cutoff; with 50,000 points
> > there's no cutoff.) 
> 
> This is device-specific (and which device was not mentioned). It does not
> happen on Windows (rw0632) nor on a postscript device. It does happen on
> the Unix x11() device for me, and my guess is that it is a limitation in
> the X library used.  (Not in the X server, for this works in gs
> displaying postscript, and in S-PLUS. The lines are drawn in a single Xlib
> call.)

Apparently, this is not only device-specific but X-server specific as
the following network experiment shows:

Run on Linux,   display Linux   OK
Run on Solaris, display Linux   OK
Run on Solaris, display Solaris Error
Run on Linux,   display Solaris Error

So it seems that the Solaris OpenWindows X Server cannot handle
requests for drawing lines through more than 64K points. I suppose we
*could* fix this by splitting all XDrawLines into blocks of max 64K.

The man page for XDrawLines and friends have the following blob:

       All x and y members are signed integers.  The width and
       height members are 16-bit unsigned integers.  You should
       be careful not to generate coordinates and sizes out of
       the 16-bit ranges, because the protocol only has 16-bit
       fields for these values.

The "and sizes" bit might be taken to mean that you should do the
above, although it's beyond me how it would work on any platform if
there's only room for 16 bits in the protocol (perhaps the protocol
has changed from X11R5 to R6?). XDrawLines only occurs twice in
devX11.c, so I suppose it's no big deal to fix up.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 120.audit <==
Fri Feb 19 17:34:23 1999	pd	changed notes
Fri Feb 19 17:43:24 1999	pd	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 149 *
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
--plot(y~x,pch=z) may subset x and y but leave z.
--E.g. with missing values you can get incorrect plot symbols.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 149 <==
From pd@blueberry.kubism.ku.dk  Thu Mar 25 21:17:57 1999
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.1/8.9.1) with ESMTP id VAA19967
	for <r-bugs@biostat.ku.dk>; Thu, 25 Mar 1999 21:17:56 +0100 (MET)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.8.7/8.8.7) id VAA26061;
	Thu, 25 Mar 1999 21:22:46 +0100
To: r-bugs@biostat.ku.dk
Subject: plot.formula and pch=
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Mar 1999 21:22:44 +0100
Message-ID: <x2iubp48vf.fsf@blueberry.kubism.ku.dk>
Lines: 32
X-Mailer: Gnus v5.5/Emacs 20.3

I'm not sure exactly where to point my finger with this one, but there
is a nasty surprise to the unsuspecting user.

There is no check on the length of the vector passed in the pch=
argument to plot, it is just recycled as necessary:

plot(1:10,1:10,pch=1:2)

gives alternating circles and triangles. 

The nasty bits come up especially with plot.formula:

x<-1:10;y<-1:10 
plot(y~x,subset=x%%2==1,pch=x%%2)

- and the plotting symbols are *not* all the same. Even more
  pernicious, if missing values are involved:

> y[x%%2==1]<-NA
> plot(y~x,pch=x%%2)

gives you the wrong symbols (in practice, this messes up things like 
plot(height~age,pch=sex) rather badly!).

It would help to get a warning that the lengths don't match, but are
there any good uses of the recycling of pch?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 149.followup.1 <==
From J.C.Rougier@durham.ac.uk  Fri Mar 26 09:57:42 1999
Received: from hermes.dur.ac.uk (hermes.dur.ac.uk [129.234.4.9])
	by pubhealth.ku.dk (8.9.1/8.9.1) with ESMTP id JAA23348;
	Fri, 26 Mar 1999 09:57:41 +0100 (MET)
Received: from markov (markov.dur.ac.uk [129.234.21.59])
	by hermes.dur.ac.uk (8.9.1/8.9.1) with SMTP id IAA22538;
	Fri, 26 Mar 1999 08:59:05 GMT
Received: from laplace by markov id <IAA05302@markov>; Fri, 26 Mar 1999 08:59:04 GMT
Date: Fri, 26 Mar 1999 08:59:03 +0000 (GMT)
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
X-Sender: dma0jcr@laplace
Reply-To: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
To: p.dalgaard@biostat.ku.dk
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: plot.formula and pch= (PR#149)
In-Reply-To: <199903252022.VAA26066@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.990326085613.1783F-100000@laplace>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 25 Mar 1999 p.dalgaard@biostat.ku.dk wrote:

> There is no check on the length of the vector passed in the pch=
> argument to plot, it is just recycled as necessary:

<...>

> It would help to get a warning that the lengths don't match, but are
> there any good uses of the recycling of pch?

There might be a case for it in time series graphs, where there are
periodic characteristics of the data (days of the week, for example).

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)



==> 149.audit <==
Thu Apr 01 10:10:43 1999	maechler	moved from incoming to Graphics
Thu Jul 01 18:14:17 1999	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--Don't think I (pd) got the point there...
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 202 <==
From wsi@gcal.ac.uk  Wed Jun  2 15:02:10 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA27126
	for <R-bugs@biostat.ku.dk>; Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
From: wsi@gcal.ac.uk
Message-Id: <199906021302.PAA27126@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: persp box occlusion bug

Full_Name: Bill Simpson
Version: 64.1
OS: linux
Submission from: (NULL) (193.62.250.209)


Bug in persp() bounding box:
If the surface being plotted extends below the lower z-axis boundary, the box
is
drawn with the wrong occlusion. The box is shown as being occluded by the
surface
even though it should be in front of the surface.

The box is correct for surface extending above the box. Problem is only for
surface extending below the box.

This exhibits the bug:

std<-rep(seq(-32,32,8),9)/1000 * 60
cf<-rep(seq(-32,32,8),rep(9,9))/1000 *60 
dp<-(cf-std)/.6
std<-unique(std)
cf<-unique(cf)
dp<-t(matrix(dp,length(cf),length(std)))
persp(std,cf,dp, xlim=c(-2,2), ylim=c(-2,2), zlim=c(0,5),theta=-40,    
phi=45,
box=TRUE,ltheta=-120, lphi=120,
d=1.5, shade=.7)


==> 202.audit <==
Wed Jun 30 19:31:18 1999	pd	moved from incoming to Graphics
Thu Jul 01 18:19:48 1999	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 225 *
Subject: pch and mkh bug
From: Stephen Harker <sjh@ph.adfa.edu.au>
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
--(1) is an S incompatibility, but the S rules may not be a good model
--(2) is a bug, fixed for 0.65.0
--(3) has gone away in 0.65.0
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 225 <==
From sjh@phadfa.ph.adfa.edu.au  Wed Jul 14 05:05:25 1999
Received: from phadfa.ph.adfa.edu.au (www.ph.adfa.edu.au [131.236.40.1])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id FAA25763
	for <r-bugs@biostat.ku.dk>; Wed, 14 Jul 1999 05:05:01 +0200 (MET DST)
Received: (from sjh@localhost)
	by phadfa.ph.adfa.edu.au (8.9.0/8.9.0) id NAA22666
	for r-bugs@biostat.ku.dk; Wed, 14 Jul 1999 13:10:32 +1000 (EST)
From: Stephen Harker <sjh@ph.adfa.edu.au>
Message-Id: <199907140310.NAA22666@phadfa.ph.adfa.edu.au>
Subject: pch and mkh bug
To: r-bugs@biostat.ku.dk
Date: Wed, 14 Jul 1999 13:10:31 +1000 (EST)
Reply-To: s-harker@adfa.edu.au (Stephen Harker)
Return-Receipt-To: s-harker@adfa.edu.au (Stephen Harker)
Reply-To: s-harker@adfa.edu.au (Stephen Harker)
X-Attribution: SJH
X-Organisation: School of Physics, University College, ADFA, UNSW Australia
X-Phone: +61 2 6268 8771
X-FAX:   +61 2 6268 8786
X-Operating-System: SunOS phadfa 5.5.1 Generic_103640-05 sun4u sparc SUNW,Ultra-1
X-Mailer: ELM [version 2.5 PL0b2]
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="%--multipart-mixed-boundary-1.21682.931921831--%"


--%--multipart-mixed-boundary-1.21682.931921831--%
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I wish to report three possible bugs I have noticed with R.  We have
recently installed R and I am converting some scripts I had previously
used with a very old version of S (not Splus).  The R version
information is:

platform   sparc-sun-solaris2.5.1
arch       sparc                 
os         solaris2.5.1          
system     sparc, solaris2.5.1   
status                           
status.rev 0                     
major      0                     
minor      64.2                  
year       1999                  
month      July                  
day        3                     
language   R  

The script in question does not do anything in the way of analysis,
rather it uses R to produce a multiplot of fits to Moessbauer data
obtained from other programs.  The script has been roughly converted
to work with R, but had worked well with our old version of S.  I use
the analysis features somewhat more on nuclear orientation data.  The
script is attached to this email message and an example of the
interaction in using it is given below.

Script started on Wed 14 Jul 1999 12:18:11 PM EST
[/data/phd/sjh/graphics] R

R : Copyright 1999, The R Development Core Team
Version 0.64.2  (July 3, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

source("> mplot.r")
How many spectra do you want to plot? 1: 4
Read 1 items
Give the filename(s): 
1: H005c H004b H003b H002a
Read 4 items
Give Vmin and Vmax: 1: -12 12
Read 2 items
Do you want to remove a linear baseline? (y/n)1: n
Read 1 items
Do you want filenames? (y/n) 1: y
Read 1 items
Do you want to show the fit? (y/n) 1: y
Read 1 items
Do you want to show data points? (y/n) 1: y
Read 1 items
Do you want to give labels? (y/n) 1: y
Read 1 items
Give labels: 1: "200 K" "160 K" "120 K" "77 K"
Read 4 items
Do you want (l)eft, (c)entred or (r)ight justified labels? (l/c/r) 1: r
Read 1 items
Read 4099 items
Read 4099 items
Read 4099 items
Read 4099 items
Select an output type
 
1:PostScript 
2:X11 
3:Quit 
Selection: 2
Select an output type
 
1:PostScript 
2:X11 
3:Quit 
Selection: 1
Select an output type
 
1:PostScript 
2:X11 
3:Quit 
Selection: 3
> q()
Save workspace image? [y/n/c]: n
[/data/phd/sjh/graphics] x
exit

script done on Wed 14 Jul 1999 12:19:38 PM EST

The resulting PostScript file shows three possible bugs.  

(1) First the boxes drawn using points() via

  points(get(name2)[,1],offset[ii]+(vheight*(get(name2)[,2]-ymin[ii]-
        linbase[ii]*get(name2)[,1])/maxdip),pch=0,mkh=0.02)

are of a size that indicated that the mkh value is being ignored.
This can be fixed by using cex, however the S manual states that mkh
gives the height in inches of mark symbols drawn when pch is given as
a number.  This would appear to be a bug.

(2) The `custom' axis plotting for the y-axes is mixed up, the order
of the numbers is incorrect.  The y-axis is plotted via the command:

axis(side=2,at=ybase,labels=ymarker,mgp=c(4,2,0),las=1)

where the vectors ybase and ymarker are given below as respectively
(obtained from print(ybase) etc. commands)

[1] 13.75 12.25 10.50  9.00  7.25  5.75  4.00  2.50
[1] 1.000 0.978 1.000 0.987 1.000 0.990 1.000 0.990

This may indicate that ymarker[n-i], where n is the number of spectra
and i and index, may be being plotted against ybase[i].  This is
purely a supposition, but the two vectors are correctly ordered with
respect to each other.  Certainly the  plotted values are in the wrong
positions.

(3) The use of mtext should give the filename `prefixes' on the right
hand side.  This only works for the first entry in the vector, the
rest are ignored.  The actual command is shown below

   mtext(text=filen, side=4, line=0.5, at=ymid, cex=0.7, adj=0, las=1)

the vectors filen and ymid hold the entries to be plotted.  This
worked well in old S.  The vectors filen and ymid obtained by
print(filen) etc are given below.

[1] "H005c" "H004b" "H003b" "H002a"
[1] 12.25  9.00  5.75  2.50

The other members of the vectors are ignored, this approach works
successfully for the text command used to plot the temperature labels
shown on the attached PostScript file.

-- 
Stephen Harker                                        s-harker@adfa.edu.au
School of Physics               Baloney Baffles brains: Eric Frank Russell
University College                http://www.adfa.edu.au/physics/s-harker/
UNSW, ADFA

--%--multipart-mixed-boundary-1.21682.931921831--%
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Description: c program text
Content-Disposition: attachment; filename="mplot.r"

# S command file to print the data, and fit from the ADFA Minuit
# fitting program `adfapac'.  Stephen Harker: 29 October 1994.
#
# First delete any existing PostScript.out file.
# !rm PostScript.out 
#
# Determine output type.
#
graph.type <- function(){
  out.menu <- c(
        "PostScript",
#        "Tektronics",
        "X11",
        "Quit")
  cat("Select an output type\n")
  pick <- menu(out.menu)
  if (pick==1) dout <<- "Post"
#  if (pick==2) dout <<- "Tek"
  if (pick==2) dout <<- "X11"
  if (pick==3) dout <<- "Quit"
}
# cat("Do you want a PostScript file? (y/n) ")
# dout <- scan(what=character(),n=1)
# graph.type()
dout <- " "
#
# Set up the graphics parameters. I seem to need to use mgp here to make
# sure the Y-axis label does not overlap with the custom axis scaling.
#
par(mar=c(5.1,7.1,4,5.1),mgp=c(4,1,0))
#
# Find out how many files to read in.
#
cat("How many spectra do you want to plot? ")
nspect <- scan(what=numeric(),n=1)
#
# Read in data file names: mosp is the directory in which they are kept.
#
cat("Give the filename(s): \n")
filen <- scan(what=character(),n=nspect)
#
mosp <- "/data/phd/sjh/mos/plot/"
for (filei in 1:nspect){
  file1 <- paste(mosp,filen,".plot",sep="") }
#
# Determine Velocity range.
#
cat("Give Vmin and Vmax: ")
vels <- scan(what=numeric(),n=2)
vmin <- vels[1]
vmax <- vels[2]
#
# Is there a linear baseline to be removed?
# For papers subtract the effect of the linear baseline from data.
#
cat ("Do you want to remove a linear baseline? (y/n)")
linearb <- scan(what=character(),n=1)
if (linearb == "y") {
  cat("Give linear baselines: ")
  linbase <- scan(what=numeric(),n=nspect)
  } else {
  linbase <- c(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0) }
#
# Determine whether to y-axis is normalised counts, or counts in millions.
#
# cat ("Do you want % not counts? (y/n) ")
# percent <- scan(what=character(),n=1)
#
# Determine whether to plot filenames on RHS axis.
#
cat ("Do you want filenames? (y/n) ")
filelabels <- scan(what=character(),n=1)
if (filelabels == "Y") filelabels <- "y"
#
# Determine whether to show the fit or just the data.
#
cat ("Do you want to show the fit? (y/n) ")
FIT <- scan(what=character(),n=1)
#
# Determine whether to plot data points.
#
cat ("Do you want to show data points? (y/n) ")
dpts <- scan(what=character(),n=1)
if (dpts == "Y") dpts <- "y"
#
# Create LETTERS vector, default use is for a letter but can be
# redefined below for a special purpose label; just is for
# the justification type; SLabel is for the size of the label.
#
# LETTERS <- c("(a)", "(b)", "(c)", "(d)", "(e)", "(f)", "(g)", "(h)", 
#        "(i)", "(j)", "(k)", "(l)", "(m)", "(n)", "(o)", "(p)", "(q)")
just <- 0.5
SLabel <- 1.0
#
# Determine whether to input special labels rather than letters.
#
cat ("Do you want to give labels? (y/n) ")
Tlabels <- scan(what=character(),n=1)
if (Tlabels == "y"|Tlabels == "Y") {
  cat("Give labels: ")
  ourletters <- scan(what=character(),n=nspect)
  SLabel <- 0.7
  cat ("Do you want (l)eft, (c)entred or (r)ight justified labels? (l/c/r) ")
  Just <- scan(what=character(),n=1)
  if (Just == "c"|Just == "C") {just <- 0.5}
  if (Just == "l"|Just == "L") {just <- 0}
  if (Just == "r"|Just =="R") {just <- 1}
  }
#
# Calculate Heights.  Why is vheight 15.0?  Well strangely enough
# 6 inches = 15 cm (or close enough).
#
height <- 15.0          # Total number of units on Vertical Axis
dfirst <- 1.0           # Distance from top to first plot
dlast <- dfirst         # Distance from last plot to bottom
dnext <- 0.25           # Distance betweenc successive plots
vheight <- (height - dfirst - dlast - (nspect*dnext))/nspect
# Dummy data
X <- c(-1, 1)
Y <- c(0, 10)
#
# Set up some variables so that I can later add to them using `append'.
# This is a kludge as I don't seem to be able to use `replace' outside of
# existing data and have a problem with `assign' also.  This way I get the
# variables assigned, but later need to delete the NA from some of them.
#
assign("label2","a")
assign("offset",NA)
assign("baseline",NA)
assign("npoints",NA)
assign("nsub",NA)
assign("velposn",NA)
assign("ybasel",NA)
assign("ymin",NA)
assign("yave",NA)
assign("ybase",NA)
assign("ymid",NA)
assign("ylabel",NA)
assign("ymarker",NA)
#
# Define title for y-axis on whether normalised in millions or to 1.
#
ytitle <- "Normalised Counts"
#
# Loop over all spectra
#
for (ii in 1:nspect) {
  offset <- append(offset,dlast + (nspect-ii)*(vheight+dnext),ii-1)
  name <- paste("dspec",ii,sep="")
  filename <- file1[ii]
  assign(name,scan(file=filename,what=numeric()))
  baseline <- append(baseline,get(name)[1],after=ii-1) # Baseline
  npoints <- append(npoints,get(name)[2],after=ii-1)   # n points
  nsub <- append(nsub,get(name)[3],after=ii-1)         # n subspectra
#
# Observed spectrum (vel + count => 2 * npoints), skip first line.
#
  npts <- npoints[ii]
  nstart <- 3+1
  nend <- nstart+2*npts-1
  name2 <- paste("dato",ii,sep="")
  assign(name2,matrix(get(name)[nstart:nend],ncol=2,byrow=T))
  assign(name2,get(name2)[get(name2)[,1] < vmax & get(name2)[,1] > vmin,])
#
# Calculated spectrum, similar reasoning: skip first line & data.
#
  nstart <- nend + 1
  nend <-  nstart + 2*npts -1
  name3 <- paste("dfit",ii,sep="")
  assign(name3,matrix(get(name)[nstart:nend],
        ncol=2,byrow=T))
  assign(name3,get(name3)[get(name3)[,1] < vmax & get(name3)[,1] > vmin,])
#
# Subspectra, similar reasoning: skip first line, data and main fit.
#
  for (jj in 1:nsub[ii]) {
  nstart <- nend + 1
  nend <-  nstart + 2*npts -1
  name4 <- paste(jj,"dsub",ii,sep="")
  assign(name4,matrix(get(name)[nstart:nend],
        ncol=2,byrow=T))
  assign(name4,get(name4)[get(name4)[,1] < vmax & get(name4)[,1] > vmin,])
  }
#
# Used to calculate baseline (don't take it from fit, use 40 largest
# points), use sort to get an ascending vector of the spectrum count, 
# then take mean of largest 40 values.  
# Now back to taking baseline from fit!
# Also calculate minimum points for data and halfway point. 
#
  lenspect <- npts
  lenspect2 <- lenspect -40
  spectr <- sort(get(name2)[,2]-(get(name2)[,1]*linbase[ii]))
#  ybasel <- append(ybasel,mean(spectr[lenspect2:lenspect]),after=ii-1)
  ybasel <- append(ybasel,baseline[ii],after=ii-1)
#   ymin <- append(ymin,min(get(name2)[,2]),after=ii-1)
  if (dpts == "y"|dpts =="Y") {
  ymin <- append(ymin,min(spectr),after=ii-1) } else {
  ymin <- append(ymin,min(get(name3)[,2]),after=ii-1) }
  yave <- append(yave,(ybasel[ii] + ymin[ii])/2,ii-1)
#
# Plotted counts are either to be normalised by dividing by averaged 
# `baseline' and expressed in millions (if `percent' = "n").  Or they
# are to be expressed normalised to 1.  The `ymarker' vector contains 
# the Y axis labels, while the `ybase' vector contains the positions 
# where they will be plotted. The `ymid' vector is the position of the 
# middle of the spectrum (50% dip) and used for plotting the run number 
# to the right of the graph.
#
  maxdip <- ybasel[ii] - ymin[ii]
  ybase <- append(ybase,(vheight*(ybasel[ii]-ymin[ii])/maxdip)+offset[ii],
        2*ii-2)
  ybase <- append(ybase,(vheight*(yave[ii]-ymin[ii])/maxdip)+offset[ii],
        2*ii-1)
  ymid <- append(ymid,(vheight*(yave[ii]-ymin[ii])/maxdip)+offset[ii],
        ii-1)
  ylabel <- append(ylabel,(vheight*(yave[ii]-ymin[ii])/maxdip)+offset[ii],
        ii-1)
    ymarker <- append(ymarker,ybasel[ii]/ybasel[ii],2*ii-2)
    ymarker <- append(ymarker,yave[ii]/ybasel[ii],2*ii-1)
}
#
# Delete the last entry in the following vectors as the NA causes problems.
#
last <- nspect+1
last2 <- 1+(2*nspect)
ybase <- ybase[-last2]
ymarker <- ymarker[-last2]
ymid <- ymid[-last]
ylabel <- ylabel[-last]
yave <-yave[-last]
# Round of y-axis markers to 3 places.
#
ymarker <-  round(ymarker,3)
#
# Set up the x-axis and box for plot. Don't plot box and axes now, do 
# later with explicit axis commands.
#
my.output <- function(){
plot(X,Y,
 xlim=c(vmin,vmax),ylim=c(0,height),
 xlab="",yaxt="n",xaxs="i",lab=c(5,3,5),yaxs="i",
 ylab="",type="n")
title(xlab="Velocity [mm/s]",cex=1.1,mgp=c(3,1,0))
title(ylab=ytitle,cex=1.1,mgp=c(4,1,0))
#
# Plot y-axis labels on the LHS.
#
axis(side=2,at=ybase,labels=ymarker,mgp=c(4,2,0),las=1)
#
# Start plotting:
#
for (ii in 1:nspect) {
  name2 <- paste("dato",ii,sep="")
  name3 <- paste("dfit",ii,sep="")
#
  maxdip <- ybasel[ii] - ymin[ii]
  basepos <- (vheight*(ybasel[ii]-ymin[ii])/maxdip)+offset[ii]
#
# Plot normalised data points for each spectrum using an offset to put
# the points in the right place.  Carry this through to fit & subspectra.
# Notice linear baseline being subtracted from the data.
# Set parameter err to -1 to stop error messages to the screen.
#
  par(err=-1)
  if (dpts=="y"|dpts == "Y") {
  points(get(name2)[,1],offset[ii]+(vheight*(get(name2)[,2]-ymin[ii]-
        linbase[ii]*get(name2)[,1])/maxdip),pch=0,mkh=0.02,cex=0.1) }
# Draw in Baselines (taken out 10/11/94 SJH).
#  segments(vmin,basepos,vmax,basepos)
if (FIT=="y"|FIT == "Y") {
#
# Plot fit with a solid line.
#
  lines(get(name3)[,1],offset[ii]+(vheight*(get(name3)[,2]-ymin[ii]
        -linbase[ii]*get(name2)[,1])/maxdip),lty=1)
#
# Plot subspectra with a dashed line (if more than one).
#
  if (nsub[ii] > 1) {
   for (jj in 1:nsub[ii]) {
    name4 <- paste(jj,"dsub",ii,sep="")
    lines(get(name4)[,1],(vheight*(get(name4)[,2]-ymin[ii]
        -linbase[ii]*get(name2)[,1])/maxdip)+offset[ii],lty=jj+1) }}
} }
#
# Print file name on RHS of plot if desired, make smaller.
#
if (filelabels=="y"|filelabels == "Y") {
   mtext(text=filen, side=4, line=0.5, at=ymid, cex=0.7, adj=0, las=1)}
#
# Print labels for each spectrum, adj controls justification.
# The value for `just' is set earlier.
#
xposn <- 0.9*vmax
for (i in 1:nspect){
  if (Tlabels=="Y"|Tlabels=="y") {
        label2 <- append(label2,paste(ourletters[i]),i-1)
      } else {  label2 <- append(label2,paste(letters[i]),i-1)}
  velposn <- append(velposn,xposn,i-1)  }
label2 <- label2[-last]
velposn <- velposn[-last]
text(x=velposn, y=ylabel,labels=label2,cex=SLabel,adj=just)
}
#
#
while (dout!="Quit") {
 graph.type()
 if (dout=="Post") {postscript(file="mplot.ps",horizontal=FALSE,
         width=7.5, height=10)
        par(pin=c(4.33, 6)) } 
 if (dout=="Tek") {tek4014()}
 if (dout=="X11") {dev.set(which=2)}  # assumes device 2 is X11.
 my.output()
 if (dout=="Post") {dev.off()}
 }
#
# !rm swork/*
# q()

==> 225.followup.1 <==
From sjh@phadfa.ph.adfa.edu.au  Thu Jul 15 04:27:57 1999
Received: from phadfa.ph.adfa.edu.au (www.ph.adfa.edu.au [131.236.40.1])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA02859
	for <r-bugs@biostat.ku.dk>; Thu, 15 Jul 1999 04:27:55 +0200 (MET DST)
Received: (from sjh@localhost)
	by phadfa.ph.adfa.edu.au (8.9.0/8.9.0) id MAA17919
	for r-bugs@biostat.ku.dk; Thu, 15 Jul 1999 12:33:28 +1000 (EST)
From: Stephen Harker <sjh@ph.adfa.edu.au>
Message-Id: <199907150233.MAA17919@phadfa.ph.adfa.edu.au>
Subject: pch and mkh bug PR#225
To: r-bugs@biostat.ku.dk
Date: Thu, 15 Jul 1999 12:33:27 +1000 (EST)
Reply-To: s-harker@adfa.edu.au (Stephen Harker)
Return-Receipt-To: s-harker@adfa.edu.au (Stephen Harker)
Reply-To: s-harker@adfa.edu.au (Stephen Harker)
X-Attribution: SJH
X-Organisation: School of Physics, University College, ADFA, UNSW Australia
X-Phone: +61 2 6268 8771
X-FAX:   +61 2 6268 8786
X-Operating-System: SunOS phadfa 5.5.1 Generic_103640-05 sun4u sparc SUNW,Ultra-1
X-Mailer: ELM [version 2.5 PL0b2]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I am sorry about the problem caused by my first attempt at reporting a
bug.  This is a followup to my report PR#225, hopefully being more
useful.  By not I have a better understanding of the problems being
reported.

I wish to report one bug relating to plot character and to mention two
other possible bugs (these may relate to differences between R and S)
I have noticed with R.  We have recently installed R and I am
converting some scripts I had previously used with a very old version
of S (not Splus).  The R version information is:

platform   sparc-sun-solaris2.5.1
arch       sparc                 
os         solaris2.5.1          
system     sparc, solaris2.5.1   
status                           
status.rev 0                     
major      0                     
minor      64.2                  
year       1999                  
month      July                  
day        3                     
language   R  

In the following I will be quoting some extracts from R A Becker, J M
Chambers and A R Wilks _The New S Language_, Wadsworth & Brooks/Cole
1988, isbn 0-534-09192-X.  We have a copy of this book since, although
our departmental server did not update from S to Splus, the campus
server did.  I am using this as an authority to report some of the
following as being bugs.

(1)  First the boxes drawn using `points()' via the following example

Y <- c(13.75, 10.50, 7.25, 4.0)
X <- c(1, 2, 3, 4)
plot(X,Y,
 xlim=c(0,5),ylim=c(0,15),type="n")
points(X,Y,pch=0,mkh=0.02)
points(X,Y,pch=0,mkh=1.0)
points(X,Y-1,pch=0,cex=4.0)
points(X,Y-1,pch=0,cex=0.02)

are of a size that indicated that the mkh value is being ignored (the
upper set of boxes).  This can be fixed by using cex (the lower set of
boxes).  However, the S manual states that `mkh' gives the height in
inches of mark symbols drawn when `pch' is given as a number.  This
comment is also made in the help for the `par' function within R.  This
would appear to be a bug, using `cex' is correct only when giving a
character.

(2)  The plotting of axis labels on an axis becomes confused if the
`at' vector is descending.  For exaample, consider the following:

labels <- c("A", "B", "C", "D")
Y <- c(13.75, 10.50, 7.25, 4.0)
X <- c(1, 2, 3, 4)
plot(X,Y,
 xlim=c(0,5),ylim=c(0,15))
axis(side=4,at=Y,labels=labels)

According to the S manual `label[i]' is plotted at coordinate `at[i]'.
Although S (or R) plot the vector in ascending order this still worked
(in old S, anyway), it may have been a feature.  However, R appears to
sort `at[i]' but not do a corresponding sort on label[i].  The R help
does not make the statement about plotting `label[i]' at coordinate
`at[i]', so this may be a difference between S and R.  It can be
overcome by appropriate pre-sorting of the two vectors.

(3)  The use of `mtext' only works for a string, not for a vector of
strings.  For example, the following commands.

labels <- c("A", "B", "C", "D")
Y <- c(13.75, 10.50, 7.25, 4.0)
X <- c(1, 2, 3, 4)
plot(X,Y,
 xlim=c(0,5),ylim=c(0,15))
mtext(text=labels, side=4, line=0.5, at=Y)

plots only the first of the elements of `labels'.  Again, this may
reflect a difference between S and R.  The S manual states that `text'
is a character vector to be plotted and `at' is an optional vector of
positions.  However, the R help states that `text' is a character
string and `at' gives the location in user coordiates.  This can be
overcome by plotting `labels[i]' at `at[i]' within a loop.

-- 
Stephen Harker                                        s-harker@adfa.edu.au
School of Physics               Baloney Baffles brains: Eric Frank Russell
University College                http://www.adfa.edu.au/physics/s-harker/
UNSW, ADFA

==> 225.audit <==
Sat Aug 14 07:57:09 1999	ripley	changed notes
Sat Aug 14 07:57:09 1999	ripley	moved from incoming to Graphics
Sat Aug 14 09:58:36 1999	ripley	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 230 *
Subject: Use of lwd = 0, lty = 2 in segments.
From: Douglas Bates <bates@stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
--still with us (0.90.1, Dec.1999)
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 230 <==
From bates@verdi.stat.wisc.edu  Sun Jul 18 00:16:09 1999
Received: from verdi.stat.wisc.edu (root@verdi.stat.wisc.edu [128.105.5.97])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA19722
	for <r-bugs@biostat.ku.dk>; Sun, 18 Jul 1999 00:16:08 +0200 (MET DST)
Received: by verdi.stat.wisc.edu
	via sendmail from stdin
	id <m115cn6-0000b3C@verdi.stat.wisc.edu> (Debian Smail3.2.0.102)
	for r-bugs@biostat.ku.dk; Sat, 17 Jul 1999 17:18:44 -0500 (CDT) 
Message-Id: <m115cn6-0000b3C@verdi.stat.wisc.edu>
Date: Sat, 17 Jul 1999 17:18:44 -0500 (CDT)
From: Douglas Bates <bates@stat.wisc.edu>
To: r-bugs@biostat.ku.dk
Subject: Use of lwd = 0, lty = 2 in segments.

This may not be considered a bug but it is an incompatibility with S.

There was a convention in S that the graphics parameter setting 
 lwd = 0 
is supposed to use the minimum possible line width on the device.  It
is not clear what that means on modern graphics devices but there is
still code (like mine) that assumes something sensible happens with
 lwd = 0
It seems that R's postscript device driver does something reasonable
with that for some graphics functions but not others.  The abline
function seems ok but the segments function doesn't.

The following produces a PostScript output file "foo.ps" that causes
ghostscript to complain of an error.
R> postscript("foo.ps")
R> plot(1:10, 1:10, type = "n")
R> abline(h = 5, lty = 2, lwd = 0)   # works properly
R> segments(1, 1, 1, 3, lty = 2, lwd = 0)  # fails
R> dev.off()

The last part of the PostScript file is

0.75 setlinewidth
[ 3.00 3.00] 0 setdash
np
77.04 290.39 m
743.76 290.39 l
o
0.00 setlinewidth
[ 0.00 0.00] 0 setdash
np
101.73 107.87 m
101.73 199.13 l

It is the line "[ 0.00 0.00] 0 setdash" that causes the problems.

The error message from Ghostscript is

Error: /rangecheckAladdin Ghostscript: Unrecoverable error, exit code 1
 in --setdash--
Operand stack:
   --nostringval--   0
Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1   3   %oparray_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   2   3   %oparray_pop   --nostringval--   --nostringval--
Dictionary stack:
   --dict:874/941(G)--   --dict:0/20(G)--   --dict:75

I notice that in the C function PostScriptSetLineTexture in devPS.c,
the step lengths seem to be multiplied by something that may be the
line width before being written to the PostScript file.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 status.rev = 0
 major = 0
 minor = 64.2
 year = 1999
 month = July
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


==> 230.audit <==
Sat Aug 14 07:58:31 1999	ripley	moved from incoming to Graphics
Fri Dec 24 10:46:24 1999	maechler	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 267 *
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 6 Sep 1999 11:04:03 +0200
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 267 <==
From maechler@stat.math.ethz.ch  Mon Sep  6 11:04:17 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA12119
	for <R-bugs@biostat.ku.dk>; Mon, 6 Sep 1999 11:04:16 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA22009
	for <R-bugs@stat.math.ethz.ch>; Mon, 6 Sep 1999 11:04:18 +0200 (MET DST)
Received: from sophie(129.132.58.2), claiming to be "sophie.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa005Nr; Mon Sep  6 11:04:10 1999
Received: (maechler@localhost) by sophie.ethz.ch (8.6.12/D-MATH-client) id LAA01220; Mon, 6 Sep 1999 11:04:03 +0200
Date: Mon, 6 Sep 1999 11:04:03 +0200
Message-Id: <199909060904.LAA01220@sophie.ethz.ch>
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-bugs@stat.math.ethz.ch
Subject: matplot(... panel.first=..) fails  <==> dealing with "..."
Reply-to: Martin Maechler <maechler@stat.math.ethz.ch>

Maybe, the following is not a bug in the strict sense,....

The following code shows what the effect :

  p1 <- function(...) plot.default(...)
  p2 <- function(...) { n <- names(list(...)); plot.default(...) }

  par(mfrow=c(2,2))
  p1(1:10, panel.first = grid(10,10)) # works okay (grid drawn)
  p2(1:10, panel.first = grid(10,10)) # doesn't draw the grid

A consequence of this is that the panel.first argument (of plot.default)
doesn't work with matplot()
	[well, matplot()'s doc doesn't claim it should, but still

-------
The real questions behind are:

1a) Why is "..." changed at the moment that I do  list(...)
1b) is this basic behavior desirable / changeable ....

2) How can one work around? 
   {save "..." to something else, first? 
    or explicitly save panel.first?}

-----------------------------

R versions,  both 0.64.2 and 0.65.0  (probably all R versions)

Version:
 platform = sparc-sun-solaris2.5
 arch = sparc
 os = solaris2.5
 system = sparc, solaris2.5
 status =
 status.rev = 0
 major = 0
 minor = 64.2
 year = 1999
 month = July
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

--
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

==> 267.reply.1 <==
From pd@biostat.ku.dk  Mon Sep  6 14:22:43 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA16427;
	Mon, 6 Sep 1999 14:22:42 +0200 (MET DST)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id OAA01443;
	Mon, 6 Sep 1999 14:25:30 +0200
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: matplot(... panel.first=..) fails  <==> dealing with "..." (PR#267)
References: <199909060904.LAA12129@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Sep 1999 14:25:30 +0200
In-Reply-To: maechler@stat.math.ethz.ch's message of "Mon, 6 Sep 1999 11:04:18 +0200 (MET DST)"
Message-ID: <x2puzwb51h.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.5/Emacs 20.3

maechler@stat.math.ethz.ch writes:

> Maybe, the following is not a bug in the strict sense,....
> 
> The following code shows what the effect :
> 
>   p1 <- function(...) plot.default(...)
>   p2 <- function(...) { n <- names(list(...)); plot.default(...) }
> 
>   par(mfrow=c(2,2))
>   p1(1:10, panel.first = grid(10,10)) # works okay (grid drawn)
>   p2(1:10, panel.first = grid(10,10)) # doesn't draw the grid
...
> The real questions behind are:
> 
> 1a) Why is "..." changed at the moment that I do  list(...)
> 1b) is this basic behavior desirable / changeable ....

That's a result of lazy evaluation. plot.default is really playing
with fire, the way it is currently written. list(...) will force
evaluation of the promises which in turn causes grid() to be called
too early. I don't think it is desirable to change this behavior
(well, Robert wants us to consider eager evaluation, but that would
cause the construction to stop working in all cases!)

> 2) How can one work around? 
>    {save "..." to something else, first? 
>     or explicitly save panel.first?}
> 

Neither of the above, because the object is to access "..." without forcing
evaluation of its contents. One can do things like

> p2
function (...) 
{
    n <- names(match.call(expand.dots = F)[["..."]])
    plot.default(...)
}

Or, one can modify plot.default to take panel.first as an
*unevaluated* expression (mode "call" or "expression"), and do an
explicit eval(panel.first). But then you'd have to do 

p2(1:10, panel.first = quote(grid(10,10))) # or expression( )

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 267.audit <==
Tue Sep 21 12:16:18 1999	maechler	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 287 *
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Sep 1999 11:12:08 +0200
--FIXME (still in 0.90.1)
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 287 <==
From maechler@stat.math.ethz.ch  Mon Sep 27 11:12:20 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA27329
	for <R-bugs@biostat.ku.dk>; Mon, 27 Sep 1999 11:12:20 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id LAA06115
	for <R-bugs@stat.math.ethz.ch>; Mon, 27 Sep 1999 11:12:21 +0200 (MET DST)
Received: from sophie(129.132.58.2), claiming to be "sophie.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa001VX; Mon Sep 27 11:12:13 1999
Received: (maechler@localhost) by sophie.ethz.ch (8.6.12/D-MATH-client) id LAA01949; Mon, 27 Sep 1999 11:12:08 +0200
Date: Mon, 27 Sep 1999 11:12:08 +0200
Message-Id: <199909270912.LAA01949@sophie.ethz.ch>
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-bugs@stat.math.ethz.ch
Subject: text( col=, cex=, font=) : doesn't allow more than length-1 arg
Reply-to: Martin Maechler <maechler@stat.math.ethz.ch>


text(..., col = <..>)   doesn't work if col has length more than one;

and the same for 'cex' and 'font'

A toy example, showing what is desired

plot(1);text(1.2, .8+(0:5)/16, LETTERS[6:1])
## works alright

plot(1);text(1.2, .8+(0:5)/16, LETTERS[6:1],col=1:6)
##>>> Error in par(args) : parameter "col" has the wrong length

---
Explanation:
The source code is in  src/main/plot.c  in do_text(),
and from reading it, "col" (& "cex" & "font") are extracted via GetPar()
(and later would nicely be recycled).
HOWEVER, the ProcessInlinePars() called after the three GetPar() gives the
error message, because "col" (cex, or font) are still part of the `args'
list.

All boils down to the FIXME part of the following description of
GetPar() [around line 120 in plot.c] :

/* GetPar is intended for looking through a list  -- typically that bound
 *	to ... --  for a particular parameter value.  This is easier than
 *	trying to match every graphics parameter in argument lists explicitly.
 * FIXME: This needs to be destructive, so that "ProcessInlinePars"
 *	can be safely called afterwards.
 */

PLEASE, can we fix this!

Idea: don't shorten the `parlist' argument of GetPar(), 
      for efficiency.
Just set the TAG to "", such that it will be disregarded subsequently,
i.e., do something like

SEXP GetPar(char *which, SEXP parlist)
{
    SEXP w, p;
    w = install(which);
    for (p = parlist; p != R_NilValue; p = CDR(p)) {
	if (TAG(p) == w) {
 NEW>>>	    TAG(p) == mkString("");
	    return CAR(p);
	}
    }
    return R_NilValue;
}

	  

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 287.audit <==
Tue Oct 05 15:51:35 1999	pd	moved from incoming to Graphics
Fri Dec 24 10:49:27 1999	maechler	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 299 *
Subject: Wrong text() adjustment with (math)expression and "\n"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
--Not clear this is really a bug
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 299 <==
From maechler@stat.math.ethz.ch  Tue Oct 26 19:57:16 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA12824
	for <R-bugs@biostat.ku.dk>; Tue, 26 Oct 1999 19:57:15 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id TAA25018
	for <R-bugs@stat.math.ethz.ch>; Tue, 26 Oct 1999 19:57:09 +0200 (MET DST)
Received: from sophie(129.132.58.2), claiming to be "sophie.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa0066r; Tue Oct 26 19:57:04 1999
Received: (maechler@localhost) by sophie.ethz.ch (8.6.12/D-MATH-client) id TAA03699; Tue, 26 Oct 1999 19:57:01 +0200
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14357.60269.59835.643865@gargle.gargle.HOWL>
Date: Tue, 26 Oct 1999 19:57:01 +0200 (MET DST)
To: R-bugs@stat.math.ethz.ch
Subject: Wrong text() adjustment with (math)expression and "\n"
X-Mailer: VM 6.75 under Emacs 20.4.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

This is adapted from  partha_bagchi@hgsi.com 's report on R-help:

     plot(0); title(expression("Bad\n with much much more text")))

gives something like 

      Bad
          with much much more text

(``newline w/o carriage return'') instead of centering both lines such as

               Bad
     with much much more text

which is produced by (just dropping `expression' from the above)

      plot(0); title(("Bad\n with much much more text"))

By the way, the following would need even more attention if one insists on 
correct behavior:

plot(0)
title(expression(paste("Still works with math\n", "with", 
                       frac(1,sum(x[i], i==1,n)), " and more text")))

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

==> 299.reply.1 <==
From pd@biostat.ku.dk  Thu Oct 28 16:26:32 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA02479;
	Thu, 28 Oct 1999 16:26:31 +0200 (MET DST)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id QAA02255;
	Thu, 28 Oct 1999 16:33:41 +0200
Sender: pd@blueberry.kubism.ku.dk
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: Wrong text() adjustment with (math)expression and "\n" (PR#299)
References: <199910261757.TAA12834@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Oct 1999 16:33:40 +0200
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 26 Oct 1999 19:57:17 +0200 (MET DST)"
Message-ID: <x2n1t35zcr.fsf@blueberry.kubism.ku.dk>
Lines: 53
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

maechler@stat.math.ethz.ch writes:

> This is adapted from  partha_bagchi@hgsi.com 's report on R-help:
> 
>      plot(0); title(expression("Bad\n with much much more text")))
> 
> gives something like 
> 
>       Bad
>           with much much more text
> 
> (``newline w/o carriage return'') instead of centering both lines such as
> 
>                Bad
>      with much much more text
> 
> which is produced by (just dropping `expression' from the above)
> 
>       plot(0); title(("Bad\n with much much more text"))
> 
> By the way, the following would need even more attention if one insists on 
> correct behavior:
> 
> plot(0)
> title(expression(paste("Still works with math\n", "with", 
>                        frac(1,sum(x[i], i==1,n)), " and more text")))

I'm not sure I'm buying that this is a bug. To see what is really
going on try something like:

 plot(0);title(expression(mu*"a\nbc"*eta*"ab\nc"*xi))

what happens is that the strings get set *individually* as multiline
text with (left,bottom) adjustment. If you look closer, Martin's
example really gives

      Bad
      with much much more text

We could relatively easily make the adjustment (center,center) I think,
but that isn't very useful, and Partha was expecting the whole thing to
continue on a new line. I think that is rather difficult to achieve
because the relation between the expression as text and as a parse
tree is not linear and things mean different things in different
positions (consider "a\nb"+"a\nb"^"a\nb"). To actually have a formula
title split over several lines, I'd suggest fiddling with mtext().


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 299.audit <==
Sun Nov 07 08:33:32 1999	ripley	changed notes
Sun Nov 07 08:33:32 1999	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 308 *
Subject:  R abnormal exit when plotting lm 
From: Ulf Mehlig <umehlig@uni-bremen.de>
Date: Tue, 2 Nov 1999 22:18:23 +0100
--This is a problem with the X library (or possibly X server) when using plot.lm.
--We need further details (promised later).
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 308 <==
From umehlig@uni-bremen.de  Tue Nov  2 22:14:35 1999
Received: from alf.zfn.uni-bremen.de (alf.zfn.uni-bremen.de [134.102.20.22])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA14786
	for <r-bugs@biostat.ku.dk>; Tue, 2 Nov 1999 22:14:34 +0100 (MET)
Received: from pandora3.localnet (root@tnt85.zfn.uni-bremen.de [134.102.7.85])
	by alf.zfn.uni-bremen.de (8.9.1a/ZfNServer) with ESMTP id WAA540814
	for <r-bugs@biostat.ku.dk>; Tue, 2 Nov 1999 22:13:24 +0100
Received: (from umehlig@localhost)
	by pandora3.localnet (8.9.1/8.9.1) id WAA04022;
	Tue, 2 Nov 1999 22:18:23 +0100
Date: Tue, 2 Nov 1999 22:18:23 +0100
From: Ulf Mehlig <umehlig@uni-bremen.de>
Message-Id: <199911022118.WAA04022@pandora3.localnet>
To: r-bugs@biostat.ku.dk
Subject:  R abnormal exit when plotting lm 
Cc: umehlig@uni-bremen.de

<<insert bug report here>>
I had a "abnormal" exit of R plotting a fitted linear model. here's
the last few lines of the R session:
-------------------------------------------------------------------
> plot(blstrhz.lm)
Hit <Return> to see next plot:
Hit <Return> to see next plot:
Hit <Return> to see next plot:
X Error of failed request:  BadValue (integer parameter out of range for operation)
  Major opcode of failed request:  53 (X_CreatePixmap)
      Value in failed request:  0x0
            Serial number of failed request:  16548
	            Current serial number in output stream:  16554

		            Process R exited abnormally with code 1 at Tue Nov  2 22:07:49 1999
			                                                                                 
-------------------------------------------------------------------
Which additional information do you need to find out whether this is
a bug?

Thanks for your attention,
Ulf Mehlig

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:rmutil, package:gnlm, Autoloads, package:base

==> 308.reply.1 <==
From pd@biostat.ku.dk  Tue Nov  2 23:15:21 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id XAA15029;
	Tue, 2 Nov 1999 23:15:20 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id XAA05617;
	Tue, 2 Nov 1999 23:16:05 +0100
Sender: pd@blueberry.kubism.ku.dk
To: umehlig@uni-bremen.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: R abnormal exit when plotting lm (PR#308)
References: <199911022114.WAA14796@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 02 Nov 1999 23:16:05 +0100
In-Reply-To: umehlig@uni-bremen.de's message of "Tue, 2 Nov 1999 22:14:35 +0100 (MET)"
Message-ID: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
Lines: 34
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

umehlig@uni-bremen.de writes:

> <<insert bug report here>>
> I had a "abnormal" exit of R plotting a fitted linear model. here's
> the last few lines of the R session:
> -------------------------------------------------------------------
> > plot(blstrhz.lm)
> Hit <Return> to see next plot:
> Hit <Return> to see next plot:
> Hit <Return> to see next plot:
> X Error of failed request:  BadValue (integer parameter out of range for operation)
>   Major opcode of failed request:  53 (X_CreatePixmap)
>       Value in failed request:  0x0
>             Serial number of failed request:  16548
> 	            Current serial number in output stream:  16554
> 
> 		            Process R exited abnormally with code 1 at Tue Nov  2 22:07:49 1999
> 			                                                                                 
> -------------------------------------------------------------------
> Which additional information do you need to find out whether this is
> a bug?

None. It's a bug...

However, to have a chance of fixing it (and knowing whether it got
fixed!), we'd need to either have instructions to reproduce the crash,
or at the very least detailed information on where things went wrong.
Can you make it happen again when running under a debugger?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 308.followup.1 <==
From umehlig@uni-bremen.de  Thu Nov  4 07:57:37 1999
Received: from alf.zfn.uni-bremen.de (alf.zfn.uni-bremen.de [134.102.20.22])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id HAA26342;
	Thu, 4 Nov 1999 07:57:33 +0100 (MET)
Received: from pandora3.localnet (root@tnt178.zfn.uni-bremen.de [134.102.7.178])
	by alf.zfn.uni-bremen.de (8.9.1a/ZfNServer) with ESMTP id HAA553540;
	Thu, 4 Nov 1999 07:56:22 +0100
Received: (from umehlig@localhost)
	by pandora3.localnet (8.9.1/8.9.1) id HAA02246;
	Thu, 4 Nov 1999 07:46:52 +0100
Date: Thu, 4 Nov 1999 07:46:52 +0100
From: Ulf Mehlig <umehlig@uni-bremen.de>
Message-Id: <199911040646.HAA02246@pandora3.localnet>
X-Authentication-Warning: pandora3.localnet: umehlig set sender to umehlig@pandora3.localnet using -f
To: p.dalgaard@biostat.ku.dk
CC: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
In-reply-to: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
	(p.dalgaard@biostat.ku.dk)
Subject: Re: R abnormal exit when plotting lm (PR#308)
References: <199911022114.WAA14796@pubhealth.ku.dk> <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>


 > None. It's a bug...
 > 
 > However, to have a chance of fixing it (and knowing whether it got
 > fixed!), we'd need to either have instructions to reproduce the crash,
 > or at the very least detailed information on where things went wrong.
 > Can you make it happen again when running under a debugger?

Unfortunately, I'm a little bit short of time now, but after the 20th
I will give a try! (I still have a hardcopy of the session, and I will
try to reproduce it step by step. By "running under a debugger" you
mean "R -d gdb", I suppose?).

Many thanks for your attention,
Ulf

-- 
======================================================================
Ulf Mehlig    <umehlig@zmt.uni-bremen.de>
              Center for Tropical Marine Ecology/ZMT, Bremen, Germany
----------------------------------------------------------------------

==> 308.audit <==
Sun Nov 07 08:26:44 1999	ripley	changed notes
Sun Nov 07 08:26:44 1999	ripley	moved from incoming to Graphics

==> 308.followup.2 <==
From umehlig@uni-bremen.de  Wed Dec  8 20:29:30 1999
Received: from alf.zfn.uni-bremen.de (alf.zfn.uni-bremen.de [134.102.20.22])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA23316;
	Wed, 8 Dec 1999 20:29:29 +0100 (MET)
Received: from pandora3.localnet (root@tnt187.zfn.uni-bremen.de [134.102.7.187])
	by alf.zfn.uni-bremen.de (8.9.1a/ZfNServer) with ESMTP id UAA85698;
	Wed, 8 Dec 1999 20:26:52 +0100
Received: (from umehlig@localhost)
	by pandora3.localnet (8.9.1/8.9.1) id UAA03462;
	Wed, 8 Dec 1999 20:30:47 +0100
Date: Wed, 8 Dec 1999 20:30:47 +0100
From: Ulf Mehlig <umehlig@uni-bremen.de>
Message-Id: <199912081930.UAA03462@pandora3.localnet>
X-Authentication-Warning: pandora3.localnet: umehlig set sender to umehlig@pandora3.localnet using -f
To: p.dalgaard@biostat.ku.dk
CC: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
In-reply-to: <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>
	(p.dalgaard@biostat.ku.dk)
Subject: Re: R abnormal exit when plotting lm (PR#308)
References: <199911022114.WAA14796@pubhealth.ku.dk> <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk>

 Dear R-developers,

 recently I sent a bug report about plot(aov()) crashing R (resp. the
 X Windows part of R) without reporting the data I used.

 In the meantime, I discovered, that the problem is due to a .RData
 file -- without it, there is no crash, with that .RData loaded, the
 following small sequence of commands crashes R 0.90, too, on my
 machine. R had been started with "--vsize 16M --nsize 4000k":

 ----------------------------------------------------------------------
 
 > x <- data.frame(id=rep(c("a", "b", "c"), 100), val=rnorm(1:300))
 > plot(aov(val ~ id, data=x))
 Hit <Return> to see next plot: 
 Hit <Return> to see next plot: 
 Hit <Return> to see next plot: 
 X Error of failed request:  BadValue (integer parameter out of range for operation)
   Major opcode of failed request:  53 (X_CreatePixmap)
     Value in failed request:  0x0
       Serial number of failed request:  1229
         Current serial number in output stream:  1235

	 Process R exited abnormally with code 1 at Wed Dec  8 19:25:58 1999

 ----------------------------------------------------------------------

 Prof. Ripley suggested that it might be a XFree86 error, so I'll give
 you my X version, too (from X -showconfig):
 
 ----------------------------------------------------------------------
 
 XFree86 Version 3.3.3.1 / X Window System
 (protocol Version 11, revision 0, vendor release 6300)
 Release Date: January 4 1999
         If the server is older than 6-12 months, or if your card is newer
	         than the above date, look for a newer version before reporting
		         problems.  (see http://www.XFree86.Org/FAQ)
			 Operating System: Linux 2.0.36 i686 [ELF]
			 Configured drivers:
			   Mach64: accelerated server for ATI Mach64 graphics adaptors (Patchlevel 0)

  ----------------------------------------------------------------------

 ... maybe I should upgrade my X windows system :-|

 I'll include the base64-encoded .RData file in gzipped form below. For
 me, the "problem" is solved, but maybe there is somebody in the
 development team who is interested in more details ...
  

 Regards, Ulf

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 22
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

  ----------------------------------------------------------------------
begin-base64 644 .RData.gz
H4sICPg8TTgCAy5SRGF0YQDsvQe4JFXVr78qVw1Jcs5phjDMyWcOjFMEyTlL
EAYYYHACTABEzAQzKKigRMmICCqKgShJMogECQIqSNfh5ES+79q7kRo5u/q7
9z7X7/v/H+Z59rOme63u02d11X5/1Wf3/jVN7eiYICKniGQXiqz5HbH/9D7v
YPt/j7EUIzpy9owFC+x9PuNjjPSoWXPmzpgzU+8OGMtr5D6tCRkr6eM3sI+J
GKtqfvLkyXo7ZqytcfbME2fOtk+cMDbU2vefVH8GY1NGNn/eSZNL92cMfaIl
J+89Y+5R8+ZMXjBz5lH1197EWGLyrjMWLJx84ozZi2Zq/RKMLv15C+Ytmn+k
uUuWZEzT32fW0ea2/p6f1Ne+YOG844lLM/SX8bfa3OSXYSzS3+mz9jVoDz6j
tyfa28syfq+3N7W3l2Pcrrftw01/7tLbm9jbKzDu09tb2NsrMh7U25+yt7V/
T2vPNtxE2yIrM17U1zNtmsmvwvi73l7X3tb+/lMfv5V9/GqMIb39cXt7dcbb
evtUe3sN/qvvk7/RRub2mtzWnnhdNr8W/9Xf0fu8vc375elrDmbMnq231+H2
Kub2XG2DrMvtTq0/0tavx39zc+wcMWvuUfa+9bnvV/qY2fOO0dscHt49pucn
zF9o33/vcc3PPFnfAuGV+dquZPaRx86bt8C8cRuTflhrFiwyxxrtD97Vn3M8
b7l9a2UST6nHaXz0vPlzZiw09/E84Yl67MxaMPnoGUcunDff1vJ2Revp882f
aX7mZtzWjoSzZy3QR/L2Rd/V5583/6iZ9cdw7MU1Pd52n3nywt1mLjx2nv0F
eSsTPf6ik2YdtfBYWzuF+2ZoX062t8ln+5jXb39eM7fP0fzxNt/C4XqG3v6M
vd3K7Sv19hH2dhuH7h56e6693c6ht6a+3iPnzdQjuYND7VZzLs7UX1d4T1bQ
V5doLxbN1pciU7nvRn3MjIUL59tzY8UX9HUvnDl/Tv0c25JDTg8V/yTbPw6r
lb+gz3PSzFnHHLvQVHHkrbKsOQZmmXedQ231PtP3GXNmzba/wHSRbX9n+j6X
Zz9y5vH26YRjY7sb9DXMnXeEPtnWIjtdoLd333aPXYnbiOypp04862imCPvG
biuyoFvvO9a8BnPfdiKf1deZzp+54Ph5c03lJ7hPz41owcIZC+u/zw7irXmk
fV/nfpq4I7dHzLHF7aMXmW7uxH1v6O88Z5F5zM7irTXh/ZpZc00/d+G+pcwx
utD0cldur6+vac6iyfW7ZDfu215fEzPQrKPsvbuLt66eL6k+18KZc/Tt3oP7
vm7r5s+aMdfMTHty3w/0Z5rH2heyF/f9VI833tPJ/J6zjrK/1N7irafn9YRZ
c2ctnEX9KbZP+3D/zvoccxbRAXNqyb7irf+A/ixOx3lzKOb/+4m32Uvm2DAn
hHnS/cWbrnNXcMxsc34dIN5ees5m5jUeMfv9OfhA8Y5psr05Yv6M+ebN/qR4
p2hv/dn2fDhIvG89oY+dvOf8eSfSifo8cLB4l/bqz5h3xHF6+xDxrtFjJDzx
yHna5EPF31Lnkuz4eRw1C97/teQw8e/T89o/3j7R4eI/eLP+/pP3nT/jyJlH
zDjy0+b+GeK/pnPEkrMVAyfNmD931lydcI4Q/y19z4OTm/Sly5Hiv2Oe70R7
Yh/F7cgcI5OP0l9+JrdTM4ctnLmgftwezX1LGMbMXLBg8uwTF8w40by6Y7hf
mRFP3n7W/Hrxsdy3rD3m2jmPZRa3dQ5NbI15Dcdxn87t4TFzTcM/ze3V7GuY
O484m9t6fsfzZyw6fqY96edw3zqGZ4vmTD7CTMcyl/v0OEyOmP33hQvtTDWP
+3QuW0LP68mzZxxRh+3x3D9J+3bEoqNOmqcpMx3LCdy/mfZjn+3N7fnc3sLO
VWb2WsDtZv0ZcxfNOWrmDPMmLOS+Nu3R7KPqM7Ry0n/HsGA3e/tEbm+pTD1+
Pu/nZI6syf8qPomcIso/0nL4ZG5vrb+bVky2k+JnuG87rdl/b3P7FG7voD2y
zxJNkq63tGfZgoXzZxw7e9Fc++vI9uKt+Efip3iHNf9Z6bpY5+1TiQXxc0Sd
Tz5PfJ34BWIP8YtEPT6/RNT57MvEfuJXiAPE04iDxNOJytgziMPEM4l6fH2V
OEr8GnGM+HWizivfIL5J/CbxLeK3iMrkbxPfIZ5FVJadTXyP+B3pukR/j+8S
VYudQ9Tj9Vyiaq7vEZXh3yfqcfsD6bprT+J5xL2I5xO1Yz8kKnN+RNyPeIF0
3a2Pv5Coj7+IqI+/mKja7BKi6rFLiXr8/5iomusyos6HlxP1HLiCqJrhSqLO
iVcR9Ry4Wrruv5R4DfHHxGuJlxF/QryceB1RmfZTojLgeqLy6GfEnxNvIP6C
eCPxl8SfE28i/oL4a+IviXre30T8DfFXxN8Sf03UeeRm4i3E3xBVg/2WeAfx
d9L1wNFGp3U9oIfILUTF9K3S9U9l/G3S9dqo0W1dr+n7dgdR37c7ifq+/YH4
ltFxXa/p+3Y3Ud+3e4j6vt1LfM/oui49zOSPRH3f7ifq+/YAMTA6r6umfX+I
qH1/mKh9f4SofX+UqH1/jKh9f5yoff8TUfv+BFH7/mei9v1Jovb9KeIyRjd2
1VS7PUPU+ecvRJ3TnyWqDn2OqPPQ80TVnS8QVW/+lWh1ZldNWfUSUXXly0Q9
f/5GXN3ozq4a+lH+QdS56RUielFeJa5tdGhXTeen14joQqkRVWMVRJ2juol6
afA6UcVtD1HnqV4i+k76iCqr+4k6Tw0QVQcOEjc1urarpvPUMFE1wghRrwdG
iTpfjRHRXfIGUSfZN4k6b71FbDE6uKum8/E7RJ273iWio+Q9Yoe57OmqMX95
HhGt5PlENJIXELc0urmrhh7yIiIayIuJzGFeQkTveCkRfeNlROYybwIRPeMt
QdzW6OyuGvOZtxQRreItTWTG9ZYh7mB0d1dtR+KyxJ2IyxHhubc8cRejw7tq
aCRvRSJTrLcScXfiysQ9jC7vqjEPeKsSmQe81YjMA97qROYBbw3ivsQ1icwH
3lrE/YlrEw8grkM8kLgukWsibz3iQcT1iQeby7qu2iHEDYmHEjcictnibUw8
zFwSddUOJzIv12aYS56u2hHm0qirhgbzNiMeZS6NumrM395k4tHmUqirxnnp
TSFyXnpNxFnEZiJCwWshQnivlQj1vDYizPTaiZDR6yDOM9chXTXI4U0lnmAu
abpqANHbkrjAXCJ11SC0N424yFwiddXQHd504knmuqWrBvC8rYkIG28bItfJ
3rZELv+87YhoTu8TxM8RtydymeTtQEQjezsSv0jcifgl4s7ELxN3IX6FuCvx
NIPHrtrpxN2JaH5vD+KZxD2JXyXuRfwacW8iOtHbh/gN4r7EbxL3I36LuD/x
28QDiGcRDySeTfwkket67yDid81lfVeNaw3vEOK5xEOJ3zOXnF217xMPI6I9
vcOJ5xFnEM83lx5dtR+aS7uu2o+IRxHR6t5M4oXEo4kXEY8hXkw8lgi4vFlE
OOAdR4QD3qeJcMCbTYQD3hziFeZSpqsGD7x5xKvMpVBX7WriCcRriPOJ1xIX
EH9CXEi8jriIiC72TiReTzyJ+DNzqdVVu8FcQnXV4Ip3CvHn5tK9q/YLcwnc
VYMrHvyv3WQucbtqaFwP/tfgiwf/a/DFg/81+OLB/xp88eB/Db548L/Gtb4H
/2twxoP/Na65PPhfu40I/2twx4P/Nbjjwf/anUT4X/sDEf7X7iLC/9rdRPhf
4zrYg/+1e4nwv3YfEf7X0C8e/K/dT4T/NTS8B/9rDxLhf+0hIvyvoXc9+F97
hAj/a48S4X/tMSL8r3Fd7cH/2p+I8L+GLvfgf+3PRPhfe5II/2tPEeF/7Wki
/K89Q4T/tb8Q4X/tWSL8rz1HhP+154nwv8b1owf/a38lwv/ai0T4X+P6woP/
tZeJ8L/2NyL8r3F95sH/2j+I8L/2ChH+114lwv/aP4nwv/YaEf7XAKoH/2vo
Ng/+19BtHvyvvW4+U+iqods8+F9Dt3nwv4Zu8+B/Dd3mwf8aus2D/zV0mwf/
a+g2D/7X0G0e/K+h2zz4X4P/HvyvwX8P/tfgvwf/a/Dfg/81+O/B/xr89+B/
7R3zGUZXDf578L8G/z34r/LSg/8FMPHgfwH/PfhfwH8P/hfw34P/Bfz34H8B
/z34X8B/D/4X8N+D/0VmPhPpKuC/B/8L+O/B/wL+e/C/gP8e/C/gvwf/C/jv
wf8C/nvwv4D/Hvwv4L8H/wv478H/Av578L+A/x78L+C/B/8L+O/B/wL+e/C/
gP8e/C/gvwf/C/jvwf9CPz+C/4V+bgT/C/28CP4X+jkR/C/08yH4X+jnQvC/
0M+D4H+hnwHB/0I/+4H/hX7mA/8L+O/B/wL+e/C/gP8e/C/gvwf/C/jvwf8C
/nvwv4D/Hvwv4L8H/wv478H/Av578L+A/x78L+C/B/8L+O/B/wL+e/C/gP8e
/C/gvwf/C/jvwf+iw3zE2VXAfx/+F/Dfh/8F/PfhfwH/ffhfwH8f/hfw34f/
Bfz34X8B/334X8B/H/4X8N+H/wX89+F/Af99+F/Afx/+F/Dfh/8F/PfhfwH/
ffhfwH8f/hfw34f/Bfz34X8B/334X8B/H/4X8N+H/wX89+F/Af99+F/Afx/+
F/Dfh/8F/PfhfwH/ffhfwH8f/hfw34f/Bfz34X8B/334XxyoHy0S4b8P/wv4
78P/Av778L+A/z78Lw7VjxCJ8N+H/wX89+F/Af99+F/MMJ/hdRXw34f/Bfz3
4X8B/334X8B/H/4X8N+H/wX89+F/Af99+F/Afx/+F/Dfh/8F/PfhfwH/ffhf
wH8f/hfw34f/Bfz34X8B/334X8B/H/4X8N+H/8UC/UiXuFA/SiXCfx/+F/Df
h/8F/PfhfwH/ffhfwH8f/hfw34f/Bfz34X8B/334X8B/H/4X8N+H/wX89+F/
Af99+F/Afx/+F/Dfh/8F/PfhfwH/ffhfwH8f/hfw34f/Bfz34X8B/334X8B/
H/4XX9fLciL89+F/Af99+F98Sy+LifDfh/8F/PfhfwH/ffhfwH8f/hfw34f/
Bfz34X8B/334X8B/H/4X8N+H/wX89+F/Af99+F/Afx/+Fz/US3Qi/PfhfwH/
ffhfwH8f/hfw34f/Bfz34X9xiX60ToT/Pvwv4L8P/4vL9OMh4uX6MRsR/vvw
v4D/PvwvrtKPd4jw34f/Bfz34X8B/334X8B/H/4X8N+H/8VP9eMb4vX6USUR
/vvwv4D/Pvwv4L8P/wv478P/Av778L+A/z78L+C/D/8L+O/D/wL++/C/gP8+
/C/gvw//C/jvw/8C/vvwv4D/Pvwv4L8P/wv478P/Av778L+A/z78L+C/D/8L
+O/D/wL++/C/gP8+/C/gvw//C/jvw/8C/vvwv4D/Pvwv4L8P/wv478P/Av77
8L+A/z78L+C/D/8L+O/D/wL++/C/gP8+/C/gvw//C/jvw/8C/vvwv4D/Pvwv
4L8P/wv478P/Av778L+A/z78L+C/D/8L+O/D/wL++/C/gP8+/C/gvw//C/jv
w/8C/vvwv4D/Pvwv4L8P/wv478P/Av778L+A/z78L+C/D/8L+O/D/wL++/C/
gP8+/C/gvw//C/jvw/8CsPrwv4D/Pvwv4L8P/wv478P/Av778L+A/z78L+C/
D/8L+O/D/wL++/C/gP8+/C/gvw//C/jvw/8C/vvwv4D/Pvwv4L8P/wv478P/
Av778L+A/z78L+C/D/8L+O/D/wL++/BfP1by4X83/PfhfzdQ8eF/N/z34X83
/Pfhfzf89+F/N/z34X83/Pfhfzf89+F/N/z34X83/Pfhfzf89+F/N/z34X83
/Pfhfzf89+F/N/z34X83/Pfhfzf89+F/N/z34X83/Pfhfzf89+F/N/z34X83
/Pfhfzf89+F/N/z34X83/Pfhfzf89+F/N/z34X83/Pfhfzf89+F/N/z34X83
/Pfhfzf89+F/N/z34X83/Pfhfzf89+F/N/z34X83/Pfhf7f+rQf+d8N/H/53
w38f/nfr+Q7/X9f3A/6/rv2G/z3aT/jfo/2C/z3aD/jfo78v/O/R3wf+9+jr
hf89+nrgf4/+PPjfg57w4X8PesGH/z3oAR/+90w1f87s6oHnAfzvgdcB/O+B
xwH874G3AfzvgacB/O+BlwH874GHAfzvgXcB/O+BZwH874FXAfzvgUcB/O+B
NwH874EnAfzvgRcB/O+BBwH872G+D+B/D/N5AP97mK8D+N/DfBzA/x7m2wD+
9zCfBvC/h/kygP89zIcB/O9hvgvgfw/zWQD/e5ivAvjfw3wUwP8e5psA/vcw
nwTwv4f5IoD/PcwHAfzv4XwP4H8P53MA/3s4XwP438P5GMD/Hs63AP73DOif
JomcLwH87+F8COB/L8d7AP97OZ4D+N/L8RrA/16OxwD+93K8BfC/l+MpgP+9
a+ufhYkcDwH870XvBfC/Fz0XwP9e9FoA/3vRYwH870VvBfC/Fz0VwP9e9FIA
/3vRQwH870XvBPC/Fz0TwP9e9EoA/3vRIwH870VvBPC/Fz0RwP9e9EIA/3vR
AwH874X3AfzvhecB/O+F1wH874XHAfzvhbcB/O+FpwH874WXAfzvhYcB/O+F
dwH874VnAfzv5fgN4H8vPArgfy+8CeB/LzwJ4H8vvAjgfy88COB/L/N9AP97
mc8D+N/LfB3A/17m4wD+9zLfBvC/l/k0gP+9zJcB/O9lwgngfy/zXQD/e5nP
Avjfy3wVwH/9GDuA/33MNwH872M+CeB/H/NFAP/7mA8C+N/H+R7A/7619M96
RM7XAP736d9Z4X/f5vqnRWKz/gmMiF4O4H/fVvonIyJ6N4D/fejZAP73oVcD
+N+HHg3gf99++udfInoygP996MUA/vcdpX8OIqL3Avjfh54L4H/fAv3TLPFk
/TMEEb0VwP8+9FQA//vQSwH870MPBfC/7zv65x0ieiaA/33olQD+96FHAvjf
h94I4H8feiKA/33ohQD+96EHAvjfB+8D+N8HzwP43wevA/jfB48D+N8HbwP4
3wdPA/jfBy8D+N8HDwP43wfvAvjfB88C+N8HrwL438cbEMD/PngTwP8+eBLA
/z54EcD/fngQwP9+5vsA/vcznwfwv5/5OoD//czHAfzvZ74N4H8/82kA//v1
7+Hwv5/roQD+93O9E8D/fq5nAvjfz/VKAP/7uR4J4H8/1xsB/O/neiKA//1c
LwTwv5/rgQD+96P3A/jfj54P4H8/ej2A//3o8QD+96O3A/jfj54O4H8/ejmA
//3o4QD+96N3A/jfj54N4H8/ejWA//3o0QD+96M3A/jfj54M4H8/ejGA//3o
wQD+96P3Avjfj54L4H8/ei2A//3osQD+96O3Avjfj54K4H8/eimA//3ooQD+
96N3Avjfj54J4H8/eiWA//3okQD+96M3Avjfj54I4H8/eiGA//3ogQD+98P7
AP73w/MA/g8AgwD+D8DjAP4PwNsA/g/A0wD+D8DLAP4PwMMA/g/AuwD+D8Cz
AP4PcL0awP8BrkcD+D/A9WYA/we4ngzg/8B0s56ha4DrwQD+D3C9F8D/Aa7n
Avg/wPVaAP8HuB4L4P8A11sB/B/geiqA/wNcLwXwf4DroQD+D3C9E8D/Aa5n
Avg/wPVKAP8HuB4J4P8A1xsB/B/geiKA/wNcLwTwf4DrgQD+D6D3A/g/gJ4P
4P8Aej2A/wPo8QD+D6C3A/g/gJ4O4P8AejmA/wPo4QD+D6B3A/g/gJ4N4P8A
ejWA/wPo0QD+D6A3A/g/gJ4M4P8AejGA/wPowQD+D6D3Avg/gJ4L4P8Aei2A
/wPwP4D/A/A/gP+D8D+A/4PwP4D/g/A/gP+D8D+A/4PwP4D/g/A/gP+D8D+A
/4PwP4D/g/A/gP+DW5j1I12D8D+A/4NTzfKlrkH4H8L/wW3NWpKuQfgfwv9B
+B/C/0H4H8L/Qfgfwv9B+B/C/0H4H8L/Qfgfwv9B+B/C/0H4H8L/Qfgfwv9B
+B/C/0H4H8L/Qfgfwv9B+B/C/0H4H8L/Qfgfwv9B+B/C/0H4H8L/Qfgfwv9B
+B/C/0H4H8L/Qfgfwv9B+B/C/0H4H8L/Qfgfwv9B+B/C/0H4H8L/Qfgfwv9B
+B/C/0H4H8L/Qfgfwv9B+B/C/0H4H8L/Qfgfwv9B+B/C/0H4H8L/Qfgfwv8h
+B/C/yH4H8L/Ifgfwv8h+B/C/yH4H8L/Ifgfwv8h+B/C/yH4H8L/IV27A/+H
4H8I/4fgfwj/h+B/CP+H4H8I/4fgfwj/h+B/CP+H4H8I/4fgfwj/h+B/CP+H
4H8I/4fgfwj/h+B/CP+H4H8I/4fgfwj/h+B/CP+H4H8I/4fgfwj/h+B/CP+H
4H8I/4fgfwj/h+B/CP+H4H8I/4fgfwj/h+B/CP+H4H8I/4fgfwj/h+B/CP+H
4H8I/4fgfwj/h27TJS9E+B/C/yH4H8L/Ifgfwv8h+B/C/yH4H8L/Ifgfwv8h
+B/C/yH4H8L/Ifgfwv8h+B/C/yH4H8L/Ifgfwn/983QI/4fhfwj/h+F/CP+H
4X8I/4fhfwj/h+F/CP+H19LlQUT4H8L/4Ym6xIi4uf7ZnQj/Q/g/DP9D+D+8
lS5hIML/EP4Pw/8Q/g/D/xD+D8P/EP4P76dLG4jwP4T/w4fpEiAi/A/h/zD8
D+H/MPwP4f8w/A/h//DJukyMCP9D+D8M/0P4P3ymWdfVNQz/Q/g/DP9D+D8M
/0P4Pwz/Q/g/DP9D+D8M/0P4Pwz/Q/g/DP9D+D8M/0P4Pwz/Q/g/DP9D+D8M
/0P4Pwz/Q/g/DP9D+D8M/0P4Pwz/Q/g/DP9D+D8M/0P4Pwz/Q/g/DP9D+D8M
/0P4P8wbEcL/Yfgfwv9h+B/C/xEmnRD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6P
wP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6P
wP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6P
wP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6P
wP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6P
wP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6PwP8Q/o/A/xD+j8D/EP6P
wP8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6P
wv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6P
wv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6P
wv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6P
wv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6P
wv8Q/o/C/xD+j8L/EP6Pwv8Q/o/C/xD+j8L/EP6Pwv8Q/o/B/xD+j8H/EP6P
wf8Q/o/B/xD+j8H/EP6Pwf8Q/o/B/xD+j8H/EP6P6XpQ+D8G/0P4Pwb/Q/g/
NtUsV+4ag/8R/B+D/xH8H4P/Efwfg/8R/B+D/xH8H4P/Efwfg/8R/B+D/xH8
H4P/Efwfg/8R/B+D/xH8H4P/Efwfg/8R/B+D/xH8H4P/Efwfg/8R/B+D/xH8
H4P/Efwfg/8R/B+D/xH8H4P/Efwfg/8R/B+D/xH8H4P/Efwfg/8R/B+D/xH8
H4P/Efwfg/8R/B+D/xH8H4P/Efwfg/8R/B+D/xH8H4P/Efwf+5tZH9s1Bv8j
+D8G/yP4/ybzcgT/31xo1st2vam/F/x/k+Mugv9vMi9EcP8tzosI7r/FvBXB
/bfgfQT33+L4iuD+W5z/Edx/C25GU2QaGk2iJiJ6Imom8n5HLUTOx6iVyHwZ
tck0XT4TtRPRG1EHkeMh6iRyvkZTiRREXUTezGhLInok2orI8RJNI3I+Rx8n
Mt9G04nwMMqJ6JVoayLHU7QNkfM92pbIfBxtR4SX0SeI6JloeyLHW7QDkfkg
2pHIfB3tRISn0c5E9E60C5HjMdqVyHwR7UZkPo92J8LbaA8ieijak8jxGu1F
1L7tTdS+7UOEx9G+RO3ffkSO52h/IvNNdAARHkQHEuF19Ekieio6iMjxHh1M
ZD6KDiHCi+hQIjyPPkVEb0WHETkfosOJuh56BlHXQR9B1PXPRxLRY9FRRM6X
aCaR+Sw6mghvomOI6IHoWCJ6LZpF5HyKjiMy30WfJrbrEkEieiGaQ+zUpf5E
Pd/mEbt0CTcRXkUnENET0XziNF3GS9TzcSGR+TJaRIRn0YnErXW5NRE9GJ1M
1PP1M0Tm0+gUIryLPktEj0SnEtGL0eeIej5/nsh8G32BCA+jLxLRK9GXiOjJ
6MtEPd+/QmQ+jk4jwsvodCJ6JjqDiN6MziTqfPBVIvN19DUiPI2+TkTvRN8g
okejbxJ1vvgWkfk8+jYR3kZnEdFD0dlE9Gr0HeIhZt35NDSaROcQ4XF0LhG9
FH2PiJ6Nvk/U+eYHRHgQnUeE19H5RPRU9EOiro/8EVHnowuI8CK6kAjPo4uI
6K3oYiJ6OLqEqPPVpUR4Ev2YCO+jy4josehyIno5uoKo89mVRHgTXUVED0RX
E3VeuIao88K1RJ0XfkLUeeE6os4LPyWi56Lriejt6GdEnQ9vIMKr6EYieiL6
ORG9F/2CiB6PfknU+fImIjyLfkVEb0S/JqIHo5uJ6PXoN0SdT39LhHfR74jo
kej3RPRidAsRPR/dStT59jYiPIxuJ6JXojuI6MnoTiJ6P/oDUefju4jwMrqb
iJ6J7iGiN6N7iVwPRPcRdb7+IxGeRvcT0TvRA0T0aPQgkeuF6CGizucPE+Ft
9AgRPRQ9SkSvRo8RuZ6IHifqfP8nos6XTxB1vvwzET0bPUnUefMpovLgaSK8
jp4hoqeivxDRu9GzRK5HoueIyovnifA8eoGI3or+SkQPRy8SuV6JXiIqT14m
wvvob0T0WPR3Ino5+geR65noFaLy5lUieiD6JxG9Fr1GRE9HNSLXO1FBVB51
E9EL0etE9FzUQ0RvR71EroeiPqLyqp+InogGiOi9aJCIHo+GiFwvRcNE5dkI
Eb0RjRLRg9EYEb0evUHkeip6k6i8e4uIHoneJqIXo3eI6PnoXSLXW9F7xPvN
15KmodEk9ojoydgnovfjgMj1WBwS4WUcEdEzcUxEb8YJkeuBOCWiZ+KMiN6M
JxC5HoiXIHK9Fi9JhKfxUkT0Trw0keuEeBki13Hxx4jon3hZItcN8XJEruvi
5YlwN16BiC6KVySiW+OViFxXxCsTue6LVyFyXR6vSkTPxqsRud6IVydyPRiv
QeR6PV6TiJ6K1yKid+O1iVyPxOsQ4W+8LhHuxusR4W68PhHuxhvINF2uGm9I
hLvxRkS4G29MhLvxRCLcjScRKYw3IdLUeFMi3I03I8LdeHNipkvliXA33oII
d2P4jzaSGP6jjSSG/2gjieE/2khi+I82khj+o40khv9oI4nhP9pIYviPNpIY
/qONJIb/aCOJ4T/aSGL4jzaSGP6jjSSG/2gjieE/2khi+I82khj+o40khv9o
I4nhP9pIYviPNpIY/qONJIb/+t2hGP6jjSSG/2gjieE/2khi+K/fJYrhP9pI
YviPNpIY/kdwN4b/aCSJ4T8aSWL4j0aSGP6jkSSG/5F+1wj+o5Ekhv9oJInh
PxpJYviPRpIY/qORJIb/aCSJ4T8aSWL4j0aSGP6jkSSG/2gkieE/Gkli+I9G
khj+o5Ekhv9oJInhPxpJYviPRpIY/qORJIb/aCSJ4T8aSWL4j0aSGP6jkSSG
/2gkieE/Gkli+I9Gkhj+o5Ekhv9oJInhPxpJYviPRpIY/qORJIb/aCSJ4T8a
SWL4j0aSGP6jkSSG/2gkieE/Gkli+I9Gkhj+o5Ekhv9oJInhPxpJYviPRpIY
/qORJIb/aCSJ4T8aSWL4j0aSGP6jkSSG/2gkieE/Gkli+I9Gkhj+o5Ekhv9o
JInhPxpJYviPRpIY/qORJIb/aCSJ4T8aSWL4j0aSGP6jkSSG/2gkieE/Gkli
+I9Gkhj+o5Ekhv9oJInhPxpJYviPRpIY/qORJIb/aCSJ4T8aSWL4j0aSGP6j
kSSG/2gkieE/Gkli+I9Gkhj+o5Ekhv9oJInhPxpJYviPRpIY/qORJIb/aCSJ
4T8aSWL4j0aSGP6jkSSG/2gkieE/Gkli+I9Gkhj+o5Ekhv9oJInhPxpJYviP
RpIY/qORJIb/aCSJ4T8aSWL4j0aSGP6jkSSG/2gkieE/Gkli+I9Gkhj+o5Ek
hv9oJInhPxpJYviv382L4T8aSWL4j0aSGP6jkSSG/2gkieE/Gkli+I9Gkhj+
o5Ekhv9oJInhPxpJYviPRpIY/qORJIb/aCSJ4T8aSWL4j0aSGP6jkSSG/2gk
ieE/Gkli+I9Gkhj+o5Ekhv9oJInhPxpJYviPRpIY/qORJIb/aCSJ4T8aSWL4
j0aSGP6jkSSG/2gkieE/Gkli+I9Gkhj+o5Ekhv9oJInhPxpJYviPRpIY/qOR
JIb/aCSJ4T8aSWL4j0aSGP6jkSSG/2gkieE/Gkli+I9Gkhj+o5Ekhv9oJInh
PxpJYviPRpIY/qORJIb/aCSJ4T8aSWL4j0aSGP6jkfQ7ktPQSBLDfzSSxPAf
jSQx/EcjSQz/I+Uu/I+Uu/A/Uu7C/0i5C/8j5S78j5S78D9S7sL/SLkL/yPl
LvxHI0kM/9FIEsN/NJLE8B+NJDH8RyNJDP/RSBLDfzSSxPAfjSQx/Ecj6VeQ
p6GRJIH/aCRJ4D8aSRL4j0aSBP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9o
JEngPxpJEviPRpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6jkSSB/2gkSeA/GkkS
+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6j
kSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/uvXVBL4j0aS
BP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/
aCRJ4D8aSb9DOw2NJAn8RyNJAv/RSJLAfzSSJPAfjSQJ/EcjSQL/0UiSwH80
kiTwH40kCfxHI0kC/9FIksB/NJIk8B+NJAn8RyNJAv/RSJLAfzSSJPAfjSQJ
/EcjSQL/0UiSwH80kiTwH40kCfxHI0kC/9FIksB/NJIk8B+NJAn8RyNJAv/R
SJLAfzSSJPAfjSQJ/EcjSQL/0UiSwH80kiTwH40kCfxHI0kC/2P9bjH8j/X7
xPAfjSQJ/EcjSQL/0UiSwH80kiTwH40kCfxHI0kC/9FIksB/NJIk8B+NJAn8
RyNJAv/RSJLAfzSSfl95GhpJEviPRpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6j
kSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/aCRJ
4D8aSRL4j0aSBP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviP
RpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ek
gf9oJEngPxpJEviPRpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6jkSSB/2gkSeA/
GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/aCRJ4D8aSRL4j0aS
BP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/
aCRJ4D8aSRL4j0aSBP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJ
EviPRpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6jkSSB/2gkSeA/GkkS+I9GkgT+
o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6jkSSB/2gk
SeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/aCRJ4D8aSRL4
j0aSBP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/qOR
JIH/aCRJ4D8aSRL4j0aSBP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEng
PxpJEviPRpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6jkSSB/2gkSeA/GkkS+I9G
kgT+o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/aCRJ4D8aSRL4j0aSBP6jkSSB
/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE/qORJIH/aCRJ4D8a
SRL4j0aSBP6jkSSB/2gkSeA/GkkS+I9GkgT+o5Ekgf9oJEngPxpJEviPRpIE
/qORdLuRaWgkSeE/GklS+I9GkhT+o5Ekhf9oJEnhPxpJUviPRpIU/qORJIX/
aCRJ4T8aSVL4j0aSFP6jkSSF/2gkSeE/GklS+K/7SKTwH40kKfxHI0kK/9FI
ksJ/NJKk8B+NJCn8RyNJCv/RSJLCfzSSpPAfjSQp/EcjSQr/0UiSwn80kqTw
H40kKfxHI0kK/9FIksJ/NJKk8B+NJCn8RyNJCv/RSJLCfzSSpPAfjSQp/Nev
p6bwH40kKfxHI0kK/9FIksJ/NJKk8B+NJCn8RyNJCv/RSJLCfzSSpPAfjSQp
/EcjSQr/0UiSwn80kqTwH40kKfxHI0kK/9FIksJ/NJKk8B+NJCn8RyNJCv/R
SJLCfzSSpPAfjSQp/EcjSQr/0UiSwn80kqTwH40kKfxHI0kK/9FIksJ/NJKk
8B+NJCn8RyNJCv/RSJLCfzSSpPAfjSQp/EcjSQr/0UiSwn80kqTwH40kKfxH
I0kK/9FIksJ/NJKk8B+NJCn8RyNJCv/RSJLCfzSSpPAfjSQp/EcjSQr/0UiS
wn80kqTwX/cZSeE/GklS+I9GkhT+o5Ekhf9oJEnhPxpJUviPRpIU/qORJIX/
aCRJ4T/aSFL4jyaSFP6jiSSF/2giSeE/mkhS+I8mkhT+o4kkhf9oIknhP5pI
UviPJpIU/qOJJIX/aCJJ4T+aSFL4jyaSFP6jiSSF/2giSeE/mkhS+I8mkhT+
o4kkhf9oIknhP5pIUviPJpIU/qOJJIX/aCJJ4T+aSFL4jyaSFP6jiSSF/2gi
SeE/mkhS+I8mkhT+o4kkhf9oIknhP5pIUviPJpIU/qOJJIX/aCJJ4T+aSFL4
r3u4pPAfTSQp/EcTSQr/0USSwn80kaTwH00kKfxHE0kK/9FEksJ/NJGk8B9N
JCn8RxNJCv/RRJLCfzSRpPAfTSQp/EcTSQr/0USSwn80kaTwH00kKfxHE0kK
/9FEksJ/NJGk8B9NJCn8RxNJCv/RRJLCfzSRpPAfTSQp/EcTSQr/0USSwn80
kaTwH00kKfxHE0kK/9FEksJ/NJGk8B9NJCn8RxNJCv/RRJLCfzSRpPAfTSQp
/EcTSQr/0USSwn80kaTwH00kKfxHE0kK/9FEksJ/NJGk8B9NJCn8RxNJCv/R
RJLCfzSRpPAfTSQp/EcTSQr/0USSwn80kaTwH00kKfxHE0kK/9FEksJ/NJGk
8B9NJCn8RxNJCv/RRJLCfzSRpPAfTSQp/EcTSQr/0USSwn80kaTwH00kKfxH
E0kK/9FEksJ/NJGk8B9NJCn8RxNJCv/RRJLCfzSRpPAfTSQp/EcTSQr/0USS
wn80kaTwH00kKfxHE0kK/9FEksJ/NJGk8B9NJCn8RxNJCv/RRJLCfzSRpPAf
TSQp/EcTSQr/0USSwn80kaTwH00kKfxHE0kK/9FEksJ/NJGk8B9NJCn8RxNJ
Cv/RRJLCfzSRpPAfTSQp/EcTSQr/0USSwn80kaTwH00kKfxHE0kK/9FEksJ/
NJGk8B9NJCn8RxNJCv/RRJLCfzSRpPAfTSQp/EcTSQr/0USSwn80kaTwH00k
KfxHE0kK/9FEksJ/NJGk8B9NJCn8RxNJCv/RRJLCf7SQpPA/Uc7D/0Q5D/8T
5Tz8RwvptmLT0EKSwX+0kGTwHy0kGfxHC0kG/9FCksF/tJBk8B8tJBn8RwtJ
Bv/RQpLBf7SQZPAfLSQZ/EcLSQb/0UKSwX+0kGTwHy0kGfxHC0kG/9FCksF/
tJBk8B8tJBn8RwtJBv/RQpLBf7SQZPAfLSQZ/EcLSQb/0UKSwX+0kGTwHy0k
GfxHC0kG/9FCksF/tJBk8B8tJBn8RwtJBv/RQpLBf91+IoP/aCHJ4D9aSDL4
jxaSDP6jhSSD/2ghyeA/Wkgy+I8Wkgz+o4Ukg/9oIcngP1pIMviPFpIM/qOF
JIP/aCHJ4D/aRTL4j3aRDP6jXSSD/2gXyeA/2kUy+I92kQz+o10kg/9oF8ng
P9pFMviPdpEM/qNdJIP/aBfJ4D/aRTL4j3aRDP6jXSSD/2gXyeA/2kUy+I92
kQz+o10kg/9oF8ngP9pFMviPdpEM/qNdJIP/aBfJ4D/aRTL4n+r+XvA/1X29
4D/aRTL4j3aRDP6jXSSD/2gXyeA/2kUy+I92kQz+o10kg/9oF8ngP9pF9wub
hnaRDP6jXSSD/2gXyeA/2kUy+I92kQz+o10kg/9oF8ngP9pFMviPdpEM/qNd
JIP/aBfJ4D/aRTL4j3aRDP6jXSSD/2gXyeA/2kUy+I92kQz+o10kg/9oF8ng
P9pFMviPdpEM/qNdJIP/aBfJ4D/aRTL4j3aRDP6jXSSD/2gXyeA/2kUy+I92
kQz+o10kg/9oF8ngP9pFMviPdpEM/qNdJIP/aBfJ4D/aRTL4j3aRDP6jXSSD
/2gXyeA/2kUy+I92kQz+o10kg/9oF8ngP9pFMviPdpEM/qNdJIP/aBfJ4D/a
RTL4j3aRDP6jXSSD/2gXyeA/2kUy+I92kQz+o10kg/9oF8ngP9pFMviPdpEM
/qNdJIP/aBfJ4D/aRTL4j3aRDP6jXSSD/6nuywj/0S66P9w0tItk8B/tIhn8
R7tIBv/RLpLBf7SLZPAf7SIZ/Ee7SAb/0S6SwX+0i2TwH+2i+z1OQ7tIBv/R
LpLBf7SLZPAf7SIZ/Ee7SAb/0S6SwX+0i2TwH+0iGfxHu0gG/9EuksF/tItk
8B/tIhn8R7tIBv/RLpLBf7SLZPAf7SIZ/Ee7SAb/0S6SwX+0i2TwH+0iGfxH
u0gG/9EuksF/tItk8B/tIhn8R7tIBv/RLpLBf7SLZPAf7SIZ/Ee7SAb/0S6S
wX+0i2TwH+0iGfxHu0gG/9EuksF/tItk8B/tIhn8R7tIBv/RLpLBf7SLZPAf
7SIZ/Ee7SAb/0S6SwX+0i2TwH+0iGfxHu0gG/9EuksF/tItk8B/tIhn8R7tI
Bv/RLpLBf7SLZPAf7SIZ/Ee7SAb/0S6SwX+0i2TwH+0iGfxHu0gG/9EuksF/
tItk8B/tIhn8R7tIBv/RLpLBf7SLZPAf7SIZ/Ee7SAb/0S6SwX+0i2TwH+0i
GfxHu0gG/9EuksF/tItk8B/tIhn8R7tIBv/RLpLBf7SLZPAf7SIZ/Ee7SAb/
0S6SwX+0i2TwH+0iGfxHu0gG/9EuksF/tItk8B/tIhn8R7tIBv/RLpLBf7SL
ZPAf7SIZ/E+V1/A/VV7D/1R5Df9T5TX8T5XX8D9VXsP/VHkN/1PlNfxPldfw
P1Vew3+0i24fOg3tIhPgP9pFJsB/tItMgP9oF5kA/9EuMgH+o11kAvxHu8gE
+I92kQnwH+0iE+A/2kUmwH+0i0yA/2gXmQD/0S4yAf6jXWQC/Ee7yAT4j3aR
CfAf7SIT4D/aRSbAf7SLTID/aBeZAP/RLjIB/qNdZAL8T98z+5zZPVHNv/f4
V99jNS5tdPmpcWommD0FZyycMfno+TPm2P3YPjtOne6R1HbEvJOPnz1v4cRj
Zi6Y/K991tb5/DqfmTlj/hZz5s1deOxm6+hzrTNtnX+lJ9mnObW+X2r5Ob36
XmyfG+fn6Y6m0+o/b3J938r/k5/7ecfP7TZ7vX345+qeUK3v/54Ljp89a+HE
OUcffPD7O0seeuhm6+jtzT+4Y9Jm60yePHmS2TNu/J/VY/aR+/DP0v2uNvqv
/QzzsC87nr/P7Ev34efX/bAmm+effNTMo2csmv1f/DmnOX7OgNnv7sM/R29n
9jibeHS972c4nmPI7JH34efQPcuW+bdXI2YfvfGfZ8Tsrffh59E9ydY4+ODJ
HxzS/M6brfOvZ51k9uIb/znHzP58H35OFcLpOvyrv8/fHKdGtzncbeLRi+Ye
uXDWvLkTT95snVmT1pl19DoTZy2YPGfGwvmzTp44a9KkdWb869bJkw4+eNah
h66jO5uuw8N0e+X375ykj7dP/61xXqtv9g60+wh+u74f8wd53U+w6+J367Vn
jZN/Q/cWrOfPHic/qnsO1vPfGSc/rHsR1vPfHSc/qHsU1vPnjJPv170L6/lz
x8n36p6G9fz3xsm/rnsd1vPfHydfvFf/Z/ZD/FD+rr3quaXMPonjHQt2z8jz
x3nsPvX9Fdc2eyp++LFLmv0PdS9E3RdR90jU/RJ170TdR1H3VNT9FXWvRd13
0e7B+KP6a/HME5n9Gv3m94+7/82R/TeMCf+BscR/cCz5Hxzef3D4/5cj+A+O
sMGI/oMj/m8Yyf+j8Z+eJyb8N4yP5or//rnif9Jc8l+dU/5PR/TfMP6/NA9d
MI5eNsdBU7O560Jn3myPLhc581PMXRePkzfH8VR71yWufKe961JXvsPe9WNX
vt3edZkr32bvutyVb7V3XeHKt9i7rnTlbfvkKlfetk+u/rCOvf/HJQ18TYUG
vnacx15e39t7bbOf94cfG5g9tXV/bbvX9nWL61vdB9zoW++j8f/74X80Phof
jY/G/1BN+NH4aPzfjp+Oo5FurGuhTY23yYc0ku5n3D3R7HWp+17qHpi6H6bu
jan7ZOqembp/pu6lqftq6h6but+m7r2p+3Dqnpy6P6fu1an7duoenrqfp+7t
qft86p6fuv+n7gWq+4LqHqG6X6juHar7iOqeorq/qO41qvuO6h6kuh+p7k2q
+5TqnqW6f6nuZar7muoep7rfqe59qvug6p6ouj+q7pWq+6bqHqq6n6rurar7
rOqeq7r/qu7Fqvuy6h6tul+r7t2q+7jqnq66v6vu9ar7vuoesLofrO4Nq/vE
6p6xun+s7iWr+8rqHrO636zuPav70OqetLo/re5Vq/vW6h62up+t7m2r+9zq
nre6/63uhav74uoeubpfru6dq/vo6p66ur+u7rWr++7qHry6H6/uzav79Oqe
vbp/r+7lq/v66h6/ut+v7v2r+wDrnsC6P7DuFaz7BusewrqfsO4trPsM657D
uv+w7kWs+xLrHsW6X7HuXaz7GOuexrq/se51rPse6x7Iuh+y7o2s+yTrnsm6
f7Lupaz7Kusey7rfsu69rPsw657Muj+z7tWs+zbrHs66n7Pu7az7POuez7r/
s+4FrftC6x7Rul+07h2t+0jrntK6v7TuNa37Tuse1Lofte5NrftU657Vun+1
7mWt+1rrHte637Xufa37YOue2Lo/tu6Vrftm6x7aup+27q2t+2zrntu6/7bu
xa37cuse3bpft+7drft4657eur+37vWt+37rHuC6H7juDa77hOue4bp/uO4l
rvuK6x7jut+47j2u+5DrnuS6P7nuVa77luse5rqfue5trvuc657nuv+57oWu
+6LrHum6X7runa77qOue6rq/uu61rvuu6x7suh+77s2u+7Trnu26f7vu5a77
uuse77rfu+79rvvA657wuj+87hWv+8brHvK6n7zuLa/7zOue87r/vO5Fr/vS
6x71ul+97l2v+9jrnva6v73uda/73use+Lofvu6Nr/vk6575un++7qWv++rr
Hvu6377uva/78Oue/Lo/v+7Vr/v26x7+up+/7u2v+/zrnv+6/796AagvgHoE
qF+Aegeoj4B6Cqi/gHoNqO+AehCoH4F6E6hPgXoWqH+Behmor4F6HKjfgXof
qA+CeiKoP4J6JahvgnooqJ+Ceiuoz4J6Lqj/gnoxqC+DejSoX4N6N6iPg3o6
qL+Dej2o74N6QKgfhHpDqE+Eekaof4R6SaivhHpMqN+Eek+oD4V6Uqg/hXpV
qG+Felion4V6W6jPhXpeqP+FemGoL4Z6ZKhfhnpnqI+Gemqov4Z6bajvhnpw
qB+HenOoT4d6dqh/h3p5qK+Henyo34d6f6gPiHqCqD+IeoWob4h6iKifiHqL
qM+Ieo6o/4h6kagviXqUqF+Jepeoj4l6mqi/iXqdqO+JeqCoH4p6o6hPinqm
qH+Keqmor4p6rKjfinqvqA+LerKoP4t6tahvi3q4qJ+Leruoz4t6vqj/i3rB
qC+MesSoX4x6x6iPjHrKqL+Mes2o74x60KgfjXrTqE+Netaof4162aivjXrc
qN+Net+oD4564qg/jnrlqG+Oeuion45666jPjnruqP+OevGoL4969Khfj3r3
qI+Pevqov496/ajvj3oAqR+QegOpT5B6Bql/kHoJqa+Qegyp35B6D6kPkXoS
qT+RehWpb5F6GKmfkXobqc+Reh6p/5F6IakvknokqV+Seiepj5J6Kqm/knot
qe+SejCpH5N6M6lPk3o2qX+Tejmpr5N6PKnfk3o/qQ+UekKpP5R6RalvlHpI
qZ+Uekupz5R6Tqn/lHpRqS+VelSpX5V6V6mPlXpaqb+Vel2p75V6YKkflnpj
qU+Wemapf5Z6aamvlnpsqd+Wem+pD5d6cqk/l3p1qW+Xenipn5d6e6nPl3p+
qf+XeoGpL5h6hKlfmHqHqY+Yeoqpv5h6janvmHqQqR+ZepOpT5l6lql/mXqZ
qa+Zepyp35l6n6kPmnqiqT+a9Ur72Tj65xd1X7eljJfbeJ8vWT++G8d57E11
D7gNje/bhx8bmb2ldJ8p3XNK958ye1HJL+qevYvprLx9mQe+2zXp3rz5mgM/
dsRuf8pbz13lnIW/Py5v33KNbTe74pS849je1icvPSJvv+cTl95/+1fyjk2v
+Ns+o4/k7X/Za9WHk8PytqYbvnbJxnvn7bucHGz/3KF521Uvfzn/9Rfz9iOW
3Om3n2rLO9q+ve73974l73jx1qVen/itvOPbg7sdt9JaeWv3g/x7KO847aA1
rkub8o7bzv7+7867L28/dcVdzzssyTtmbTJlv+YZefudB/UcufbX887tfn/c
5994Nu+4ac4hb173l7ztzJnvfP0vv807n75qzVd++ETe3nr1Hfv+8Yy8behH
vMCxvOMA+zo6H5n3+NoD/8g7ixVvWlD7Rd5xxsvFGttunk+9+uPb8Mx56yX6
8vfNO5b8xrbf+1Kcd5z58DMrnblp3rln/K2bf3tv3vHgST/89J435lOvXWmt
PU48PO+8yubbzz9niRdf+FPeefeZ5zz/g5F86pR5s7Y7pjPvrE269zNX3pS3
7sDDbhjIp5534GemPfOFfOpv3np19je2y7t+csIiOpJPPeHY+Tesc3feGe+6
xVc+u3Petc2MU1f/y1751JeeenbozHfy1u9Gv/cum5tP/f6EK6nIt7zuO4/t
vuVD+dRTuXfyz/Pm5Q86/cxzXsinPv6CPPbrlfOu/ZvGLjl7ct65/ipv77nj
yvnUn/j6BuRTZ/J2PfxM3nXmF1vn3P1kvuXdr73EO5ZP/dWyrWFtl7zr6p/+
5OL9fpR3Tvrm5ydusETe+fCtf718+it5+zUnP/HO4K/yrhf/cfjWX+vIO7s+
1Tb91J68vfPh47ve+kLe0mafd+oF+rCT86ZPfvo3PEPeccfmJzWddXfetfp1
Jyz5c37PtfTlfTJvX9b+vi2P8my73JtP6bE/p+3WG+9qvv/AvGOprdqXbY3y
lhu63vr8dyTvmnLZUxOmnZB37rHfj6Yl9+UdF9Tfn5+cvtbNe3Xzc9OmjV77
TN7RutlWF3Xfnk99/fH+a956Ne9c8rYbDz5get659S1XLHvBi3nHLrR92+/n
7YfR5fW78vbpWw8s99SCvP23y3DAnZ933LDOXRwxeddnOna556q+vP3xz/78
3bvn5FM/98wXjvjV9fnUpR94a8WbFuadm/zimEveyPL2C7f5wx97Hszbhnn2
RaN5e+26Z/758W3+dfy3/+ZTF62e/jBvv/0ry839wbfyzgM21Tcib/vZr19b
5o35efuvP/bApE9dlLfv+MupnHF5e3HevS9/eeu84+D6+TZBD/csbztLjn32
G9flrQ9pO6O8/bGz7g6/NC9fg2bscuiD+aSw+f4Drjozb7rZHl/NM5/sPOOT
u+ST7hzr+OWPW/MV1//xBRy5eeutn9t/9tDa+Spkdx7qz9vXpd0HXJ23vk3b
bruR/M17FaevnW/y9j3TV1guzjd9+VfXf27/OXlHTQ+7z+bNj9rzdpO/7vgF
Zoq87fqz3/vBBgvz1qd5FUfyfBfs/+dHrn04b93n0VNPu+n5vPnbenr4ees1
Ow/1Pf2JvGObQn+xvInirdc5JF/ldH4LmZWvf06L/subWy5YmiMhn/TKaxxw
Q/mURftstPIdt/J4e750HHbq6985dkHeuZI9vtvuOyweOXf7vOn64/VAySc9
vcn5U25dOt/0ag6Hk/+ct1yh09Ry+cTROzgALsw3adbDYk7edO4xnWt+7ra8
ZXt+zej3+boP7fHXLY86KF//Uj3tVss7Jtn5r/Ouw6896s6xvOUfnTrx5R1X
2tfV/GV7nm0wXw+YK/OWLcjO+Ec+ZYU/nt43b1be/M7xesDmTTfYfrVOs8dz
WzBj+Xz3K/K2h3Ua3Cpvn5rpiZK37s3Rscdf8w18ZqnWuXnTKvY8XE5f/dzz
8jVPPOxp7slX1sP3e1/KN9BZZtNP55M5CHmCPDKn38r5OmZaOzZP+57e7tHl
r8k3mmSPvxV/ey8H2mH5+mbaaM8n1s/fqX8yE3DetOMP/UUbbp9Pqc9rU/jl
Dnx51Xz9N+zrmxLbeadpNaaZ58/LW+/R6XDZvGMr3o75N+RTBv7+7a+f8ELe
dLsepifkzUtwmiwo8g3n2b40b2ePzy3M9BDkq13/ir6BeduJ526/4EtP5+16
GBz7XL5Ftz1f2977xx/XXOHveev12pYt85YD7Pv3/nwwZZI9HlqGmMU6z8hb
b9HDet18i4PXe/Qfh2+TT1lzhb/9/k8H5xv12Xm49bP2vF9/o/px9enjXv3z
0Y/k6+psf/i1edumr7+57buH5lPaRt5Z973JedORtp9bXP78FqtdzPH3PdvX
5juYru65Om954MUXHv8qx7nB0Pp5666vBpzSefN3v6oTYt7UfcUpJ89eL2+9
WN+2/fMpdR60pvY8b2tR7O2Rt45xuq11c976Neg4/XN56wtf+fuG1zMPbmLf
h5avvHsIb1neup3lWLN52dvkzZmdn1r6zYmRt55l57HW5s2X3j9cNW/p2lYf
mLf81M4XU3a1HH3//lZt97PfzNsm2/m2ZZuzDpk4/Ie8Obfz1Pu/xwZi38+W
hy8HqPfnrd9QeXBKPuWLF+6015evzVs3q/+e87o58X+St0b2fG4+2Rxwees6
evrwe19pufZ+bO6z72PL8z/XF5y3/nP4zrMOof7RI3Z7vJ/nfWTj323RfUDe
9jFkwL1/y1tEcTU1bzOH2XF524DlY/sDioEN8/bX9XSZlre3W13S9ssfM5Pc
xvxtudlyxp0b8ZLzyZf9/k8Hnf7VvON3Vre0Iip4orylY8I0zlh4rvJhs7zj
Nft+dLzC7LLgy3lnpqf1dnnTfGhwyFt52z9nnvuzPZbOW06r7fzNFXfL2zcw
E23ePvGfPMOP8o4fGUGUdyS9F/Ib5u332Xm5Y8C+ns7rtA0cN1/jqFjz83nL
95ZYZuPfTcmnntiH0Phd3ta7x1Kn7eahX+z807GL5Wfno5ZPnduNInjQPwv1
cNo9bz/ugKvOuHPjvG0rM33+a/7vPOO5Q4/86tF556m/gQAn5507fIKJjN9z
RfvzOoHQDp+Ymncup4m2vHV1e/6039yhHczbB69R4ZW3P2/Pp85+y4up9eOp
42jzj76ZCSnvvNWe31Ob7DzT8abVhZ07Z/4L8ng+5YhrEEp/zdsvY/o/GE7v
bvnQccvnbtvxC3D0QZWJ0/PWtS1fNn+Vw2D/J/OmCy1/227Upzs+b39v8o7/
vGqtvOUalVdL5G1PWh3X9tbO60+9vTtv/cK6CI+z85bv3qITb96eWX3W/q7l
W/OFnOU7vvav+aOTLvGO5q1vWr32r9/z1LreO7uuV7uZZTY/Ke84UGUxOu5M

==> 308.reply.2 <==
From pd@biostat.ku.dk  Wed Dec  8 22:17:54 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA23822;
	Wed, 8 Dec 1999 22:17:54 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id WAA10119;
	Wed, 8 Dec 1999 22:20:57 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Ulf Mehlig <umehlig@uni-bremen.de>
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: R abnormal exit when plotting lm (PR#308)
References: <199911022114.WAA14796@pubhealth.ku.dk> <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk> <199912081930.UAA03462@pandora3.localnet>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Dec 1999 22:20:57 +0100
In-Reply-To: Ulf Mehlig's message of "Wed, 8 Dec 1999 20:30:47 +0100"
Message-ID: <x2iu29jfie.fsf@blueberry.kubism.ku.dk>
Lines: 34
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Ulf Mehlig <umehlig@uni-bremen.de> writes:

>  Dear R-developers,
> 
>  recently I sent a bug report about plot(aov()) crashing R (resp. the
>  X Windows part of R) without reporting the data I used.
> 
>  In the meantime, I discovered, that the problem is due to a .RData
>  file -- without it, there is no crash, with that .RData loaded, the
>  following small sequence of commands crashes R 0.90, too, on my
>  machine. R had been started with "--vsize 16M --nsize 4000k":
> 
>  ----------------------------------------------------------------------
>  
>  > x <- data.frame(id=rep(c("a", "b", "c"), 100), val=rnorm(1:300))
>  > plot(aov(val ~ id, data=x))
>  Hit <Return> to see next plot: 
>  Hit <Return> to see next plot: 
>  Hit <Return> to see next plot: 
>  X Error of failed request:  BadValue (integer parameter out of range for operation)
>    Major opcode of failed request:  53 (X_CreatePixmap)
>      Value in failed request:  0x0
>        Serial number of failed request:  1229
>          Current serial number in output stream:  1235
> 
> 	 Process R exited abnormally with code 1 at Wed Dec  8 19:25:58 1999

Happens here too. Will have a look.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 308.reply.3 <==
From pd@biostat.ku.dk  Wed Dec  8 22:26:39 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA23867;
	Wed, 8 Dec 1999 22:26:39 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id WAA10155;
	Wed, 8 Dec 1999 22:29:42 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: Ulf Mehlig <umehlig@uni-bremen.de>, r-devel@stat.math.ethz.ch,
        R-bugs@biostat.ku.dk
Subject: Re: R abnormal exit when plotting lm (PR#308)
References: <199911022114.WAA14796@pubhealth.ku.dk> <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk> <199912081930.UAA03462@pandora3.localnet> <x2iu29jfie.fsf@blueberry.kubism.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Dec 1999 22:29:42 +0100
In-Reply-To: Peter Dalgaard BSA's message of "08 Dec 1999 22:20:57 +0100"
Message-ID: <x2g0xdjf3t.fsf@blueberry.kubism.ku.dk>
Lines: 43
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Ulf Mehlig <umehlig@uni-bremen.de> writes:
> 
> >  Dear R-developers,
> > 
> >  recently I sent a bug report about plot(aov()) crashing R (resp. the
> >  X Windows part of R) without reporting the data I used.
> > 
> >  In the meantime, I discovered, that the problem is due to a .RData
> >  file -- without it, there is no crash, with that .RData loaded, the
> >  following small sequence of commands crashes R 0.90, too, on my
> >  machine. R had been started with "--vsize 16M --nsize 4000k":
> > 
> >  ----------------------------------------------------------------------
> >  
> >  > x <- data.frame(id=rep(c("a", "b", "c"), 100), val=rnorm(1:300))
> >  > plot(aov(val ~ id, data=x))
> >  Hit <Return> to see next plot: 
> >  Hit <Return> to see next plot: 
> >  Hit <Return> to see next plot: 
> >  X Error of failed request:  BadValue (integer parameter out of range for operation)
> >    Major opcode of failed request:  53 (X_CreatePixmap)
> >      Value in failed request:  0x0
> >        Serial number of failed request:  1229
> >          Current serial number in output stream:  1235
> > 
> > 	 Process R exited abnormally with code 1 at Wed Dec  8 19:25:58 1999
> 
> Happens here too. Will have a look.

Reproduce without the .RData file with

 X11(point=16,h=5,w=5)
 x <- data.frame(id=rep(c("a", "b", "c"), 100), val=rnorm(1:300))
 plot(aov(val ~ id, data=x))

(The X11 thing was in .First)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 308.followup.3 <==
From umehlig@uni-bremen.de  Mon Dec 13 17:11:10 1999
Received: from alf.zfn.uni-bremen.de (alf.zfn.uni-bremen.de [134.102.20.22])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA11064;
	Mon, 13 Dec 1999 17:11:09 +0100 (MET)
Received: from pandora3.localnet (root@tnt44.zfn.uni-bremen.de [134.102.7.44])
	by alf.zfn.uni-bremen.de (8.9.1a/ZfNServer) with ESMTP id RAA108094;
	Mon, 13 Dec 1999 17:08:19 +0100
Received: (from umehlig@localhost)
	by pandora3.localnet (8.9.1/8.9.1) id RAA03205;
	Mon, 13 Dec 1999 17:02:48 +0100
Date: Mon, 13 Dec 1999 17:02:48 +0100
From: Ulf Mehlig <umehlig@uni-bremen.de>
Message-Id: <199912131602.RAA03205@pandora3.localnet>
X-Authentication-Warning: pandora3.localnet: umehlig set sender to umehlig@pandora3.localnet using -f
To: p.dalgaard@biostat.ku.dk
CC: p.dalgaard@biostat.ku.dk, r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
In-reply-to: <x2g0xdjf3t.fsf@blueberry.kubism.ku.dk>
	(p.dalgaard@biostat.ku.dk)
Subject: Re: R abnormal exit when plotting lm (PR#308)
References: <199911022114.WAA14796@pubhealth.ku.dk> <x2k8o0tu8q.fsf@blueberry.kubism.ku.dk> <199912081930.UAA03462@pandora3.localnet> <x2iu29jfie.fsf@blueberry.kubism.ku.dk> <x2g0xdjf3t.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> wrote:

 > Reproduce without the .RData file with
 > 
 >  X11(point=16,h=5,w=5)
 >  x <- data.frame(id=rep(c("a", "b", "c"), 100), val=rnorm(1:300))
 >  plot(aov(val ~ id, data=x))
 > 
 > (The X11 thing was in .First)

Crashes on my computer, too.

-- 
======================================================================
Ulf Mehlig    <umehlig@zmt.uni-bremen.de>
              Center for Tropical Marine Ecology/ZMT, Bremen, Germany
----------------------------------------------------------------------
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 340 *
Subject: "outer" argument in mtext
From: Douglas Bates <bates@stat.wisc.edu>
Date: 23 Nov 1999 12:31:36 -0600
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 340 <==
From bates@franz.stat.wisc.edu  Tue Nov 23 19:31:33 1999
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA27215
	for <r-bugs@biostat.ku.dk>; Tue, 23 Nov 1999 19:31:32 +0100 (MET)
Received: by franz.stat.wisc.edu
	via sendmail from stdin
	id <m11qKj2-000ZSdC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for r-bugs@biostat.ku.dk; Tue, 23 Nov 1999 12:31:36 -0600 (CST) 
To: r-bugs@biostat.ku.dk
Subject: "outer" argument in mtext
From: Douglas Bates <bates@stat.wisc.edu>
Date: 23 Nov 1999 12:31:36 -0600
Message-ID: <6rbt8lkqk7.fsf@franz.stat.wisc.edu>
Lines: 34
X-Mailer: Gnus v5.5/Emacs 20.3

mtext(..., outer = TRUE) does not seem to center the text in the outer
margins as it did previously.  Reproduce with

 example(plot.profile.nls, package = "nls")

On versions of the development sources before November 17 this
produced main and subtitles that were centered horizontally on the
page.  After that the main title (from mtext("..", side = 3, outer = TRUE))
is centered over the figure in the upper left the the subtitle
(from mtext("..", side = 1, outer = TRUE)) is centered under the
figure on the lower right.

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 90.0
 year = 1999
 month = November
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:splines, package:nls, Autoloads, package:base

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

==> 340.reply.1 <==
From pd@biostat.ku.dk  Wed Nov 24 21:01:35 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA09422;
	Wed, 24 Nov 1999 21:01:35 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id VAA32383;
	Wed, 24 Nov 1999 21:02:31 +0100
Sender: pd@blueberry.kubism.ku.dk
To: bates@stat.wisc.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: "outer" argument in mtext (PR#340)
References: <199911231831.TAA27225@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 24 Nov 1999 21:02:31 +0100
In-Reply-To: bates@stat.wisc.edu's message of "Tue, 23 Nov 1999 19:31:33 +0100 (MET)"
Message-ID: <x2yabnmze0.fsf@blueberry.kubism.ku.dk>
Lines: 23
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

bates@stat.wisc.edu writes:

> mtext(..., outer = TRUE) does not seem to center the text in the outer
> margins as it did previously.  Reproduce with
> 
>  example(plot.profile.nls, package = "nls")
> 
> On versions of the development sources before November 17 this
> produced main and subtitles that were centered horizontally on the
> page.  After that the main title (from mtext("..", side = 3, outer = TRUE))
> is centered over the figure in the upper left the the subtitle
> (from mtext("..", side = 1, outer = TRUE)) is centered under the
> figure on the lower right.

It only does this if las=1, as got entered into the plot.profile.nls
example on November 16, by yourself... It's still a bug, but are you
sure you got that part tested?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 340.reply.2 <==
From bates@franz.stat.wisc.edu  Thu Nov 25 19:52:21 1999
Received: from franz.stat.wisc.edu (root@franz.stat.wisc.edu [128.105.174.95])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA20491;
	Thu, 25 Nov 1999 19:52:20 +0100 (MET)
Received: by franz.stat.wisc.edu
	via sendmail from stdin
	id <m11r40G-000ZSdC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for R-bugs@biostat.ku.dk; Thu, 25 Nov 1999 12:52:24 -0600 (CST) 
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: "outer" argument in mtext (PR#340)
References: <199911231831.TAA27225@pubhealth.ku.dk> <x2yabnmze0.fsf@blueberry.kubism.ku.dk>
From: Douglas Bates <bates@stat.wisc.edu>
Date: 25 Nov 1999 12:52:24 -0600
In-Reply-To: Peter Dalgaard BSA's message of "24 Nov 1999 21:02:31 +0100"
Message-ID: <6r903mmmjb.fsf@franz.stat.wisc.edu>
Lines: 8
X-Mailer: Gnus v5.5/Emacs 20.3

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> It only does this if las=1, as got entered into the plot.profile.nls
> example on November 16, by yourself... It's still a bug, but are you
> sure you got that part tested?

You're right.  I hadn't tested the version with las = 1.  I had
thought the change would be harmless.

==> 340.audit <==
Sun Dec 12 07:52:39 1999	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 349 *
Subject: size of text and numbers in graphs
From: "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
Date: Sat, 27 Nov 1999 17:03:53 CET (+0100)
--not a bug (PD)
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 349 <==
From koller2@fgr.wu-wien.ac.at  Sat Nov 27 17:04:05 1999
Received: from isis.wu-wien.ac.at (isis.wu-wien.ac.at [137.208.127.33])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA03022
	for <r-bugs@biostat.ku.dk>; Sat, 27 Nov 1999 17:04:05 +0100 (MET)
Received: from fgr.wu-wien.ac.at (fgr.wu-wien.ac.at [137.208.75.128])
	by isis.wu-wien.ac.at (8.8.7/8.8.7) with ESMTP id RAA08074
	for ;
	emf koller2@fgr.wu-wien.ac.at; Sat, 27 Nov 1999 17:04:05 +0100 (MEZ)
Received: from WUW_FGR/SpoolDir by fgr.wu-wien.ac.at (Mercury 1.44);
    27 Nov 99 17:04:07 CET +0100
Received: from SpoolDir by WUW_FGR (Mercury 1.44); 27 Nov 99 17:03:54 CET +0100
From: "Wolfgang Koller" <koller2@fgr.wu-wien.ac.at>
Organization: University of Economics, Vienna
To: r-bugs@biostat.ku.dk, r-help@stat.math.ethz.ch
Date: Sat, 27 Nov 1999 17:03:53 CET (+0100)
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Subject: size of text and numbers in graphs
Priority: normal
X-mailer: Pegasus Mail for Windows (v2.53/R1)
Message-ID: <3120DA728B@fgr.wu-wien.ac.at>

Hi!

Since installation of R 0.90 there are problems with the size 
of text and numbers also in the x11-device (I reported about similar 
problems with the postscript device recently). For numbers and 
letters a different size is used:

plot(1:10,1:10,type="n")
text(2,8,"F5F5F5F5F5")
text(2,7,"F5F5F5F5F5",cex=2)

The same problem is also found in the postscript device.
The difference is small but clearly visible.

Thanks for fixing soon!


Wolfgang Koller


----------------------------------------------------------
Wolfgang Koller,  koller2@fgr.wu-wien.ac.at
Forschungsinstitut fuer Europafragen
Wirtschaftsuniversitaet Wien
Althanstrasse 39-45, 1090 Wien, Austria

==> 349.reply.1 <==
From pd@biostat.ku.dk  Sat Nov 27 19:57:12 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA03403;
	Sat, 27 Nov 1999 19:57:11 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id TAA32045;
	Sat, 27 Nov 1999 19:58:36 +0100
Sender: pd@blueberry.kubism.ku.dk
To: koller2@fgr.wu-wien.ac.at
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: size of text and numbers in graphs (PR#349)
References: <199911271604.RAA03032@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 27 Nov 1999 19:58:36 +0100
In-Reply-To: koller2@fgr.wu-wien.ac.at's message of "Sat, 27 Nov 1999 17:04:06 +0100 (MET)"
Message-ID: <x2iu2nsqw3.fsf@blueberry.kubism.ku.dk>
Lines: 29
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

koller2@fgr.wu-wien.ac.at writes:

> Hi!
> 
> Since installation of R 0.90 there are problems with the size 
> of text and numbers also in the x11-device (I reported about similar 
> problems with the postscript device recently). For numbers and 
> letters a different size is used:
> 
> plot(1:10,1:10,type="n")
> text(2,8,"F5F5F5F5F5")
> text(2,7,"F5F5F5F5F5",cex=2)
> 
> The same problem is also found in the postscript device.
> The difference is small but clearly visible.
> 
> Thanks for fixing soon!

It's not a bug. The fonts are designed that way (capital letters one
pixel taller than numbers in some sizes). Try for instance running
xfontsel with

-*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 349.audit <==
Sun Dec 12 07:52:55 1999	ripley	moved from incoming to Graphics
Fri Dec 24 09:19:43 1999	maechler	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 365 *
Subject: plot math - segfault and "frac", "^" bug(s)..
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 8 Dec 1999 18:27:03 +0100 (MET)
--seg.fault fixed; "^" precedence is really bad
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 365 <==
From maechler@stat.math.ethz.ch  Wed Dec  8 18:27:24 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA22695
	for <R-bugs@biostat.ku.dk>; Wed, 8 Dec 1999 18:27:23 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA08532;
	Wed, 8 Dec 1999 18:27:25 +0100 (MET)
Received: from sophie(129.132.58.2), claiming to be "sophie.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa0025I; Wed Dec  8 18:27:25 1999
Received: (maechler@localhost) by sophie.ethz.ch (8.6.12/D-MATH-client) id SAA05515; Wed, 8 Dec 1999 18:27:23 +0100
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14414.38119.468921.199923@gargle.gargle.HOWL>
Date: Wed, 8 Dec 1999 18:27:03 +0100 (MET)
To: R bug tracking system <R-bugs@biostat.ku.dk>
Cc: R-core@stat.math.ethz.ch
Subject: plot math - segfault and "frac", "^" bug(s)..
In-Reply-To: <14414.36319.505765.117118@gargle.gargle.HOWL>
References: <14414.36319.505765.117118@gargle.gargle.HOWL>
X-Mailer: VM 6.75 under Emacs 20.4.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>


    MM> I've sent two bug reports that both haven't been forwarded to R-devel
    MM> and haven't should up at the jitterbug repository.

    MM> ??

    MM> Martin

Well, actually only one [the other went to R-core alone]
Here it is :

 From: Martin Maechler <maechler@sophie>
 To: R-bugs
 Subject: plot math - segfault and "frac", "^" bug(s)..
 Date: 8 Dec 1999 12:50:44 +0100

This is in R versions 0.65, 0.90.0, and the current "pre-release",
both on Linux and Solaris
[with x11() , but most probably not device dependent].

The following shows it all :

    plot(1,type='n')

    ## Frac doesn't shrink properly...
    text(.7,1.3,  expression( frac(7,4) == 1 * frac(3,4)), cex=1)
    text(.7,1.2,  expression( frac(7,4) == 1 * frac(3,4)), cex=3)

    ## Bug in precedency rule of  "^" :
    text(.7, 1,   expression( Phi^{-1}(frac(3,4))),cex=3)
    text(1.1,1,   expression( {Phi^{-1}}(frac(3,4))),cex=3)

    ## This segfaults :
    text(.9, 1,   expression( Phi^ -1 (frac(3,4))),cex=3)


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


==> 365.reply.1 <==
From pd@biostat.ku.dk  Wed Dec  8 18:39:43 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA22830;
	Wed, 8 Dec 1999 18:39:43 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id SAA09672;
	Wed, 8 Dec 1999 18:42:45 +0100
Sender: pd@blueberry.kubism.ku.dk
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: plot math - segfault and "frac", "^" bug(s).. (PR#365)
References: <199912081727.SAA22705@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Dec 1999 18:42:45 +0100
In-Reply-To: maechler@stat.math.ethz.ch's message of "Wed, 8 Dec 1999 18:27:25 +0100 (MET)"
Message-ID: <x2aenl49d6.fsf@blueberry.kubism.ku.dk>
Lines: 20
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

maechler@stat.math.ethz.ch writes:

>     MM> I've sent two bug reports that both haven't been forwarded to R-devel
>     MM> and haven't should up at the jitterbug repository.
> 
>     MM> ??
> 
>     MM> Martin
> 
> Well, actually only one [the other went to R-core alone]
> Here it is :

Whoops. Now we have it in triplicate after I fixed the mail setup.
Please respond to this one (PR#365) *only*!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 365.audit <==
Sun Dec 12 07:53:19 1999	ripley	moved from incoming to Graphics
Fri Dec 24 09:37:39 1999	maechler	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 366 *
Subject: pch==NA
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Dec 1999 15:19:46 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 366 <==
From r-bugs-fl@biostat.ku.dk  Wed Dec  8 18:33:54 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA22736
	for <r-bugs@kubism.ku.dk>; Wed, 8 Dec 1999 18:33:53 +0100 (MET)
Received: (from r-bugs-fl@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id SAA09640
	for r-bugs@blueberry.kubism.ku.dk; Wed, 8 Dec 1999 18:36:55 +0100
Resent-Message-Id: <199912081736.SAA09640@biostat.ku.dk>
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id PAA08417
	for <r-bugs@kubism.ku.dk>; Tue, 7 Dec 1999 15:16:56 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id PAA06063;
	Tue, 7 Dec 1999 15:19:47 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@biostat.ku.dk
Subject: pch==NA
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Dec 1999 15:19:46 +0100
Message-ID: <x23dtekf3x.fsf@blueberry.kubism.ku.dk>
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=US-ASCII
Resent-From: r-bugs-fl@blueberry.kubism.ku.dk
Resent-Date: Wed, 8 Dec 1999 18:36:55 +0100
Resent-To: "R bug (PD) BSA" <r-bugs@blueberry.kubism.ku.dk>

Try this:

plot(1:3,pch=c(1,2,NA))

The 3rd point is plotted as if pch were 1. This seems completely wrong
to me. Similar issue with cex= (you get the minimum size plotting dot
for the NA case there). With col= the point disappears, as I tend it
should in the other cases as well.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 366.audit <==
Sun Dec 12 07:53:40 1999	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 372 *
Subject: hist() with horiz=TRUE does not give horiz. plots
From: fran@stat.berkeley.edu
Date: Sun, 12 Dec 1999 00:27:25 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 372 <==
From fran@stat.berkeley.edu  Sun Dec 12 00:27:26 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA25509
	for <R-bugs@biostat.ku.dk>; Sun, 12 Dec 1999 00:27:25 +0100 (MET)
Date: Sun, 12 Dec 1999 00:27:25 +0100 (MET)
From: fran@stat.berkeley.edu
Message-Id: <199912112327.AAA25509@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: hist() with horiz=TRUE does not give horiz. plots

Full_Name: Fran Rizzardi
Version: 0.90.0
OS: Solaris, NT 4.0
Submission from: (NULL) (128.32.135.223)


If you use the horiz= option with hist() you get the message:

Warning:
parameter "horiz" couldn't be set in high-level plot() function.

and the plot comes out vertical.  The documentation says this option comes from

barplot() and it does work correctly in barplot().

This message comes whether horiz= is set to FALSE or TRUE.

==> 372.audit <==
Sun Dec 12 07:54:41 1999	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 378 *
Subject: plot()  after split.screen() on postscript() Device produces inconsistent PostScript file
From: boble@usa.net
Date: Fri, 17 Dec 1999 21:32:23 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 378 <==
From boble@usa.net  Fri Dec 17 21:32:24 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA05034
	for <R-bugs@biostat.ku.dk>; Fri, 17 Dec 1999 21:32:23 +0100 (MET)
Date: Fri, 17 Dec 1999 21:32:23 +0100 (MET)
From: boble@usa.net
Message-Id: <199912172032.VAA05034@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: plot()  after split.screen() on postscript() Device produces inconsistent PostScript file
MIME-Version: 1.0
Content-Type: text/plain; charset=unknown-8bit
Content-Transfer-Encoding: 8bit

Full_Name: Boris Leykekhman
Version: 0.90.0
OS: Red Hat Linux 6.1
Submission from: (NULL) (131.136.242.1)


Problem:
Plot()  after split.screen() on postscript() Device produces PostScript file,
which crashes PS interpretter with error message: 
Error: /undefined in fg
To reproduce:
#----- Start R code
postscript("test.ps")
split.screen(c(2,2))
screen(1)
plot(c(1,2,3,4))
dev.off()
#----- End R code
Workaround:
Inserting the line with definition of  fg, taken from the correct PS file,
solved my problem.
The line is: 
/fg {0.0000 0.0000 0.0000} def fg rgb
It was inserted after:
%%EndProlog2


==> 378.audit <==
Wed Jan 26 19:28:19 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 384 *
Subject: tck crash
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 22 Dec 1999 10:05:48 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 384 <==
From plindsey@alpha.luc.ac.be  Wed Dec 22 10:05:43 1999
Received: from alpha.luc.ac.be (alpha.luc.ac.be [193.190.2.30])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA05862
	for <R-bugs@biostat.ku.dk>; Wed, 22 Dec 1999 10:05:42 +0100 (MET)
Received: (from plindsey@localhost)
	by alpha.luc.ac.be (8.9.3/8.9.3) id KAA17737
	for R-bugs@biostat.ku.dk; Wed, 22 Dec 1999 10:05:49 +0100 (MET)
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Message-Id: <199912220905.KAA17737@alpha.luc.ac.be>
Subject: tck crash
To: R-bugs@biostat.ku.dk (R bugs)
Date: Wed, 22 Dec 1999 10:05:48 +0100 (MET)
X-Mailer: ELM [version 2.5 PL1]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

The following crashes R0.90.1 on Intel Linux.

This is what some of my students did:
plot.new()
plot.window(0:1,0:1)
axis(1,tck=0:1)

Patrick.


==> 384.reply.1 <==
From maechler@stat.math.ethz.ch  Wed Dec 22 10:51:09 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA06436
	for <R-bugs@biostat.ku.dk>; Wed, 22 Dec 1999 10:51:08 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA16019;
	Wed, 22 Dec 1999 10:51:12 +0100 (MET)
Received: from lynne(129.132.58.30), claiming to be "lynne.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa003uH; Wed Dec 22 10:51:04 1999
Received: (maechler@localhost) by lynne.ethz.ch (8.9.3/D-MATH-client) id KAA32736; Wed, 22 Dec 1999 10:51:03 +0100
X-Authentication-Warning: lynne.ethz.ch: maechler set sender to maechler@lynne using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14432.40710.712824.237174@gargle.gargle.HOWL>
Date: Wed, 22 Dec 1999 10:51:02 +0100 (MET)
To: plindsey@alpha.luc.ac.be
Cc: R-bugs@biostat.ku.dk
Subject: Re: tck crash (PR#384)
In-Reply-To: <199912220905.KAA05874@pubhealth.ku.dk>
References: <199912220905.KAA05874@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 20.5.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> On Wed, 22 Dec 1999 10:05:44 +0100 (MET), plindsey@alpha.luc.ac.be said:

    plindsey> The following crashes R0.90.1 on Intel Linux.
    plindsey> This is what some of my students did:

    plindsey> plot.new()
    plindsey> plot.window(0:1,0:1)
    plindsey> axis(1,tck=0:1)

Thank you for the bug report!

It also crashes on our Solaris platform, and with the newest "developers"
version.  
However, *only* when no device has been created previously in the current R
session, i.e., PREpending 

	par("usr") ; dev.off()

to your three commands gives the correct error message
  >>> Error in par(args) : parameter "tck" has the wrong length

--

Remark / Question :

 I think I would rather not have my students use low-level functions such
 as   plot.new()  and  plot.window()...

 Is there a reason they need these instead of  plot()/lines()/.... etc ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 384.audit <==
Wed Jan 26 19:31:43 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 389 *
Subject: coredump with plot(x,y,pch="+",cex=2.2)
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 26 Dec 1999 18:14:10 -0500 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 389 <==
From rnassar@duke.edu  Mon Dec 27 00:16:37 1999
Received: from pohl.acpub.duke.edu (pohl.acpub.duke.edu [152.3.233.64])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA28153
	for <r-bugs@biostat.ku.dk>; Mon, 27 Dec 1999 00:16:36 +0100 (MET)
Received: from bio3.acpub.duke.edu (rnassar@bio3.acpub.duke.edu [152.3.233.103]) 
	by pohl.acpub.duke.edu (8.8.5/Duke-4.7.0) with ESMTP id SAA01253;
	Sun, 26 Dec 1999 18:14:11 -0500 (EST)
Received: (from rnassar@localhost) 
	by bio3.acpub.duke.edu (8.8.5/Duke-4.7.1) id SAA19084;
	Sun, 26 Dec 1999 18:14:10 -0500 (EST)
Date: Sun, 26 Dec 1999 18:14:10 -0500 (EST)
From: Rashid Nassar <rnassar@duke.edu>
X-Sender: rnassar@bio3.acpub.duke.edu
To: r-bugs <r-bugs@biostat.ku.dk>
Subject: coredump with plot(x,y,pch="+",cex=2.2)
Message-ID: <Pine.SOL.3.91.991226181116.19079A-100000@bio3.acpub.duke.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Core dumped when plot() is used with pch="c" & cex > 2, e.g.,

plot(1,1, pch="+", cex=2.2)

Thank you and best wishes for 2000!

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 389.reply.1 <==
From pd@biostat.ku.dk  Mon Dec 27 01:02:40 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA28417;
	Mon, 27 Dec 1999 01:02:39 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA12095;
	Mon, 27 Dec 1999 01:08:25 +0100
Sender: pd@blueberry.kubism.ku.dk
To: rnassar@duke.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: coredump with plot(x,y,pch="+",cex=2.2) (PR#389)
References: <199912262316.AAA28163@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 27 Dec 1999 01:08:24 +0100
In-Reply-To: rnassar@duke.edu's message of "Mon, 27 Dec 1999 00:16:38 +0100 (MET)"
Message-ID: <x21z89p7nr.fsf@blueberry.kubism.ku.dk>
Lines: 44
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

rnassar@duke.edu writes:

> Core dumped when plot() is used with pch="c" & cex > 2, e.g.,
> 
> plot(1,1, pch="+", cex=2.2)
> 
> Thank you and best wishes for 2000!

Works fine here... 

Which flavour of linux is doing that to you? Did you install from
prepackaged binaries or compile R yourself? (I've had one report
saying that demo(graphics) crashed in RH6.0 when installing from .rpm)

Could you please try debugging a little further?

Try /path/to/R -d gdb, run, recreate the crash, and tell us what gdb
says at that that point and the first couple of line of "bt" output
might also be useful.

> --please do not edit the information below--
> 
> Version:
>  platform = i586-unknown-linux
>  arch = i586
>  os = linux
>  system = i586, linux
>  status = 
>  major = 0
>  minor = 90.1
>  year = 1999
>  month = December
>  day = 15
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 389.reply.2 <==
From pd@biostat.ku.dk  Mon Dec 27 14:52:02 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA02510;
	Mon, 27 Dec 1999 14:52:01 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id OAA12903;
	Mon, 27 Dec 1999 14:57:52 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Rashid Nassar <rnassar@duke.edu>
Cc: r-bugs@biostat.ku.dk
Subject: Re: coredump with plot(x,y,pch="+",cex=2.2) (PR#389)
References: <Pine.SOL.3.91.991226200231.19262A-100000@bio3.acpub.duke.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 27 Dec 1999 14:57:51 +0100
In-Reply-To: Rashid Nassar's message of "Sun, 26 Dec 1999 20:41:52 -0500 (EST)"
Message-ID: <x2vh5kfpuo.fsf@blueberry.kubism.ku.dk>
Lines: 160
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


[please CC: r-bugs on this kind of reply, so that it gets properly filed]

Rashid Nassar <rnassar@duke.edu> writes:

> ... it is 2 or 3 am your end-- I guess I shouldn't report such things 
> without thinking about what time it is over in Denmark.

Well, my computer is not connected to my alarm clock (yet...). Bad
habit, but it's so nice and quiet at that time and I had some stuff I
wanted to get written down. (You stand a much worse chance of catching
me early in the morning.)

> To answer your questions:
> 
> 1.  I'm using Red Hat 6.0.  
> 2.  I compiled R on my machine
> 
> > Try /path/to/R -d gdb, run, recreate the crash, and tell us what gdb
> > says at that that point and the first couple of line of "bt" output
> > might also be useful.
> 
> 3.  I've tried demo(graphics) (which also crashed R) and plot() with
> pch="c" & cex=2.2 with gdb running as per your instructions (I hope!) and
> I include the output below: I apologize for my ignorance, but I don't know
> what "bt" output is or how I can get it (I need to ask my son for
> assistance with that, if the following does not suffice-- please let me
> know and I'd be glad to try anything that I know how to do.  I included the
> whole thing so I won't remove relevant details.

"bt" (backtrace) is just a gdb command which you type at the (gdb)
prompt, but never mind. The output below suffices in this case (but if
it were inside a utility routine called from multiple places, I would
have wanted to know where it was called from).

Obviously, this shouldn't crash R, but the only reason I can see that
it might happen is if the scalable fonts are absent *and* the Adobe
fonts are not present in both 75dpi and 100dpi versions. I seem to
recall that RH6.0 had a bug in the font server setup somewhat to that
effect (causing Netscape to crash all over the place). So what is in
your /etc/X11/fs/config ? Mine (RH6.1+modif.) has:

catalogue = /usr/X11R6/lib/X11/fonts/misc:unscaled,
        /usr/X11R6/lib/X11/fonts/100dpi:unscaled,
        /usr/X11R6/lib/X11/fonts/75dpi:unscaled,
        /usr/X11R6/lib/X11/fonts/misc,
        /usr/X11R6/lib/X11/fonts/Type1,
        /usr/X11R6/lib/X11/fonts/Speedo,
        /usr/share/fonts/default/Type1,
        /usr/X11R6/lib/X11/fonts/100dpi,
        /usr/X11R6/lib/X11/fonts/cyrillic,
        /usr/X11R6/lib/X11/fonts/75dpi


> Best regards,  -Rashid
> 
> =========================
> [rnassar@rnassar sgu]$ /usr/local/bin/R -d gdb
> GNU gdb 4.17.0.11 with Linux support
> Copyright 1998 Free Software Foundation, Inc.
> GDB is free software, covered by the GNU General Public License, and you are
> welcome to change it and/or distribute copies of it under certain conditions.
> Type "show copying" to see the conditions.
> There is absolutely no warranty for GDB.  Type "show warranty" for details.
> This GDB was configured as "i386-redhat-linux"...
> (gdb) R
> Starting program: /usr/local/lib/R/bin/R.X11 
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.90.1  (December 15, 1999)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> [Previously saved workspace restored]
> 
> > > demo(graphics)
> 
> 
>         demo(graphics)
>         ---- ~~~~~~~~
> 
> Type  <Return>   to start : 
> 
> > opar <- par(ask = interactive() && (.Device == "X11" || 
>     .Device == "windows"))
> 
> > x <- rnorm(50)
> 
> > opar <- c(opar, par(bg = "white"))
> 
> > plot(x, ann = FALSE, type = "n")
> Hit <Return> to see next plot: 
> 
> > abline(h = 0, col = gray(0.9))
> 
> > lines(x, col = "green4", lty = "dotted")
> 
> > points(x, bg = "limegreen", pch = 21)
> 
> > title(main = "Simple Use of Color In a Plot", xlab = "Just a Whisper of a Label", 
>     col.main = "blue", col.lab = gray(0.8), cex.main = 1.2, cex.lab = 1, 
>     font.main = 4, font.lab = 3)
> 
> > par(bg = "gray")
> 
> > piechart(rep(1, 24), col = rainbow(24), radius = 0.9)
> Hit <Return> to see next plot: 
> 
> > title(main = "A Sample Color Wheel", cex.main = 1.4, 
>     font.main = 3)
> 
> Program received signal SIGSEGV, Segmentation fault.
> SetFont (face=3, size=17, dd=0x8171050) at devX11.c:920
> 920             XSetFont(display, xd->wgc, xd->font->fid);
> (gdb) 
> (gdb) R
> The program being debugged has been started already.
> Start it from the beginning? (y or n) y
> Starting program: /usr/local/lib/R/bin/R.X11 
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.90.1  (December 15, 1999)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type    "?license" or "?licence" for distribution details.
> 
> R is a collaborative project with many contributors.
> Type    "?contributors" for a list.
> 
> Type    "demo()" for some demos, "help()" for on-line help, or
>         "help.start()" for a HTML browser interface to help.
> Type    "q()" to quit R.
> 
> [Previously saved workspace restored]
> 
> > plot(1,1,pch=4,cex=2.2)
> > plot(1,1,pch="+",cex=2.2)
> 
> Program received signal SIGSEGV, Segmentation fault.
> SetFont (face=1, size=26, dd=0x8173058) at devX11.c:920
> 920             XSetFont(display, xd->wgc, xd->font->fid);
> (gdb) q
> The program is running.  Exit anyway? (y or n) y
> [rnassar@rnassar sgu]$ 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 389.followup.1 <==
From rnassar@duke.edu  Tue Dec 28 10:26:23 1999
Received: from compton.acpub.duke.edu (compton.acpub.duke.edu [152.3.233.74])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA04233;
	Tue, 28 Dec 1999 01:46:30 +0100 (MET)
Received: from bio3.acpub.duke.edu (rnassar@bio3.acpub.duke.edu [152.3.233.103]) 
        by compton.acpub.duke.edu (8.9.3/8.9.3/Duke-5.0.0) with ESMTP id TAA21958;
        Mon, 27 Dec 1999 19:42:08 -0500 (EST)
Received: (from rnassar@localhost) 
	by bio3.acpub.duke.edu (8.8.5/Duke-4.7.1) id TAA21379;
	Mon, 27 Dec 1999 19:42:06 -0500 (EST)
Date: Mon, 27 Dec 1999 19:42:06 -0500 (EST)
From: Rashid Nassar <rnassar@duke.edu>
X-Sender: rnassar@bio3.acpub.duke.edu
To: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
cc: r-bugs@biostat.ku.dk
Subject: Re: coredump with plot(x,y,pch="+",cex=2.2) (PR#389)
In-Reply-To: <x2vh5kfpuo.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.991227191601.21272B-100000@bio3.acpub.duke.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Content-Length: 1776


On 27 Dec 1999, Peter Dalgaard BSA wrote:
> 
> Obviously, this shouldn't crash R, but the only reason I can see that
> it might happen is if the scalable fonts are absent *and* the Adobe
> fonts are not present in both 75dpi and 100dpi versions. I seem to
> recall that RH6.0 had a bug in the font server setup somewhat to that
> effect (causing Netscape to crash all over the place). So what is in
> your /etc/X11/fs/config ? Mine (RH6.1+modif.) has:
> 
> catalogue = /usr/X11R6/lib/X11/fonts/misc:unscaled,
>         /usr/X11R6/lib/X11/fonts/100dpi:unscaled,
>         /usr/X11R6/lib/X11/fonts/75dpi:unscaled,
>         /usr/X11R6/lib/X11/fonts/misc,
>         /usr/X11R6/lib/X11/fonts/Type1,
>         /usr/X11R6/lib/X11/fonts/Speedo,
>         /usr/share/fonts/default/Type1,
>         /usr/X11R6/lib/X11/fonts/100dpi,
>         /usr/X11R6/lib/X11/fonts/cyrillic,
>         /usr/X11R6/lib/X11/fonts/75dpi


You are absolutely right.  Here is what is (was) in my  /etc/X11/fs/config:

#=====================================================
catalogue = /usr/X11R6/lib/X11/fonts/misc:unscaled,
	/usr/X11R6/lib/X11/fonts/75dpi:unscaled,
	/usr/X11R6/lib/X11/fonts/100dpi:unscaled,
	/usr/X11R6/lib/X11/fonts/misc,
	/usr/X11R6/lib/X11/fonts/Type1,
	/usr/X11R6/lib/X11/fonts/Speedo

# in 12 points, decipoints
default-point-size = 120

# 100 x 100 and 75 x 75
default-resolutions = 75,75,100,100
#==================================================

I confirmed the crash, then I added the following four lines (from your 
/etc/X11/fs/config  file:

         /usr/share/fonts/default/Type1,
         /usr/X11R6/lib/X11/fonts/100dpi,
         /usr/X11R6/lib/X11/fonts/cyrillic,
         /usr/X11R6/lib/X11/fonts/75dpi

and now it works perfectly. Thank you!

Best regards,

Rashid

==> 389.reply.3 <==
From pd@biostat.ku.dk  Tue Dec 28 17:15:01 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id RAA09258;
	Tue, 28 Dec 1999 17:14:59 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id RAA23836;
	Tue, 28 Dec 1999 17:20:59 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Rashid Nassar <rnassar@duke.edu>
Cc: r-bugs@biostat.ku.dk
Subject: Re: coredump with plot(x,y,pch="+",cex=2.2) (PR#389)
References: <Pine.SOL.3.91.991227191601.21272B-100000@bio3.acpub.duke.edu>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 28 Dec 1999 17:20:58 +0100
In-Reply-To: Rashid Nassar's message of "Mon, 27 Dec 1999 19:42:06 -0500 (EST)"
Message-ID: <x2hfh3rq8l.fsf@blueberry.kubism.ku.dk>
Lines: 32
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 1370

Rashid Nassar <rnassar@duke.edu> writes:

> On 27 Dec 1999, Peter Dalgaard BSA wrote:
> > 
> > Obviously, this shouldn't crash R, but the only reason I can see that
> > it might happen is if the scalable fonts are absent *and* the Adobe
> > fonts are not present in both 75dpi and 100dpi versions. I seem to
> > recall that RH6.0 had a bug in the font server setup somewhat to that
> > effect (causing Netscape to crash all over the place). So what is in
> > your /etc/X11/fs/config ? Mine (RH6.1+modif.) has:
....
> You are absolutely right.  Here is what is (was) in my  /etc/X11/fs/config:
> 
> #=====================================================
> catalogue = /usr/X11R6/lib/X11/fonts/misc:unscaled,
> 	/usr/X11R6/lib/X11/fonts/75dpi:unscaled,
> 	/usr/X11R6/lib/X11/fonts/100dpi:unscaled,
> 	/usr/X11R6/lib/X11/fonts/misc,
> 	/usr/X11R6/lib/X11/fonts/Type1,
> 	/usr/X11R6/lib/X11/fonts/Speedo

Nice to know that you got it working, but it still puzzles me that it
broke. Unless, perhaps, you happen not to have the 100dpi fonts
installed...

(BTW: Things look much nicer with the urw fonts in RH6.1...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 389.audit <==
Wed Jan 26 19:28:19 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 390 *
Subject: axis for small ranges
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Tue, 28 Dec 1999 13:28:01 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 390 <==
From weingessel@ci.tuwien.ac.at  Tue Dec 28 14:46:26 1999
Received: from fangorn.ci.tuwien.ac.at (fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id OAA08225
	for <r-bugs@biostat.ku.dk>; Tue, 28 Dec 1999 14:43:27 +0100 (MET)
Received: from elendil.ci.tuwien.ac.at (elendil.ci.tuwien.ac.at [128.131.51.38])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id NAA01762
	for <r-bugs@biostat.ku.dk>; Tue, 28 Dec 1999 13:27:16 +0100
Received: (from weingessel@localhost)
	by elendil.ci.tuwien.ac.at (8.9.3/8.8.5) id NAA20101;
	Tue, 28 Dec 1999 13:28:01 +0100
Date: Tue, 28 Dec 1999 13:28:01 +0100
Message-Id: <199912281228.NAA20101@elendil.ci.tuwien.ac.at>
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
To: r-bugs@biostat.ku.dk
Subject: axis for small ranges
Reply-to: Andreas.Weingessel@ci.tuwien.ac.at
Content-Length: 742


If you plot a vector of numbers which are all very similar
(i.e. within the range of some eps), the y-axis is not drawn
correctly. Either it is completely missing and there is an additional
horizontal line (1st example below) or it is longer than the plotting
region (2nd example).


x <- c(0.12345678912345678,0.12345678912345679,0.12345678912345676)
plot(x)

y <- c(0.9999563255363383973418, 0.9999563255363389524533, 0.9999563255363382863194)
plot(y)

-aw

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched
 major = 0
 minor = 90.0
 year = 1999
 month = December
 day = 9
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 390.reply.1 <==
From thomas@abigail.columbia.edu  Tue Dec 28 17:24:46 1999
Received: from gimel.biostat.washington.edu (gimel.biostat.washington.edu [128.95.21.81])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id RAA09299
	for <R-bugs@biostat.ku.dk>; Tue, 28 Dec 1999 17:24:45 +0100 (MET)
Received: from thomas by gimel.biostat.washington.edu with local-esmtp (Exim 3.03 #1 (Debian))
	id 122zPz-0001yO-00; Tue, 28 Dec 1999 08:24:15 -0800
Date: Tue, 28 Dec 1999 16:24:15 +0000 (GMT)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: Andreas.Weingessel@ci.tuwien.ac.at
cc: R-bugs@biostat.ku.dk
Subject: Re: axis for small ranges (PR#390)
In-Reply-To: <199912281346.OAA08271@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.9912281617490.7560-100000@gimel.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: Thomas Lumley <thomas@abigail.columbia.edu>
Content-Length: 1775

On Tue, 28 Dec 1999 Andreas.Weingessel@ci.tuwien.ac.at wrote:

> 
> If you plot a vector of numbers which are all very similar
> (i.e. within the range of some eps), the y-axis is not drawn
> correctly. Either it is completely missing and there is an additional
> horizontal line (1st example below) or it is longer than the plotting
> region (2nd example).
> 
> 
> x <- c(0.12345678912345678,0.12345678912345679,0.12345678912345676)
> plot(x)

This one works for me on Solaris and Linux (though with Linux the label
isn't centered)

> y <- c(0.9999563255363383973418, 0.9999563255363389524533, 0.9999563255363382863194)
> plot(y)

On Solaris (with a somewhat old version of R) this causes an infinite loop
(interruptable by C-c) in pretty0

	-thomas

> 
> -aw
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-unknown-linux
>  arch = i686
>  os = linux
>  system = i686, linux
>  status = Patched
>  major = 0
>  minor = 90.0
>  year = 1999
>  month = December
>  day = 9
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
------------------------------------------------------+------
Biostatistics		: "Never attribute to malice what  :
Uni of Washington	:  can be adequately explained by  :
Box 357232		:  incompetence" - Hanlon's Razor  :
Seattle WA 98195-7232	:				   :
------------------------------------------------------------




==> 390.audit <==
Wed Jan 26 19:28:20 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 400 <==
From pd@biostat.ku.dk  Thu Jan 13 14:29:00 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA01544
	for <r-bugs@mail.kubism.ku.dk>; Thu, 13 Jan 2000 14:29:00 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id OAA15286;
	Thu, 13 Jan 2000 14:31:43 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@biostat.ku.dk
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
Message-ID: <x23ds2nlmp.fsf@blueberry.kubism.ku.dk>
Lines: 24
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Just to get these issues recorded in the bug repository:

a) We don't handle multiple window closes well

My "favourite" version of this is when I ^Z out of an R session with
an open graphics window to do something on the command line, then kill
the graphics window (which does nothing), kill it again, realise that
it's because the R session was stopped, and:

[pd@blueberry BUILD]$ %
bin/R
Segmentation fault (core dumped)

b) X11 errors should be caught by an error handler, not kill R.

This is mainly seen when there's an error somewhere else, such as
trouble with the font setup. But in principle, we should at worst shut
down the graphics window, not R itself.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 400.audit <==
Wed Jan 26 19:28:37 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 414 <==
From ben@bolker-nt.zoo.ufl.edu  Tue Feb  8 00:32:03 2000
Received: from triarch.zoo.ufl.edu (triarch.zoo.ufl.edu [128.227.60.248])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id AAA13274
	for <r-bugs@biostat.ku.dk>; Tue, 8 Feb 2000 00:32:02 +0100 (MET)
Received: from bolker-nt.zoo.ufl.edu ([128.227.60.126])
          by triarch.zoo.ufl.edu (Netscape Messaging Server 3.5)
           with ESMTP id 494; Mon, 7 Feb 2000 18:32:02 -0500
Received: (from ben@localhost)
	by bolker-nt.zoo.ufl.edu (8.9.3/8.9.3) id SAA22301;
	Mon, 7 Feb 2000 18:28:04 -0500
Date: Mon, 7 Feb 2000 18:28:04 -0500
From: Ben Bolker <bolker@zoo.ufl.edu>
Message-Id: <200002072328.SAA22301@bolker-nt.zoo.ufl.edu>
To: r-bugs@biostat.ku.dk
Subject:  graphics bugs: steep slopes and large values beyond ylim 
Cc: ben@bolker-nt.zoo.ufl.edu


  Some of my students have uncovered some apparent graphics bugs in 
R.  I think they may manifest slightly different on different platforms/
with different display devices (they sometimes report a Windows graph
that looks OK but odd results on printing).
  I'm able to replicate similar problems on my Linux (RH 6.0) system.


1. abline() plots nothing, or a wrong line, when the slope is too steep.

plot(0:10,0:10)
abline(a=0,b=100)
abline(a=0,b=200)
abline(a=0,b=300)
abline(a=0,b=80)

2. when plotting with type "l" and with values far beyond the limits of
the plot, semi-random lines appear on the plot.

plot(exp(1:100),ylim=c(0,10),type="l")

Any thoughts?  I poked a little bit at this myself: abline calls GLine, neither of them
seems to do much checking whether the endpoints of the line to be drawn are way outside of the
window (I guess that XDrawLine, which gets called by GLine, can't handle this).
I guess this should probably be fixed at the the level of GLine (it might fix both of
the above problems, but I'm a little bit afraid digging this deeply into the graphics drivers.
  Maybe it will be obvious to someone closer to the code?

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 7
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 414.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 441 *
Subject: contour() labels
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Wed, 16 Feb 2000 16:51:27 +1300 (NZDT)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 441 <==
From ray@mcs.vuw.ac.nz  Wed Feb 16 04:51:25 2000
Received: from kaukau.mcs.vuw.ac.nz (kaukau.mcs.vuw.ac.nz [130.195.5.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id EAA14075
	for <r-bugs@biostat.ku.dk>; Wed, 16 Feb 2000 04:51:23 +0100 (MET)
Received: from aqua.mcs.vuw.ac.nz (aqua.mcs.vuw.ac.nz [130.195.6.201])
	by kaukau.mcs.vuw.ac.nz (8.10.0.Beta6/8.10.0.Beta6) with ESMTP id e1G3pSM24084
	for <r-bugs@biostat.ku.dk>; Wed, 16 Feb 2000 16:51:29 +1300 (NZDT)
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Received: (from ray@localhost)
	by aqua.mcs.vuw.ac.nz (8.9.2/8.8.6) id QAA18539
	for r-bugs@biostat.ku.dk; Wed, 16 Feb 2000 16:51:27 +1300 (NZDT)
Date: Wed, 16 Feb 2000 16:51:27 +1300 (NZDT)
Message-Id: <200002160351.QAA18539@aqua.mcs.vuw.ac.nz>
To: r-bugs@biostat.ku.dk
Subject: contour() labels

R-0.99.0a now plots contour labels from contour(), but the values in
levels seem to be coerced to integer.

Reproduce by:
> set.seed(2)
> contour(matrix(runif(36),nrow=6), labcex=1.2)

and compare with:
> set.seed(2)
> contour(matrix(10*runif(36),nrow=6), labcex=1.2)

Ray Brownrigg

==> 441.followup.1 <==
From ripley@stats.ox.ac.uk  Wed Feb 16 08:40:47 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id IAA14727
	for <R-bugs@biostat.ku.dk>; Wed, 16 Feb 2000 08:40:46 +0100 (MET)
Received: from max101.public.ox.ac.uk (max101.public.ox.ac.uk [192.76.27.101])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id HAA02558;
	Wed, 16 Feb 2000 07:40:49 GMT
Date: Wed, 16 Feb 2000 07:39:56 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: Ray.Brownrigg@mcs.vuw.ac.nz
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] contour() labels (PR#441)
In-Reply-To: <200002160351.EAA14085@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10002160731390.22161-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 16 Feb 2000 Ray.Brownrigg@mcs.vuw.ac.nz wrote:

> R-0.99.0a now plots contour labels from contour(), but the values in
> levels seem to be coerced to integer.
> 
> Reproduce by:
> > set.seed(2)
> > contour(matrix(runif(36),nrow=6), labcex=1.2)
> 
> and compare with:
> > set.seed(2)
> > contour(matrix(10*runif(36),nrow=6), labcex=1.2)
> 

The code has (plot3d.c, ca line 718)

		/* Need to send labels in from interpreted R code ? */
	        sprintf(buffer, " %.00f ", zc);

so, yes, it is printed as an integer, and the comment there is right.  
I guess the labels should be format(levels) by default, to ensure that
the use of trailing zeros is consistent, but it should be in R code
so users can override the default precision, say.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 441.audit <==
Wed Feb 16 19:26:07 2000	ripley	moved from incoming to Graphics

==> 441.followup.2 <==
From ray@mcs.vuw.ac.nz  Wed Feb 16 21:36:52 2000
Received: from kaukau.mcs.vuw.ac.nz (kaukau.mcs.vuw.ac.nz [130.195.5.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA23952
	for <R-bugs@biostat.ku.dk>; Wed, 16 Feb 2000 21:36:50 +0100 (MET)
Received: from aqua.mcs.vuw.ac.nz (aqua.mcs.vuw.ac.nz [130.195.6.201])
	by kaukau.mcs.vuw.ac.nz (8.10.0.Beta6/8.10.0.Beta6) with ESMTP id e1GKaoM15403;
	Thu, 17 Feb 2000 09:36:50 +1300 (NZDT)
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Received: (from ray@localhost)
	by aqua.mcs.vuw.ac.nz (8.9.2/8.8.6) id JAA20201;
	Thu, 17 Feb 2000 09:36:49 +1300 (NZDT)
Date: Thu, 17 Feb 2000 09:36:49 +1300 (NZDT)
Message-Id: <200002162036.JAA20201@aqua.mcs.vuw.ac.nz>
To: ripley@stats.ox.ac.uk
Subject: Re: [Rd] contour() labels (PR#441)
Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch

> The code has (plot3d.c, ca line 718)
> 
> 		/* Need to send labels in from interpreted R code ? */
> 	        sprintf(buffer, " %.00f ", zc);
> 
> so, yes, it is printed as an integer, and the comment there is right.  
> I guess the labels should be format(levels) by default, to ensure that
> the use of trailing zeros is consistent, but it should be in R code
> so users can override the default precision, say.
> 
Thanks for finding the relevant piece of code.  I did look, but wasn't
au fait enough with C or the R way of doing things to spot the relevant
piece.

How about replacing:
	        sprintf(buffer, " %.00f ", zc);
by:
	        sprintf(buffer, " %.9g ", zc);

It seems to do what I want, and not behave any differently from before
for integer contour lines.

Regards
Ray Brownrigg
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 442 *
Subject:  rug() extends axes instead of clipping 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Wed, 16 Feb 2000 17:37:52 +0800
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 442 <==
From berwin@bossiaea.maths.uwa.edu.au  Wed Feb 16 10:37:55 2000
Received: from bossiaea.maths.uwa.edu.au (IDENT:root@bossiaea.maths.uwa.edu.au [130.95.16.247])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA16776
	for <r-bugs@biostat.ku.dk>; Wed, 16 Feb 2000 10:37:52 +0100 (MET)
Received: (from berwin@localhost)
	by bossiaea.maths.uwa.edu.au (8.9.3/8.9.3) id RAA04563;
	Wed, 16 Feb 2000 17:37:52 +0800
Date: Wed, 16 Feb 2000 17:37:52 +0800
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Message-Id: <200002160937.RAA04563@bossiaea.maths.uwa.edu.au>
To: r-bugs@biostat.ku.dk
Subject:  rug() extends axes instead of clipping 
Cc: berwin@bossiaea.maths.uwa.edu.au

Dear R developers,

I noticed that rug() may extend the line of the horizontal axis beyond
the left and right vertical axes.  The following snippet illustrates
the problem:

set.seed(2241)
dat <- rnorm(10) 
plot(c(-2,2),c(0,0.5),type="n", xlab="", ylab="")
rug(dat)

The problem seems to be that:
> range(dat)
[1] -2.739635  1.037512

Cheers,

        Berwin

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 442.audit <==
Wed Feb 16 19:26:07 2000	ripley	moved from incoming to Graphics
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  In-Out

* PR# 129 *
Subject: Formatting in formatC and format
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
--Documentation and ``merge'' of format() and formatC() would be desired - MM
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 129 <==
From ripley@stats.ox.ac.uk  Sun Feb 28 09:51:39 1999
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.1/8.9.1) with ESMTP id JAA07277
	for <r-bugs@biostat.ku.dk>; Sun, 28 Feb 1999 09:51:34 +0100 (MET)
Received: from max144.public.ox.ac.uk (max144.public.ox.ac.uk [192.76.27.144])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with ESMTP id IAA22690
	for <r-bugs@biostat.ku.dk>; Sun, 28 Feb 1999 08:53:17 GMT
Date: Sun, 28 Feb 1999 08:53:34 +0000 (GMT)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Sender: ripley@auk.stats
To: r-bugs@biostat.ku.dk
Subject: Formatting in formatC and format
Message-ID: <Pine.GSO.4.05.9902280852300.286-100000@auk.stats>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

[This turned into a bug report which will go to r-devel, so I have taken it
off r-help.]

Bugs reported here:

(1) formatC's help page need some clarification.

(2) formatC needs to treat modes "double" and "real" as equivalent.

(3) format's help page or (preferably) format needs correction re the
meaning of `digits'


On Sun, 28 Feb 1999, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

`should not 5.96 print as 6.0 with 2 dignificant digits?'

>     BDR> S-PLUS has an option nsmall to format to do precisely this, and
>     BDR> there was a question asking how to do it on s-news today.  I have
>     BDR> thought for a while that we need to implement something like this
>     BDR> in R: maybe I had better do it....
> 
> Is it necessary?

Yes, as I want to do things that C's printf does not do, AFAIK.

> In R, we've always been having   formatC(.) as an alternative to format(.)
> allowing more precise formatting specifications.
> However, maybe I didn't understand what yuo were alluding to..

I find formatC useful (if hard to understand) but it does not in my hands
do what I want. I don't think formatC's help page defines precisely what it
does. In particular, it does not say what format=NULL, the default, does.  
So if I try

formatC(6.0, digits=1)
[1] " 6"

I do not get what I expected. It looks as if I need

formatC(6.0, digits=1, format="f")
[1] "6.0"

My guess is that the default is "g" for doubles. (I also find that what 
happens when I give format="g" for an integer and or give the `wrong' mode
is not defined or even inconsistent:

> formatC(as.integer(12345678), mode="real")
Error: `type' must be "real" for this format
> formatC(as.integer(12345678), mode="double")
[1] "1.235e+07"
> formatC(as.integer(12345678), mode="double", format="d")
[1] "12345678"

What are the rules here?)

The help page for formatC references the pre-ANSI C 2nd edition of
Kernighan & Ritchie, but I think the ANSI standard is that same. There is a
reference to leading zeroes, none to trailing zeroes. I believe printf can
be system-dependent (and some of it certainly is: win32 libraries use
n.ddde+nnn and Solaris ones use n.ddde+nn not n.dddenn as your help page
says).  I think, pessimistically, that it is not safe to rely on how the C
runtime library does this.


BTW, there is a trick here:

format(c(5.9, 6.0), digits=2)[-1]
[1] "6.0"

does what Dr Carsten wanted (but see later for the meaning of digits=2).


In any case, 

formatC(6.01, digits=1, format="f")
[1] "6.0"

is not what I am looking for, but (from S-PLUS)

> format(6.0, nsmall=1)
[1] "6.0"
> format(6.01, nsmall=1)
[1] "6.01"


Here is something else I find useful, and I think R is not as documented:
In S-PLUS I get (by default) alignment on the (implied) decimal point:

> format(c(6.11, 13.1), digits=2)
[1] " 6.1" "13  "

whereas in R

> format(c(6.11, 13.1), digits=2)
[1] " 6.1" "13.1"

Now R says (?format)

  digits: how many significant digits are to be used for `numeric x'.

but that is not what happens.  And I can't see how to do this in formatC:

> formatC(c(6.11, 13.1), digits=2, format="fg")
[1] "6.1" " 13"

as the alignment is wrong.  I think in print/format, digits=2 means that
data are rounded so that the smallest (in magnitude) number has two
significant digits, and then the result is converted dropping trailing
zeroes, as in

> format(c(6.0, 13.1), digits=2)
[1] " 6" "13"

(That is what S-PLUS gives too, aargh.)


Another, minor, point: format is generic and can be applied to lists,
for example, whereas formatC cannot.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 129.audit <==
Thu Apr 01 10:22:15 1999	maechler	changed notes
Thu Apr 01 10:22:15 1999	maechler	moved from incoming to In-Out
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Installation

none

Directory:  Language

* PR# 105 *
Subject: an old bug resurfaces
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
--Model formulas. Proper fix probably requires extensive rewrite of model formula
--parser, which would make in non-S-compatible.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 105 <==
From jlindsey@alpha.luc.ac.be  Fri Jan 29 08:26:59 1999
Received: from hypatia.math.ethz.ch (hypatia.ethz.ch [129.132.58.23])
	by kubism.ku.dk (8.9.1/8.9.1) with SMTP id IAA27541
	for <R-bugs@biostat.ku.dk>; Fri, 29 Jan 1999 08:26:58 +0100 (MET)
Received: (daemon@localhost) by hypatia.math.ethz.ch (8.6.12/Main-STAT-mailer) id IAA09408 for <r-bugs@stat.math.ethz.ch>; Fri, 29 Jan 1999 08:27:10 +0100
Received: from alpha.luc.ac.be(193.190.2.30)
 via SMTP by hypatia, id smtpdAAAa002Iy; Fri Jan 29 08:27:02 1999
Received: (from jlindsey@localhost)
	by alpha.luc.ac.be (8.9.2/8.9.1) id IAA30846
	for r-bugs@stat.math.ethz.ch; Fri, 29 Jan 1999 08:28:32 +0100 (MET)
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Message-Id: <199901290728.IAA30846@alpha.luc.ac.be>
Subject: an old bug resurfaces
To: r-bugs@stat.math.ethz.ch (rbugs)
Date: Fri, 29 Jan 1999 08:28:32 +0100 (MET)
X-Mailer: ELM [version 2.4 PL23]
Content-Type: text

About two years or more ago, I reported the following bug in removing
model terms. I cannot remember if it was fixed then or delayed to a
future version, but here it is again (still):

y <- rpois(20,4)
x1 <- gl(4,5)
x2 <- gl(5,1,20)
print(z <- glm(y~x1*x2))
update(z,.~.-x1:(1+x2))

The last line should remove x1 and the interaction but only takes out
the interaction.
  Jim

==> 105.reply.1 <==
From pd@biostat.ku.dk  Fri Jan 29 10:16:56 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by kubism.ku.dk (8.9.1/8.9.1) with ESMTP id KAA29049
	for <r-bugs@kubism.ku.dk>; Fri, 29 Jan 1999 10:16:56 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.8.7/8.8.7) id KAA20566;
	Fri, 29 Jan 1999 10:18:27 +0100
To: jlindsey@alpha.luc.ac.be
Cc: r-core@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: an old bug resurfaces (PR#105)
References: <199901290728.IAA20526@biostat.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 29 Jan 1999 10:18:27 +0100
In-Reply-To: jlindsey@alpha.luc.ac.be's message of Fri, 29 Jan 1999 08:28:41 +0100
Message-ID: <x2lnimwi70.fsf@blueberry.kubism.ku.dk>
Lines: 30
X-Mailer: Gnus v5.5/Emacs 20.2

jlindsey@alpha.luc.ac.be writes:

> About two years or more ago, I reported the following bug in removing
> model terms. I cannot remember if it was fixed then or delayed to a
> future version, but here it is again (still):
> 
> y <- rpois(20,4)
> x1 <- gl(4,5)
> x2 <- gl(5,1,20)
> print(z <- glm(y~x1*x2))
> update(z,.~.-x1:(1+x2))
> 
> The last line should remove x1 and the interaction but only takes out
> the interaction.
>   Jim

Yes, these are sticky issues. Currently, model formulas don't seem to
respect algebraic laws... in particular ~x:1 == ~1, causing the effect
you mention.

This has a lot to do with the bitmap structure used for encoding
interactions, something we have taken over from S. This gives us the
usual dilemma: do it like S or do it right? (It's the same thing that
muddles up polynomial specifications like ~(1+x1+x2+x3)^3)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 105.audit <==
Tue Feb 16 15:54:15 1999	pd	moved from incoming to Language
Wed Feb 17 18:22:48 1999	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 263 *
Subject: Problems sourcing functions with R65.0
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
--There is a 128K limit on functions wirh keep.source set. Try modular
--programming!
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 263 <==
From plindsey@alpha.luc.ac.be  Wed Sep  1 11:55:55 1999
Received: from alpha.luc.ac.be (alpha.luc.ac.be [193.190.2.30])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA03710
	for <R-bugs@biostat.ku.dk>; Wed, 1 Sep 1999 11:55:55 +0200 (MET DST)
Received: (from plindsey@localhost)
	by alpha.luc.ac.be (8.9.3/8.9.3) id LAA11430
	for R-bugs@biostat.ku.dk; Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Message-Id: <199909010958.LAA11430@alpha.luc.ac.be>
Subject: Problems sourcing functions with R65.0
To: R-bugs@biostat.ku.dk (R bugs)
Date: Wed, 1 Sep 1999 11:58:51 +0200 (MET DST)
X-Mailer: ELM [version 2.4 PL23]
Content-Type: text

Hi,
Sorry for cross-posting the last error message.
I have encountered some more strange problems when loading another of my
libraries. I get a parsing error ("syntax error on line 1707"). I have
carefully looked at my code and there are no syntax errors. In fact, on
R64.1 this function was parsed in properly when the library was loaded
(I just copied the library from one version to another without making any
changes).
I saved my function which is 1734 lines long (all one function) and it appears
that source will not parse a function with more than 1707 lines. Even more
puzzling, if I copy the function and paste it right at the R prompt, the
function does not yield any parsing problem... Would there therefore be a
buffer limit problems of some kind for sourcing files??? If so how can I
modify it??
Thank you,
Patrick.


==> 263.audit <==
Sat Sep 25 21:44:18 1999	ripley	changed notes
Sat Sep 25 21:44:18 1999	ripley	moved from incoming to Language
Tue Oct 05 17:10:33 1999	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 394 *
Subject: formatC (bug and fix)
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Tue, 4 Jan 2000 10:31:53 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 394 <==
From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue Jan  4 10:37:02 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA02081
	for <R-bugs@biostat.ku.dk>; Tue, 4 Jan 2000 10:37:01 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id KAA26494
	for <r-bugs@hypatia.math.ethz.ch>; Tue, 4 Jan 2000 10:36:58 +0100 (MET)
Received: from UNKNOWN(194.175.113.15), claiming to be "hermes.mdfactory.de"
 via SMTP by hypatia, id smtpdAAAa006To; Tue Jan  4 10:36:46 2000
Received: from joelschlaegel ([172.26.2.169])
	by hermes.mdfactory.de (8.9.2/8.9.2) with SMTP id KAA00290
	for <r-bugs@lists.r-project.org>; Tue, 4 Jan 2000 10:35:34 +0100 (CET)
Reply-To: <jens.oehlschlaegel-akiyoshi@mdfactory.de>
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
To: <r-bugs@stat.math.ethz.ch>
Subject: formatC (bug and fix)
Date: Tue, 4 Jan 2000 10:31:53 +0100
Message-ID: <000501bf5696$89cc6460$a9021aac@joelschlaegel>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3110.3
Importance: Normal
X-MIME-Autoconverted: from 8bit to quoted-printable by hermes.mdfactory.de id KAA00290
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id KAA02081


OK:

> formatC(as.double(c(1,0,NA)))
[1] "1"  "0"  "NA"


NOT OK:

> formatC(as.integer(c(1,0,NA)))
[1] "0"          "1072693248" "NA"

> formatC(as.integer(c(0,1,NA)))
[1] "0"  "0"  "NA"


BUG TRACED TO R-code of formatC()

where

        x[!Ok] <- 0

unintendedly changes the storage.mode of x to double, while variable mode
still signifies 'integer'. Thus the following is probably ok as bug fix

        ProperZero <- 0
        storage.mode(ProperZero) <- mode
        x[!Ok] <- ProperZero


At least the following tests are positive using this fix

> formatC(as.integer(c(1,0,NA)))
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)))
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), format="d")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), format="f")
[1] "1.0000" "0.0000" "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="integer")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), mode="double")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="double")
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer", format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="integer", format="d")
[1] "1"  "0"  "NA"
> formatC(as.integer(c(1,0,NA)), mode="double", format="d")
[1] "1"  "0"  "NA"
> formatC(as.double(c(1,0,NA)), mode="double", format="d")
[1] "1"  "0"  "NA"
>
> formatC(as.integer(c(1,0,NA)), mode="integer", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), mode="integer", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.integer(c(1,0,NA)), mode="double", format="f")
[1] "1.0000" "0.0000" "NA"
> formatC(as.double(c(1,0,NA)), mode="double", format="f")
[1] "1.0000" "0.0000" "NA"


> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


Best regards


--
Dr. Jens Oehlschlägel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 München

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.



==> 394.audit <==
Wed Feb 16 19:28:42 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 408 <==
From wsimpson@gcal.ac.uk  Fri Jan 28 11:17:36 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA11325
	for <R-bugs@biostat.ku.dk>; Fri, 28 Jan 2000 11:17:36 +0100 (MET)
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
From: wsimpson@gcal.ac.uk
Message-Id: <200001281017.LAA11325@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: convolution bug

Full_Name: Bill Simpson
Version: 65.1 , 0.90.1
OS: Linux
Submission from: (NULL) (193.62.250.209)


I reported this on r-help, but here is official bug report.

The present convolve() does not do convolution by default. Its default behaviour
is
correlation. This is a bug.

The default argument conj should be set to FALSE.

The zero-padding should be on the right for linear convolution (don't ask me
why you call this type="open"; I suggest type="linear").

Here is what I expect linear convolution to do:
myconvolve<-function (x,h) 
{
    nx <- length(x)
    nh <- length(h)
    #zero pad
    if(nx>nh)
       {
       x <- c(x,rep(0, nh-1))
       h<-c(h,rep(0,nx-1))
       }
    else
       {
       h <- c(h,rep(0, nx-1))
       x<-c(x,rep(0,nh-1))
       }
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/length(x)
#I am not sure about this, the R IFFT is weird
}

What "circular" convolution should do is just
eliminate the zero-padding:

myconvolve2<-function (x,h)
{
#no padding, circular convolution
    nx <- length(x)
    nh <- length(h)
    x <- fft(fft(x) * fft(h), inv = TRUE)
    Re(x)/(nx)
}


I suggest that you create two functions, convolve() and correlate(), and get
rid
of the conj argument in convolve().

==> 408.audit <==
Wed Feb 16 19:28:42 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 412 <==
From postmaster@franz.stat.wisc.edu  Sun Feb  6 01:16:33 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26868
	for <R-bugs@biostat.ku.dk>; Sun, 6 Feb 2000 01:16:31 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id BAA18080
	for <r-bugs@hypatia.math.ethz.ch>; Sun, 6 Feb 2000 01:16:38 +0100 (MET)
Received: from franz.stat.wisc.edu(128.105.174.95)
 via SMTP by hypatia, id smtpdAAAa004QS; Sun Feb  6 01:16:33 2000
Received: from pubhealth.ku.dk (really [130.225.108.10]) by franz.stat.wisc.edu
	via smail with esmtp
	id <m12HFNP-000ZSxC@franz.stat.wisc.edu> (Debian Smail3.2.0.102)
	for <r-bugs@r-project.org>; Sat, 5 Feb 2000 18:16:31 -0600 (CST) 
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA26864
	for <r-bugs@r-project.org>; Sun, 6 Feb 2000 01:16:18 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id BAA12311;
	Sun, 6 Feb 2000 01:18:51 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-bugs@r-project.org
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
Message-ID: <x2900zyyhh.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Call objects don't always behave as you'd expect. They're mostly
list-like, but with exceptions:

> f<-function(x,y,...)match.call(expand.dots=FALSE)
> xx <- f(y=1,2,z=3,4)
> dd <- xx$...
> xx$... <- NULL
> c(xx,dd)
[[1]]
f(x = 2, y = 1)

$z
[1] 3

[[3]]
[1] 4

> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, z = 3, 4)

(Splus has this rather differently, since dd becomes a call to list()
rather than a list of promises:

S> c(xx,dd)
f(x = 2, y = 1, list, z = 3, 4)
S> as.call(c(as.list(xx),dd))
f(x = 2, y = 1, list, z = 3, 4)

...but at least gives the same in both cases)

Also, the names of arguments added with [[<- is getting dropped if a
new element is required:

> xx[["abc"]]<-123
> xx
f(x = 2, y = 1, 123)

S has what I'd expect there:

S> xx[["abc"]]<-123
S> xx
f(x = 2, y = 1, abc = 123)

[R-0.99.0 prerelease on RedHat6.1, but this is likely not a new thing.]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 412.audit <==
Wed Feb 16 19:26:57 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 424 *
Subject: strsplit
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Tue, 8 Feb 2000 12:58:09 +0100 (MET)
--Intentional change
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 424 <==
From jlindsey@alpha.luc.ac.be  Tue Feb  8 12:58:05 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA19357
	for <R-bugs@biostat.ku.dk>; Tue, 8 Feb 2000 12:58:04 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id MAA02552
	for <r-bugs@stat.math.ethz.ch>; Tue, 8 Feb 2000 12:58:12 +0100 (MET)
Received: from alpha.luc.ac.be(193.190.2.30)
 via SMTP by hypatia, id smtpdAAAa000bq; Tue Feb  8 12:58:10 2000
Received: (from jlindsey@localhost)
	by alpha.luc.ac.be (8.9.3/8.9.3) id MAA16701
	for r-bugs@stat.math.ethz.ch; Tue, 8 Feb 2000 12:58:09 +0100 (MET)
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Message-Id: <200002081158.MAA16701@alpha.luc.ac.be>
Subject: strsplit
To: r-bugs@stat.math.ethz.ch (rbugs)
Date: Tue, 8 Feb 2000 12:58:09 +0100 (MET)
X-Mailer: ELM [version 2.5 PL1]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

In R.99, when you strsplit with a space (split=" ") as separator and
the string contains two consecutive spaces, "" is returned.

strsplit("  "," ")
returns
[[1]]
[1] "" ""
whereas it used to return character(0)
  Is this really useful like this?? It certainly messes all my code up. Jim

==> 424.audit <==
Wed Feb 16 19:12:38 2000	ripley	changed notes
Wed Feb 16 19:12:38 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 425 *
Subject: Row subsetting of data frames
From: Martyn Plummer <plummer@iarc.fr>
Date: Wed, 09 Feb 2000 18:46:07 +0100 (CET)
--pmatch is not S-compatible
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 425 <==
From plummer@iarc.fr  Wed Feb  9 18:38:11 2000
Received: from smtp02.iarc.fr (IDENT:root@uu194-7-167-221.unknown.uunet.be [194.7.167.221])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA09758
	for <R-bugs@biostat.ku.dk>; Wed, 9 Feb 2000 18:38:10 +0100 (MET)
Received: from xena.iarc.fr ([10.10.150.125])
	by smtp02.iarc.fr (8.9.3/8.9.3) with ESMTP id SAA12742
	for <R-bugs@biostat.ku.dk>; Wed, 9 Feb 2000 18:38:19 +0100
Message-ID: <XFMail.000209184607.plummer@iarc.fr>
X-Mailer: XFMail 1.3 [p0] on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
Date: Wed, 09 Feb 2000 18:46:07 +0100 (CET)
Organization: International Agency for Research on Cancer
Sender: martyn@xena.iarc.fr
From: Martyn Plummer <plummer@iarc.fr>
To: R-bugs@biostat.ku.dk
Subject: Row subsetting of data frames

If you want to use row names to take a row subset of a data.frame then
there is a bug when
- One row has a name which is a completion of another row name
- The shorter name comes after the longer one
- You want to retrieve the row with the shorter name

An example:

R> x <- matrix(1:4, 2, 2, dimnames=list(c("abc","ab"), c("cde","cd")))
R> x
    cde cd
abc   1  3
ab    2  4
R> x["ab",]                       #Works OK for matrices
cde  cd 
  2   4 
R> y <- as.data.frame(x)
R> y["ab",]                       #but not for a data frame
    cde cd
abc   1  3

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 425.followup.1 <==
From ripley@stats.ox.ac.uk  Wed Feb  9 19:04:08 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA09869
	for <R-bugs@biostat.ku.dk>; Wed, 9 Feb 2000 19:04:05 +0100 (MET)
Received: from toucan.stats (toucan.stats [163.1.20.20])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with SMTP id SAA20232;
	Wed, 9 Feb 2000 18:04:06 GMT
Message-Id: <200002091804.SAA20232@toucan.stats.ox.ac.uk>
Date: Wed, 9 Feb 2000 18:04:06 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Reply-To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Subject: Re: [Rd] Row subsetting of data frames (PR#425)
To: r-devel@stat.math.ethz.ch, plummer@iarc.fr
Cc: R-bugs@biostat.ku.dk
MIME-Version: 1.0
Content-Type: TEXT/plain; charset=us-ascii
Content-MD5: NF2e4k+zh17+t7Zol5D9Ng==
X-Mailer: dtmail 1.2.1 CDE Version 1.2.1 SunOS 5.6 sun4m sparc 


> From: plummer@iarc.fr
> Date: Wed, 9 Feb 2000 18:38:12 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Row subsetting of data frames (PR#425)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> If you want to use row names to take a row subset of a data.frame then
> there is a bug when
> - One row has a name which is a completion of another row name
> - The shorter name comes after the longer one
> - You want to retrieve the row with the shorter name
> 
> An example:
> 
> R> x <- matrix(1:4, 2, 2, dimnames=list(c("abc","ab"), c("cde","cd")))
> R> x
>     cde cd
> abc   1  3
> ab    2  4
> R> x["ab",]                       #Works OK for matrices
> cde  cd 
>   2   4 
> R> y <- as.data.frame(x)
> R> y["ab",]                       #but not for a data frame
>     cde cd
> abc   1  3

The problem boils down to

>  pmatch("ab", c("abc", "ab"), duplicates.ok = T)
[1] 1

and the code expects 2, which is what S gives.  The description of

duplicates.ok: should duplicate matches be allowed?

     If there are multiple matches the result depends on the value of
     `duplicates.ok'. If this is false multiple matches will result in
     the value of `nomatch' being returned, and if it is true, the
     index of the first matching value will be returned.

is different from S: the argument in S refers to allowing
duplicates in x, so

> pmatch(rep("ab",3), c("abc", "ab"), duplicates.ok = T)
[1] 2 2 2
> pmatch(rep("ab",3), c("abc", "ab"), duplicates.ok = F)
[1]  2  1 NA

A quick fix is in [.data.frame, to give

        if (is.character(i))
            i <- sapply(i, function(x) match(x, rows))

but I think we should make pmatch S-compatible.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 425.followup.2 <==
From ripley@stats.ox.ac.uk  Wed Feb  9 19:14:25 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA09925
	for <R-bugs@biostat.ku.dk>; Wed, 9 Feb 2000 19:14:24 +0100 (MET)
Received: from toucan.stats (toucan.stats [163.1.20.20])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with SMTP id SAA20272;
	Wed, 9 Feb 2000 18:14:26 GMT
Message-Id: <200002091814.SAA20272@toucan.stats.ox.ac.uk>
Date: Wed, 9 Feb 2000 18:14:26 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Reply-To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Subject: Re: [Rd] Row subsetting of data frames (PR#425)
To: r-devel@stat.math.ethz.ch, plummer@iarc.fr
Cc: R-bugs@biostat.ku.dk
MIME-Version: 1.0
Content-Type: TEXT/plain; charset=us-ascii
Content-MD5: DHTr1Uj+TNn+UpS6+oKFsw==
X-Mailer: dtmail 1.2.1 CDE Version 1.2.1 SunOS 5.6 sun4m sparc 

> Date: Wed, 9 Feb 2000 18:04:06 +0000 (GMT)
> From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> 
>         if (is.character(i))
>             i <- sapply(i, function(x) match(x, rows))

Oops: I actually tested pmatch, which is what you want here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


==> 425.audit <==
Wed Feb 16 19:14:45 2000	ripley	changed notes
Wed Feb 16 19:14:45 2000	ripley	moved from incoming to Language
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Low-level

* PR# 197 *
Subject: glm crash
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
--Obscure report. Cannot reproduce from given info.
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 197 <==
From Cor.Berrevoets@gironet.nl  Fri May 21 20:04:11 1999
Received: from smtp01.wxs.nl (smtp01.wxs.nl [195.121.6.61])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA12861
	for <r-bugs@biostat.ku.dk>; Fri, 21 May 1999 20:04:10 +0200 (MET DST)
Received: from gironet.nl ([195.121.144.109]) by smtp01.wxs.nl
          (Netscape Messaging Server 3.61)  with ESMTP id AAA2BE7
          for <r-bugs@biostat.ku.dk>; Fri, 21 May 1999 20:05:04 +0200
Message-ID: <37459B76.2E0156F0@gironet.nl>
Date: Fri, 21 May 1999 19:44:23 +0200
From: Cor en Aylin <Cor.Berrevoets@gironet.nl>
X-Mailer: Mozilla 4.5 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: r-bugs@biostat.ku.dk
Subject: glm crash
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Dear bug-busters,

This week I've posted a message to the R-help mailing to inquire if
anybody had experienced alike me. When I run the following GLM:
glm(n~s+c+m, family=quasi(link=log, variance=mu))
several times using exactly the same dataset R crashes at random. I have
tried to probe into the problem by tracking the response times of the
above function with system.time (e.g. system.time(glm ....))

I noticed that the response times increased in subsequent calls to the
function, at some (random) point leading to a crash. So it looked as if
R was "leaking" somewhere. Then I started all-over again (restarted PC)
and released before the glm-command a gc-command to collect the garbage.
That works rather well and the crashing seems less frequent (mostly
after 3-4 times issueing the glm-command) . Also the increasing response
times changed into a stable component with one big exception, the First
Call. Every time after fully re-starting R I issued gc() and then the
glm-command . This call is about 1/3 or so of the time spend in the
subsequent calls. Looking at the Ncells/Vcells hardly any difference
exists, on average the Ncells/Vcells (virgin state of the program) are
about 50 cells bigger than after the subsequent glm-commands.  In the
table below you can see the effects I just mentioned, notice the "odd"
behaviour of the default Vsize.

Table: response times glm function at varying Vsizes.

Vsize    1st response    subsequent
default            47.57        27.96
8M                39.27        62.15
16M              38.44        62.37
32M              13.34        32.77
64M              10.13        34.28
128M            11.45        34.21

Im using R 0.64.1 on Win95..

Maybe someone of your team can tell me more on the nature of this
"thing".

Hoping not to bug to much,

greetings

Cor Berrevoets





==> 197.reply.1 <==
From thomas@biostat.washington.edu  Fri May 21 20:21:04 1999
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA12976
	for <R-bugs@biostat.ku.dk>; Fri, 21 May 1999 20:21:03 +0200 (MET DST)
Received: from wompom.biostat.washington.edu (wompom.biostat.washington.edu [128.95.21.54])
	by mail.biostat.washington.edu (8.9.1b+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id LAA24202;
	Fri, 21 May 1999 11:22:22 -0700 (PDT)
Date: Fri, 21 May 1999 11:22:21 -0700 (PDT)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: Cor.Berrevoets@gironet.nl
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: glm crash (PR#197)
In-Reply-To: <199905211804.UAA12871@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9905211112010.269-100000@wompom.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 21 May 1999 Cor.Berrevoets@gironet.nl wrote:

> Dear bug-busters,
> 
> This week I've posted a message to the R-help mailing to inquire if
> anybody had experienced alike me. When I run the following GLM:
> glm(n~s+c+m, family=quasi(link=log, variance=mu))
> several times using exactly the same dataset R crashes at random. I have
> tried to probe into the problem by tracking the response times of the
> above function with system.time (e.g. system.time(glm ....))

This could be some nasty form of memory problem, but it is difficult to
tell.  With a program as complex as R it is very hard to diagnose bugs
from symptoms like this.

At a minimum we need to know exactly what message R gives, however this
probably isn't enough. An example data set that reliably produces the
problem gives us a chance to track the bug down and at least makes it
easy to distinguish Windows-based bugs from general-purpose bugs.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



==> 197.followup.1 <==
From guido@hal.stat.unipd.it  Fri May 21 21:10:11 1999
Received: from hal.stat.unipd.it (hal.stat.unipd.it [147.162.35.2])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id VAA13309
	for <R-bugs@biostat.ku.dk>; Fri, 21 May 1999 21:10:10 +0200 (MET DST)
Received: by hal.stat.unipd.it (8.7.5/1)
	id UAA21344; Fri, 21 May 1999 20:09:06 GMT
Reply-To: guido@hal.stat.unipd.it (Guido Masarotto)
Message-ID: <19990521210906.00262@hal.stat.unipd.it>
Date: Fri, 21 May 1999 21:09:06 +0100
From: Guido Masarotto <guido@hal.stat.unipd.it>
To: Cor.Berrevoets@gironet.nl
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: glm crash (PR#197)
References: <199905211804.UAA12871@pubhealth.ku.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.76
In-Reply-To: <199905211804.UAA12871@pubhealth.ku.dk>; from Cor.Berrevoets@gironet.nl on Fri, May 21, 1999 at 08:04:12PM +0200

On Fri, May 21, 1999 at 08:04:12PM +0200, Cor.Berrevoets@gironet.nl wrote:
> Dear bug-busters,
> 
> This week I've posted a message to the R-help mailing to inquire if
  
  Cor,
  I apologize for not asking you what follows after your first message.

> anybody had experienced alike me. When I run the following GLM:
> glm(n~s+c+m, family=quasi(link=log, variance=mu))

  Could you send me the data? I will try to replicate the error
  both under Windows and some flavour of Unixes to try to understand
  what is going on. 
  Have you got into similar problem with previous version?
  
  guido

==> 197.audit <==
Wed Jun 30 19:31:18 1999	pd	moved from incoming to Low-level
Thu Jul 01 18:27:03 1999	pd	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 296 *
Subject: source(,echo=T) doesn't echo comments
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
--Currently, a feature
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 296 <==
From thomas@biostat.washington.edu  Thu Oct 21 17:59:23 1999
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA06418
	for <r-bugs@biostat.ku.dk>; Thu, 21 Oct 1999 17:59:22 +0200 (MET DST)
Received: from wompom.biostat.washington.edu (wompom.biostat.washington.edu [128.95.21.54])
	by mail.biostat.washington.edu (8.9.1b+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id IAA24230
	for <r-bugs@biostat.ku.dk>; Thu, 21 Oct 1999 08:59:25 -0700 (PDT)
Date: Thu, 21 Oct 1999 08:59:22 -0700 (PDT)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: r-bugs@biostat.ku.dk
Subject: source(,echo=T) doesn't echo comments
Message-ID: <Pine.GSO.4.10.9910210857370.3098-100000@wompom.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


I don't know if this is a bug report or a feature request, but a colleague
complained that source(,echo=T) doesn't echo the comments from the source
file.

	
Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



==> 296.reply.1 <==
From maechler@stat.math.ethz.ch  Thu Oct 21 18:42:48 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA06541
	for <R-bugs@biostat.ku.dk>; Thu, 21 Oct 1999 18:42:48 +0200 (MET DST)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA28802;
	Thu, 21 Oct 1999 18:42:44 +0200 (MET DST)
Received: from sophie(129.132.58.2), claiming to be "sophie.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa00720; Thu Oct 21 18:42:35 1999
Received: (maechler@localhost) by sophie.ethz.ch (8.6.12/D-MATH-client) id SAA20202; Thu, 21 Oct 1999 18:42:34 +0200
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14351.17017.470890.813518@gargle.gargle.HOWL>
Date: Thu, 21 Oct 1999 18:42:33 +0200 (MET DST)
To: thomas@biostat.washington.edu
Cc: R-bugs@biostat.ku.dk
Subject: Re: source(,echo=T) doesn't echo comments (PR#296)
In-Reply-To: <199910211559.RAA06428@pubhealth.ku.dk>
References: <199910211559.RAA06428@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 20.4.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>

>>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:

    TL> I don't know if this is a bug report or a feature request, but a
    TL> colleague complained that source(,echo=T) doesn't echo the comments
    TL> from the source file.

This is what the new comment treatment brought us
{I hate it as well;  also applies to   example(.)}.

It seemed very hard to correctly attach comments to expressions,
(remember all the misplaced comments in 0.63.x ?).
so now the parser already throws all comments into the trash can.
No way to see them anymore.
AFAIK, we only see them with functions that have "keep.source"
Peter Dalgaard will be able to elaborate.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

==> 296.reply.2 <==
From pd@blueberry.kubism.ku.dk  Thu Oct 21 19:24:44 1999
Received: from blueberry.kubism.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA06657
	for <R-bugs@biostat.ku.dk>; Thu, 21 Oct 1999 19:24:43 +0200 (MET DST)
Received: (from pd@localhost)
	by blueberry.kubism.ku.dk (8.9.3/8.9.3) id TAA03797;
	Thu, 21 Oct 1999 19:30:53 +0200
Sender: pd@blueberry.kubism.ku.dk
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: source(,echo=T) doesn't echo comments (PR#296)
References: <199910211642.SAA06551@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 21 Oct 1999 19:30:53 +0200
In-Reply-To: maechler@stat.math.ethz.ch's message of "Thu, 21 Oct 1999 18:42:51 +0200 (MET DST)"
Message-ID: <x2yacwk4du.fsf@blueberry.kubism.ku.dk>
Lines: 33
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

maechler@stat.math.ethz.ch writes:

> >>>>> "TL" == Thomas Lumley <thomas@biostat.washington.edu> writes:
> 
>     TL> I don't know if this is a bug report or a feature request, but a
>     TL> colleague complained that source(,echo=T) doesn't echo the comments
>     TL> from the source file.
> 
> This is what the new comment treatment brought us
> {I hate it as well;  also applies to   example(.)}.
> 
> It seemed very hard to correctly attach comments to expressions,
> (remember all the misplaced comments in 0.63.x ?).
> so now the parser already throws all comments into the trash can.
> No way to see them anymore.
> AFAIK, we only see them with functions that have "keep.source"
> Peter Dalgaard will be able to elaborate.

There's not much more to say. If anyone can think of a better
scheme (perhaps keeping line numbers with the parsed expressions and
rereading the file?)...

The keep.source functionality is also a mixed blessing. It prevents
the system from throwing away things that were commented out and
messing up carefully formatted code, but is also leaves you stuck with
that which was sloppily writte to begin with.

Otherwise we have to rethink the parser. 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 296.audit <==
Sun Nov 07 08:31:36 1999	ripley	changed notes
Sun Nov 07 08:31:36 1999	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 343 *
Subject: rbind invisible return value
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Wed, 24 Nov 1999 11:34:10 -0800 (PST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 343 <==
From thomas@biostat.washington.edu  Wed Nov 24 20:34:15 1999
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id UAA09276
	for <R-bugs@biostat.ku.dk>; Wed, 24 Nov 1999 20:34:14 +0100 (MET)
Received: from wompom.biostat.washington.edu (wompom.biostat.washington.edu [128.95.21.54])
	by mail.biostat.washington.edu (8.9.1b+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id LAA01462
	for <R-bugs@biostat.ku.dk>; Wed, 24 Nov 1999 11:34:14 -0800 (PST)
Date: Wed, 24 Nov 1999 11:34:10 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: R-bugs@biostat.ku.dk
Subject: rbind invisible return value
In-Reply-To: <199911241426.PAA07010@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.9911241131290.17266-100000@wompom.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


An assignment in an argument sometimes makes rbind return invisibly

> rbind(diag(3),a<-1:3)
> print(rbind(diag(3),a<-1:3))
     [,1] [,2] [,3]
[1,]    1    0    0
[2,]    0    1    0
[3,]    0    0    1
[4,]    1    2    3

> version
         _                           
platform sparc-sun-solaris2.7        
arch     sparc                       
os       solaris2.7                  
system   sparc, solaris2.7           
status   Under development (unstable)
major    0                           
minor    99.0                        
year     1999                        
month    November                    
day      23                          
language R 


==> 343.reply.1 <==
From pd@biostat.ku.dk  Thu Nov 25 11:58:27 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA15452;
	Thu, 25 Nov 1999 11:58:26 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id LAA10595;
	Thu, 25 Nov 1999 11:59:28 +0100
Sender: pd@blueberry.kubism.ku.dk
To: thomas@biostat.washington.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: rbind invisible return value (PR#343)
References: <199911241934.UAA09286@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Nov 1999 11:59:27 +0100
In-Reply-To: thomas@biostat.washington.edu's message of "Wed, 24 Nov 1999 20:34:16 +0100 (MET)"
Message-ID: <x27lj6rg4w.fsf@blueberry.kubism.ku.dk>
Lines: 19
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

thomas@biostat.washington.edu writes:

> An assignment in an argument sometimes makes rbind return invisibly
> 
> > rbind(diag(3),a<-1:3)
> > print(rbind(diag(3),a<-1:3))
>      [,1] [,2] [,3]
> [1,]    1    0    0
> [2,]    0    1    0
> [3,]    0    0    1
> [4,]    1    2    3

Ditto with cbind(). Not new, 0.65.1 does likewise.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 343.audit <==
Wed Dec 08 16:53:21 1999	maechler	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 358 *
Subject: [[ substitution
From: clive@bell-labs.com
Date: Fri, 3 Dec 1999 16:45:08 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 358 <==
From clive@bell-labs.com  Fri Dec  3 16:45:09 1999
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA08646
	for <R-bugs@biostat.ku.dk>; Fri, 3 Dec 1999 16:45:08 +0100 (MET)
Date: Fri, 3 Dec 1999 16:45:08 +0100 (MET)
From: clive@bell-labs.com
Message-Id: <199912031545.QAA08646@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: [[ substitution

Full_Name: Clive
Version: 0.90.0
OS: Linux (RH6.0)
Submission from: (NULL) (135.104.13.164)


Probably known, but...

> z <- vector("list",4)
> z[[1]] <- function(x)x
Error in "[[<-"(*tmp*, 1, value = function(x) x) : incompatible types

(works fine in S4...)

==> 358.reply.1 <==
From thomas@biostat.washington.edu  Fri Dec  3 17:59:49 1999
Received: from mail.biostat.washington.edu (mail.biostat.washington.edu [128.95.113.21])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA09268
	for <R-bugs@biostat.ku.dk>; Fri, 3 Dec 1999 17:59:48 +0100 (MET)
Received: from gorn (gorn.biostat.washington.edu [128.208.29.15])
	by mail.biostat.washington.edu (8.9.1b+Sun/8.9.1-fetrow-99-05-16b) with ESMTP id IAA01406;
	Fri, 3 Dec 1999 08:59:46 -0800 (PST)
Date: Fri, 3 Dec 1999 08:58:07 -0800 (PST)
From: Thomas Lumley <thomas@biostat.washington.edu>
To: clive@bell-labs.com
cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [[ substitution (PR#358)
In-Reply-To: <199912031545.QAA08656@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.9912030853280.18666-100000@gorn.biostat.washington.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 3 Dec 1999 clive@bell-labs.com wrote:

> Full_Name: Clive
> Version: 0.90.0
> OS: Linux (RH6.0)
> Submission from: (NULL) (135.104.13.164)
> 
> 
> Probably known, but...
> 
> > z <- vector("list",4)
> > z[[1]] <- function(x)x
> Error in "[[<-"(*tmp*, 1, value = function(x) x) : incompatible types
> 
> (works fine in S4...)

In S 3 or 4 this works because functions are lists, in R they are not
lists. 

More worrying is 

	a<-list(one=sin,two=lm)
	a[[2]]<-sort  #fails
	a$two<-sort     #succeeds
	


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


==> 358.reply.2 <==
From pd@biostat.ku.dk  Fri Dec  3 17:59:50 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id RAA09278;
	Fri, 3 Dec 1999 17:59:50 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id SAA12651;
	Fri, 3 Dec 1999 18:02:07 +0100
Sender: pd@blueberry.kubism.ku.dk
To: clive@bell-labs.com
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [[ substitution (PR#358)
References: <199912031545.QAA08656@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 03 Dec 1999 18:02:07 +0100
In-Reply-To: clive@bell-labs.com's message of "Fri, 3 Dec 1999 16:45:10 +0100 (MET)"
Message-ID: <x2vh6gnek0.fsf@blueberry.kubism.ku.dk>
Lines: 18
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

clive@bell-labs.com writes:

> Probably known, but...
> 
> > z <- vector("list",4)
> > z[[1]] <- function(x)x
> Error in "[[<-"(*tmp*, 1, value = function(x) x) : incompatible types
> 
> (works fine in S4...)

Nope. Didn't know about that one. Works in S3 as well (and should
work in R, obviously). Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 358.audit <==
Sun Dec 12 07:55:12 1999	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 377 *
Subject: lists of functions
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Fri, 17 Dec 1999 09:10:50 +0100 (MET)
--same as PR#358
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 377 <==
From jlindsey@alpha.luc.ac.be  Fri Dec 17 09:10:54 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id JAA26651
	for <R-bugs@biostat.ku.dk>; Fri, 17 Dec 1999 09:10:53 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id JAA03447
	for <r-bugs@stat.math.ethz.ch>; Fri, 17 Dec 1999 09:10:59 +0100 (MET)
Received: from alpha.luc.ac.be(193.190.2.30)
 via SMTP by hypatia, id smtpdAAAa000pi; Fri Dec 17 09:10:51 1999
Received: (from jlindsey@localhost)
	by alpha.luc.ac.be (8.9.3/8.9.3) id JAA14878
	for r-bugs@stat.math.ethz.ch; Fri, 17 Dec 1999 09:10:50 +0100 (MET)
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Message-Id: <199912170810.JAA14878@alpha.luc.ac.be>
Subject: lists of functions
To: r-bugs@stat.math.ethz.ch (rbugs)
Date: Fri, 17 Dec 1999 09:10:50 +0100 (MET)
X-Mailer: ELM [version 2.5 PL1]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

The following works:

list(function() 1, function() 2)

but this does not:

z <- list()
zz[[1]] <- function() 1

giving an "incompatible types" error.
The second procedure works with other types of objects.
Intel RH5.2 with R90.1.
  Jim

==> 377.reply.1 <==
From pd@biostat.ku.dk  Fri Dec 17 12:46:17 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id MAA00579;
	Fri, 17 Dec 1999 12:46:16 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id MAA32308;
	Fri, 17 Dec 1999 12:50:28 +0100
Sender: pd@blueberry.kubism.ku.dk
To: jlindsey@alpha.luc.ac.be
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: lists of functions (PR#377)
References: <199912170810.JAA26661@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Dec 1999 12:50:27 +0100
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Fri, 17 Dec 1999 09:10:55 +0100 (MET)"
Message-ID: <x23dt1wzuk.fsf@blueberry.kubism.ku.dk>
Lines: 23
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

jlindsey@alpha.luc.ac.be writes:

> The following works:
> 
> list(function() 1, function() 2)
> 
> but this does not:
> 
> z <- list()
> zz[[1]] <- function() 1
> 
> giving an "incompatible types" error.
> The second procedure works with other types of objects.
> Intel RH5.2 with R90.1.

Same as Clive Loaders #358 (Darn! I think we almost had a fix for that
one, but forgot to apply it. Thomas?)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 377.audit <==
Wed Jan 26 19:27:44 2000	ripley	changed notes
Wed Jan 26 19:27:44 2000	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 386 *
Subject: as.matrix.data.frame() modifies content of character columns
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Wed, 22 Dec 1999 16:18:19 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 386 <==
From jens.oehlschlaegel-akiyoshi@mdfactory.de  Wed Dec 22 16:22:59 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id QAA12770
	for <R-bugs@biostat.ku.dk>; Wed, 22 Dec 1999 16:22:59 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id QAA21417
	for <r-bugs@hypatia.math.ethz.ch>; Wed, 22 Dec 1999 16:23:02 +0100 (MET)
Received: from UNKNOWN(194.175.113.15), claiming to be "hermes.mdfactory.de"
 via SMTP by hypatia, id smtpdAAAa005ES; Wed Dec 22 16:22:56 1999
Received: from joelschlaegel ([172.26.2.169])
	by hermes.mdfactory.de (8.9.2/8.9.2) with SMTP id QAA14668
	for <r-bugs@lists.r-project.org>; Wed, 22 Dec 1999 16:21:52 +0100 (CET)
Reply-To: <jens.oehlschlaegel-akiyoshi@mdfactory.de>
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
To: <r-bugs@stat.math.ethz.ch>
Subject: as.matrix.data.frame() modifies content of character columns
Date: Wed, 22 Dec 1999 16:18:19 +0100
Message-ID: <000701bf4c8f$c7e940d0$a9021aac@joelschlaegel>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3110.3
Importance: Normal
X-MIME-Autoconverted: from 8bit to quoted-printable by hermes.mdfactory.de id QAA14668
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id QAA12770



If you have the following dataframe:

> x <- data.frame(x=I(rep('"', 3)))

then

> as.matrix(x)[1,1] == x[1,1]
[1] FALSE

which seems to be WRONG to me.

Also I don't understand
> x
     x
1 \\\"
2 \\\"
3 \\\"


Details
=======

As expected
> unclass(x)
$x
[1] "\"" "\"" "\""
attr(,"class")
[1] "AsIs"

attr(,"row.names")
[1] "1" "2" "3"


but now look at this
correct:
> x[1,1]
[1] "\""

wrong:
> as.matrix(x)[1,1]
[1] "\\\""

this is not only a printing problem
correct:
> cat(x[1,1], "\n")
"

wrong:
> cat(as.matrix(x)[1,1], "\n")
\"


Interpretation
==============

To my understanding, this is caused, because as.matrix.data.frame makes use
of format, and format does

> cat(format('"'), "\n")
\"

If this is the cause and format() does right, then consequently

         format MUST NEVER be used within R routines EXCEPT FOR PRINTING,
         i.e. formatting something and storing it or returning it from a
function is dangerous.
         Even the use for cat() may be dangerous, as cat() as a side effect
may store data,
         as in write() or write.table(). This deserves a BIG warning in the
documentation of format.

Here is a list of functions of package:base making use of format

> collect <- character()
> for (i in ls("package:base")){
+   if (   any(grep("format[(]", deparse(get(i, pos="package:base"))))
+       || any(grep("format.default[(]", deparse(get(i,
pos="package:base"))))
+      )collect <- c(collect, i)
+ }
> collect
 [1] "add1.default"          "add1.glm"              "add1.lm"
"all.equal.numeric"
 [5] "anovalist.lm"          "as.matrix.data.frame"  "drop1.default"
"drop1.glm"
 [9] "drop1.lm"              "format.char"           "format.default"
"format.pval"
[13] "help.search"           "hist.default"          "legend"
"ls.print"
[17] "print.aov"             "print.aovlist"         "print.coefmat"
"print.dummy.coef"
[21] "print.glm"             "print.glm.null"        "print.htest"
"print.lm"
[25] "print.mtable"          "print.summary.glm"     "print.summary.lm"
"print.summary.lm.null"
[29] "print.tables.aov"      "print.ts"              "quantile.default"
"step"
[33] "str.default"           "summary.aov"           "summary.data.frame"
"summary.default"
[37] "summary.infl"          "symnum"



platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R


--
Dr. Jens Oehlschlägel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 München

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.



==> 386.audit <==
Wed Jan 26 19:31:10 2000	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 387 *
Subject: different subscripting behaviour using  $<-  or  [<-  for data.frames
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Thu, 23 Dec 1999 19:10:17 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 387 <==
From jens.oehlschlaegel-akiyoshi@mdfactory.de  Thu Dec 23 19:15:35 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA21677
	for <R-bugs@biostat.ku.dk>; Thu, 23 Dec 1999 19:15:04 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id TAA28241
	for <r-bugs@hypatia.math.ethz.ch>; Thu, 23 Dec 1999 19:15:07 +0100 (MET)
Received: from UNKNOWN(194.175.113.15), claiming to be "hermes.mdfactory.de"
 via SMTP by hypatia, id smtpdAAAa006tE; Thu Dec 23 19:14:58 1999
Received: from joelschlaegel ([172.26.2.169])
	by hermes.mdfactory.de (8.9.2/8.9.2) with SMTP id TAA29677
	for <r-bugs@lists.r-project.org>; Thu, 23 Dec 1999 19:13:50 +0100 (CET)
Reply-To: <jens.oehlschlaegel-akiyoshi@mdfactory.de>
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
To: <r-bugs@stat.math.ethz.ch>
Subject: different subscripting behaviour using  $<-  or  [<-  for data.frames
Date: Thu, 23 Dec 1999 19:10:17 +0100
Message-ID: <000e01bf4d70$f85d1930$a9021aac@joelschlaegel>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3110.3
Importance: Normal
X-MIME-Autoconverted: from 8bit to quoted-printable by hermes.mdfactory.de id TAA29677
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id TAA21677



I observe if

> char <- letters[1:2]
> fac <- factor(char)
> dd <- data.frame(char=I(char), fac=fac)

then

> dd[,"char"] <- char
> dd[,"char"]
[1] a b
Levels:  a b

and

> dd$char <- char
> dd$char
[1] "a" "b"

are different.

After the latter operation the data.frame contains a character column, which
neither has attribute "AsIs" nor has been converted to class factor. Is this
intended?


platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R

--
Dr. Jens Oehlschlägel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 München

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.


==> 387.audit <==
Wed Jan 26 19:30:47 2000	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 388 *
Subject: data.frame(I(matrix)) ?
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
Date: Thu, 23 Dec 1999 19:12:58 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 388 <==
From jens.oehlschlaegel-akiyoshi@mdfactory.de  Thu Dec 23 19:17:43 1999
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA21708
	for <R-bugs@biostat.ku.dk>; Thu, 23 Dec 1999 19:17:43 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id TAA28293
	for <r-bugs@hypatia.math.ethz.ch>; Thu, 23 Dec 1999 19:17:47 +0100 (MET)
Received: from UNKNOWN(194.175.113.15), claiming to be "hermes.mdfactory.de"
 via SMTP by hypatia, id smtpdAAAa006u3; Thu Dec 23 19:17:37 1999
Received: from joelschlaegel ([172.26.2.169])
	by hermes.mdfactory.de (8.9.2/8.9.2) with SMTP id TAA29745
	for <r-bugs@lists.r-project.org>; Thu, 23 Dec 1999 19:16:31 +0100 (CET)
Reply-To: <jens.oehlschlaegel-akiyoshi@mdfactory.de>
From: "=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
To: <r-bugs@stat.math.ethz.ch>
Subject: data.frame(I(matrix)) ?
Date: Thu, 23 Dec 1999 19:12:58 +0100
Message-ID: <000f01bf4d71$5813d080$a9021aac@joelschlaegel>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2173.0
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.3110.3
Importance: Normal
X-MIME-Autoconverted: from 8bit to quoted-printable by hermes.mdfactory.de id TAA29745
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by pubhealth.ku.dk id TAA21708



I observe dificulties with using data.frame(I(matrix))

> mat <- matrix(letters, 2, 2)
> dimnames(mat) <- list(c(1:2), c("x","y"))
> mat
  x   y
1 "a" "c"
2 "b" "d"

> dd <- data.frame(I(mat))
> ddd
  I.mat..x I.mat..y
1        a        a
2        b        b
3        c        c

doesn't look too bad,
but,
has only one column name:

> dimnames(dd)
[[1]]
[1] "1" "2"

[[2]]
[1] "I.mat."

and unexpected structure
> str(ddd)
`data.frame':     3 obs. of  1 variable:
 $ I.mat.: chr [1:3, 1:2] "a" "b" "c" "a" "b" "c"
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr  "x" "y"
  ..- attr(*, "class")= chr "AsIs"
>

column 1 is a matrix
> ddd[,1]
     x   y
[1,] "a" "a"
[2,] "b" "b"
[3,] "c" "c"
attr(,"class")
[1] "AsIs"

This dataframe is not a simple list with each element representing one
column.

Consequently, e.g.

> sapply(ddd, FUN=function(x)x)
     I.mat.
[1,] "a"
[2,] "b"
[3,] "c"
[4,] "a"
[5,] "b"
[6,] "c"

is no longer a matrix.


platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    0
minor    90.1
year     1999
month    December
day      15
language R

--
Dr. Jens Oehlschlägel-Akiyoshi
MD FACTORY GmbH
Bayerstrasse 21

80335 München

Tel.: 089 545 28-27
Fax.: 089 545 28-10
http://www.mdfactory.de

Standard Disclaimers: Opinions expressed here are personal
and are not otherwise represented.


==> 388.audit <==
Wed Jan 26 19:31:10 2000	ripley	moved from incoming to Low-level
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

none

Directory:  TooMuchAtOnce

* PR# 53 *
Subject: 0.62.3 bugs, incompatibilities and problems
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
--Of Jims points: (checked in 0.65 April 26 compared to Splus 3.4)
-- 4. works the same as S
-- 5. Splus gives NA and the if(class(z)=="repeated") doesn't work in either
-- 10. seems to work
-- 7.  seems to do what Jim wants now
--  
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 53 <==
From jlindsey@alpha.luc.ac.be  Mon Oct 12 09:42:39 1998
Received: from hypatia.math.ethz.ch (hypatia.ethz.ch [129.132.58.23])
	by kubism.ku.dk (8.9.1/8.9.1) with SMTP id JAA06654
	for <R-bugs@biostat.ku.dk>; Mon, 12 Oct 1998 09:42:38 +0200 (MET DST)
Received: from alpha.luc.ac.be (alpha.luc.ac.be [193.190.2.30]) by hypatia.math.ethz.ch (8.6.12/Main-STAT-mailer) with ESMTP id JAA22911; Mon, 12 Oct 1998 09:41:41 +0200
Received: (from jlindsey@localhost)
	by alpha.luc.ac.be (8.9.1/8.9.1) id JAA09128;
	Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Message-Id: <199810120743.JAA09128@alpha.luc.ac.be>
Subject: 0.62.3 bugs, incompatibilities and problems
To: r-help@stat.math.ethz.ch (r-help)
Date: Mon, 12 Oct 1998 09:43:51 +0200 (MET DST)
Cc: r-bugs@stat.math.ethz.ch (rbugs)
X-Mailer: ELM [version 2.4 PL23]
Content-Type: text

Here are various things that I have been accumulating concerning
R0.62.3 in attempting to debug my libraries, as compared to 0.62.1.
I have already reported some of them before.
Apparently no one is using my libraries as I have not received a
single bug report.  Jim

R0.62.3

 0. configure does not work properly if f77 or fort77 is a script
    front end for f2c
 1. 2-level factor variables have no label in glm()
 2. meaningless P-values and stars by default in summary(glm())
    (see John Nelder's recent `A Statistical Scandal' on Allstat)
 3. options changed in data.frame() (such as as.is= )
 4. seq(5,20,by=4) does not work properly
 5. NULL==1 *now* gives an error instead of FALSE
    e.g. if(class(z)=="repeated") when z has no class
 6. is.factor(c(gl(2,2),gl(2,2))) gives FALSE and a lot of other
    annoying `features' with factor variables
 7. if resp is a dataframe, cbind(resp[,1:1],resp[,5:6]) no longer works
    but cbind(resp[,1:2],resp[,5:6]) does;
    *now* requires cbind(resp[,1:1,drop=F],resp[,5:6])
 8. logical weights no longer work in glm() with a dataframe:
    there is some comparison in which they are taken as a factor variable
    y <- rnorm(20)
    wt <- rep(T,20)
    df <- data.frame(y,wt)
    glm(y~1,weights=wt)  works but not
    glm(y~1,weights=wt,data=df)
    Error: "<" not meaningful for factors
    probably related to point 6 above
 9. offset= option in glm() no longer works if there are NAs
10. y~x+(x>0) works but y~x*(x>0) *now* gives a parse error
11. Error: heap memory (5120Kb) exhausted
    with 4773k bytes of heap free (93%) from gc()
    Mainly occurs in functions involving a for() loop around calls
    to glm(), tapply(), and data.frame() (e.g. EM algorithm in my glmm
    and coxre functions) Did not occur in 0.62.1
12. gc() has to be used *twice* between functions calls with big data
    sets to free memory (already reported in previous versions)
13. the fact that a batch job stops when there is an error is
    extremely annoying and time wasting; there should at least be an
    option to set the level of tolerance to such errors

==> 53.audit <==
Mon Dec 07 14:56:10 1998	pd	moved from incoming to TooMuchAtOnce
Mon Apr 26 20:57:23 1999	robert	changed notes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 76 *
Subject: R-0.63.0
From: Rashid Nassar <rnassar@acpub.duke.edu>
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 76 <==
From rnassar@acpub.duke.edu  Sat Dec 12 05:22:21 1998
Received: from heinlein.acpub.duke.edu (heinlein.acpub.duke.edu [152.3.233.9])
	by kubism.ku.dk (8.9.1/8.9.1) with ESMTP id FAA04692
	for <r-bugs@biostat.ku.dk>; Sat, 12 Dec 1998 05:22:20 +0100 (MET)
Received: from godzilla3.acpub.duke.edu (rnassar@godzilla3.acpub.duke.edu [152.3.233.44]) 
	by heinlein.acpub.duke.edu (8.8.5/Duke-4.6.0) with ESMTP id XAA10587;
	Fri, 11 Dec 1998 23:20:11 -0500 (EST)
Received: (from rnassar@localhost) 
	by godzilla3.acpub.duke.edu (8.8.5/Duke-4.4) id XAA11937;
	Fri, 11 Dec 1998 23:20:09 -0500 (EST)
Date: Fri, 11 Dec 1998 23:20:08 -0500 (EST)
From: Rashid Nassar <rnassar@acpub.duke.edu>
To: r-bugs <r-bugs@biostat.ku.dk>
Subject: R-0.63.0
Message-ID: <Pine.SOL.3.91.981211231231.11592A-100000@godzilla3.acpub.duke.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Dear Sirs,

I would like to again express my thanks for all who continue to make R 
better and better.

Here are some things I ran into while using R-0.63.

bug.report() gives the following information, but I haven't figured
out yet how to use this function (or even how to exit from it!) so this 
is cut-&-paste:

===================================================

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status =
 status.rev = 0
 major = 0
 minor = 63.0
 year = 1998
 month = November
 day = 14
 language = R

Search Path:
 .GlobalEnv, pigv, Autoloads, package:base

===================================================
In the following examples, x,y,z are numeric, and A is factor

1. 
(carried over from earlier versions:)

> boxplot(y~A)  #works ok
> boxplot(A,y)  #doesn't like it and issues odd error message
Error: "+" not meaningful for factors


2.
> plot(A,y, cex=n)   #seems to ignore cex parameter

3. 
On multiple plots, plot() omits to next location in case of input error: 
e.g.,

> par(mfrow=c(2,2),pty="s")
> plot(x,y,col=codes(z)) #error in attempted plot at (1,1)
Error: no applicable method for "codes"

> plot(x,y,col=codes(A)) #mistake corrected
#plots at (1,2) leaving (1,1) location empty


4. 
Possible problem with main= and sub= when using formula() (my guess
is that I shouldn't be using formula() in title, but here it is just
in case what I'm doing is legitimate):

> formula(fpvr2.sc)
pvr2 ~ sc

> qqnorm(rstudent(fpvr2.sc),main=formula(fpvr2.sc))
> qqnorm(rstudent(fpvr2.sc),main=paste(formula(fpvr2.sc)))
 # both print main title as:
 #
 #         ~
 #        pvr2 
 #         sc


> qqnorm(rstudent(fpvr2.sc),sub=formula(fpvr2.sc))
> qqnorm(rstudent(fpvr2.sc),sub=paste(formula(fpvr2.sc)))

# result in 'pvr2', '~', and 'sc' being superimposed


5. 
Formatting problem with stem():

> pigv[,c(4,8)]
     sc  hill2
1  cont 1.9003
2  cont 1.8869
3  cont 2.3610
4  cont 2.2316
5  cont 1.0572
6  cont 2.0070
7  scr1 2.7811
8  scr1 2.8592
9  scr1 1.9251
10 scr1 3.1048
11 scr1 3.7369
12 cont 1.7435

> m.sq.hill2.sc <- lm(hill2^2~sc,pigv)

> stem(resid(m.sq.hill2.sc))

  The decimal point is 1 digit(s) to the right of the |

  -0 | 5
  -0 | 311000
  0 | 0112
  0 | 5

#  but with another set of residuals formatting works correctly:

> m.hill2.sc <- lm(hill2~sc,pigv)
> stem(resid(m.hill2.sc))

  The decimal point is at the |

  -1 | 0
  -0 | 8
  -0 | 110
   0 | 00123
   0 | 59


 
6. 
> text(locator(),"sometext") 

shows up nicely on screen, but does not show on printout of saved
plot, even as the rest of the plot prints correctly.

Many thanks,

Rashid Nassar


==> 76.audit <==
Fri Jan 08 17:49:48 1999	pd	moved from incoming to TooMuchAtOnce
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 410 *
Subject: Bugs and comments.
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Date: Wed, 2 Feb 2000 13:41:50 +0100 (MET)
--1) is fixed for 0.99.0
--2) Use ctrl+arrows, as documented: rw0990 has a horizontal scrollbar
--3) ?
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 410 <==
From plindsey@alpha.luc.ac.be  Wed Feb  2 13:41:43 2000
Received: from alpha.luc.ac.be (alpha.luc.ac.be [193.190.2.30])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA25288
	for <R-bugs@biostat.ku.dk>; Wed, 2 Feb 2000 13:41:42 +0100 (MET)
Received: (from plindsey@localhost)
	by alpha.luc.ac.be (8.9.3/8.9.3) id NAA02309
	for R-bugs@biostat.ku.dk; Wed, 2 Feb 2000 13:41:50 +0100 (MET)
From: Patrick Lindsey <plindsey@alpha.luc.ac.be>
Message-Id: <200002021241.NAA02309@alpha.luc.ac.be>
Subject: Bugs and comments.
To: R-bugs@biostat.ku.dk (R bugs)
Date: Wed, 2 Feb 2000 13:41:50 +0100 (MET)
X-Mailer: ELM [version 2.5 PL1]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi,
Here are a few errors I found as well as a few comments.

1) In the man page of par:
          lty: The line type.  Line types can either be specified
               as an integer (0=blank, 1=solid, 2=dashed, 3=dot-
               ted, 4=dotdash, 5=longdash, 6=twodash) or as one
               of the character strings `"blank"', `"solid"',
               `"dashed"', `"dotted"' `"dotdash"', `"longdash"',
               or `"twodash"', where `"blank"' uses `invisible
               lines' (i.e. doesn't draw them).

               Alternatively, a string of up to 8 characters
               (from code{c(0:9, "A":"F")}) may be given, giving
  -------------------^^^^^---------------^
               the length (typically in points/pixels) of line
               segments which are alternatively drawn and
               skipped.  For example, `"44"' is dashed and `"13"'
               is dotted.

2) I was trying to get the warnings to look as they use to do but even
  setting the option warn to 1 does not work. For example what kind is
  generating the following warning when a library is loaded???

  > options(warn=1)
  > library(eda)
  Warning: Explicit local dynamic loading not supported on this platform. Using default.
  > 

  Problem can also occurs with error messages:

  > a <- function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z)
      stop("This is an very long error message which will be difficult to see especially in a Microsoft windows version of R.")
  > a(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26)
  Error in a(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,  : This is an very long error message which will be difficult to see especially in a Microsoft windows version of R.

  Basically, in Microsoft windows you can only see about as much as "...  : This$"
  and then the rest is of the screen. As their is no horizontal scroll
  bar... the students are unable to see the error message!

  I personally, prefer warnings to be printed out as they occur, that way
  I can see what is going on. By storing the warnings in a an object rather
  than printing them out if there were more than 10 seems to me as the
  opposite thing to do. Indeed, if lost of warnings occurred it means that
  there is more than certainly a problem. This seems to be getting like SAS
  where people will soon just run something get a result and not even notice
  that a model has not converged (if there were 9 warnings of NA/Inf replaced
  by maximum value and then the no convergence message... they will all be
  stored and the user will not even noticed that the model has not even
  converged!!). This is especially annoying when teaching with students as
  you can imagine.

  As well, I personally think that too much is printed out about the
  function which generated the error. I think that its name is enough
  and that its arguments are of no relevance to where the error
  occurred and just make things harder to read.

3) I got the following error message from the plot function. 

  Error in xy.coords(x, y, xlabel, ylabel, log) : x and y lengths differ

  Now how is this possible as the arguments of xy.coord are the following??

  > args(xy.coords)
  function (x, y, xlab = NULL, ylab = NULL, log = NULL, recycle = FALSE) 
  NULL

  As well if you do:

  >  xy.coords(x=response,y=time,xlabel="time",ylabel="weight")
  Error in xy.coords(x = response, y = time, xlabel = "time", ylabel = "weight") : unused argument to function

  It is pretty hard to figure out what argument is unused... it might
  be a good idea to print out which argument was not found.

Patrick.


==> 410.audit <==
Sun Feb 06 20:10:36 2000	ripley	changed notes
Sun Feb 06 20:10:36 2000	ripley	moved from incoming to TooMuchAtOnce
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Directory:  Windows

none

Directory:  incoming

* PR# 391 *
Subject: Segfault in dataentry()
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 391 <==
From pd@biostat.ku.dk  Wed Dec 29 11:53:44 1999
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id LAA02951;
	Wed, 29 Dec 1999 11:53:44 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id LAA01559;
	Wed, 29 Dec 1999 11:59:50 +0100
Sender: pd@blueberry.kubism.ku.dk
To: r-core@r-project.org
Subject: Segfault in dataentry()
Cc: r-bugs@biostat.ku.dk
From: Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk>
Date: 29 Dec 1999 11:59:50 +0100
Message-ID: <x2d7rqt3kp.fsf@blueberry.kubism.ku.dk>
Lines: 18
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Length: 611


> dataentry(0,0)

Program received signal SIGSEGV, Segmentation fault.
0x808991c in duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42
42	    switch (TYPEOF(s)) {

Apparently that one doesn't get trapped by the no-segfault checks.
Martin? 

(It's not too high priority to fix, but confusing data.entry and
dataentry provokes this quite easily.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 391.reply.1 <==
From maechler@stat.math.ethz.ch  Fri Dec 31 18:09:17 1999
Received: from stat.math.ethz.ch (hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id SAA12661;
	Fri, 31 Dec 1999 18:09:16 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id SAA16695;
	Fri, 31 Dec 1999 18:09:19 +0100 (MET)
Received: from florence(129.132.58.33), claiming to be "florence.ethz.ch"
 via SMTP by hypatia, id smtpdAAAa0044p; Fri Dec 31 18:09:10 1999
Received: (maechler@localhost) by florence.ethz.ch (8.9.3/D-MATH-client) id SAA15779; Fri, 31 Dec 1999 18:09:14 +0100
X-Authentication-Warning: florence.ethz.ch: maechler set sender to maechler@florence using -f
From: Martin Maechler <maechler@stat.math.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14444.58169.886168.959820@gargle.gargle.HOWL>
Date: Fri, 31 Dec 1999 18:09:13 +0100 (MET)
To: p.dalgaard@pubhealth.ku.dk
Cc: R-bugs@biostat.ku.dk
Subject: Re: Segfault in dataentry() (PR#391)
In-Reply-To: <199912291053.LAA02959@pubhealth.ku.dk>
References: <199912291053.LAA02959@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 20.5.1
Reply-To: Martin Maechler <maechler@stat.math.ethz.ch>
Content-Length: 1008

>>>>> "PD" == p dalgaard <p.dalgaard@pubhealth.ku.dk> writes:

    >> dataentry(0,0)

    PD> Program received signal SIGSEGV, Segmentation fault.  0x808991c in
    PD> duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42 42 switch
    PD> (TYPEOF(s)) {

    PD> Apparently that one doesn't get trapped by the no-segfault checks.
    PD> Martin?

There's a not-so-short  "stop.list" of functions which are *NOT* tested for
segfaults.   dataentry (w/ and w/o ".") is among them.
all the interactive ones are, actually.
[[remember:   The list was quite a bit shorter, and there were R core
	      members who complained...]] 

Look in  ..../tests/make-no-segfault.R for the statements starting with

 edit.int <- c("fix", "edit", "vi", "emacs", "pico", "xemacs", "xedit")
 misc.int <- c("browser", "bug.report", "menu")
 stop.list[["base"]] <-
    ..

to find all the functions which are *not* tested for seg.faults.

Maybe we (R-core) we should really always have
      R_TESTLOTS=yes
in our environments?

==> 391.reply.2 <==
From hornik@ci.tuwien.ac.at  Sat Jan  1 16:40:27 2000
Received: from fangorn.ci.tuwien.ac.at (fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.8.8+Sun/8.8.8) with ESMTP id QAA13861
	for <R-bugs@biostat.ku.dk>; Sat, 1 Jan 2000 16:40:27 +0100 (MET)
Received: from aragorn.ci.tuwien.ac.at (hornik@aragorn.ci.tuwien.ac.at [128.131.51.35])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id QAA19454;
	Sat, 1 Jan 2000 16:39:43 +0100
Received: (from hornik@localhost)
	by aragorn.ci.tuwien.ac.at (8.9.3/8.8.5) id QAA19446;
	Sat, 1 Jan 2000 16:40:51 +0100
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14446.8194.975894.184062@aragorn.ci.tuwien.ac.at>
Date: Sat, 1 Jan 2000 16:40:50 +0100 (CET)
To: maechler@stat.math.ethz.ch
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: Segfault in dataentry() (PR#391)
In-Reply-To: <199912311709.SAA12673@pubhealth.ku.dk>
References: <199912311709.SAA12673@pubhealth.ku.dk>
X-Mailer: VM 6.75 under Emacs 19.34.1
Reply-To: Kurt.Hornik@ci.tuwien.ac.at
Content-Length: 1470

>>>>> maechler  writes:

>>>>> "PD" == p dalgaard <p.dalgaard@pubhealth.ku.dk> writes:
>>> dataentry(0,0)

PD> Program received signal SIGSEGV, Segmentation fault.  0x808991c in
PD> duplicate (s=0x0) at ../../../R/src/main/duplicate.c:42 42 switch
PD> (TYPEOF(s)) {

PD> Apparently that one doesn't get trapped by the no-segfault checks.
PD> Martin?

> There's a not-so-short  "stop.list" of functions which are *NOT* tested for
> segfaults.   dataentry (w/ and w/o ".") is among them.
> all the interactive ones are, actually.
> [[remember:   The list was quite a bit shorter, and there were R core
> 	      members who complained...]] 

> Look in  ..../tests/make-no-segfault.R for the statements starting with

>  edit.int <- c("fix", "edit", "vi", "emacs", "pico", "xemacs", "xedit")
>  misc.int <- c("browser", "bug.report", "menu")
>  stop.list[["base"]] <-
>     ..

> to find all the functions which are *not* tested for seg.faults.

> Maybe we (R-core) we should really always have
>       R_TESTLOTS=yes
> in our environments?

Actually, I'd prefer having some means of markup in the Rd source code
to indicate whether an object should not be employed for the no-segfault
testing.  We could still keep the R_TESTLOTS, though ...

E.g, the socket docs would have something correspding to \dontrun in the
examples section.

This should be cleaner than having to change the script in tests.

(Confusion arose when Fritz added old.packages() two days ago ...)

-k
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 398 *
Subject: a +1 shift overlaying lines/points on a boxplot
From: acuster@nature.berkeley.edu
Date: Tue, 11 Jan 2000 02:53:56 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 398 <==
From acuster@nature.berkeley.edu  Tue Jan 11 02:53:57 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id CAA03452
	for <R-bugs@biostat.ku.dk>; Tue, 11 Jan 2000 02:53:56 +0100 (MET)
Date: Tue, 11 Jan 2000 02:53:56 +0100 (MET)
From: acuster@nature.berkeley.edu
Message-Id: <200001110153.CAA03452@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: a +1 shift overlaying lines/points on a boxplot

Full_Name: Adrian Custer
Version: 0.90.0
OS: Linux on Thinkpad (pentium) and desktop (K6)
Submission from: (NULL) (128.32.251.234)


When I create a boxplot, and then try to overlay a lowess fit or just the
points, 
the points do not appear in the highest level and the lowess curve does not
reach 
the highest level. However, if I add one to each of the models, the problem is
solved.
I tried this on two different machines, a laptop and a desktop both running 
Gnu/linux+gnome. If you can't reproduce this please let me know.  -adrian

> a
  [1]  0.629 -0.584  0.132 -0.012 -0.813 -0.291 -0.813 -0.291 -0.584 -0.164
 [11] -0.518 -0.731  0.074 -0.731  0.286  0.206 -0.257  0.608 -0.038 -0.291
 [21] -0.274 -0.274  0.402 -0.325 -0.343 -0.012  0.359 -0.038  0.675 -0.497
 [31]  0.026  0.608 -0.325  0.109  0.507  0.484 -0.149  0.368  0.227  0.086
 [41] -0.540  0.377 -0.149 -0.038  0.154  0.573  0.428  0.852  0.164  0.744
 [51]  0.061  0.080 -0.354  0.003  0.522 -0.508 -0.613 -0.271 -0.245 -0.080
 [61] -0.271 -0.651  0.265 -0.613  0.666  0.382  0.061 -0.542  0.510 -0.038
 [71] -0.443  0.042  0.764 -0.017 -0.148  0.023 -0.613 -0.148  0.354 -0.412
 [81]  0.522  0.169 -0.220  0.080  0.080  0.448  0.116 -0.059  0.061  0.185
 [91] -0.325 -0.038 -0.220 -0.325  0.151  0.903 -0.059  0.265  0.250  0.250
[101]  0.161  0.502  0.684  0.222  0.063 -0.414  0.222  0.028 -0.260 -0.046
[111] -0.360 -0.046 -0.260 -0.169 -0.169 -0.009  0.192 -0.046  0.028  0.222
[121]  0.129  0.502  0.097  0.306  0.384 -0.009 -0.532  0.028 -0.086 -0.260
[131] -0.086 -0.213 -0.471 -0.820 -0.414  0.222  0.097  0.251 -0.009  0.279
[141] -0.009  0.279 -0.260 -0.086  0.063  0.161 -0.009  0.524  0.063 -0.665
[151]  0.127  0.575  0.127  0.287  0.249 -0.301  0.287  0.127 -0.176 -0.013
[161] -0.301  0.082 -0.176 -0.370 -0.118 -0.064  0.210 -0.064  0.082 -0.064
[171]  0.169  0.546  0.036  0.392  0.323 -0.064 -0.706  0.127 -0.118 -0.236
[181] -0.013 -0.301 -0.370 -0.812 -0.524  0.210  0.392  0.036 -0.176  0.249
[191]  0.082  0.036 -0.301 -0.301 -0.013  0.127  0.127  0.752  0.127 -0.301
[201]  0.108  0.453  0.108  0.166  0.220 -0.327  0.048  0.271 -0.240 -0.086
[211] -0.422 -0.017  0.048 -0.327 -0.327 -0.086  0.166 -0.160  0.108 -0.086
[221]  0.166  0.571 -0.086  0.366  0.320 -0.017 -0.645  0.166 -0.240 -0.017
[231] -0.017 -0.240 -0.422 -0.240 -0.645  0.048  0.411 -0.017 -0.240  0.271
[241]  0.320 -0.017 -0.327 -0.160  0.220  0.108 -0.086  0.676  0.108  0.048
[251]  0.254 -0.188 -0.083  0.254  0.387 -0.188  0.012  0.387 -0.306 -0.306
[261] -0.594  0.012  0.012 -0.776 -0.440 -0.188  0.254 -0.083 -0.440 -0.188
[271]  0.323  0.448  0.099  0.505  0.323 -0.083 -0.594  0.254 -0.188 -0.083
[281]  0.012 -0.306 -0.440 -0.083 -0.306  0.012  0.448  0.099 -0.188  0.254
[291]  0.505  0.254 -0.188 -0.306  0.387  0.099  0.012  0.659  0.179  0.099
> b
  [1] 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3
 [38] 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3
 [75] 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4
[112] 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1
[149] 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3
[186] 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3
[223] 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4
[260] 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3 0 4 3 3 2 4 3 3 4
[297] 4 1 0 0
> boxplot(a~b)
> lines(lowess(a~b))
> points(a~b)
> boxplot(a~b)
> lines(lowess(a~b+1))
> points(a~b+1)
> 

Thanks for your consideration and thanks a million for all the work. R is a
pleasure 
to work with. 

Best in the new year,
adrian custer
acuster@nature.berkeley.edu

==> 398.reply.1 <==
From pd@biostat.ku.dk  Wed Jan 12 19:00:20 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id TAA23730;
	Wed, 12 Jan 2000 19:00:20 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id TAA14071;
	Wed, 12 Jan 2000 19:02:51 +0100
Sender: pd@blueberry.kubism.ku.dk
To: acuster@nature.berkeley.edu
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: a +1 shift overlaying lines/points on a boxplot (PR#398)
References: <200001110153.CAA03462@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2000 19:02:51 +0100
In-Reply-To: acuster@nature.berkeley.edu's message of "Tue, 11 Jan 2000 02:53:58 +0100 (MET)"
Message-ID: <x2g0w35fsk.fsf@blueberry.kubism.ku.dk>
Lines: 59
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

acuster@nature.berkeley.edu writes:

> Full_Name: Adrian Custer
> Version: 0.90.0
> OS: Linux on Thinkpad (pentium) and desktop (K6)
> Submission from: (NULL) (128.32.251.234)
> 
> 
> When I create a boxplot, and then try to overlay a lowess fit or just the
> points, 
> the points do not appear in the highest level and the lowess curve does not
> reach 
> the highest level. However, if I add one to each of the models, the problem is
> solved.
> I tried this on two different machines, a laptop and a desktop both running 
> Gnu/linux+gnome. If you can't reproduce this please let me know.  -adrian
> 
> > a
>   [1]  0.629 -0.584  0.132 -0.012 -0.813 -0.291 -0.813 -0.291 -0.584 -0.164
...
> [291]  0.505  0.254 -0.188 -0.306  0.387  0.099  0.012  0.659  0.179  0.099
> > b
>   [1] 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3 3 4 4 3 3 4 4 4 2 3 3 0 3
>  [38] 0 4 3 3 2 4 3 3 4 4 1 0 0 4 0 0 3 0 3 4 4 4 0 4 0 4 2 0 4 0 0 4 0 2 3 1 3
.....
> [297] 4 1 0 0
> > boxplot(a~b)
> > lines(lowess(a~b))
> > points(a~b)
> > boxplot(a~b)
> > lines(lowess(a~b+1))
> > points(a~b+1)
> > 
> 
> Thanks for your consideration and thanks a million for all the work. R is a
> pleasure 
> to work with. 

Boxplot expects a *factor* as the grouping criterion. The x axis
labels are the group names, not x coordinates (i.e. it might as well
be "married, unmarried, divorced" as "0, 1, 2."), and since factors
are internally coded as 1:nlevels, that's the value used for the
actual coordinate system.

Passing a numeric vector gets it converted to a factor before use, so
things are as you should expect. Except possibly for two issues:

a) should one really do the numeric->factor conversion without a
warning message?

b) perhaps boxplot could use an at= argument saying "plot boxes here"
since the current version wouldn't be able to deal with
non-equidistant groups. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 407 *
Subject: NA not printed after table
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Thu, 27 Jan 2000 18:47:38 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 407 <==
From weingessel@ci.tuwien.ac.at  Thu Jan 27 18:47:30 2000
Received: from fangorn.ci.tuwien.ac.at (root@fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id SAA05684
	for <r-bugs@biostat.ku.dk>; Thu, 27 Jan 2000 18:47:30 +0100 (MET)
Received: from elendil.ci.tuwien.ac.at (elendil.ci.tuwien.ac.at [128.131.51.38])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id SAA05556
	for <r-bugs@biostat.ku.dk>; Thu, 27 Jan 2000 18:47:36 +0100
Received: (from weingessel@localhost)
	by elendil.ci.tuwien.ac.at (8.9.3/8.8.5) id SAA04737;
	Thu, 27 Jan 2000 18:47:38 +0100
Date: Thu, 27 Jan 2000 18:47:38 +0100
Message-Id: <200001271747.SAA04737@elendil.ci.tuwien.ac.at>
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
To: r-bugs@biostat.ku.dk
Subject: NA not printed after table
Reply-to: Andreas.Weingessel@ci.tuwien.ac.at


In the following example, the NA is not printed.

x <- c(1,2,3,2,1)
y <- table(x)
z <- list(a=y,b=NA)
z

yields

$a
x
1 2 3 
2 2 1 

$b
[1]  
   ^^^^
no NA here!

or

z <- list(a=y,d=2,b=c(1,NA,2))

R> z
$a
x
1 2 3 
2 2 1 

$d
[1] 2

$b
[1] 1   2


This seems to happen only, if an object of class "table" precedes an
NA in a list.


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Under development (unstable)
 major = 0
 minor = 99.0
 year = 2000
 month = January
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 415 *
Subject: fix() changes character to factor
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
Date: Tue, 8 Feb 2000 10:48:24 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 415 <==
From weingessel@ci.tuwien.ac.at  Tue Feb  8 10:48:10 2000
Received: from fangorn.ci.tuwien.ac.at (root@fangorn.ci.tuwien.ac.at [128.131.51.24])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id KAA16504
	for <r-bugs@biostat.ku.dk>; Tue, 8 Feb 2000 10:48:09 +0100 (MET)
Received: from elendil.ci.tuwien.ac.at (elendil.ci.tuwien.ac.at [128.131.51.38])
	by fangorn.ci.tuwien.ac.at (8.9.3/8.9.3/Debian/GNU) with ESMTP id KAA17547
	for <r-bugs@biostat.ku.dk>; Tue, 8 Feb 2000 10:48:00 +0100
Received: (from weingessel@localhost)
	by elendil.ci.tuwien.ac.at (8.9.3/8.8.5) id KAA10918;
	Tue, 8 Feb 2000 10:48:24 +0100
Date: Tue, 8 Feb 2000 10:48:24 +0100
Message-Id: <200002080948.KAA10918@elendil.ci.tuwien.ac.at>
From: Andreas Weingessel <Andreas.Weingessel@ci.tuwien.ac.at>
To: r-bugs@biostat.ku.dk
Subject: fix() changes character to factor
Reply-to: Andreas.Weingessel@ci.tuwien.ac.at


If x is a data.frame containing a column of mode character, this
column is changed to a factor after applying fix(x).
Example:

R> x_data.frame(a=1:3,b=letters[1:3],c=c("hansi","pepi","karli"))
R> x$c_as.character(x$c)
R> is.character(x$c)
[1] TRUE
R> is.factor(x$c)
[1] FALSE
R> fix(x)
## I change "karli" to "sepp"
R> x$c
[1] hansi pepi  sepp 
Levels:  hansi pepi sepp 
R>  is.character(x$c)
[1] FALSE
R> is.factor(x$c)
[1] TRUE

Now, it is not possible to apply fix(x) again to undo your change,
because edit does not allow to introduce new factor levels.


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 7
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 415.reply.1 <==
From pd@biostat.ku.dk  Tue Feb  8 11:09:47 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id LAA17194;
	Tue, 8 Feb 2000 11:09:46 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id LAA17848;
	Tue, 8 Feb 2000 11:09:54 +0100
Sender: pd@blueberry.kubism.ku.dk
To: Andreas.Weingessel@ci.tuwien.ac.at
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] fix() changes character to factor (PR#415)
References: <200002080948.KAA16514@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Feb 2000 11:09:53 +0100
In-Reply-To: Andreas.Weingessel@ci.tuwien.ac.at's message of "Tue, 8 Feb 2000 10:48:11 +0100 (MET)"
Message-ID: <x2u2jk9f9q.fsf@blueberry.kubism.ku.dk>
Lines: 51
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Andreas.Weingessel@ci.tuwien.ac.at writes:

> If x is a data.frame containing a column of mode character, this
> column is changed to a factor after applying fix(x).
> Example:
> 
> R> x_data.frame(a=1:3,b=letters[1:3],c=c("hansi","pepi","karli"))
> R> x$c_as.character(x$c)
> R> is.character(x$c)
> [1] TRUE
> R> is.factor(x$c)
> [1] FALSE
> R> fix(x)
> ## I change "karli" to "sepp"
> R> x$c
> [1] hansi pepi  sepp 
> Levels:  hansi pepi sepp 
> R>  is.character(x$c)
> [1] FALSE
> R> is.factor(x$c)
> [1] TRUE
> 
> Now, it is not possible to apply fix(x) again to undo your change,
> because edit does not allow to introduce new factor levels.

1) That is not the way to do that
2) The right way doesn't work either...

Character vectors in data frames will get converted to factors when
you least expect so, unless you protect them with the AsIs class,
i.e.  

x <- data.frame(a=1:3,b=letters[1:3],c=I(c("hansi","pepi","karli")))

Unfortunately, that will not work because is.vector is FALSE on x$c

The following fix to edit.data.frame seems to make things work:

    Is.vector <- function(x)is.vector(unclass(x))
    if (!all(sapply(name, Is.vector) | sapply(name, is.factor))) 
        stop("Can only handle vector and factor elements")

Anyone have a better idea?

(Of course the whole thing needs a redesign...)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 444 *
Subject: rle
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Date: Wed, 16 Feb 2000 14:17:09 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 444 <==
From jlindsey@alpha.luc.ac.be  Wed Feb 16 14:17:06 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id OAA20137
	for <R-bugs@biostat.ku.dk>; Wed, 16 Feb 2000 14:17:06 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id OAA12700
	for <r-bugs@stat.math.ethz.ch>; Wed, 16 Feb 2000 14:17:15 +0100 (MET)
Received: from alpha.luc.ac.be(193.190.2.30)
 via SMTP by hypatia, id smtpdAAAa0036O; Wed Feb 16 14:17:10 2000
Received: (from jlindsey@localhost)
	by alpha.luc.ac.be (8.9.3/8.9.3) id OAA12630
	for r-bugs@stat.math.ethz.ch; Wed, 16 Feb 2000 14:17:09 +0100 (MET)
From: Jim Lindsey <jlindsey@alpha.luc.ac.be>
Message-Id: <200002161317.OAA12630@alpha.luc.ac.be>
Subject: rle
To: r-bugs@stat.math.ethz.ch (rbugs)
Date: Wed, 16 Feb 2000 14:17:09 +0100 (MET)
X-Mailer: ELM [version 2.5 PL1]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

The docs to rle state that it works for vectors whereas it only works
for numerical vectors. Either the docs or the function should be
changed. The latter is easy: change the diff != 0 to a shifted logical
comparison. Jim
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 446 *
Subject: Axis mishandling missing values
From: murdoch@stats.uwo.ca
Date: Wed, 16 Feb 2000 22:35:05 +0100 (MET)
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 446 <==
From murdoch@stats.uwo.ca  Wed Feb 16 22:35:06 2000
Received: from localhost (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id WAA24150
	for <R-bugs@biostat.ku.dk>; Wed, 16 Feb 2000 22:35:05 +0100 (MET)
Date: Wed, 16 Feb 2000 22:35:05 +0100 (MET)
From: murdoch@stats.uwo.ca
Message-Id: <200002162135.WAA24150@pubhealth.ku.dk>
To: R-bugs@biostat.ku.dk
Subject: Axis mishandling missing values

Full_Name: Duncan Murdoch
Version: 0.99.0
OS: Windows
Submission from: (NULL) (129.100.45.113)


Graphics/442 talks about rug() extending the axis when the range of new values
is bigger than the plot.  This also happens if there are NAs in the data:

x <- c(rnorm(10),NA)
hist(x)
rug(x)

will make the x axis extending off the page to the left.  This seems to be a bug
in axis(at=x), which should either ignore missing values or abort.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 447 *
Subject: "a.matrix[a.char.matrix]<- " crashes R
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Wed, 16 Feb 2000 16:12:01 -0800
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 447 <==
From cberry@tajo.ucsd.edu  Thu Feb 17 01:10:20 2000
Received: from stat.math.ethz.ch (daemon@hypatia.ethz.ch [129.132.58.23])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id BAA24643
	for <R-bugs@biostat.ku.dk>; Thu, 17 Feb 2000 01:10:20 +0100 (MET)
Received: (from daemon@localhost)
	by stat.math.ethz.ch (8.9.1/8.9.1) id BAA29026
	for <r-bugs@hypatia.math.ethz.ch>; Thu, 17 Feb 2000 01:10:29 +0100 (MET)
Received: from smtp.ucsd.edu(132.239.1.49)
 via SMTP by hypatia, id smtpdAAAa0075U; Thu Feb 17 01:10:20 2000
Received: from tajo.ucsd.edu (tajo.ucsd.edu [132.239.99.2])
	by smtp.ucsd.edu (8.9.3/8.9.3) with ESMTP id QAA17356
	for <r-bugs@lists.r-project.org>; Wed, 16 Feb 2000 16:10:17 -0800 (PST)
Received: from tajo.ucsd.edu by tajo.ucsd.edu (8.9.3+Sun/SMI-SVR4-UCSD.1)
	id QAA05642; Wed, 16 Feb 2000 16:12:01 -0800 (PST)
Sender: cberry@tajo.ucsd.edu
Message-ID: <38AB3CD1.C9D39373@tajo.ucsd.edu>
Date: Wed, 16 Feb 2000 16:12:01 -0800
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
X-Mailer: Mozilla 4.05 [fr] (X11; I; SunOS 5.7 sun4u)
MIME-Version: 1.0
To: r-bugs@stat.math.ethz.ch
Subject: "a.matrix[a.char.matrix]<- " crashes R
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

To wit:
---
> junk <- array(3,c(10,3),dimnames=list(as.character(1:10),as.character(1:3)))
> junk[cbind(as.character(1:5),as.character(c(1,2,3,2,3)))] <- 20
> 
> junk

Process R segmentation violation (core dumped) at Wed Feb 16 15:57:49
2000
---

I know that the use of a ***character*** matrix is not documented for
this context. Still, it should not crash R.

In addition to 0.90.1, this also happens on rw0991b


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 0
 minor = 90.1
 year = 1999
 month = December
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive
Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* PR# 448 *
Subject: bug in rbinom?
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
Date: Thu, 17 Feb 2000 13:08:17 +0100
-- no notes --
~~~~~~~~~~ original reports follow ~~~~~~~~~~
==> 448 <==
From dtrenkler@nts6.oec.uni-osnabrueck.de  Thu Feb 17 13:08:52 2000
Received: from omecihuatl.rz.Uni-Osnabrueck.DE (root@omecihuatl.rz.Uni-Osnabrueck.DE [131.173.17.35])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA29517
	for <r-bugs@biostat.ku.dk>; Thu, 17 Feb 2000 13:08:52 +0100 (MET)
Received: from nts6.oec.uni-osnabrueck.de (nts6.oec.Uni-Osnabrueck.DE [131.173.130.59])
	by omecihuatl.rz.Uni-Osnabrueck.DE (8.9.3/8.9.3) with ESMTP id NAA08849
	for <r-bugs@biostat.ku.dk>; Thu, 17 Feb 2000 13:09:00 +0100
Received: by nts6.oec.Uni-Osnabrueck.DE with Internet Mail Service (5.0.1458.49)
	id <18SFXF8M>; Thu, 17 Feb 2000 13:08:17 +0100
Message-ID: <51615E1449A4D111AE9900008322A88025CCC2@nts6.oec.Uni-Osnabrueck.DE>
From: "Trenkler, Dietrich" <dtrenkler@nts6.oec.uni-osnabrueck.de>
To: "'r-bugs@biostat.ku.dk'" <r-bugs@biostat.ku.dk>
Subject: bug in rbinom?
Date: Thu, 17 Feb 2000 13:08:17 +0100
X-Priority: 3
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.0.1458.49)
Content-Type: text/plain

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################



In version 0.99.0 for Windows NT I get the following:

> .Random.seed
[1]     0 21012  4461 28299
> rbinom(10,10,.3)
 [1] 4 5 5 1 5 2 4 2 6 2
> rbinom(10,9,.3)
 [1] 0 0 0 0 0 0 0 0 0 0
> rbinom(10,10,.3)
 [1] 3 3 2 2 3 1 3 3 3 2
> rbinom(10,11,.3)
 [1] 0 0 0 0 0 0 0 0 0 0


I tried similar inputs in version 0.65.1:

> .Random.seed
[1]     0 16049    70 30225
> rbinom(10,10,.3) 
 [1] 3 5 3 1 1 3 3 2 5 1
> rbinom(10,11,.3) 
 [1] 1 3 2 3 4 3 4 2 1 5
> rbinom(10,100,.3) 
 [1] 20  0  0  0  0  0  0  0  0  0
> rbinom(10,100,.3)
 [1] 0 0 0 0 0 0 0 0 0 0




--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = Release
 major = 0
 minor = 65.1
 year = 1999
 month = October
 day = 07
 language = R

Windows NT 4.0 (build 1381) Service Pack 3

Search Path:
 .GlobalEnv, Autoloads, package:base

==> 448.reply.1 <==
From pd@biostat.ku.dk  Thu Feb 17 13:32:52 2000
Received: from biostat.ku.dk (blueberry [130.225.108.193])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA29817;
	Thu, 17 Feb 2000 13:32:52 +0100 (MET)
Received: (from pd@localhost)
	by biostat.ku.dk (8.9.3/8.9.3) id NAA28738;
	Thu, 17 Feb 2000 13:34:14 +0100
Sender: pd@blueberry.kubism.ku.dk
To: dtrenkler@nts6.oec.uni-osnabrueck.de
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: Re: [Rd] bug in rbinom? (PR#448)
References: <200002171208.NAA29527@pubhealth.ku.dk>
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 Feb 2000 13:34:13 +0100
In-Reply-To: dtrenkler@nts6.oec.uni-osnabrueck.de's message of "Thu, 17 Feb 2000 13:08:53 +0100 (MET)"
Message-ID: <x2r9ecatyy.fsf@blueberry.kubism.ku.dk>
Lines: 34
X-Mailer: Gnus v5.7/Emacs 20.4
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

dtrenkler@nts6.oec.uni-osnabrueck.de writes:


> > .Random.seed
> [1]     0 21012  4461 28299
> > rbinom(10,10,.3)
>  [1] 4 5 5 1 5 2 4 2 6 2
> > rbinom(10,9,.3)
>  [1] 0 0 0 0 0 0 0 0 0 0
> > rbinom(10,10,.3)
>  [1] 3 3 2 2 3 1 3 3 3 2
> > rbinom(10,11,.3)
>  [1] 0 0 0 0 0 0 0 0 0 0

Ow!!!! The current snapshot does that too. (On Linux/i386)

>  rbinom(10,11,.3) 
 [1] 0 0 0 0 0 0 0 0 0 0
>  rbinom(10,11,.3) 
 [1] 0 0 0 0 0 0 0 0 0 0
>  rbinom(10,11,.3) 
 [1] 0 0 0 0 0 0 0 0 0 0
>  rbinom(10,11,.3) 
 [1] 0 0 0 0 0 0 0 0 0 0
>  rbinom(10,11,.3) 
 [1] 0 0 0 0 0 0 0 0 0 0

and 0.65.1 had it with size=100, but not with size=11.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

==> 448.followup.1 <==
From ripley@stats.ox.ac.uk  Thu Feb 17 13:48:17 2000
Received: from toucan.stats.ox.ac.uk (toucan.stats.ox.ac.uk [163.1.20.20])
	by pubhealth.ku.dk (8.9.3/8.9.1) with ESMTP id NAA00116
	for <R-bugs@biostat.ku.dk>; Thu, 17 Feb 2000 13:48:15 +0100 (MET)
Received: from toucan.stats (toucan.stats [163.1.20.20])
	by toucan.stats.ox.ac.uk (8.9.0/8.9.0) with SMTP id MAA12500;
	Thu, 17 Feb 2000 12:48:21 GMT
Message-Id: <200002171248.MAA12500@toucan.stats.ox.ac.uk>
Date: Thu, 17 Feb 2000 12:48:21 +0000 (GMT)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Reply-To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Subject: Re: [Rd] bug in rbinom? (PR#448)
To: r-devel@stat.math.ethz.ch, dtrenkler@nts6.oec.uni-osnabrueck.de
Cc: R-bugs@biostat.ku.dk
MIME-Version: 1.0
Content-Type: TEXT/plain; charset=us-ascii
Content-MD5: oumzv+93E4HLOmoURSry+Q==
X-Mailer: dtmail 1.2.1 CDE Version 1.2.1 SunOS 5.6 sun4m sparc 

> From: dtrenkler@nts6.oec.uni-osnabrueck.de
> Date: Thu, 17 Feb 2000 13:08:53 +0100 (MET)
> 

Thanks for the report: now fixed. rbinom was only checking if p was
unchanged, and not setting up correctly if n changed too.

> In version 0.99.0 for Windows NT I get the following:
> 
> > .Random.seed
> [1]     0 21012  4461 28299
> > rbinom(10,10,.3)
>  [1] 4 5 5 1 5 2 4 2 6 2
> > rbinom(10,9,.3)
>  [1] 0 0 0 0 0 0 0 0 0 0
> > rbinom(10,10,.3)
>  [1] 3 3 2 2 3 1 3 3 3 2
> > rbinom(10,11,.3)
>  [1] 0 0 0 0 0 0 0 0 0 0
> 
> 
> I tried similar inputs in version 0.65.1:
> 
> > .Random.seed
> [1]     0 16049    70 30225
> > rbinom(10,10,.3) 
>  [1] 3 5 3 1 1 3 3 2 5 1
> > rbinom(10,11,.3) 
>  [1] 1 3 2 3 4 3 4 2 1 5
> > rbinom(10,100,.3) 
>  [1] 20  0  0  0  0  0  0  0  0  0
> > rbinom(10,100,.3)
>  [1] 0 0 0 0 0 0 0 0 0 0
> 


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
