#!/bin/csh
setenv DISPLAY :5
limit cputime 60m
setenv OMP_THREAD_LIMIT 2

setenv _R_CHECK_FORCE_SUGGESTS_ false
setenv LC_CTYPE en_GB.utf8
setenv MYSQL_USER ripley
setenv POSTGRES_USER ripley
setenv POSTGRES_HOST localhost
setenv POSTGRES_DATABASE ripley
setenv RMPI_INCLUDE /usr/include/openmpi-x86_64
setenv RMPI_LIB_PATH /usr/lib64/openmpi/lib
setenv RMPI_TYPE OPENMPI
setenv R_BROWSER false
setenv R_PDFVIEWER false
setenv _R_CHECK_INSTALL_DEPENDS_ true
setenv _R_CHECK_SUGGESTS_ONLY_ true
setenv _R_CHECK_NO_RECOMMENDED_ true
setenv _R_CHECK_DOC_SIZES2_ true
#setenv R_C_BOUNDS_CHECK yes
setenv _R_CHECK_DEPRECATED_DEFUNCT_ true
setenv _R_CHECK_CODE_ASSIGN_TO_GLOBALENV_ true
#setenv _R_CHECK_CODE_ATTACH_ true
setenv _R_CHECK_CODE_DATA_INTO_GLOBALENV_ true
setenv _R_CHECK_RD_LINE_WIDTHS_ true
setenv _R_CHECK_FF_CALLS_ registration
setenv _R_CHECK_SCREEN_DEVICE_ warn
setenv _R_CHECK_REPLACING_IMPORTS_ true
setenv _R_CHECK_TOPLEVEL_FILES_ true
setenv _R_CHECK_DOT_FIRSTLIB_ true

setenv _R_CHECK_ALWAYS_LOG_VIGNETTE_OUTPUT_ true
setenv _R_CHECK_VIGNETTES_NLINES_ 10000

set path = (/usr/local/clang37/bin $path)
setenv ASAN_OPTIONS 'detect_leaks=0:detect_odr_violation=0'

setenv MOSEKLM_LICENSE_FILE "/data/gannet/ripley/Sources/mosek/6/licenses/mosek.lic"
setenv PKG_MOSEKHOME "/data/gannet/ripley/Sources/mosek/6/tools/platform/linux64x86"
setenv PKG_MOSEKLIB "mosek64"
setenv LD_LIBRARY_PATH /usr/local/clang37/lib:$PKG_MOSEKHOME/bin

setenv WNHOME /usr/share/wordnet-3.0

setenv JAGS_LIB /usr/local/clang/lib64

nohup make -j25 -k check >&! check_log
