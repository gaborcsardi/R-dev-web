#!/bin/csh
setenv OMP_THREAD_LIMIT 2

setenv DISPLAY :5
limit cputime 30m
#limit memoryuse 2000m
setenv LC_CTYPE en_GB.UTF-8
setenv _R_CHECK_TIMINGS_ 10
setenv _R_CHECK_INSTALL_DEPENDS_ TRUE
setenv _R_CHECK_SUGGESTS_ONLY_ TRUE
setenv _R_CHECK_NO_RECOMMENDED_ TRUE
#setenv R_PARALLEL_PORT random
setenv _R_CHECK_DEPRECATED_DEFUNCT_ true
setenv _R_CHECK_REPLACING_IMPORTS_ true
setenv _R_CHECK_S3_METHODS_NOT_REGISTERED_ true
setenv _R_CHECK_OVERWRITE_REGISTERED_S3_METHODS_ true

setenv _R_CHECK_DOC_SIZES_ false
setenv _R_CHECK_VIGNETTES_NLINES_ 10000
setenv _R_CHECK_VIGNETTES_SKIP_RUN_MAYBE_ true
setenv _R_CHECK_TESTS_NLINES_ 0

setenv _R_CHECK_ELAPSED_TIMEOUT_ 1h
setenv _R_CHECK_INSTALL_ELAPSED_TIMEOUT_ 4h
setenv _R_CHECK_TESTS_ELAPSED_TIMEOUT_ 3h
setenv _R_CHECK_BUILD_VIGNETTES_ELAPSED_TIMEOUT_ 3h

setenv WNHOME /usr/local/wordnet-3.0

## used to include Kmisc.out eDMA.out rstansim.out
nohup env MAKE=gmake gmake -j20 -k RDEV=Rgcc CFC.out HCT.out MfUSampler.out NNLM.out PopED.out Rcpp.out RcppClassic.out RcppArmadillo.out RcppXPtrUtils.out Rdtq.out RcppEigen.out RcppGSL.out RcppHoney.out RcppNumerical.out RcppParallel.out RcppProgress.out RcppThread.out StanHeaders.out bayesplot.out bcgam.out bridgesampling.out bssm.out compboost.out dMod.out detrendr.out dgo.out dodgr.out eDMA.out eggCounts.out gppm.out icenReg.out imager.out iNextPD.out kohonen.out later.out lolog.out msde.out nimble.out parlitools.out pkgload.out plogr.out recexcavAAR.out rstan.out rstanarm.out strider.out sundialr.out xyz.out >&! check_log

unsetenv _R_CHECK_DOC_SIZES_
#setenv _R_CHECK_DOC_SIZES2_ true
nohup gmake -j20 -k check >>&! check_log
