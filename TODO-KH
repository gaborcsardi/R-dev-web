						-*- mode: indented-text;-*-

This file contains my plans for enhancements to R.
Kurt Hornik <Kurt.Hornik@r-project.org>

** Improve configure/make

   * Add option `--without-x' option to configure and make it do
     something useful.  (Just command line stuff, no GUI at all.)

   * Isolate the GUIs, using a src directory structure like

	src/unix
	src/unix/X11
	src/unix/GNOME
	src/unix/...

     Brian says he knows how to do this.

   * Eliminate unnecessary make rebuilding.  In particular, use the
     stamp-h mechanism for `config.h'.					[DONE]

   * Rethink target dependencies.  In particular, we currently have

	make check	=> make
	make install	=> make

     Is this really desired?						[DONE]

** Add C++ support for add-on packages (COMPILE/SHLIB)			[DONE]

** Provide character translation functions

	chartr()	simple Unix-style functionality, maybe simply by
			interfacing tr(1) [would be o.k. on Windows]	[DONE]
	toupper()	direct interface ANSI C toupper(3)		[DONE]
	tolower()	direct interface ANSI C tolower(3)		[DONE]

** Improve demos

   The build procedure for the dynload demo is a gross hack.
   
   Also, demo() currently only shows the code, without any explanation
   (and in particular, without the useful comments in the code files.)
   This needs rethinking.

   Maybe we should have library(demos) which does something useful?

** R-exts

   * Write an appendix which documents which tools can be assumed for
     extending R (in particular, the base distribution).  No GNUisms,
     but according to Brian we can assume shellutils under Windows
     because we can easily provide them.  Need to rethink the role of
     Perl anyway, as we no longer ship pre-built help pages on CRAN.

   * Also mention `coding standards' (indentation; Emacs settings).

** Maybe certain files (INSTALL, MIRROR-SITES, README, RESOURCES, Y2K)
   could be created from one texinfo master file (``R Installation
   Guide'')?
    
** Improve R documentation system

   * Enforce `documentation object' view.

   * Rd extensions, in particular index entries a la
	\index{NAME}{TEXT}
     (so that `complete' INDEX files can be built from the Rd files),
     and documentation categories (topics; objects-funs-vars; classes
     and methods, ...) with different templates.

   * Need a basic Rd parser for code-documentation consistency checking
     and some more.  We have codoc(), but FL's DelimMatch-based parser
     does not work correctly.

   * Should it be possible to dump R documentation objects to XML/SGML?

   * Do we need conversion of Rd to texinfo?

** In general, we should decide where the ``library'' code used by tools
   such as Perl should be located.

** Enhance testing for add-on packages.					[DONE]

   Suggestion was

	If there's  <pkg-src>/tests/, then for all pairs foobar.R and
	foobar.Rout.save (in that directory) do run
		R --vanilla < foobar.R > foobar.Rout
	and a somewhat `tolerant' diff between foobar.Rout and
	foobar.Rout.save is made.  `SUCCESS' (actually `ok') is reported
	when there are no (nontrivial) diffs.

   To distinguish between strict and sloppy we could either use subdirs
   or have a file containing that info.

** mva

   * cmdscale() is not fully compatible with the prototype as it has no
     `add' argument.  Can anyone fix this?  (Most likely not me ...) 

   * Chernoff faces

   * What other stuff is missing?

     Clustering: plclust subtree
     Graphics: stars symbols

     But who can do that?

** chron

   Rewrite together with D James.

** ctest

   * More exact p-values, in particular for the Kolmogorov-Smirnov
     tests.

   * More goodness-of-fit tests (chisq.gof?, Anderson-Darling, ...).

   * Confidence intervals for symmetry and 2-sample location and scale
     tests (T Hothorn already has code for this).

   * Quade test.  R King has already sent code.  Would be nice to get
     the interface unified first, but for the time being we could follow
     the one of friedman.test().
   
   * General rank tests with a unified interface (and some particular
     cases such as `normal scores'), functionality similar to SAS proc
     npar1way.  P Dalgaard and I need a 2-day off-site to get this
     going ...

   * Stratified rank sum tests.  Already have code for Kruskal-Wallis,
     but maybe we should do this in general (and again, maybe have the
     unified interface first).

   * More general 2-sided p-values for discrete tests.  We have some
     suggestions and test code by Simon Fear.
     
** Reactivate `-g' as short for `--gui' in 1.1.				[DONE]

** Improve functionality for categorical data analysis.

   * Better Mosaic plots.  In particular, we need visualization of
     log-linear models using mosaic plots a la M Friendly.

   * ftable() is nice, but we need a bit more.  Rethink whether we need
     something like F Harrell's summary.formula(), although most likely
     the best approach would be to output this in XML/SGML and go on
     from there, rather than dealing with LaTeX and HTML etc ourselves.

   * T Lumley says would be nice if the ftable() formula interface could
     do logistic regression syntax
	cbind(yes,no)~variables
     so that we could do
	ftable(cbind(ncases,ncontrols) ~ agegp, data = esoph)

   * Brett Presnell <presnell@stat.ufl.edu> says it would be nice if we
     could read contingency tables in ftable output into R.  I.e., more
     precisely, use the representation of a data frame with one column
     representing the cell counts.

     Maybe we need as.[f]table.data.frame()?

   * Do we need crosstabs() in R?

** ``Missing functionality''

   Provide a list of things in the Blue or White Books (and maybe in
   S-Plus) along with information about possible replacements in R.
