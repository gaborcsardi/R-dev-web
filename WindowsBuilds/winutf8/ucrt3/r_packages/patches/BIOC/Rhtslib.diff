diff -ruN orig/Rhtslib/R/zzz.R patched/Rhtslib/R/zzz.R
--- orig/Rhtslib/R/zzz.R	2020-10-27 10:46:21.000000000 -0700
+++ patched/Rhtslib/R/zzz.R	2021-01-14 04:17:28.966643400 -0800
@@ -29,8 +29,7 @@
             LOCAL_SOFT <- .getRconfig("LOCAL_SOFT", default="C:/extsoft")
             ## See how PKG_LIBS is defined in Rhtslib/src/Makevars.win
             ## and make sure to produce the same value here.
-            libs <- c("curl", "rtmp", "ssl", "ssh2", "crypto",
-                      "gdi32", "z", "ws2_32", "wldap32", "winmm")
+	    libs <- c("rtmp","sbml-static","winmm","wldap32","gdi32","ssl","crypto","bz2","curl","ssh2","idn2","unistring","charset","intl","iconv","gcrypt","gpg-error", "ws2_32","lzma","z","zstd", "mincore")
             if (r_arch == "i386")
                 libs <- c(libs, "idn")
             libs <- paste(sprintf("-l%s", libs), collapse=" ")
diff -ruN orig/Rhtslib/src/Makevars.win patched/Rhtslib/src/Makevars.win
--- orig/Rhtslib/src/Makevars.win	2020-10-27 10:46:21.000000000 -0700
+++ patched/Rhtslib/src/Makevars.win	2021-01-14 04:17:12.871254800 -0800
@@ -9,10 +9,8 @@
 
 ## Linker options. Make sure the Rhtslib::pkgconfig() function (defined in
 ## R/zzz.R) produces the same PKG_LIBS value.
-PKG_LIBS+=-L${LOCAL_SOFT}/lib${R_ARCH} -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz -lws2_32 -lwldap32 -lwinmm
-ifeq ("${R_ARCH}","/i386")
-	PKG_LIBS+=-lidn
-endif
+
+PKG_LIBS+= -lrtmp -lsbml-static -lwinmm -lwldap32 -lgdi32 -lssl -lcrypto -lbz2 -lcurl -lssh2 -lidn2 -lunistring -lcharset -lintl -liconv -lgcrypt -lgpg-error -lws2_32 -llzma -lz -lzstd -lmincore
 
 populate-usrlib-dir: htslib mk-usrlib-dir
 	cd "${HTSLIB_SOURCE_DIR}" && cp libhts.a "${USRLIB_DIR}"
diff -ruN orig/Rhtslib/src/htslib-1.7/Makefile.Rhtslib.win patched/Rhtslib/src/htslib-1.7/Makefile.Rhtslib.win
--- orig/Rhtslib/src/htslib-1.7/Makefile.Rhtslib.win	2020-10-27 10:46:21.000000000 -0700
+++ patched/Rhtslib/src/htslib-1.7/Makefile.Rhtslib.win	2021-01-14 04:16:51.349628800 -0800
@@ -35,7 +35,7 @@
 #RANLIB = ranlib
 
 # Default libraries to link if configure is not used
-htslib_default_libs = -L${LOCAL_SOFT}/lib${R_ARCH} -lcurl -lrtmp -lssl -lssh2 -lcrypto -lgdi32 -lz -lws2_32 -lwldap32 -lwinmm
+htslib_default_libs = -lrtmp -lsbml-static -lwinmm -lwldap32 -lgdi32 -lssl -lcrypto -lbz2 -lcurl -lssh2 -lidn2 -lunistring -lcharset -lintl -liconv -lgcrypt -lgpg-error -lws2_32 -llzma -lz -lzstd -lmincore 
 ifeq ("${R_ARCH}","/i386")
 	htslib_default_libs += -lidn
 endif
diff -ruN orig/Rhtslib/src/htslib-1.7/config.h patched/Rhtslib/src/htslib-1.7/config.h
--- orig/Rhtslib/src/htslib-1.7/config.h	2020-10-27 13:14:07.000000000 -0700
+++ patched/Rhtslib/src/htslib-1.7/config.h	2021-01-14 04:15:35.375273800 -0800
@@ -3,5 +3,5 @@
 #define HAVE_LIBLZMA 1
 #define HAVE_LZMA_H 1
 #define HAVE_FSEEKO 1
-#define HAVE_DRAND48 1
+/* #define HAVE_DRAND48 1 */
 #define HAVE_LIBCURL 1
